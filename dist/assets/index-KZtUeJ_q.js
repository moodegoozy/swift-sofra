const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/refundService-DAeeGHOB.js","assets/vendor-firebase-CIIT5h2g.js","assets/vendor-react-COcEUdcw.js","assets/vendor-icons-BoNO0IsB.js","assets/vendor-paypal-DO3GBzXH.js"])))=>i.map(i=>d[i]);
import{r as l,a as kc,u as Un,b as os,L as ae,c as Aa,N as ur,d as Sc,e as Te,R as Cc,B as Ac}from"./vendor-react-COcEUdcw.js";import{r as sr,_ as tr,C as ar,a as dl,E as Bn,o as xl,F as Ic,d as $r,g as Vn,b as ml,v as Dc,i as Tc,c as Rc,e as qn,f as Ec,h as Pc,j as _c,k as Fc,l as Ia,m as $c,n as Oc,s as Be,p as J,q as Lc,t as Ce,u as me,w as Mc,x as fe,y as je,z as ee,A as cs,B as Ds,D as Uc,G as be,H as hl,I as Ke,J as Pe,K as X,L as Bc,T as Da,M as es,N as js,O as Vc,P as zn,Q as Pt,R as tn,S as qc,U as As,V as Nt,W as Is,X as Ot,Y as zc}from"./vendor-firebase-CIIT5h2g.js";import{A as Es,S as Le,U as ms,B as yt,H as Kt,X as Oe,M as Hc,a as Hn,P as Me,b as rr,T as Ve,c as us,C as ul,I as Jr,d as Ts,e as rt,f as Ie,g as ht,h as ys,F as an,i as Ze,L as as,N as at,j as lr,G as Ms,k as ls,l as Yt,m as Ws,n as Us,V as Wn,o as Qn,p as Xr,q as Wc,r as ta,s as pt,t as ns,u as pl,v as Qs,w as Qc,x as ut,y as gl,z as aa,D as ja,E as Rs,J as ts,K as Ge,O as Zr,Q as Ut,R as Ns,W as nr,Y as Cs,Z as Bs,_ as ps,$ as Gn,a0 as Ft,a1 as Kn,a2 as bl,a3 as vs,a4 as ot,a5 as wt,a6 as rn,a7 as ln,a8 as Yn,a9 as bs,aa as Gc,ab as fl,ac as ze,ad as Kc,ae as Qt,af as xt,ag as Ks,ah as is,ai as ra,aj as Jn,ak as Gs,al as vt,am as $t,an as nn,ao as Yc,ap as jl,aq as ir,ar as wa,as as Vs,at as Ss,au as Jt,av as Jc,aw as Xt,ax as Xc,ay as Or,az as Zc,aA as cn,aB as va,aC as Na,aD as gt,aE as cr,aF as eo,aG as so,aH as to,aI as ao,aJ as el,aK as ro,aL as lo,aM as Zt,aN as no,aO as io,aP as on,aQ as co,aR as sl,aS as Ta,aT as la,aU as Xn,aV as tl,aW as oo,aX as Zn,aY as al,aZ as xo,a_ as mo,a$ as Nl,b0 as ei,b1 as rl,b2 as ho,b3 as dn,b4 as si,b5 as uo,b6 as po,b7 as yl,b8 as go,b9 as ll,ba as bo,bb as fo,bc as jo}from"./vendor-icons-BoNO0IsB.js";import{P as ti,a as ai}from"./vendor-paypal-DO3GBzXH.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const r of u.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function a(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=a(c);fetch(c.href,u)}})();var ri={exports:{}},pr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var No=l,yo=Symbol.for("react.element"),wo=Symbol.for("react.fragment"),vo=Object.prototype.hasOwnProperty,ko=No.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,So={key:!0,ref:!0,__self:!0,__source:!0};function li(s,t,a){var i,c={},u=null,r=null;a!==void 0&&(u=""+a),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(r=t.ref);for(i in t)vo.call(t,i)&&!So.hasOwnProperty(i)&&(c[i]=t[i]);if(s&&s.defaultProps)for(i in t=s.defaultProps,t)c[i]===void 0&&(c[i]=t[i]);return{$$typeof:yo,type:s,key:u,ref:r,props:c,_owner:ko.current}}pr.Fragment=wo;pr.jsx=li;pr.jsxs=li;ri.exports=pr;var e=ri.exports,nl={},xn=kc;nl.createRoot=xn.createRoot,nl.hydrateRoot=xn.hydrateRoot;const ni="@firebase/installations",wl="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=1e4,ci=`w:${wl}`,oi="FIS_v2",Co="https://firebaseinstallations.googleapis.com/v1",Ao=60*60*1e3,Io="installations",Do="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Lt=new Bn(Io,Do,To);function di(s){return s instanceof Ic&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi({projectId:s}){return`${Co}/projects/${s}/installations`}function mi(s){return{token:s.token,requestStatus:2,expiresIn:Eo(s.expiresIn),creationTime:Date.now()}}async function hi(s,t){const i=(await t.json()).error;return Lt.create("request-failed",{requestName:s,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function ui({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function Ro(s,{refreshToken:t}){const a=ui(s);return a.append("Authorization",Po(t)),a}async function pi(s){const t=await s();return t.status>=500&&t.status<600?s():t}function Eo(s){return Number(s.replace("s","000"))}function Po(s){return`${oi} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o({appConfig:s,heartbeatServiceProvider:t},{fid:a}){const i=xi(s),c=ui(s),u=t.getImmediate({optional:!0});if(u){const U=await u.getHeartbeatsHeader();U&&c.append("x-firebase-client",U)}const r={fid:a,authVersion:oi,appId:s.appId,sdkVersion:ci},w={method:"POST",headers:c,body:JSON.stringify(r)},D=await pi(()=>fetch(i,w));if(D.ok){const U=await D.json();return{fid:U.fid||a,registrationStatus:2,refreshToken:U.refreshToken,authToken:mi(U.authToken)}}else throw await hi("Create Installation",D)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=/^[cdef][\w-]{21}$/,il="";function Oo(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const a=Lo(s);return $o.test(a)?a:il}catch{return il}}function Lo(s){return Fo(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new Map;function fi(s,t){const a=gr(s);ji(a,t),Mo(a,t)}function ji(s,t){const a=bi.get(s);if(a)for(const i of a)i(t)}function Mo(s,t){const a=Uo();a&&a.postMessage({key:s,fid:t}),Bo()}let _t=null;function Uo(){return!_t&&"BroadcastChannel"in self&&(_t=new BroadcastChannel("[Firebase] FID Change"),_t.onmessage=s=>{ji(s.data.key,s.data.fid)}),_t}function Bo(){bi.size===0&&_t&&(_t.close(),_t=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="firebase-installations-database",qo=1,Mt="firebase-installations-store";let Lr=null;function vl(){return Lr||(Lr=xl(Vo,qo,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(Mt)}}})),Lr}async function or(s,t){const a=gr(s),c=(await vl()).transaction(Mt,"readwrite"),u=c.objectStore(Mt),r=await u.get(a);return await u.put(t,a),await c.done,(!r||r.fid!==t.fid)&&fi(s,t.fid),t}async function Ni(s){const t=gr(s),i=(await vl()).transaction(Mt,"readwrite");await i.objectStore(Mt).delete(t),await i.done}async function br(s,t){const a=gr(s),c=(await vl()).transaction(Mt,"readwrite"),u=c.objectStore(Mt),r=await u.get(a),w=t(r);return w===void 0?await u.delete(a):await u.put(w,a),await c.done,w&&(!r||r.fid!==w.fid)&&fi(s,w.fid),w}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(s){let t;const a=await br(s.appConfig,i=>{const c=zo(i),u=Ho(s,c);return t=u.registrationPromise,u.installationEntry});return a.fid===il?{installationEntry:await t}:{installationEntry:a,registrationPromise:t}}function zo(s){const t=s||{fid:Oo(),registrationStatus:0};return yi(t)}function Ho(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const c=Promise.reject(Lt.create("app-offline"));return{installationEntry:t,registrationPromise:c}}const a={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=Wo(s,a);return{installationEntry:a,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Qo(s)}:{installationEntry:t}}async function Wo(s,t){try{const a=await _o(s,t);return or(s.appConfig,a)}catch(a){throw di(a)&&a.customData.serverCode===409?await Ni(s.appConfig):await or(s.appConfig,{fid:t.fid,registrationStatus:0}),a}}async function Qo(s){let t=await mn(s.appConfig);for(;t.registrationStatus===1;)await gi(100),t=await mn(s.appConfig);if(t.registrationStatus===0){const{installationEntry:a,registrationPromise:i}=await kl(s);return i||a}return t}function mn(s){return br(s,t=>{if(!t)throw Lt.create("installation-not-found");return yi(t)})}function yi(s){return Go(s)?{fid:s.fid,registrationStatus:0}:s}function Go(s){return s.registrationStatus===1&&s.registrationTime+ii<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko({appConfig:s,heartbeatServiceProvider:t},a){const i=Yo(s,a),c=Ro(s,a),u=t.getImmediate({optional:!0});if(u){const U=await u.getHeartbeatsHeader();U&&c.append("x-firebase-client",U)}const r={installation:{sdkVersion:ci,appId:s.appId}},w={method:"POST",headers:c,body:JSON.stringify(r)},D=await pi(()=>fetch(i,w));if(D.ok){const U=await D.json();return mi(U)}else throw await hi("Generate Auth Token",D)}function Yo(s,{fid:t}){return`${xi(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(s,t=!1){let a;const i=await br(s.appConfig,u=>{if(!wi(u))throw Lt.create("not-registered");const r=u.authToken;if(!t&&Zo(r))return u;if(r.requestStatus===1)return a=Jo(s,t),u;{if(!navigator.onLine)throw Lt.create("app-offline");const w=sd(u);return a=Xo(s,w),w}});return a?await a:i.authToken}async function Jo(s,t){let a=await hn(s.appConfig);for(;a.authToken.requestStatus===1;)await gi(100),a=await hn(s.appConfig);const i=a.authToken;return i.requestStatus===0?Sl(s,t):i}function hn(s){return br(s,t=>{if(!wi(t))throw Lt.create("not-registered");const a=t.authToken;return td(a)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function Xo(s,t){try{const a=await Ko(s,t),i=Object.assign(Object.assign({},t),{authToken:a});return await or(s.appConfig,i),a}catch(a){if(di(a)&&(a.customData.serverCode===401||a.customData.serverCode===404))await Ni(s.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await or(s.appConfig,i)}throw a}}function wi(s){return s!==void 0&&s.registrationStatus===2}function Zo(s){return s.requestStatus===2&&!ed(s)}function ed(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+Ao}function sd(s){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:t})}function td(s){return s.requestStatus===1&&s.requestTime+ii<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(s){const t=s,{installationEntry:a,registrationPromise:i}=await kl(t);return i?i.catch(console.error):Sl(t).catch(console.error),a.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(s,t=!1){const a=s;return await ld(a),(await Sl(a,t)).token}async function ld(s){const{registrationPromise:t}=await kl(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(s){if(!s||!s.options)throw Mr("App Configuration");if(!s.name)throw Mr("App Name");const t=["projectId","apiKey","appId"];for(const a of t)if(!s.options[a])throw Mr(a);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Mr(s){return Lt.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="installations",id="installations-internal",cd=s=>{const t=s.getProvider("app").getImmediate(),a=nd(t),i=dl(t,"heartbeat");return{app:t,appConfig:a,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},od=s=>{const t=s.getProvider("app").getImmediate(),a=dl(t,vi).getImmediate();return{getId:()=>ad(a),getToken:c=>rd(a,c)}};function dd(){tr(new ar(vi,cd,"PUBLIC")),tr(new ar(id,od,"PRIVATE"))}dd();sr(ni,wl);sr(ni,wl,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="/firebase-messaging-sw.js",md="/firebase-cloud-messaging-push-scope",ki="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hd="https://fcmregistrations.googleapis.com/v1",Si="google.c.a.c_id",ud="google.c.a.c_l",pd="google.c.a.ts",gd="google.c.a.e";var un;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(un||(un={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var ka;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(ka||(ka={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(s){const t=new Uint8Array(s);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bd(s){const t="=".repeat((4-s.length%4)%4),a=(s+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(a),c=new Uint8Array(i.length);for(let u=0;u<i.length;++u)c[u]=i.charCodeAt(u);return c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="fcm_token_details_db",fd=5,pn="fcm_token_object_Store";async function jd(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(u=>u.name).includes(Ur))return null;let t=null;return(await xl(Ur,fd,{upgrade:async(i,c,u,r)=>{var w;if(c<2||!i.objectStoreNames.contains(pn))return;const D=r.objectStore(pn),U=await D.index("fcmSenderId").get(s);if(await D.clear(),!!U){if(c===2){const v=U;if(!v.auth||!v.p256dh||!v.endpoint)return;t={token:v.fcmToken,createTime:(w=v.createTime)!==null&&w!==void 0?w:Date.now(),subscriptionOptions:{auth:v.auth,p256dh:v.p256dh,endpoint:v.endpoint,swScope:v.swScope,vapidKey:typeof v.vapidKey=="string"?v.vapidKey:dt(v.vapidKey)}}}else if(c===3){const v=U;t={token:v.fcmToken,createTime:v.createTime,subscriptionOptions:{auth:dt(v.auth),p256dh:dt(v.p256dh),endpoint:v.endpoint,swScope:v.swScope,vapidKey:dt(v.vapidKey)}}}else if(c===4){const v=U;t={token:v.fcmToken,createTime:v.createTime,subscriptionOptions:{auth:dt(v.auth),p256dh:dt(v.p256dh),endpoint:v.endpoint,swScope:v.swScope,vapidKey:dt(v.vapidKey)}}}}}})).close(),await $r(Ur),await $r("fcm_vapid_details_db"),await $r("undefined"),Nd(t)?t:null}function Nd(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:t}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="firebase-messaging-database",wd=1,Sa="firebase-messaging-store";let Br=null;function Ci(){return Br||(Br=xl(yd,wd,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(Sa)}}})),Br}async function vd(s){const t=Ai(s),i=await(await Ci()).transaction(Sa).objectStore(Sa).get(t);if(i)return i;{const c=await jd(s.appConfig.senderId);if(c)return await Cl(s,c),c}}async function Cl(s,t){const a=Ai(s),c=(await Ci()).transaction(Sa,"readwrite");return await c.objectStore(Sa).put(t,a),await c.done,t}function Ai({appConfig:s}){return s.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ws=new Bn("messaging","Messaging",kd);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sd(s,t){const a=await Il(s),i=Ii(t),c={method:"POST",headers:a,body:JSON.stringify(i)};let u;try{u=await(await fetch(Al(s.appConfig),c)).json()}catch(r){throw ws.create("token-subscribe-failed",{errorInfo:r==null?void 0:r.toString()})}if(u.error){const r=u.error.message;throw ws.create("token-subscribe-failed",{errorInfo:r})}if(!u.token)throw ws.create("token-subscribe-no-token");return u.token}async function Cd(s,t){const a=await Il(s),i=Ii(t.subscriptionOptions),c={method:"PATCH",headers:a,body:JSON.stringify(i)};let u;try{u=await(await fetch(`${Al(s.appConfig)}/${t.token}`,c)).json()}catch(r){throw ws.create("token-update-failed",{errorInfo:r==null?void 0:r.toString()})}if(u.error){const r=u.error.message;throw ws.create("token-update-failed",{errorInfo:r})}if(!u.token)throw ws.create("token-update-no-token");return u.token}async function Ad(s,t){const i={method:"DELETE",headers:await Il(s)};try{const u=await(await fetch(`${Al(s.appConfig)}/${t}`,i)).json();if(u.error){const r=u.error.message;throw ws.create("token-unsubscribe-failed",{errorInfo:r})}}catch(c){throw ws.create("token-unsubscribe-failed",{errorInfo:c==null?void 0:c.toString()})}}function Al({projectId:s}){return`${hd}/projects/${s}/registrations`}async function Il({appConfig:s,installations:t}){const a=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${a}`})}function Ii({p256dh:s,auth:t,endpoint:a,vapidKey:i}){const c={web:{endpoint:a,auth:t,p256dh:s}};return i!==ki&&(c.web.applicationPubKey=i),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=7*24*60*60*1e3;async function Dd(s){const t=await Rd(s.swRegistration,s.vapidKey),a={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:t.endpoint,auth:dt(t.getKey("auth")),p256dh:dt(t.getKey("p256dh"))},i=await vd(s.firebaseDependencies);if(i){if(Ed(i.subscriptionOptions,a))return Date.now()>=i.createTime+Id?Td(s,{token:i.token,createTime:Date.now(),subscriptionOptions:a}):i.token;try{await Ad(s.firebaseDependencies,i.token)}catch(c){console.warn(c)}return gn(s.firebaseDependencies,a)}else return gn(s.firebaseDependencies,a)}async function Td(s,t){try{const a=await Cd(s.firebaseDependencies,t),i=Object.assign(Object.assign({},t),{token:a,createTime:Date.now()});return await Cl(s.firebaseDependencies,i),a}catch(a){throw a}}async function gn(s,t){const i={token:await Sd(s,t),createTime:Date.now(),subscriptionOptions:t};return await Cl(s,i),i.token}async function Rd(s,t){const a=await s.pushManager.getSubscription();return a||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bd(t)})}function Ed(s,t){const a=t.vapidKey===s.vapidKey,i=t.endpoint===s.endpoint,c=t.auth===s.auth,u=t.p256dh===s.p256dh;return a&&i&&c&&u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(s){const t={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return Pd(t,s),_d(t,s),Fd(t,s),t}function Pd(s,t){if(!t.notification)return;s.notification={};const a=t.notification.title;a&&(s.notification.title=a);const i=t.notification.body;i&&(s.notification.body=i);const c=t.notification.image;c&&(s.notification.image=c);const u=t.notification.icon;u&&(s.notification.icon=u)}function _d(s,t){t.data&&(s.data=t.data)}function Fd(s,t){var a,i,c,u,r;if(!t.fcmOptions&&!(!((a=t.notification)===null||a===void 0)&&a.click_action))return;s.fcmOptions={};const w=(c=(i=t.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&c!==void 0?c:(u=t.notification)===null||u===void 0?void 0:u.click_action;w&&(s.fcmOptions.link=w);const D=(r=t.fcmOptions)===null||r===void 0?void 0:r.analytics_label;D&&(s.fcmOptions.analyticsLabel=D)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(s){return typeof s=="object"&&!!s&&Si in s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(s){if(!s||!s.options)throw Vr("App Configuration Object");if(!s.name)throw Vr("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:a}=s;for(const i of t)if(!a[i])throw Vr(i);return{appName:s.name,projectId:a.projectId,apiKey:a.apiKey,appId:a.appId,senderId:a.messagingSenderId}}function Vr(s){return ws.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(t,a,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const c=Od(t);this.firebaseDependencies={app:t,appConfig:c,installations:a,analyticsProvider:i}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(s){try{s.swRegistration=await navigator.serviceWorker.register(xd,{scope:md}),s.swRegistration.update().catch(()=>{})}catch(t){throw ws.create("failed-service-worker-registration",{browserErrorMessage:t==null?void 0:t.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(s,t){if(!t&&!s.swRegistration&&await Md(s),!(!t&&s.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw ws.create("invalid-sw-registration");s.swRegistration=t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(s,t){t?s.vapidKey=t:s.vapidKey||(s.vapidKey=ki)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Di(s,t){if(!navigator)throw ws.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ws.create("permission-blocked");return await Bd(s,t==null?void 0:t.vapidKey),await Ud(s,t==null?void 0:t.serviceWorkerRegistration),Dd(s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vd(s,t,a){const i=qd(t);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:a[Si],message_name:a[ud],message_time:a[pd],message_device_time:Math.floor(Date.now()/1e3)})}function qd(s){switch(s){case ka.NOTIFICATION_CLICKED:return"notification_open";case ka.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zd(s,t){const a=t.data;if(!a.isFirebaseMessaging)return;s.onMessageHandler&&a.messageType===ka.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(bn(a)):s.onMessageHandler.next(bn(a)));const i=a.data;$d(i)&&i[gd]==="1"&&await Vd(s,a.messageType,i)}const fn="@firebase/messaging",jn="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=s=>{const t=new Ld(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",a=>zd(t,a)),t},Wd=s=>{const t=s.getProvider("messaging").getImmediate();return{getToken:i=>Di(t,i)}};function Qd(){tr(new ar("messaging",Hd,"PUBLIC")),tr(new ar("messaging-internal",Wd,"PRIVATE")),sr(fn,jn),sr(fn,jn,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ti(){try{await Dc()}catch{return!1}return typeof window<"u"&&Tc()&&Rc()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(s,t){if(!navigator)throw ws.create("only-available-in-window");return s.onMessageHandler=t,()=>{s.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(s=Vn()){return Ti().then(t=>{if(!t)throw ws.create("unsupported-browser")},t=>{throw ws.create("indexed-db-unsupported")}),dl(ml(s),"messaging").getImmediate()}async function Yd(s,t){return s=ml(s),Di(s,t)}function Jd(s,t){return s=ml(s),Gd(s,t)}Qd();const Xd={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},ks=qn().length?Vn():Ec(Xd),fs=qn().length>0?Pc(ks):_c(ks,{persistence:[$c,Oc]}),C=Fc(ks),kt=Ia(ks),Zd=async()=>await Ti()?Kd(ks):null,dr="/notification.mp3";let gs=null,mt=null,xr=null,cl=!1,ol=!1,Nn=!1;function yn(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1}async function ex(){if(!ol){ol=!0;try{if(mt||(mt=new(window.AudioContext||window.webkitAudioContext)),mt.state==="suspended"&&await mt.resume(),!xr){const t=await(await fetch(dr)).arrayBuffer();xr=await mt.decodeAudioData(t)}gs||(gs=new Audio(dr),gs.volume=.8,gs.preload="auto",gs.muted=!0,await gs.play().catch(()=>{}),gs.pause(),gs.muted=!1,gs.currentTime=0),cl=!0,console.log("ğŸ”Š âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹")}catch(s){console.warn("âš ï¸ ÙØ´Ù„ ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ:",s)}}}function sx(){if(Nn)return;Nn=!0;const s=["click","touchstart","touchend","keydown","scroll"],t=()=>{ex(),s.forEach(a=>{document.removeEventListener(a,t,!0)})};s.forEach(a=>{document.addEventListener(a,t,{capture:!0,passive:!0,once:!0})})}function Ri(){if(!(cl&&!yn()))try{gs=new Audio(dr),gs.volume=.8,gs.preload="auto",sx(),yn()||(cl=!0,ol=!0),console.log("ğŸ”Š ØªÙ… ØªÙ‡ÙŠØ¦Ø© ØµÙˆØª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª")}catch(s){console.error("âŒ ÙØ´Ù„ ØªÙ‡ÙŠØ¦Ø© ØµÙˆØª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:",s)}}async function mr(){try{if(mt&&xr&&mt.state==="running"){const s=mt.createBufferSource();s.buffer=xr,s.connect(mt.destination),s.start(0),console.log("ğŸ”” ØªÙ… ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±");return}gs||(gs=new Audio(dr),gs.volume=.8),gs.currentTime=0,await gs.play(),console.log("ğŸ”” ØªÙ… ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±")}catch(s){console.warn("âš ï¸ ØªØ¹Ø°Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:",s)}}async function tx(){await mr(),"vibrate"in navigator&&navigator.vibrate([200,100,200])}if(typeof window<"u"){const s=()=>{Ri(),document.removeEventListener("click",s),document.removeEventListener("touchstart",s)};document.addEventListener("click",s,{once:!0}),document.addEventListener("touchstart",s,{once:!0})}const wn="BHIFuJLc84TdosXcdvg6nTtI5B4fNZVhILjhuhC43ASE_kecI4PHUzzbXRELLQa0fY-x7bvwaRHUqOnyVGQ9hTQ";let Et=null,Gt=null,Ma=null;async function ax(){try{if(!("serviceWorker"in navigator))return console.warn("âš ï¸ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Service Worker"),!1;if(!("Notification"in window))return console.warn("âš ï¸ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"),!1;Et=await navigator.serviceWorker.register("/firebase-messaging-sw.js"),console.log("âœ… FCM Service Worker registered:",Et),await navigator.serviceWorker.ready,console.log("âœ… Service Worker ready");const s=await Notification.requestPermission();if(s!=="granted")return console.warn("âš ï¸ ØªÙ… Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:",s),!1;if(console.log("âœ… ØªÙ… Ù…Ù†Ø­ Ø¥Ø°Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"),Ma=await Zd(),Ma&&wn){try{Gt=await Yd(Ma,{vapidKey:wn,serviceWorkerRegistration:Et}),Gt&&console.log("âœ… FCM Token:",Gt.substring(0,20)+"...")}catch(t){console.warn("âš ï¸ ÙØ´Ù„ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ FCM token:",t)}Jd(Ma,async t=>{var c,u,r,w,D,U;console.log("ğŸ”” [FCM] Foreground message:",JSON.stringify(t));try{await mr()}catch(v){console.warn("âš ï¸ ØªØ¹Ø°Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:",v)}try{"vibrate"in navigator&&navigator.vibrate([300,100,300,100,300])}catch{}const a=((c=t.notification)==null?void 0:c.title)||((u=t.data)==null?void 0:u.title)||"Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª",i=((r=t.notification)==null?void 0:r.body)||((w=t.data)==null?void 0:w.body)||"Ù„Ø¯ÙŠÙƒ Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯";Et?Et.showNotification(a,{body:i,icon:"/icon-192.png",badge:"/icon-192.png",tag:((D=t.data)==null?void 0:D.tag)||"fcm-foreground-"+Date.now(),data:t.data||{},vibrate:[300,100,300,100,300],requireInteraction:!0,dir:"rtl",lang:"ar",renotify:!0,silent:!1}):new Notification(a,{body:i,icon:"/icon-192.png",dir:"rtl",lang:"ar",tag:((U=t.data)==null?void 0:U.tag)||"fcm-fg-"+Date.now(),requireInteraction:!0})})}else console.warn("âš ï¸ FCM ØºÙŠØ± Ù…ÙØ¹Ù‘Ù„ - ÙŠÙØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© VAPID_KEY");return navigator.serviceWorker.addEventListener("message",async t=>{var a,i;if(((a=t.data)==null?void 0:a.type)==="FCM_NOTIFICATION"||((i=t.data)==null?void 0:i.type)==="PLAY_NOTIFICATION_SOUND"){console.log("[SWâ†’App] Ø¥Ø´Ø¹Ø§Ø± FCM");try{await mr()}catch(c){console.warn("âš ï¸ ØªØ¹Ø°Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:",c)}}}),!0}catch(s){return console.error("âŒ ÙØ´Ù„ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:",s),!1}}async function rx(s){if(!Gt||!s)return console.warn("âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ FCM token Ø£Ùˆ userId"),!1;try{return await Be(J(C,"fcmTokens",s),{token:Gt,updatedAt:new Date,platform:"web",userAgent:navigator.userAgent},{merge:!0}),await Be(J(C,"users",s),{fcmToken:Gt,fcmTokenUpdatedAt:new Date},{merge:!0}),console.log("âœ… ØªÙ… Ø­ÙØ¸ FCM token Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…:",s),!0}catch(t){return console.error("âŒ ÙØ´Ù„ Ø­ÙØ¸ FCM token:",t),!1}}async function lx(){return"Notification"in window?Notification.permission==="granted"?"granted":await Notification.requestPermission():"denied"}async function nx(s,t,a){try{try{await mr()}catch(c){console.warn("âš ï¸ ØªØ¹Ø°Ø± ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:",c)}if(Notification.permission!=="granted"&&(console.warn("âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¥Ø°Ù† Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"),await lx()!=="granted"))return!1;if(Et)return await Et.showNotification(s,{body:t,icon:(a==null?void 0:a.icon)||"/icon-192.png",badge:"/icon-192.png",tag:(a==null?void 0:a.tag)||"notification-"+Date.now(),data:{url:(a==null?void 0:a.url)||"/"},requireInteraction:!0,dir:"rtl",lang:"ar"}),!0;const i=new Notification(s,{body:t,icon:(a==null?void 0:a.icon)||"/icon-192.png",tag:(a==null?void 0:a.tag)||"notification-"+Date.now(),dir:"rtl",lang:"ar",requireInteraction:!0});return i.onclick=()=>{window.focus(),a!=null&&a.url&&(window.location.href=a.url),i.close()},!0}catch(i){return console.error("âŒ ÙØ´Ù„ Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:",i),!1}}const ga="broast_session_location",Ei=l.createContext({user:null,role:null,loading:!0,logout:async()=>{},userLocation:null,locationRequired:!1,refreshUserData:async()=>{}}),ix=({children:s})=>{const[t,a]=l.useState(null),[i,c]=l.useState(null),[u,r]=l.useState(!0),[w,D]=l.useState(null),[U,v]=l.useState(!1),N=async()=>{if(!t)return;const A=await Ce(J(C,"users",t.uid));if(A.exists()){const j=A.data(),z=j==null?void 0:j.role,p=j==null?void 0:j.location,f=j==null?void 0:j.savedLocation;if(z==="customer"||z==="admin"){const L=f?{lat:f.lat,lng:f.lng}:p||null;D(L),L&&sessionStorage.setItem(ga,JSON.stringify(L))}else D(p||null),p&&sessionStorage.setItem(ga,JSON.stringify(p));v(!1)}};l.useEffect(()=>{const A=Lc(fs,async j=>{if(a(j),j){const z=await Ce(J(C,"users",j.uid)),p=z.data(),f=z.exists()?p==null?void 0:p.role:null;c(f);const L=p==null?void 0:p.location,$=p==null?void 0:p.savedLocation,g=sessionStorage.getItem(ga),F=g?JSON.parse(g):null;let O=null;if(f==="customer"||f==="admin"?O=$?{lat:$.lat,lng:$.lng}:F||L||null:O=F||L||null,D(O),f==="customer"||f==="admin"){const B=!!$||!!F;!B&&navigator.geolocation?navigator.geolocation.getCurrentPosition(async T=>{const P={lat:T.coords.latitude,lng:T.coords.longitude,address:"Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ (ØªÙ„Ù‚Ø§Ø¦ÙŠ)"};try{await me(J(C,"users",j.uid),{savedLocation:P,location:{lat:P.lat,lng:P.lng}}),D({lat:P.lat,lng:P.lng}),sessionStorage.setItem(ga,JSON.stringify({lat:P.lat,lng:P.lng})),v(!1)}catch(m){console.warn("ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ:",m)}},T=>{console.warn("ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:",T),v(!0)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):v(!B),$&&!F&&sessionStorage.setItem(ga,JSON.stringify({lat:$.lat,lng:$.lng}))}else v(f==="owner"||f==="courier"?!L:!1);if(f==="owner")try{const B=J(C,"restaurants",j.uid);(await Ce(B)).exists()||await Be(B,{name:(p==null?void 0:p.restaurantName)||(p==null?void 0:p.name)||"Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯",ownerId:j.uid,email:(p==null?void 0:p.email)||j.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch(B){console.warn("ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ù…Ø·Ø¹Ù… Ù„Ù„Ù…Ø§Ù„Ùƒ",B)}try{await ax(),await rx(j.uid),console.log("âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ­ÙØ¸ FCM token")}catch(B){console.warn("âš ï¸ ØªØ¹Ø°Ø± ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:",B)}}else c(null),D(null),v(!1);r(!1)});return()=>A()},[]);const E=async()=>{await Mc(fs)};return e.jsx(Ei.Provider,{value:{user:t,role:i,loading:u,logout:E,userLocation:w,locationRequired:U,refreshUserData:N},children:s})},Ee=()=>l.useContext(Ei),Xe=({to:s,label:t,icon:a,onClick:i})=>{const{pathname:c}=Un(),u=c===s;return e.jsxs(ae,{to:s,onClick:i,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(u?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20"),children:[a,e.jsx("span",{children:t})]})},cx=()=>{const{user:s,role:t,logout:a}=Ee(),[i,c]=l.useState(!1),[u,r]=l.useState(0),w=Un(),D=os(),U=w.pathname==="/";return l.useEffect(()=>{c(!1)},[w.pathname]),l.useEffect(()=>(i?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[i]),l.useEffect(()=>{if(!(s!=null&&s.uid)){r(0);return}const v=fe(ee(C,"notifications"),je("recipientId","==",s.uid),je("read","==",!1)),N=cs(v,E=>{r(E.size)},E=>{console.warn("Notifications listener error:",E),r(0)});return()=>N()},[s==null?void 0:s.uid]),e.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30 relative z-30",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[!U&&e.jsx("button",{onClick:()=>D(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"Ø±Ø¬ÙˆØ¹",children:e.jsx(Es,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-xl sm:text-2xl",children:"ğŸ—"})}),e.jsx("span",{className:"text-lg sm:text-2xl",children:"Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"})]})]}),e.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[e.jsx(Xe,{to:"/restaurants",label:"Ø§Ù„Ù…Ø·Ø§Ø¹Ù…",icon:e.jsx(Le,{className:"w-4 h-4"})}),t==="customer"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{to:"/cart",label:"ğŸ›’ Ø§Ù„Ø³Ù„Ø©"}),e.jsx(Xe,{to:"/orders",label:"Ø·Ù„Ø¨Ø§ØªÙŠ"}),e.jsx(Xe,{to:"/profile",label:"Ø¨ÙŠØ§Ù†Ø§ØªÙŠ",icon:e.jsx(ms,{className:"w-4 h-4"})})]}),t==="owner"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{to:"/owner",label:"Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsx(Xe,{to:"/owner/orders",label:"Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsx(Xe,{to:"/owner/courier-requests",label:"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†"})]}),t==="courier"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{to:"/courier",label:"ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"}),e.jsx(Xe,{to:"/courier/hiring",label:"Ø§Ù„ØªÙˆØ¸ÙŠÙ"})]}),t==="admin"&&e.jsx(Xe,{to:"/admin",label:"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"}),t==="developer"&&e.jsx(Xe,{to:"/developer",label:"Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ±"}),s&&e.jsxs(ae,{to:"/notifications",className:"relative p-2.5 rounded-xl bg-white/20 hover:bg-white/30 transition text-white",title:"Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª",children:[e.jsx(yt,{className:"w-5 h-5"}),u>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold animate-pulse",children:u>9?"9+":u})]}),s&&e.jsx(ae,{to:"/support",className:"p-2.5 rounded-xl bg-white/20 hover:bg-white/30 transition text-white",title:"Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ / Ø´ÙƒÙˆÙ‰",children:e.jsx(Kt,{className:"w-5 h-5"})}),s?e.jsx("button",{onClick:a,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:"Ø®Ø±ÙˆØ¬"}):e.jsx(Xe,{to:"/login",label:"Ø¯Ø®ÙˆÙ„"})]}),e.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white text-sky-600 shadow-lg hover:shadow-xl transition",onClick:()=>c(!i),children:i?e.jsx(Oe,{className:"w-6 h-6"}):e.jsx(Hc,{className:"w-6 h-6"})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>c(!1)}),e.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${i?"translate-x-0":"translate-x-full"}
      `,style:{background:"linear-gradient(to bottom, #0ea5e9, #0369a1)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[e.jsx("span",{className:"text-white font-bold text-lg",children:"Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:e.jsx(Oe,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[e.jsx(Xe,{to:"/restaurants",label:"Ø§Ù„Ù…Ø·Ø§Ø¹Ù…",icon:e.jsx(Le,{className:"w-5 h-5"}),onClick:()=>c(!1)}),t==="customer"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{to:"/cart",label:"Ø§Ù„Ø³Ù„Ø©",icon:e.jsx(Hn,{className:"w-5 h-5"}),onClick:()=>c(!1)}),e.jsx(Xe,{to:"/orders",label:"Ø·Ù„Ø¨Ø§ØªÙŠ",icon:e.jsx(Me,{className:"w-5 h-5"}),onClick:()=>c(!1)}),e.jsx(Xe,{to:"/profile",label:"Ø¨ÙŠØ§Ù†Ø§ØªÙŠ",icon:e.jsx(ms,{className:"w-5 h-5"}),onClick:()=>c(!1)})]}),t==="owner"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{to:"/owner",label:"Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·Ø¹Ù…",icon:e.jsx(rr,{className:"w-5 h-5"}),onClick:()=>c(!1)}),e.jsx(Xe,{to:"/owner/orders",label:"Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…",icon:e.jsx(Me,{className:"w-5 h-5"}),onClick:()=>c(!1)}),e.jsx(Xe,{to:"/owner/courier-requests",label:"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†",icon:e.jsx(Ve,{className:"w-5 h-5"}),onClick:()=>c(!1)})]}),t==="courier"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{to:"/courier",label:"ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨",icon:e.jsx(Ve,{className:"w-5 h-5"}),onClick:()=>c(!1)}),e.jsx(Xe,{to:"/courier/hiring",label:"Ø§Ù„ØªÙˆØ¸ÙŠÙ",icon:e.jsx(Me,{className:"w-5 h-5"}),onClick:()=>c(!1)})]}),t==="admin"&&e.jsx(Xe,{to:"/admin",label:"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©",icon:e.jsx(us,{className:"w-5 h-5"}),onClick:()=>c(!1)}),t==="developer"&&e.jsx(Xe,{to:"/developer",label:"Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ±",icon:e.jsx(ul,{className:"w-5 h-5"}),onClick:()=>c(!1)}),s&&e.jsx(Xe,{to:"/notifications",label:`Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ${u>0?`(${u})`:""}`,icon:e.jsx(yt,{className:"w-5 h-5"}),onClick:()=>c(!1)}),s&&e.jsx(Xe,{to:"/support",label:"Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ / Ø´ÙƒÙˆÙ‰",icon:e.jsx(Kt,{className:"w-5 h-5"}),onClick:()=>c(!1)}),e.jsx("div",{className:"h-px bg-white/20 my-2"}),s?e.jsx("button",{onClick:()=>{a(),c(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬"}):e.jsx(Xe,{to:"/login",label:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",icon:e.jsx(rr,{className:"w-5 h-5"}),onClick:()=>c(!1)})]})]})]})},Pi=l.createContext(null),Ps=()=>{const s=l.useContext(Pi);if(!s)throw new Error("useDialog must be used within DialogProvider");return s},ox=({children:s})=>{const[t,a]=l.useState({isOpen:!1,message:"",type:"confirm"}),i=l.useCallback(D=>new Promise(U=>{a({...D,isOpen:!0,resolve:U})}),[]),c=l.useCallback(D=>{t.resolve&&t.resolve(D),a(U=>({...U,isOpen:!1}))},[t.resolve]),u=l.useCallback(async()=>{t.onConfirm&&await t.onConfirm(),c(!0)},[t.onConfirm,c]),r=l.useCallback(()=>{t.onCancel&&t.onCancel(),c(!1)},[t.onCancel,c]),w=l.useMemo(()=>({confirm:(D,U={})=>i({message:D,type:"confirm",title:U.title||"ØªØ£ÙƒÙŠØ¯",confirmText:U.confirmText||"ØªØ£ÙƒÙŠØ¯",cancelText:U.cancelText||"Ø¥Ù„ØºØ§Ø¡",...U}),alert:(D,U={})=>i({message:D,type:"alert",title:U.title||"ØªÙ†Ø¨ÙŠÙ‡",confirmText:U.confirmText||"Ø­Ø³Ù†Ø§Ù‹",...U}).then(()=>{}),success:(D,U={})=>i({message:D,type:"success",title:U.title||"ØªÙ… Ø¨Ù†Ø¬Ø§Ø­",confirmText:U.confirmText||"Ø­Ø³Ù†Ø§Ù‹",...U}).then(()=>{}),error:(D,U={})=>i({message:D,type:"error",title:U.title||"Ø®Ø·Ø£",confirmText:U.confirmText||"Ø­Ø³Ù†Ø§Ù‹",...U}).then(()=>{}),warning:(D,U={})=>i({message:D,type:"warning",title:U.title||"ØªØ­Ø°ÙŠØ±",confirmText:U.confirmText||"Ø­Ø³Ù†Ø§Ù‹",...U}).then(()=>{}),info:(D,U={})=>i({message:D,type:"info",title:U.title||"Ù…Ø¹Ù„ÙˆÙ…Ø©",confirmText:U.confirmText||"Ø­Ø³Ù†Ø§Ù‹",...U}).then(()=>{})}),[i]);return e.jsxs(Pi.Provider,{value:w,children:[s,e.jsx(dx,{...t,onConfirm:u,onCancel:r})]})},dx=({isOpen:s,title:t,message:a,type:i="confirm",confirmText:c="ØªØ£ÙƒÙŠØ¯",cancelText:u="Ø¥Ù„ØºØ§Ø¡",dangerous:r,onConfirm:w,onCancel:D})=>{if(!s)return null;const v={confirm:{icon:e.jsx(Jr,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:r?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:e.jsx(Ts,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:e.jsx(Ie,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:e.jsx(rt,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:e.jsx(Ts,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:e.jsx(Jr,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[i],N=i==="confirm";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:D}),e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:E=>E.stopPropagation(),children:[e.jsxs("div",{className:"relative p-6 pb-0",children:[e.jsx("button",{onClick:D,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:e.jsx(Oe,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`w-16 h-16 rounded-full ${v.iconBg} ${v.iconColor} flex items-center justify-center`,children:v.icon})}),e.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:t})]}),e.jsx("div",{className:"p-6 pt-3",children:e.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:a})}),e.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${N?"flex-row-reverse":"justify-center"}`,children:[e.jsx("button",{onClick:w,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${v.buttonColor}`,children:c}),N&&e.jsx("button",{onClick:D,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:u})]})]})}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},xx=()=>{const{user:s}=Ee(),t=os(),a=Ps(),i=async()=>{if(!(!s||!await a.confirm("Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡. Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§.",{title:"Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨ Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§ØŸ",dangerous:!0,confirmText:"Ù†Ø¹Ù…ØŒ Ø§Ø­Ø°Ù Ø­Ø³Ø§Ø¨ÙŠ",cancelText:"Ø¥Ù„ØºØ§Ø¡"})))try{await Ds(J(C,"users",s.uid)),await Uc(fs.currentUser),a.success("ØªÙ… Ø­Ø°Ù Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­"),t("/account-deleted")}catch(u){console.error("Error deleting account:",u),a.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.")}};return e.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl sm:text-3xl",children:"ğŸ—"})}),e.jsx("span",{className:"text-xl sm:text-2xl font-black",children:"Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"})]}),e.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["ØµÙ†Ø¹ Ø¨Ù€ ",e.jsx(ht,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"})," ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Â© ",new Date().getFullYear()]}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[e.jsxs(ae,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[e.jsx(us,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Ø§Ù„Ø®ØµÙˆØµÙŠØ©"]}),s&&e.jsxs(ae,{to:"/report-problem",className:"flex items-center gap-1.5 sm:gap-2 bg-amber-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-amber-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[e.jsx(Ts,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ù…Ø´ÙƒÙ„Ø©"]}),e.jsxs(ae,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[e.jsx(ul,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Ø§Ù„Ù…Ø·ÙˆØ±"]}),s&&e.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[e.jsx(ys,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Ø­Ø°Ù Ø­Ø³Ø§Ø¨ÙŠ"]})]}),e.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù€ Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"})]})})},mx=()=>e.jsx("div",{className:"w-full bg-gradient-to-r from-sky-700 via-sky-600 to-sky-700 text-white py-1.5 overflow-hidden relative z-50",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(an,{className:"w-4 h-4 text-white animate-pulse flex-shrink-0"}),e.jsx("div",{className:"beta-marquee whitespace-nowrap font-bold text-xs tracking-wide",children:"ğŸ§ª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙŠ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© (Beta) â€” Ù†Ø¹Ù…Ù„ Ø¹Ù„Ù‰ ØªØ­Ø³ÙŠÙ†Ù‡ Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±! ğŸš€"}),e.jsx(an,{className:"w-4 h-4 text-white animate-pulse flex-shrink-0"})]})}),hx=({onLocationSaved:s})=>{const{user:t,role:a}=Ee(),[i,c]=l.useState(null),[u,r]=l.useState(!1),[w,D]=l.useState(!1),[U,v]=l.useState(null),[N,E]=l.useState(!1),[A,j]=l.useState(!1),z={lat:24.7136,lng:46.6753},p=l.useCallback(()=>{if(!navigator.geolocation){v("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹");return}D(!0),v(null),navigator.geolocation.getCurrentPosition($=>{const g={lat:$.coords.latitude,lng:$.coords.longitude};c(g),D(!1),window.locationRequiredMap&&(window.locationRequiredMap.setView([g.lat,g.lng],17),window.locationRequiredMarker&&window.locationRequiredMarker.setLatLng([g.lat,g.lng]))},$=>{D(!1),$.code===1?v("ØªÙ… Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹. ÙØ¹Ù‘Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØµÙØ­"):$.code===2?v("ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹. ØªØ£ÙƒØ¯ Ù…Ù† ØªÙØ¹ÙŠÙ„ GPS"):v("Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);l.useEffect(()=>{if(!document.getElementById("leaflet-css")){const $=document.createElement("link");$.id="leaflet-css",$.rel="stylesheet",$.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild($)}if(window.L)E(!0);else{const $=document.createElement("script");$.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",$.onload=()=>E(!0),document.body.appendChild($)}},[]),l.useEffect(()=>{if(!N||!window.L)return;const $=window.L;if(!document.getElementById("location-required-map"))return;window.locationRequiredMap&&window.locationRequiredMap.remove();const F=i||z,O=$.map("location-required-map",{zoomControl:!0,attributionControl:!1}).setView([F.lat,F.lng],12);$.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(O);const B=$.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;">ğŸ“</div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),T=$.marker([F.lat,F.lng],{icon:B,draggable:!0}).addTo(O);return T.on("dragend",()=>{const P=T.getLatLng();c({lat:P.lat,lng:P.lng})}),O.on("click",P=>{const{lat:m,lng:o}=P.latlng;c({lat:m,lng:o}),T.setLatLng([m,o])}),window.locationRequiredMap=O,window.locationRequiredMarker=T,()=>{window.locationRequiredMap&&(window.locationRequiredMap.remove(),window.locationRequiredMap=null,window.locationRequiredMarker=null)}},[N]);const f=async()=>{if(!(!i||!t)){j(!0);try{if(await me(J(C,"users",t.uid),{location:i,locationUpdatedAt:new Date}),a==="owner")try{await me(J(C,"restaurants",t.uid),{geoLocation:i,locationUpdatedAt:new Date})}catch($){console.warn("ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø·Ø¹Ù…:",$)}s()}catch{v("ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…ÙˆÙ‚Ø¹. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}finally{j(!1)}}},L=()=>{switch(a){case"owner":return"Ù…Ø·Ø¹Ù…Ùƒ";case"courier":return"Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ";default:return"Ù…ÙˆÙ‚Ø¹Ùƒ"}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-sky-50 via-white to-sky-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 p-6 text-white text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ze,{className:"w-10 h-10"})}),e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Ø­Ø¯Ø¯ Ù…ÙˆÙ‚Ø¹ ",L()]}),e.jsx("p",{className:"text-sky-100 text-sm",children:a==="owner"?"Ù„Ø¹Ø±Ø¶ Ù…Ø·Ø¹Ù…Ùƒ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù‚Ø±ÙŠØ¨ÙŠÙ† Ù…Ù†Ùƒ":"Ù„Ù†Ø¹Ø±Ø¶ Ù„Ùƒ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ù‚Ø±ÙŠØ¨Ø© Ù…Ù†Ùƒ (15 ÙƒÙ…)"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[U&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 flex items-center gap-3 text-red-700",children:[e.jsx(Ts,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:U})]}),e.jsx("button",{onClick:p,disabled:w,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:w?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±Ù ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"w-5 h-5"}),"ğŸ“ Ø­Ø¯Ø¯ Ù…ÙˆÙ‚Ø¹ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹"]})}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"Ø£Ùˆ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØ¯ÙˆÙŠØ§Ù‹"}),e.jsx("div",{id:"location-required-map",className:"h-64 rounded-xl overflow-hidden border-2 border-gray-200",style:{background:"#f0f9ff"}}),!N&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:e.jsx(as,{className:"w-8 h-8 animate-spin text-sky-500"})})]}),i&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 flex items-center gap-3 text-green-700",children:[e.jsx(Ie,{className:"w-5 h-5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold",children:"ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ âœ“"}),e.jsxs("p",{className:"text-xs text-green-600",children:[i.lat.toFixed(6),", ",i.lng.toFixed(6)]})]})]}),e.jsx("button",{onClick:f,disabled:!i||A,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:A?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5"}),"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©"]})}),e.jsx("p",{className:"text-xs text-gray-400 text-center",children:"ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ù…ÙˆÙ‚Ø¹Ùƒ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„"})]})]})})};function _i(s,t){const i=Ua(t.lat-s.lat),c=Ua(t.lng-s.lng),u=Math.sin(i/2)*Math.sin(i/2)+Math.cos(Ua(s.lat))*Math.cos(Ua(t.lat))*Math.sin(c/2)*Math.sin(c/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}function Ua(s){return s*(Math.PI/180)}const Xa=15,vn=()=>e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),Ra=l.memo(function({src:t,alt:a,className:i="",placeholderClassName:c="",fallback:u,width:r,height:w,lazy:D=!0,blur:U=!0,objectFit:v="cover"}){const[N,E]=l.useState(!1),[A,j]=l.useState(!1),[z,p]=l.useState(!D),f=l.useRef(null),L=l.useRef(null);l.useEffect(()=>{if(!D||!L.current){p(!0);return}const O=new IntersectionObserver(B=>{B.forEach(T=>{T.isIntersecting&&(p(!0),O.disconnect())})},{rootMargin:"100px",threshold:.01});return O.observe(L.current),()=>O.disconnect()},[D]);const $=()=>{E(!0),j(!1)},g=()=>{j(!0),E(!0)};if(!t||A)return e.jsx("div",{ref:L,className:`${i} overflow-hidden`,style:{width:r,height:w},children:u||e.jsx(vn,{})});const F={cover:"object-cover",contain:"object-contain",fill:"object-fill",none:"object-none"}[v];return e.jsxs("div",{ref:L,className:`relative overflow-hidden ${c}`,style:{width:r,height:w},children:[!N&&e.jsx("div",{className:"absolute inset-0 z-10",children:u||e.jsx(vn,{})}),z&&e.jsx("img",{ref:f,src:t,alt:a,loading:"lazy",decoding:"async",onLoad:$,onError:g,className:`
            ${i} 
            ${F}
            ${!N&&U?"blur-sm scale-105":""}
            transition-all duration-300 ease-out
          `,style:{width:r||"100%",height:w||"100%",opacity:N?1:0}})]})}),Fi=l.memo(function({src:t,alt:a,size:i="md",className:c="",fallbackText:u}){var D,U;const r={sm:"w-8 h-8 text-xs",md:"w-12 h-12 text-sm",lg:"w-16 h-16 text-base",xl:"w-20 h-20 text-lg"},w=e.jsx("div",{className:`${r[i]} rounded-full bg-gradient-to-br from-sky-400 to-sky-600 flex items-center justify-center text-white font-bold`,children:((D=u==null?void 0:u.charAt(0))==null?void 0:D.toUpperCase())||((U=a==null?void 0:a.charAt(0))==null?void 0:U.toUpperCase())||"ØŸ"});return t?e.jsx(Ra,{src:t,alt:a,className:`${r[i]} rounded-full ${c}`,fallback:w,lazy:!0,blur:!1}):e.jsx("div",{className:c,children:w})}),ux=l.memo(function({src:t,alt:a,className:i="",aspectRatio:c="1:1"}){const u={"1:1":"aspect-square","4:3":"aspect-[4/3]","16:9":"aspect-video"},r=e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-orange-100 to-orange-200 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ğŸ½ï¸"})});return e.jsx("div",{className:`${u[c]} ${i}`,children:e.jsx(Ra,{src:t,alt:a,className:"w-full h-full",fallback:r,lazy:!0,blur:!0})})}),px=()=>{var A;const{user:s,role:t,loading:a,logout:i,userLocation:c}=Ee();os();const[u,r]=l.useState([]),[w,D]=l.useState([]),[U,v]=l.useState([]),[N,E]=l.useState(!0);return l.useEffect(()=>{if(a)return;(async()=>{try{const p=(await be(ee(C,"restaurants"))).docs.map(m=>({id:m.id,...m.data()})),L=(await be(ee(C,"menuItems"))).docs.map(m=>({id:m.id,...m.data()})),$=new Map;L.forEach(m=>{m.available!==!1&&$.set(m.ownerId,($.get(m.ownerId)||0)+1)});let g=p.filter(m=>!!m.logoUrl&&!!m.geoLocation&&($.get(m.id)||0)>0);c&&(g=g.map(m=>({...m,distance:m.geoLocation?_i(c,m.geoLocation):void 0})).filter(m=>m.distance!==void 0&&m.distance<=Xa).sort((m,o)=>m.packageType==="premium"&&o.packageType!=="premium"?-1:o.packageType==="premium"&&m.packageType!=="premium"?1:(m.distance||999)-(o.distance||999))),D(g.slice(0,6));const F=fe(ee(C,"offers"),je("isActive","==",!0)),O=await be(F),B=new Date,T=O.docs.map(m=>{var o,R;return{id:m.id,...m.data(),expiresAt:(R=(o=m.data().expiresAt)==null?void 0:o.toDate)==null?void 0:R.call(o)}}).filter(m=>!m.expiresAt||new Date(m.expiresAt)>B).slice(0,4);r(T);const P=L.filter(m=>m.available!==!1&&(m.orderCount||0)>0).sort((m,o)=>(o.orderCount||0)-(m.orderCount||0)).slice(0,4).map(m=>{const o=p.find(R=>R.id===m.ownerId);return{...m,restaurantName:o==null?void 0:o.name}});v(P)}catch(z){console.error("Error loading data:",z)}finally{E(!1)}})()},[a,c]),a?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-20 h-20 mb-4 bg-gradient-to-br from-sky-400 to-sky-600 rounded-3xl flex items-center justify-center shadow-xl shadow-sky-500/30 animate-pulse",children:e.jsx("span",{className:"text-4xl",children:"ğŸ½ï¸"})})}),e.jsx(as,{className:"w-6 h-6 text-sky-500 animate-spin mb-2"}),e.jsx("p",{className:"text-sky-600 font-semibold",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 pb-24",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-sky-200/30 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"relative px-4 py-6 max-w-lg mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-3 bg-gradient-to-br from-sky-400 to-sky-600 rounded-3xl flex items-center justify-center shadow-xl shadow-sky-500/30",children:e.jsx("span",{className:"text-4xl",children:"ğŸ½ï¸"})}),e.jsx("h1",{className:"text-2xl font-black text-sky-700",children:"Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"}),e.jsx("p",{className:"text-sky-600/70 text-sm",children:"Ø£Ø´Ù‡Ù‰ Ø§Ù„Ø£ÙƒÙ„Ø§Øª Ø§Ù„Ø¨ÙŠØªÙŠØ© ØªÙˆØµÙ„Ùƒ ğŸš—"}),s&&e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-white/80 px-4 py-2 rounded-full shadow-sm",children:[e.jsx("span",{className:"text-sky-600",children:"Ø£Ù‡Ù„Ø§Ù‹"}),e.jsx("span",{className:"font-bold text-gray-800",children:s.displayName||((A=s.email)==null?void 0:A.split("@")[0])}),e.jsx("span",{children:"ğŸ‘‹"})]})]}),!s&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(ae,{to:"/restaurants",className:"block bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 shadow-xl shadow-sky-500/30 active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ğŸª"})}),e.jsxs("div",{className:"text-white text-right",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ØªØµÙØ­ Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø§ÙƒØªØ´Ù Ø£Ø´Ù‡Ù‰ Ø§Ù„Ø£ÙƒÙ„Ø§Øª"})]})]}),e.jsx(lr,{className:"w-6 h-6 text-white/80"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(ae,{to:"/login",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"ğŸ”‘"}),e.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"Ø¯Ø®ÙˆÙ„"})]}),e.jsxs(ae,{to:"/register",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"âœ¨"}),e.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯"})]})]})]}),t==="customer"&&e.jsxs("div",{className:"space-y-5",children:[e.jsx(ae,{to:"/restaurants",className:"block bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-6 shadow-xl shadow-emerald-500/30 active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-5xl block mb-2",children:"ğŸ´"}),e.jsx("h2",{className:"text-2xl font-black text-white",children:"Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†!"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ù…Ù† Ø£Ø´Ù‡Ù‰ Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø© Ø§Ù„Ù‚Ø±ÙŠØ¨Ø© Ù…Ù†Ùƒ"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(ae,{to:"/cart",className:"bg-white rounded-xl p-3 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"ğŸ›’"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Ø§Ù„Ø³Ù„Ø©"})]}),e.jsxs(ae,{to:"/orders",className:"bg-white rounded-xl p-3 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"ğŸ“¦"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Ø·Ù„Ø¨Ø§ØªÙŠ"})]}),e.jsxs(ae,{to:"/profile",className:"bg-white rounded-xl p-3 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"ğŸ‘¤"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Ø­Ø³Ø§Ø¨ÙŠ"})]})]})]}),u.length>0&&(!s||t==="customer")&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5 text-pink-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"ğŸ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø£Ø³Ø±"})]}),e.jsx(ae,{to:"/restaurants",className:"text-sky-500 text-sm font-semibold",children:"Ø§Ù„Ù…Ø²ÙŠØ¯ â†"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:u.map(j=>{const z=j.offerType==="percent_discount"?"from-amber-400 to-orange-500":j.offerType==="fixed_discount"?"from-green-400 to-emerald-500":j.offerType==="bundle_meal"?"from-purple-400 to-violet-500":"from-pink-400 to-rose-500";return e.jsxs(ae,{to:`/menu?restaurant=${j.ownerId}`,className:"bg-white rounded-xl shadow-md overflow-hidden active:scale-95 transition-all",children:[e.jsxs("div",{className:`bg-gradient-to-r ${z} p-3 text-white`,children:[e.jsx("p",{className:"font-bold text-sm line-clamp-1",children:j.title}),e.jsxs("p",{className:"text-xl font-black",children:[j.offerType==="percent_discount"&&`${j.discountPercent}% Ø®ØµÙ…`,j.offerType==="fixed_discount"&&`ÙˆÙÙ‘Ø± ${j.discountAmount} Ø±.Ø³`,j.offerType==="bundle_meal"&&`${j.bundlePrice} Ø±.Ø³`,j.offerType==="buy_x_get_y"&&`${j.buyQuantity}+${j.getQuantity} Ù…Ø¬Ø§Ù†Ø§Ù‹`]})]}),e.jsxs("div",{className:"p-2 flex items-center gap-2",children:[e.jsx(Fi,{src:j.restaurantLogo,alt:j.restaurantName||"Ø£Ø³Ø±Ø©",size:"sm",fallbackText:j.restaurantName}),e.jsx("span",{className:"text-xs font-semibold text-gray-700 truncate",children:j.restaurantName||"Ø£Ø³Ø±Ø© Ù…Ù†ØªØ¬Ø©"})]})]},j.id)})})]}),w.length>0&&(!s||t==="customer")&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-sky-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"ğŸ  Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù‚Ø±ÙŠØ¨Ø© Ù…Ù†Ùƒ"})]}),e.jsx(ae,{to:"/restaurants",className:"text-sky-500 text-sm font-semibold",children:"Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ â†"})]}),e.jsx("div",{className:"space-y-3",children:w.map(j=>e.jsxs(ae,{to:`/menu?restaurant=${j.id}`,className:"flex items-center gap-3 bg-white rounded-xl p-3 shadow-md active:scale-[0.98] transition-all",children:[e.jsx(Ra,{src:j.logoUrl,alt:j.name,className:"w-14 h-14 rounded-xl",fallback:e.jsx("div",{className:"w-14 h-14 rounded-xl bg-sky-100 flex items-center justify-center",children:e.jsx(Le,{className:"w-7 h-7 text-sky-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 truncate",children:j.name}),j.packageType==="premium"&&e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded",children:"â­"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-1",children:[j.distance!==void 0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(at,{className:"w-3 h-3"}),j.distance.toFixed(1)," ÙƒÙ…"]}),j.averageRating&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ls,{className:"w-3 h-3 fill-amber-400 text-amber-400"}),j.averageRating.toFixed(1)]}),j.city&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ze,{className:"w-3 h-3"}),j.city]})]})]}),e.jsx(lr,{className:"w-5 h-5 text-gray-400"})]},j.id))})]}),U.length>0&&(!s||t==="customer")&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Yt,{className:"w-5 h-5 text-orange-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:U.map(j=>e.jsxs(ae,{to:`/menu?restaurant=${j.ownerId}`,className:"bg-white rounded-xl shadow-md overflow-hidden active:scale-95 transition-all",children:[e.jsxs("div",{className:"relative aspect-square bg-sky-50",children:[e.jsx(ux,{src:j.imageUrl,alt:j.name,className:"rounded-none"}),e.jsxs("span",{className:"absolute top-2 right-2 bg-orange-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(Yt,{className:"w-3 h-3"}),j.orderCount,"+"]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-bold text-sm text-gray-800 line-clamp-1",children:j.name}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:j.restaurantName}),e.jsxs("p",{className:"font-bold text-sky-600 text-sm mt-1",children:[j.price," Ø±.Ø³"]})]})]},j.id))})]}),t==="owner"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(ae,{to:"/owner",className:"bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"ğŸ“Š"}),e.jsx("h3",{className:"font-bold text-sm",children:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"})]}),e.jsxs(ae,{to:"/owner/orders",className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"ğŸ“‹"}),e.jsx("h3",{className:"font-bold text-sm",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"})]}),e.jsxs(ae,{to:"/owner/menu",className:"bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"ğŸ½ï¸"}),e.jsx("h3",{className:"font-bold text-sm",children:"Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"})]}),e.jsxs(ae,{to:"/owner/edit",className:"bg-gradient-to-br from-sky-500 to-blue-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"âš™ï¸"}),e.jsx("h3",{className:"font-bold text-sm",children:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"})]})]}),e.jsx("button",{onClick:i,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"})]}),t==="courier"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(ae,{to:"/courier",className:"block bg-gradient-to-r from-sky-500 to-blue-600 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-4xl",children:"ğŸš—"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø§Ø³ØªÙ„Ù… ÙˆØ§ÙˆØµÙ„ Ø·Ù„Ø¨Ø§Øª"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(ae,{to:"/courier/wallet",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"ğŸ’°"}),e.jsx("span",{className:"font-bold text-gray-700 text-sm",children:"Ù…Ø­ÙØ¸ØªÙŠ"})]}),e.jsxs(ae,{to:"/profile",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"ğŸ‘¤"}),e.jsx("span",{className:"font-bold text-gray-700 text-sm",children:"Ø­Ø³Ø§Ø¨ÙŠ"})]})]}),e.jsx("button",{onClick:i,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"})]}),t==="admin"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(ae,{to:"/admin",className:"block bg-gradient-to-r from-violet-500 to-purple-600 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(us,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"})]})]})}),e.jsx("button",{onClick:i,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"})]}),t==="developer"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(ae,{to:"/developer",className:"block bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ul,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ±"}),e.jsx("p",{className:"text-white/60 text-sm",children:"ØªØ­ÙƒÙ… ÙƒØ§Ù…Ù„"})]})]})}),e.jsx("button",{onClick:i,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"})]}),t==="supervisor"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(ae,{to:"/supervisor",className:"block bg-gradient-to-r from-amber-500 to-amber-700 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ws,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±ÙØ©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø·Ø§Ø¹Ù… ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª"})]})]})}),e.jsx("button",{onClick:i,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"})]}),t==="social_media"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(ae,{to:"/social-media",className:"block bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Us,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ù„ÙˆØ­Ø© Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙˆØ§Ù„ØªØ³ÙˆÙŠÙ‚"})]})]})}),e.jsx("button",{onClick:i,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-sky-500/50 text-xs",children:"ØµÙÙ†Ø¹ Ø¨Ù€ â¤ï¸ ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©"})})]})]})},fr=["Ø§Ù„Ø±ÙŠØ§Ø¶","Ø¬Ø¯Ø©","Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©","Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©","Ø§Ù„Ø¯Ù…Ø§Ù…","Ø§Ù„Ø®Ø¨Ø±","Ø§Ù„Ø¸Ù‡Ø±Ø§Ù†","Ø§Ù„Ø£Ø­Ø³Ø§Ø¡","Ø§Ù„Ù‚Ø·ÙŠÙ","Ø§Ù„Ø·Ø§Ø¦Ù","ØªØ¨ÙˆÙƒ","Ø¨Ø±ÙŠØ¯Ø©","Ø¹Ù†ÙŠØ²Ø©","Ø­Ø§Ø¦Ù„","Ø®Ù…ÙŠØ³ Ù…Ø´ÙŠØ·","Ø£Ø¨Ù‡Ø§","Ù†Ø¬Ø±Ø§Ù†","Ø¬Ø§Ø²Ø§Ù†","ÙŠÙ†Ø¨Ø¹","Ø§Ù„Ø¬Ø¨ÙŠÙ„","Ø­ÙØ± Ø§Ù„Ø¨Ø§Ø·Ù†","Ø§Ù„Ø®Ø±Ø¬","Ø£Ù…Ù„Ø¬","Ø§Ù„Ø¹Ù„Ø§","Ø±Ø§Ø¨Øº","Ø§Ù„Ù‚Ù†ÙØ°Ø©","Ø¨ÙŠØ´Ø©","ØµØ¨ÙŠØ§","Ø§Ù„Ø¨Ø§Ø­Ø©","Ø¹Ø±Ø¹Ø±","Ø³ÙƒØ§ÙƒØ§","Ø§Ù„Ø¯ÙˆØ§Ø¯Ù…ÙŠ","Ø§Ù„Ù…Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø²Ù„ÙÙŠ","Ø´Ù‚Ø±Ø§Ø¡","ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø¯ÙˆØ§Ø³Ø±","Ø±ÙØ­Ø§Ø¡","Ø·Ø±ÙŠÙ","Ø§Ù„Ù‚Ø±ÙŠØ§Øª","Ø£Ø®Ø±Ù‰"],gx=({storyGroups:s,initialGroupIndex:t,currentUserId:a,onClose:i})=>{var O;const[c,u]=l.useState(t),[r,w]=l.useState(0),[D,U]=l.useState(0),[v,N]=l.useState(!1),[E,A]=l.useState(!0),j=l.useRef(null),z=l.useRef(null),p=s[c],f=p==null?void 0:p.stories[r],L=(f==null?void 0:f.type)==="video"?15e3:5e3,$=l.useCallback(async B=>{var T;if(!(!a||!B.id)&&!((T=B.viewedBy)!=null&&T.includes(a)))try{await me(J(C,"stories",B.id),{viewsCount:Ke(1),viewedBy:hl(a)})}catch(P){console.warn("Error recording view:",P)}},[a]),g=l.useCallback(()=>{r<p.stories.length-1?(w(B=>B+1),U(0)):c<s.length-1?(u(B=>B+1),w(0),U(0)):i()},[r,c,p,s.length,i]),F=l.useCallback(()=>{if(r>0)w(B=>B-1),U(0);else if(c>0){u(T=>T-1);const B=s[c-1];w(B.stories.length-1),U(0)}},[r,c,s]);return l.useEffect(()=>{if(!f||v)return;$(f);const B=Date.now(),T=setInterval(()=>{const m=(Date.now()-B)/L*100;m>=100?(clearInterval(T),g()):U(m)},50);return z.current=T,()=>clearInterval(T)},[f,v,L,g,$]),l.useEffect(()=>{j.current&&(v?j.current.pause():j.current.play().catch(()=>{}))},[v,f]),l.useEffect(()=>{const B=T=>{T.key==="Escape"&&i(),T.key==="ArrowRight"&&g(),T.key==="ArrowLeft"&&F(),T.key===" "&&N(P=>!P)};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[i,g,F]),f?e.jsxs("div",{className:"fixed inset-0 z-[100] bg-black flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900 to-black"}),e.jsxs("div",{className:"relative w-full max-w-md h-full max-h-[100vh] flex flex-col",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 z-20 flex gap-1 p-2",children:p.stories.map((B,T)=>e.jsx("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white transition-all duration-100",style:{width:T<r?"100%":T===r?`${D}%`:"0%"}})},T))}),e.jsxs("div",{className:"absolute top-6 left-0 right-0 z-20 flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[p.restaurantLogo?e.jsx("img",{src:p.restaurantLogo,alt:"",className:"w-10 h-10 rounded-full border-2 border-white object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-bold",children:((O=p.restaurantName)==null?void 0:O.charAt(0))||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold text-sm",children:p.restaurantName}),e.jsx("p",{className:"text-white/60 text-xs",children:new Date(f.createdAt||Date.now()).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[f.type==="video"&&e.jsx("button",{onClick:()=>A(!E),className:"p-2 text-white/80 hover:text-white",children:E?e.jsx(Wn,{className:"w-5 h-5"}):e.jsx(Qn,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>N(!v),className:"p-2 text-white/80 hover:text-white",children:v?e.jsx(Xr,{className:"w-5 h-5"}):e.jsx(Wc,{className:"w-5 h-5"})}),e.jsx("button",{onClick:i,className:"p-2 text-white/80 hover:text-white",children:e.jsx(Oe,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"flex-1 flex items-center justify-center relative",onClick:B=>{const T=B.currentTarget.getBoundingClientRect(),P=B.clientX-T.left;P<T.width/3?F():P>T.width*2/3?g():N(m=>!m)},children:[f.type==="text"?e.jsx("div",{className:"w-full h-full flex items-center justify-center p-8",style:{backgroundColor:f.backgroundColor},children:e.jsx("p",{className:"text-center text-2xl font-bold leading-relaxed",style:{color:f.textColor},children:f.caption})}):f.type==="video"?e.jsx("video",{ref:j,src:f.mediaUrl,className:"w-full h-full object-contain",autoPlay:!0,playsInline:!0,muted:E,loop:!1}):e.jsx("img",{src:f.mediaUrl,alt:"",className:"w-full h-full object-contain"}),f.caption&&f.type!=="text"&&e.jsx("div",{className:"absolute bottom-24 left-0 right-0 px-4",children:e.jsx("div",{className:"bg-black/50 backdrop-blur-sm rounded-xl p-3",children:e.jsx("p",{className:"text-white text-sm",children:f.caption})})})]}),c>0&&e.jsx("button",{onClick:F,className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-white/20 rounded-full hover:bg-white/30 transition z-30",children:e.jsx(ta,{className:"w-6 h-6 text-white"})}),c<s.length-1&&e.jsx("button",{onClick:g,className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white/20 rounded-full hover:bg-white/30 transition z-30",children:e.jsx(pt,{className:"w-6 h-6 text-white"})}),f.menuItemId&&e.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-20",children:e.jsxs("a",{href:`/menu?restaurant=${f.ownerId}`,className:"flex items-center justify-center gap-2 w-full py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-bold shadow-lg",onClick:B=>{B.stopPropagation(),i()},children:[e.jsx(ns,{className:"w-5 h-5"}),"Ø§Ø·Ù„Ø¨ ",f.menuItemName]})})]}),e.jsx("div",{className:"hidden lg:flex absolute left-4 top-1/2 -translate-y-1/2 flex-col gap-2",children:s.slice(Math.max(0,c-2),c).map((B,T)=>{var P;return e.jsx("button",{onClick:()=>{u(c-(c-T)),w(0),U(0)},className:"w-16 h-16 rounded-xl overflow-hidden border-2 border-white/30 hover:border-white transition opacity-50 hover:opacity-100",children:B.restaurantLogo?e.jsx("img",{src:B.restaurantLogo,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-bold text-xl",children:(P=B.restaurantName)==null?void 0:P.charAt(0)})},B.ownerId)})}),e.jsx("div",{className:"hidden lg:flex absolute right-4 top-1/2 -translate-y-1/2 flex-col gap-2",children:s.slice(c+1,c+3).map((B,T)=>{var P;return e.jsx("button",{onClick:()=>{u(c+T+1),w(0),U(0)},className:"w-16 h-16 rounded-xl overflow-hidden border-2 border-white/30 hover:border-white transition opacity-50 hover:opacity-100",children:B.restaurantLogo?e.jsx("img",{src:B.restaurantLogo,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-bold text-xl",children:(P=B.restaurantName)==null?void 0:P.charAt(0)})},B.ownerId)})})]}):null},hr={startDate:new Date("2026-02-17T00:00:00"),endDate:new Date("2026-03-15T23:59:59"),iftarTimes:{Ø§Ù„Ø±ÙŠØ§Ø¶:{hour:18,minute:5},Ø¬Ø¯Ø©:{hour:18,minute:25},"Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©":{hour:18,minute:25},"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©":{hour:18,minute:15},Ø§Ù„Ø¯Ù…Ø§Ù…:{hour:17,minute:50},Ø§Ù„Ø®Ø¨Ø±:{hour:17,minute:50},Ø§Ù„Ø·Ø§Ø¦Ù:{hour:18,minute:20},ØªØ¨ÙˆÙƒ:{hour:18,minute:25},Ø¨Ø±ÙŠØ¯Ø©:{hour:18,minute:5},Ø­Ø§Ø¦Ù„:{hour:18,minute:10},Ø£Ø¨Ù‡Ø§:{hour:18,minute:15},Ù†Ø¬Ø±Ø§Ù†:{hour:18,minute:10},Ø¬Ø§Ø²Ø§Ù†:{hour:18,minute:20},Ø§Ù„Ø£Ø­Ø³Ø§Ø¡:{hour:17,minute:55},default:{hour:18,minute:10}}},ea=()=>{const s=new Date;return s>=hr.startDate&&s<=hr.endDate},bx=(s="default")=>hr.iftarTimes[s]||hr.iftarTimes.default,kn=(s="default")=>{const t=new Date,a=bx(s),i=new Date(t);return i.setHours(a.hour,a.minute,0,0),t>i?0:Math.floor((i.getTime()-t.getTime())/1e3)},fx=s=>{const t=Math.floor(s/3600),a=Math.floor(s%3600/60),i=s%60;return{hours:t.toString().padStart(2,"0"),minutes:a.toString().padStart(2,"0"),seconds:i.toString().padStart(2,"0")}},jx={discount:{label:"Ø®ØµÙ… Ø®Ø§Øµ",emoji:"ğŸ·ï¸",color:"from-rose-500 to-pink-600"},iftar_package:{label:"Ø¨Ø§Ù‚Ø© Ø¥ÙØ·Ø§Ø±",emoji:"ğŸ½ï¸",color:"from-amber-500 to-orange-600"},suhoor_package:{label:"Ø¨Ø§Ù‚Ø© Ø³Ø­ÙˆØ±",emoji:"ğŸŒ™",color:"from-indigo-500 to-purple-600"},family_bundle:{label:"Ø¹Ø±Ø¶ Ø¹Ø§Ø¦Ù„ÙŠ",emoji:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦",color:"from-emerald-500 to-teal-600"}},Nx=({onClose:s})=>{const[t,a]=l.useState(!0);if(!ea()||!t)return null;const i=()=>{a(!1),s==null||s()};return e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-800 via-purple-700 to-emerald-800 rounded-2xl p-5 mb-6 shadow-xl shadow-purple-900/30",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-2 right-4",children:"ğŸŒ™"}),e.jsx("div",{className:"absolute top-3 left-8",children:"âœ¨"}),e.jsx("div",{className:"absolute bottom-2 right-12",children:"â­"}),e.jsx("div",{className:"absolute bottom-3 left-4",children:"ğŸ®"})]}),e.jsx("button",{onClick:i,className:"absolute top-2 left-2 p-1.5 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(Oe,{className:"w-4 h-4 text-white/80"})}),e.jsxs("div",{className:"relative text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-3xl",children:"ğŸŒ™"}),e.jsx("h2",{className:"text-2xl font-black text-amber-300",children:"Ø¹Ø±ÙˆØ¶ Ø±Ù…Ø¶Ø§Ù†"}),e.jsx("span",{className:"text-3xl",children:"âœ¨"})]}),e.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:"Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø£Ø´Ù‡Ù‰ Ø£Ø·Ø¨Ø§Ù‚ Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø© Ø¨Ø¹Ø±ÙˆØ¶ Ø®Ø§ØµØ©"}),e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-white/10 backdrop-blur px-4 py-1.5 rounded-full",children:[e.jsx(pl,{className:"w-4 h-4 text-amber-300"}),e.jsx("span",{className:"text-amber-200 text-sm font-medium",children:"Ø¨Ø§Ù‚Ø§Øª Ø¥ÙØ·Ø§Ø± ÙˆØ³Ø­ÙˆØ±"})]})]})]})},yx=({city:s="Ø§Ù„Ø±ÙŠØ§Ø¶"})=>{const[t,a]=l.useState(kn(s));if(l.useEffect(()=>{if(!ea())return;const r=setInterval(()=>{const w=kn(s);a(w)},1e3);return()=>clearInterval(r)},[s]),!ea()||t<=0)return null;const{hours:i,minutes:c,seconds:u}=fx(t);return e.jsx("div",{className:"bg-gradient-to-r from-amber-600 via-orange-600 to-amber-600 rounded-2xl p-4 mb-4 shadow-lg shadow-amber-500/30",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"ğŸ•Œ"}),e.jsx("span",{className:"text-white/90 text-sm font-medium",children:"Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ø¥ÙØ·Ø§Ø±"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl px-4 py-2 min-w-[70px]",children:[e.jsx("div",{className:"text-3xl font-black text-white",children:i}),e.jsx("div",{className:"text-white/70 text-xs",children:"Ø³Ø§Ø¹Ø©"})]}),e.jsx("span",{className:"text-2xl text-white/80 font-bold",children:":"}),e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl px-4 py-2 min-w-[70px]",children:[e.jsx("div",{className:"text-3xl font-black text-white",children:c}),e.jsx("div",{className:"text-white/70 text-xs",children:"Ø¯Ù‚ÙŠÙ‚Ø©"})]}),e.jsx("span",{className:"text-2xl text-white/80 font-bold",children:":"}),e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl px-4 py-2 min-w-[70px]",children:[e.jsx("div",{className:"text-3xl font-black text-white animate-pulse",children:u}),e.jsx("div",{className:"text-white/70 text-xs",children:"Ø«Ø§Ù†ÙŠØ©"})]})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-2",children:["ğŸ“ ",s]})]})})},wx=[{value:"",label:"Ø§Ù„ÙƒÙ„"},{value:"traditional",label:"ğŸš Ø£ÙƒÙ„Ø§Øª Ø´Ø¹Ø¨ÙŠØ©"},{value:"sweets",label:"ğŸ° Ø­Ù„ÙˆÙŠØ§Øª"},{value:"pastries",label:"ğŸ¥§ Ù…Ø¹Ø¬Ù†Ø§Øª"},{value:"grills",label:"ğŸ– Ù…Ø´ÙˆÙŠØ§Øª"},{value:"healthy",label:"ğŸ¥— Ø£ÙƒÙ„ ØµØ­ÙŠ"},{value:"international",label:"ğŸŒ Ø£ÙƒÙ„Ø§Øª Ø¹Ø§Ù„Ù…ÙŠØ©"}],Sn=async(s,t,a)=>{try{await Pe(ee(C,"visitLogs"),{restaurantId:s,visitorId:t||null,visitorType:t?"customer":"anonymous",source:a||"direct",page:"menu",createdAt:X()});const i=J(C,"restaurantStats",s),c=await Ce(i),u=new Date().toISOString().split("T")[0];if(c.exists()){const w=c.data().dailyViews||{};w[u]=(w[u]||0)+1,await me(i,{totalProfileViews:Ke(1),dailyViews:w,updatedAt:X()})}else await Be(i,{totalProfileViews:1,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:0,appDownloads:0,dailyViews:{[u]:1},updatedAt:X()})}catch(i){console.warn("Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø²ÙŠØ§Ø±Ø©:",i)}},vx=()=>{var Q,ie,re,ye,ue;const{userLocation:s,role:t,user:a}=Ee(),[i]=Aa(),c=i.get("ref"),[u,r]=l.useState([]),[w,D]=l.useState([]),[U,v]=l.useState([]),[N,E]=l.useState([]),[A,j]=l.useState([]),[z,p]=l.useState(!1),[f,L]=l.useState(0),[$,g]=l.useState(0),[F,O]=l.useState(!0),[B,T]=l.useState(""),[P,m]=l.useState("grid"),[o,R]=l.useState(""),[I,q]=l.useState(""),[x,b]=l.useState(0),[y,d]=l.useState(!1),[M,k]=l.useState("distance");l.useEffect(()=>{(async()=>{const se=(await be(ee(C,"restaurants"))).docs.map(ce=>({id:ce.id,...ce.data()})),le=(await be(ee(C,"menuItems"))).docs.map(ce=>({id:ce.id,...ce.data()})),G=new Map;le.forEach(ce=>{if(ce.available!==!1){const Ne=G.get(ce.ownerId)||0;G.set(ce.ownerId,Ne+1)}});const Z=se.filter(ce=>{if(!((G.get(ce.id)||0)>0))return!1;if(t==="developer"||t==="admin"||t==="owner")return!0;const Y=!!ce.logoUrl,te=!!ce.geoLocation;return Y&&te});try{const ce=le.filter(Ne=>Ne.available!==!1&&(Ne.orderCount||0)>0).sort((Ne,Y)=>(Y.orderCount||0)-(Ne.orderCount||0)).slice(0,6).map(Ne=>{const Y=Z.find(te=>te.id===Ne.ownerId);return{...Ne,restaurantName:Y==null?void 0:Y.name,restaurantLogo:Y==null?void 0:Y.logoUrl}});v(ce)}catch(ce){console.warn("Error loading top items:",ce)}try{const ce=fe(ee(C,"promotions"),je("isActive","==",!0)),Ne=await be(ce),Y=new Date,te=Ne.docs.map(de=>{var oe,ge;return{id:de.id,...de.data(),expiresAt:(ge=(oe=de.data().expiresAt)==null?void 0:oe.toDate)==null?void 0:ge.call(oe)}}).filter(de=>!de.expiresAt||new Date(de.expiresAt)>Y).map(de=>{const oe=Z.find(ge=>ge.id===de.ownerId);return{...de,restaurantName:oe==null?void 0:oe.name}});D(te)}catch(ce){console.warn("Error loading promotions:",ce)}try{const ce=fe(ee(C,"offers"),je("isActive","==",!0)),Ne=await be(ce),Y=new Date,te=Ne.docs.map(de=>{var oe,ge;return{id:de.id,...de.data(),expiresAt:(ge=(oe=de.data().expiresAt)==null?void 0:oe.toDate)==null?void 0:ge.call(oe)}}).filter(de=>!de.expiresAt||new Date(de.expiresAt)>Y).slice(0,8);E(te)}catch(ce){console.warn("Error loading special offers:",ce)}try{const ce=await be(ee(C,"stories")),Ne=new Date,Y=ce.docs.map(oe=>{var ge,ke,Ae,Ue;return{id:oe.id,...oe.data(),expiresAt:(ke=(ge=oe.data().expiresAt)==null?void 0:ge.toDate)==null?void 0:ke.call(ge),createdAt:(Ue=(Ae=oe.data().createdAt)==null?void 0:Ae.toDate)==null?void 0:Ue.call(Ae)}}).filter(oe=>oe.expiresAt&&new Date(oe.expiresAt)>Ne).sort((oe,ge)=>{var ke,Ae;return(((ke=ge.createdAt)==null?void 0:ke.getTime())||0)-(((Ae=oe.createdAt)==null?void 0:Ae.getTime())||0)}),te=new Map;Y.forEach(oe=>{var Ue;const ge=te.get(oe.ownerId),ke=Z.find(_e=>_e.id===oe.ownerId),Ae=!(a!=null&&a.uid)||!((Ue=oe.viewedBy)!=null&&Ue.includes(a.uid));ge?(ge.stories.push(oe),Ae&&(ge.hasUnviewed=!0)):te.set(oe.ownerId,{ownerId:oe.ownerId,restaurantName:oe.restaurantName||(ke==null?void 0:ke.name),restaurantLogo:oe.restaurantLogo||(ke==null?void 0:ke.logoUrl),stories:[oe],hasUnviewed:Ae})});const de=Array.from(te.values()).sort((oe,ge)=>(ge.hasUnviewed?1:0)-(oe.hasUnviewed?1:0));j(de)}catch(ce){console.warn("Error loading stories:",ce)}let ne=[];s?(ne=Z.map(ce=>{if(ce.geoLocation){const Ne=_i(s,ce.geoLocation);return{...ce,distance:Ne}}return{...ce,distance:void 0}}),(t==="customer"||t==="courier")&&(ne=ne.filter(ce=>!ce.geoLocation||ce.distance===void 0?!1:ce.distance<=Xa)),ne.sort((ce,Ne)=>{const Y=ce.packageType==="premium"?1:0,te=Ne.packageType==="premium"?1:0;if(te!==Y)return te-Y;const de={gold:3,silver:2,bronze:1},oe=de[ce.sellerTier||"bronze"]||0,ge=de[Ne.sellerTier||"bronze"]||0;if(ge!==oe)return ge-oe;const ke=ce.isVerified?1:0,Ae=Ne.isVerified?1:0;return Ae!==ke?Ae-ke:(ce.distance||999)-(Ne.distance||999)})):ne=Z.sort((ce,Ne)=>{const Y={gold:3,silver:2,bronze:1},te=Y[ce.sellerTier||"bronze"]||0,de=Y[Ne.sellerTier||"bronze"]||0;if(de!==te)return de-te;const oe=ce.isVerified?1:0;return(Ne.isVerified?1:0)-oe}),r(ne),O(!1)})()},[s,t]);const h=l.useMemo(()=>{const _=new Set(u.map(se=>se.city).filter(Boolean));return fr.filter(se=>_.has(se))},[u]),S=l.useMemo(()=>{let _=u;if(B&&(_=_.filter(se=>se.city===B)),o.trim()){const se=o.trim().toLowerCase();_=_.filter(pe=>{var le;return pe.name.toLowerCase().includes(se)||((le=pe.city)==null?void 0:le.toLowerCase().includes(se))})}return I&&(_=_.filter(se=>se.cuisineType===I)),x>0&&(_=_.filter(se=>(se.averageRating||0)>=x)),M==="rating"?_=[..._].sort((se,pe)=>(pe.averageRating||0)-(se.averageRating||0)):M==="orders"&&(_=[..._].sort((se,pe)=>(pe.totalOrders||0)-(se.totalOrders||0))),_},[u,B,o,I,x,M]),V=[B,o,I,x>0].filter(Boolean).length;return F?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-sky-200 border-t-sky-500 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-sky-600 font-semibold",children:"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø©..."})]}):e.jsxs("div",{className:"pb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-6 text-sky-700",children:"ğŸ´ Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø©"}),A.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-2",children:[e.jsx(Xr,{className:"w-5 h-5 text-pink-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"ğŸ“¸ Ø³ØªÙˆØ±ÙŠ Ø§Ù„Ø£Ø³Ø±"})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2 px-2 scrollbar-hide",children:A.map((_,se)=>e.jsxs("button",{onClick:()=>{L(se),p(!0)},className:"flex-shrink-0 flex flex-col items-center gap-1 group",children:[e.jsxs("div",{className:`relative p-[3px] rounded-full ${_.hasUnviewed?"bg-gradient-to-tr from-amber-400 via-pink-500 to-purple-600":"bg-gray-300"}`,children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white p-[2px]",children:_.restaurantLogo?e.jsx("img",{src:_.restaurantLogo,alt:_.restaurantName||"Restaurant",className:"w-full h-full rounded-full object-cover"}):e.jsx("div",{className:"w-full h-full rounded-full bg-sky-100 flex items-center justify-center",children:e.jsx(Le,{className:"w-7 h-7 text-sky-400"})})}),_.stories.length>1&&e.jsx("span",{className:"absolute -bottom-1 -left-1 w-5 h-5 bg-pink-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center border-2 border-white",children:_.stories.length})]}),e.jsx("span",{className:"text-[11px] text-gray-600 font-medium text-center line-clamp-1 max-w-[70px]",children:_.restaurantName||"Ø£Ø³Ø±Ø©"})]},_.ownerId))})]}),z&&A.length>0&&e.jsx(gx,{storyGroups:A,initialGroupIndex:f,currentUserId:a==null?void 0:a.uid,onClose:()=>p(!1)}),e.jsxs("div",{className:"mb-5 px-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£Ø³Ø±Ø© Ø£Ùˆ Ù…Ù†Ø·Ù‚Ø©...",value:o,onChange:_=>R(_.target.value),className:"w-full bg-white border-2 border-sky-200 rounded-xl py-3 pr-10 pl-12 text-gray-800 placeholder:text-gray-400 focus:border-sky-500 focus:outline-none shadow-sm transition"}),e.jsxs("button",{onClick:()=>d(!y),className:`absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-lg transition ${y||V>0?"bg-sky-500 text-white":"bg-sky-100 text-sky-600 hover:bg-sky-200"}`,children:[e.jsx(Qc,{className:"w-4 h-4"}),V>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:V})]})]}),y&&e.jsxs("div",{className:"mt-3 bg-white rounded-xl p-4 border border-sky-100 shadow-sm space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>k("distance"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${M==="distance"?"bg-sky-500 text-white":"bg-sky-50 text-sky-700"}`,children:[e.jsx(at,{className:"w-3 h-3 inline ml-1"}),"Ø§Ù„Ø£Ù‚Ø±Ø¨"]}),e.jsxs("button",{onClick:()=>k("rating"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${M==="rating"?"bg-sky-500 text-white":"bg-sky-50 text-sky-700"}`,children:[e.jsx(ls,{className:"w-3 h-3 inline ml-1"}),"Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹"]}),e.jsxs("button",{onClick:()=>k("orders"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${M==="orders"?"bg-sky-500 text-white":"bg-sky-50 text-sky-700"}`,children:[e.jsx(ns,{className:"w-3 h-3 inline ml-1"}),"Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø·Ø¨Ø®"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:wx.map(_=>e.jsx("button",{onClick:()=>q(_.value),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${I===_.value?"bg-amber-500 text-white":"bg-amber-50 text-amber-700"}`,children:_.label},_.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:["Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„ØªÙ‚ÙŠÙŠÙ…: ",x>0?`${x}+ â­`:"Ø§Ù„ÙƒÙ„"]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[0,3,3.5,4,4.5].map(_=>e.jsx("button",{onClick:()=>b(_),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition flex items-center gap-1 ${x===_?"bg-yellow-500 text-white":"bg-yellow-50 text-yellow-700"}`,children:_===0?"Ø§Ù„ÙƒÙ„":e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"w-3 h-3 fill-current"}),_,"+"]})},_))})]}),V>0&&e.jsxs("button",{onClick:()=>{R(""),T(""),q(""),b(0),k("distance")},className:"w-full py-2 bg-red-50 text-red-500 rounded-lg font-medium hover:bg-red-100 transition flex items-center justify-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† (",V,")"]})]})]}),ea()&&e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(Nx,{})}),e.jsx("div",{className:"mb-6",children:e.jsx(yx,{city:"Ø§Ù„Ø±ÙŠØ§Ø¶"})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-900 via-purple-800 to-emerald-900 rounded-3xl p-6 mb-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-4 text-4xl opacity-30 animate-pulse",children:"ğŸŒ™"}),e.jsx("div",{className:"absolute bottom-2 left-4 text-3xl opacity-20",children:"âœ¨"}),e.jsx("div",{className:"absolute top-1/2 right-1/4 text-2xl opacity-20",children:"ğŸ®"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-4xl",children:"ğŸï¸"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-white",children:"Ø¹Ø±ÙˆØ¶ Ø±Ù…Ø¶Ø§Ù†"}),e.jsx("p",{className:"text-purple-200 text-sm",children:"Ø¨Ø§Ù‚Ø§Øª Ø¥ÙØ·Ø§Ø± ÙˆØ³Ø­ÙˆØ± Ù…Ù…ÙŠØ²Ø©"})]})]}),e.jsx("div",{className:"bg-amber-400 text-purple-900 text-xs font-bold px-3 py-1.5 rounded-full",children:"ğŸŒ™ Ø¹Ø±ÙˆØ¶ Ø­ØµØ±ÙŠØ©"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:["iftar_package","suhoor_package","family_bundle","discount"].map(_=>{const se=jx[_];return e.jsxs(ae,{to:`/restaurants?offer_type=${_}`,className:"bg-white/10 backdrop-blur rounded-xl p-4 text-center hover:bg-white/20 transition-all group",children:[e.jsx("span",{className:"text-3xl block mb-2 group-hover:scale-110 transition-transform",children:se.emoji}),e.jsx("span",{className:"text-white font-bold text-sm",children:se.label})]},_)})}),e.jsxs("div",{className:"mt-4 bg-amber-400/20 rounded-xl p-3 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ‘¨â€ğŸ³"}),e.jsx("p",{className:"text-amber-200 text-sm flex-1",children:"Ù‡Ù„ Ø£Ù†Øª Ø£Ø³Ø±Ø© Ù…Ù†ØªØ¬Ø©ØŸ Ø£Ø¶Ù Ø¹Ø±ÙˆØ¶Ùƒ Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠØ© ÙˆØ§Ø³ØªÙ‚Ø¨Ù„ Ø·Ù„Ø¨Ø§Øª Ø£ÙƒØ«Ø±!"}),e.jsx(ae,{to:"/owner/offers?type=ramadan",className:"bg-amber-400 text-purple-900 px-4 py-2 rounded-xl font-bold text-sm whitespace-nowrap hover:bg-amber-300 transition",children:"Ø£Ø¶Ù Ø¹Ø±Ø¶Ùƒ"})]})]})]})]}),U.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"w-6 h-6 text-orange-500"}),e.jsx("h2",{className:"text-xl font-bold text-sky-700",children:"ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§ Ø§Ù„ÙŠÙˆÙ…"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[U.length," Ø£ØµÙ†Ø§Ù"]})]}),e.jsx("div",{className:"grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:U.map(_=>e.jsxs(ae,{to:`/menu?restaurant=${_.ownerId}`,className:"group bg-white border border-sky-100 rounded-2xl shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300 overflow-hidden",children:[e.jsxs("div",{className:"relative aspect-square bg-sky-50",children:[_.imageUrl?e.jsx("img",{src:_.imageUrl,alt:_.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ut,{className:"w-10 h-10 text-sky-300"})}),e.jsxs("div",{className:"absolute top-2 right-2 bg-gradient-to-r from-orange-500 to-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow flex items-center gap-1",children:[e.jsx(Yt,{className:"w-3 h-3"}),_.orderCount,"+ Ø·Ù„Ø¨"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-bold text-sm text-gray-800 line-clamp-1",children:_.name}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1 mt-0.5",children:_.restaurantName}),e.jsx("div",{className:"flex items-center justify-between mt-2",children:e.jsxs("span",{className:"font-bold text-sky-600 text-sm",children:[_.price," Ø±.Ø³"]})})]})]},_.id))})]}),N.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-6 h-6 text-pink-500"}),e.jsx("h2",{className:"text-xl font-bold text-sky-700",children:"ğŸ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø£Ø³Ø±"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[N.length," Ø¹Ø±Ø¶"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:N.map(_=>{const se=_.offerType==="percent_discount"?gl:_.offerType==="fixed_discount"?aa:_.offerType==="bundle_meal"?Me:Ms,pe=_.offerType==="percent_discount"?"from-amber-500 to-orange-500":_.offerType==="fixed_discount"?"from-green-500 to-emerald-500":_.offerType==="bundle_meal"?"from-purple-500 to-violet-500":"from-pink-500 to-rose-500";return e.jsxs(ae,{to:`/menu?restaurant=${_.ownerId}`,onClick:async()=>{try{await me(J(C,"offers",_.id),{viewsCount:Ke(1)})}catch{}},className:"group bg-white rounded-2xl shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300 overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:`bg-gradient-to-r ${pe} p-4 text-white relative`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(se,{className:"w-5 h-5"}),e.jsxs("span",{className:"text-xs font-medium opacity-90",children:[_.offerType==="percent_discount"&&"Ø®ØµÙ… Ù†Ø³Ø¨Ø©",_.offerType==="fixed_discount"&&"Ø®ØµÙ… Ù…Ø¨Ù„Øº",_.offerType==="bundle_meal"&&"ÙˆØ¬Ø¨Ø© Ø®Ø§ØµØ©",_.offerType==="buy_x_get_y"&&"Ø§Ø´ØªØ±Ù ÙˆØ§Ø­ØµÙ„"]})]}),e.jsx("h3",{className:"font-bold text-lg leading-tight line-clamp-1",children:_.title}),e.jsxs("div",{className:"mt-2 text-sm font-bold",children:[_.offerType==="percent_discount"&&e.jsxs("span",{className:"text-2xl",children:[_.discountPercent,"% Ø®ØµÙ…"]}),_.offerType==="fixed_discount"&&e.jsxs("span",{className:"text-2xl",children:["ÙˆÙÙ‘Ø± ",_.discountAmount," Ø±.Ø³"]}),_.offerType==="bundle_meal"&&e.jsxs("div",{children:[e.jsxs("span",{className:"text-2xl",children:[_.bundlePrice," Ø±.Ø³"]}),e.jsxs("span",{className:"text-sm opacity-75 line-through mr-2",children:[_.bundleOriginalPrice," Ø±.Ø³"]})]}),_.offerType==="buy_x_get_y"&&e.jsxs("span",{className:"text-xl",children:["Ø§Ø´ØªØ±Ù ",_.buyQuantity," ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ ",_.getQuantity," Ù…Ø¬Ø§Ù†Ø§Ù‹"]})]})]}),e.jsxs("div",{className:"p-3 flex items-center gap-3",children:[e.jsx(Fi,{src:_.restaurantLogo,alt:_.restaurantName||"Ø£Ø³Ø±Ø©",size:"md",fallbackText:_.restaurantName}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-800 text-sm truncate",children:_.restaurantName||"Ø£Ø³Ø±Ø© Ù…Ù†ØªØ¬Ø©"}),_.description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:_.description})]})]})]},_.id)})})]}),w.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx(Us,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"font-bold text-purple-600",children:"Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù…Ù…ÙŠØ²Ø©"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs(ae,{to:`/menu?restaurant=${(Q=w[$])==null?void 0:Q.ownerId}`,onClick:async()=>{try{await me(J(C,"promotions",w[$].id),{viewsCount:Ke(1)})}catch{}},className:"block bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[e.jsx(Us,{className:"w-3 h-3"}),"Ø¥Ø¹Ù„Ø§Ù†"]}),((ie=w[$])==null?void 0:ie.mediaUrl)&&e.jsx("div",{className:"relative h-48",children:w[$].type==="video"?e.jsxs(e.Fragment,{children:[e.jsx("video",{src:w[$].mediaUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,autoPlay:!0,playsInline:!0}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:e.jsx(Xr,{className:"w-6 h-6 text-white fill-white"})})})]}):e.jsx("img",{src:w[$].mediaUrl,alt:w[$].title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:((re=w[$])==null?void 0:re.restaurantName)&&e.jsx("span",{className:"text-xs bg-white/20 text-white px-2 py-1 rounded-full",children:w[$].restaurantName})}),((ye=w[$])==null?void 0:ye.title)&&e.jsx("h3",{className:"text-lg font-bold text-white",children:w[$].title}),((ue=w[$])==null?void 0:ue.description)&&e.jsx("p",{className:"text-purple-100 text-sm mt-1 line-clamp-2",children:w[$].description})]})]}),w.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:_=>{_.preventDefault(),g(se=>se===0?w.length-1:se-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:e.jsx(pt,{className:"w-5 h-5 text-gray-800"})}),e.jsx("button",{onClick:_=>{_.preventDefault(),g(se=>se===w.length-1?0:se+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:e.jsx(ta,{className:"w-5 h-5 text-gray-800"})})]}),w.length>1&&e.jsx("div",{className:"flex justify-center gap-2 mt-3",children:w.map((_,se)=>e.jsx("button",{onClick:()=>g(se),className:`w-2 h-2 rounded-full transition ${se===$?"bg-purple-500 w-4":"bg-gray-300"}`},se))})]})]}),h.length>0&&e.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[e.jsx(ja,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:"})]}),e.jsx("button",{onClick:()=>T(""),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${B?"bg-sky-100 text-sky-700 hover:bg-sky-200":"bg-sky-500 text-white shadow-lg"}`,children:"Ø§Ù„ÙƒÙ„"}),h.map(_=>e.jsxs("button",{onClick:()=>T(_),className:`px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-1 ${B===_?"bg-sky-500 text-white shadow-lg":"bg-sky-100 text-sky-700 hover:bg-sky-200"}`,children:[e.jsx(Ze,{className:"w-4 h-4"}),_]},_)),B&&e.jsx("button",{onClick:()=>T(""),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙÙ„ØªØ±",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),S.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Rs,{className:"w-10 h-10 text-sky-500"})}),s?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:"ğŸ˜” Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø·Ø§Ø¹Ù… Ù‚Ø±ÙŠØ¨Ø© Ù…Ù†Ùƒ"}),e.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["Ù†Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø¶Ù…Ù† ",Xa," ÙƒÙ… ÙÙ‚Ø·"]})]}):e.jsx(e.Fragment,{children:e.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:B?`ğŸ˜” Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø·Ø§Ø¹Ù… ÙÙŠ ${B}`:"ğŸ˜” Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø·Ø§Ø¹Ù… Ø­Ø§Ù„ÙŠØ§Ù‹"})})]}),s&&S.length>0&&(t==="customer"||t==="courier")&&e.jsxs("div",{className:"mb-6 bg-sky-50 border border-sky-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(at,{className:"w-6 h-6 text-sky-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sky-700 font-semibold",children:"Ù†Ø¹Ø±Ø¶ Ù„Ùƒ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ù‚Ø±ÙŠØ¨Ø© ÙÙ‚Ø·"}),e.jsxs("p",{className:"text-sky-600 text-sm",children:["Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù‚ØµÙˆÙ‰ Ù„Ù„ØªÙˆØµÙŠÙ„: ",Xa," ÙƒÙ…"]})]})]}),S.filter(_=>_.packageType==="premium").length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-6 h-6 text-amber-500"}),e.jsx("h2",{className:"text-xl font-bold text-amber-400",children:"â­ Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù…ÙŠØ²Ø©"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[S.filter(_=>_.packageType==="premium").length," Ø£Ø³Ø±Ø©"]})]}),e.jsx("div",{className:"grid grid-cols-2 xs:grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:S.filter(_=>_.packageType==="premium").map(_=>e.jsxs(ae,{to:`/menu?restaurant=${_.id}${c?`&ref=${c}`:""}`,onClick:()=>Sn(_.id,a==null?void 0:a.uid,c||"direct"),className:"group bg-[#1E293B] border border-amber-500/30 rounded-[16px] shadow-lg shadow-amber-500/10 hover:shadow-xl hover:shadow-amber-500/20 hover:-translate-y-2 transform transition-all duration-300 p-3 sm:p-4 flex flex-col items-center text-center relative overflow-hidden active:scale-[0.98]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow flex items-center gap-1",children:[e.jsx(ts,{className:"w-3 h-3"}),"Ù…Ù…ÙŠØ²Ø©"]})}),_.distance!==void 0&&e.jsxs("div",{className:"absolute top-2 left-2 bg-sky-500/90 backdrop-blur text-white text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-0.5",children:[e.jsx(at,{className:"w-2.5 h-2.5"}),_.distance<1?`${Math.round(_.distance*1e3)}Ù…`:`${_.distance.toFixed(1)}ÙƒÙ…`]}),e.jsxs("div",{className:"relative mt-6 mb-3",children:[_.logoUrl?e.jsx("img",{src:_.logoUrl,alt:_.name,className:"w-20 h-20 object-cover rounded-full border-4 border-amber-400 shadow-lg group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-20 h-20 flex items-center justify-center rounded-full bg-slate-700 border-4 border-amber-400 shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx(ut,{className:"w-8 h-8 text-amber-400"})}),(_.isVerified||_.licenseStatus==="approved")&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-sky-500 rounded-full flex items-center justify-center border-2 border-white shadow-lg",children:e.jsx(Ie,{className:"w-4 h-4 text-white"})})]}),e.jsx("h3",{className:"font-bold text-sm text-white line-clamp-1",children:_.name}),_.city&&e.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-0.5 mt-1 mb-2",children:[e.jsx(Ze,{className:"w-3 h-3"}),_.city]}),_.isVerified||_.licenseStatus==="approved"?e.jsxs("div",{className:"bg-sky-500/20 border border-sky-500/50 text-sky-400 text-[11px] font-bold px-3 py-1 rounded-full flex items-center gap-1 mb-2",children:[e.jsx(Ie,{className:"w-3 h-3"}),"âœ” Ù…ÙˆØ«Ù‚Ø©"]}):_.licenseStatus==="pending"?e.jsxs("div",{className:"bg-amber-500/20 border border-amber-500/50 text-amber-400 text-[11px] font-bold px-3 py-1 rounded-full flex items-center gap-1 mb-2",children:[e.jsx(Ge,{className:"w-3 h-3"}),"â³ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"]}):null,e.jsxs("div",{className:"flex items-center justify-center gap-3 text-[10px] text-gray-400",children:[_.averageRating!==void 0&&_.averageRating>0&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(ls,{className:"w-3 h-3 text-amber-400 fill-amber-400"}),_.averageRating.toFixed(1)]}),_.totalOrders!==void 0&&_.totalOrders>0&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(ns,{className:"w-3 h-3"}),_.totalOrders]})]}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[_.sellerTier==="gold"&&e.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full",children:"ğŸ‘‘ Gold"}),_.sellerTier==="silver"&&e.jsx("span",{className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full",children:"ğŸ¥ˆ Silver"})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1.5 justify-center",children:[_.allowDelivery!==!1&&e.jsxs("span",{className:"inline-flex items-center gap-0.5 bg-sky-500/20 text-sky-400 text-[9px] font-medium px-1.5 py-0.5 rounded-full",children:[e.jsx(Ve,{className:"w-2.5 h-2.5"}),"ØªÙˆØµÙŠÙ„"]}),_.allowPickup&&e.jsxs("span",{className:"inline-flex items-center gap-0.5 bg-green-500/20 text-green-400 text-[9px] font-medium px-1.5 py-0.5 rounded-full",children:[e.jsx(Le,{className:"w-2.5 h-2.5"}),"Ø§Ø³ØªÙ„Ø§Ù…"]})]})]},_.id))})]}),S.filter(_=>_.packageType!=="premium").length>0&&e.jsxs("div",{children:[S.filter(_=>_.packageType==="premium").length>0&&e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ut,{className:"w-5 h-5 text-gray-400"}),e.jsx("h2",{className:"text-lg font-bold text-gray-300",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø±"})]}),e.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6",children:S.filter(_=>_.packageType!=="premium").map(_=>e.jsxs(ae,{to:`/menu?restaurant=${_.id}${c?`&ref=${c}`:""}`,onClick:()=>Sn(_.id,a==null?void 0:a.uid,c||"direct"),className:"group bg-[#1E293B] rounded-[16px] shadow-lg shadow-black/20 hover:shadow-xl hover:shadow-black/30 hover:-translate-y-1 transform transition-all duration-300 p-4 sm:p-6 flex flex-col items-center text-center relative overflow-hidden active:scale-[0.98]",children:[_.distance!==void 0&&e.jsxs("div",{className:"absolute top-3 left-3 bg-sky-500/90 backdrop-blur-sm text-white text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[e.jsx(at,{className:"w-3 h-3"}),_.distance<1?`${Math.round(_.distance*1e3)} Ù…`:`${_.distance.toFixed(1)} ÙƒÙ…`]}),e.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-1.5",children:[_.sellerTier==="gold"&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-yellow-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow-lg",children:[e.jsx(ts,{className:"w-3 h-3"}),"Gold"]}),_.sellerTier==="silver"&&e.jsxs("div",{className:"bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow-lg",children:[e.jsx(Zr,{className:"w-3 h-3"}),"Silver"]})]}),e.jsxs("div",{className:"relative mt-2 mb-4",children:[_.logoUrl?e.jsx("img",{src:_.logoUrl,alt:_.name,className:`w-24 h-24 object-cover rounded-full border-4 shadow-lg group-hover:scale-105 transition-transform duration-300 ${_.sellerTier==="gold"?"border-amber-400 ring-4 ring-amber-400/30":_.sellerTier==="silver"?"border-gray-300 ring-4 ring-gray-300/30":"border-slate-500"}`}):e.jsx("div",{className:`w-24 h-24 flex items-center justify-center rounded-full text-4xl border-4 shadow-lg group-hover:scale-105 transition-transform duration-300 ${_.sellerTier==="gold"?"bg-amber-900/50 border-amber-400":_.sellerTier==="silver"?"bg-gray-700 border-gray-300":"bg-slate-700 border-slate-500"}`,children:"ğŸ´"}),(_.isVerified||_.licenseStatus==="approved")&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-sky-500 rounded-full flex items-center justify-center border-2 border-white shadow-lg",children:e.jsx(Ie,{className:"w-5 h-5 text-white"})})]}),e.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:_.name}),_.city&&e.jsxs("p",{className:"text-sm text-gray-400 flex items-center justify-center gap-1 mb-3",children:[e.jsx(Ze,{className:"w-4 h-4"}),_.city]}),_.isVerified||_.licenseStatus==="approved"?e.jsxs("div",{className:"bg-sky-500/20 border border-sky-500/50 text-sky-400 text-sm font-bold px-4 py-1.5 rounded-full flex items-center gap-2 mb-3",children:[e.jsx(Ie,{className:"w-4 h-4"}),"âœ” Ù…ÙˆØ«Ù‚Ø©"]}):_.licenseStatus==="pending"?e.jsxs("div",{className:"bg-amber-500/20 border border-amber-500/50 text-amber-400 text-sm font-bold px-4 py-1.5 rounded-full flex items-center gap-2 mb-3",children:[e.jsx(Ge,{className:"w-4 h-4"}),"â³ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"]}):null,e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(_.allowDelivery===void 0||_.allowDelivery===!0)&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-sky-500/20 text-sky-400 text-xs font-semibold rounded-full",children:[e.jsx(Ve,{className:"w-3 h-3"}),"ØªÙˆØµÙŠÙ„"]}),_.allowPickup&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-500/20 text-green-400 text-xs font-semibold rounded-full",children:[e.jsx(Le,{className:"w-3 h-3"}),"Ø§Ø³ØªÙ„Ø§Ù…"]})]})]},_.id))})]})]})},kx="modulepreload",Sx=function(s){return"/"+s},Cn={},qs=function(t,a,i){let c=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),w=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));c=Promise.allSettled(a.map(D=>{if(D=Sx(D),D in Cn)return;Cn[D]=!0;const U=D.endsWith(".css"),v=U?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${D}"]${v}`))return;const N=document.createElement("link");if(N.rel=U?"stylesheet":kx,U||(N.as="script"),N.crossOrigin="",N.href=D,w&&N.setAttribute("nonce",w),document.head.appendChild(N),U)return new Promise((E,A)=>{N.addEventListener("load",E),N.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${D}`)))})}))}function u(r){const w=new Event("vite:preloadError",{cancelable:!0});if(w.payload=r,window.dispatchEvent(w),!w.defaultPrevented)throw r}return c.then(r=>{for(const w of r||[])w.status==="rejected"&&u(w.reason);return t().catch(u)})},An="broast_cart";function Ea(){const[s,t]=l.useState(()=>{try{const w=localStorage.getItem(An);return w?JSON.parse(w):[]}catch{return[]}});l.useEffect(()=>{localStorage.setItem(An,JSON.stringify(s))},[s]);const a=l.useCallback((w,D=1)=>{t(U=>{const v=U.findIndex(N=>N.id===w.id);if(v>=0){const N=[...U];return N[v]={...N[v],qty:N[v].qty+D,ownerId:w.ownerId??N[v].ownerId},N}return[...U,{...w,qty:D}]})},[]),i=l.useCallback(w=>t(D=>D.filter(U=>U.id!==w)),[]),c=l.useCallback((w,D)=>{const U=Math.max(1,D);t(v=>v.map(N=>N.id===w?{...N,qty:U}:N))},[]),u=l.useCallback(()=>t([]),[]),r=l.useMemo(()=>s.reduce((w,D)=>w+D.price*D.qty,0),[s]);return{items:s,add:a,remove:i,changeQty:c,clear:u,subtotal:r}}const $i=l.createContext(null),He=()=>{const s=l.useContext($i);if(!s)throw new Error("useToast must be used within ToastProvider");return s},Cx=({children:s})=>{const[t,a]=l.useState([]),i=l.useCallback(r=>{a(w=>w.filter(D=>D.id!==r))},[]),c=l.useCallback((r,w,D)=>{const U=Math.random().toString(36).slice(2),v={id:U,message:r,type:w,title:D==null?void 0:D.title,duration:(D==null?void 0:D.duration)??3e3};a(N=>[...N,v]),v.duration&&v.duration>0&&setTimeout(()=>i(U),v.duration)},[i]),u=l.useMemo(()=>({show:(r,w)=>c(r,(w==null?void 0:w.type)??"info",w),success:(r,w)=>c(r,"success",w),error:(r,w)=>c(r,"error",w),info:(r,w)=>c(r,"info",w),warning:(r,w)=>c(r,"warning",w)}),[c]);return e.jsxs($i.Provider,{value:u,children:[s,e.jsx(Dx,{items:t,onClose:i})]})},Ax={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},Ix={success:"âœ”",error:"âœ–",info:"â„¹",warning:"âš "},Dx=({items:s,onClose:t})=>(l.useEffect(()=>{},[]),e.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[e.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:s.map(a=>e.jsx("div",{className:`pointer-events-auto ${Ax[a.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-xl leading-none",children:Ix[a.type]}),e.jsxs("div",{className:"flex-1",children:[a.title&&e.jsx("div",{className:"font-bold",children:a.title}),e.jsx("div",{className:"text-sm",children:a.message})]}),e.jsx("button",{onClick:()=>t(a.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:"Ã—"})]})},a.id))}),e.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),Tx=(s,t)=>{const a=[];for(let i=0;i<s.length;i+=t)a.push(s.slice(i,i+t));return a},Rx=()=>{var le;const[s,t]=l.useState([]),[a,i]=l.useState(!0),[c,u]=l.useState(null),[r,w]=l.useState(null),[D,U]=l.useState(!0),[v,N]=l.useState(!1),[E,A]=l.useState(null),[j,z]=l.useState(0),[p,f]=l.useState(""),[L,$]=l.useState("all"),[g,F]=l.useState("all"),O=l.useRef(null),{add:B,subtotal:T,items:P,changeQty:m}=Ea(),{user:o,role:R}=Ee(),I=He(),[q]=Aa(),x=q.get("restaurant"),b=1.75,y=l.useMemo(()=>{const G=new Set;return s.forEach(Z=>{Z.category&&G.add(Z.category)}),["all",...Array.from(G)]},[s]),d=l.useMemo(()=>{let G=[...s];if(L!=="all"&&(G=G.filter(Z=>Z.category===L)),p.trim()){const Z=p.toLowerCase();G=G.filter(ne=>{var ce,Ne;return ne.name.toLowerCase().includes(Z)||((ce=ne.description)==null?void 0:ce.toLowerCase().includes(Z))||((Ne=ne.category)==null?void 0:Ne.toLowerCase().includes(Z))})}switch(g){case"popular":G.sort((Z,ne)=>(ne.orderCount||0)-(Z.orderCount||0));break;case"price_low":G.sort((Z,ne)=>Z.price-ne.price);break;case"price_high":G.sort((Z,ne)=>ne.price-Z.price);break;case"new":G.sort((Z,ne)=>{var Y,te,de,oe,ge,ke;const ce=((de=(te=(Y=Z.createdAt)==null?void 0:Y.toDate)==null?void 0:te.call(Y))==null?void 0:de.getTime())||0;return(((ke=(ge=(oe=ne.createdAt)==null?void 0:oe.toDate)==null?void 0:ge.call(oe))==null?void 0:ke.getTime())||0)-ce});break;case"available":G=G.filter(Z=>Z.available!==!1);break}return G},[s,L,p,g]),M=G=>{navigator.clipboard.writeText(G),I.success("ØªÙ… Ø§Ù„Ù†Ø³Ø®! ğŸ“‹")},k=()=>{navigator.share?navigator.share({title:(c==null?void 0:c.name)||"Ø£Ø³Ø±Ø© Ù…Ù†ØªØ¬Ø©",text:`ØªÙØ¶Ù„ Ø¨Ø²ÙŠØ§Ø±Ø© ${c==null?void 0:c.name} Ø¹Ù„Ù‰ Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª`,url:window.location.href}):M(window.location.href)};l.useEffect(()=>{if(!x)return;(async()=>{try{const Z=fe(ee(C,"storeFollowers"),je("restaurantId","==",x)),ne=await be(Z);if(z(ne.size),o){const ce=fe(ee(C,"storeFollowers"),je("restaurantId","==",x),je("followerId","==",o.uid)),Ne=await be(ce);Ne.empty||(N(!0),A(Ne.docs[0].id))}}catch(Z){console.warn("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©:",Z)}})()},[x,o]);const h=async()=>{var G;if(!o){I.warning("Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©");return}if(x)try{if(v&&E){await Ds(J(C,"storeFollowers",E)),N(!1),A(null),z(ne=>Math.max(0,ne-1));const Z=J(C,"restaurantStats",x);await me(Z,{followersCount:Ke(-1)}).catch(()=>{}),I.info("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©")}else{const Z=await Pe(ee(C,"storeFollowers"),{followerId:o.uid,followerName:o.displayName||((G=o.email)==null?void 0:G.split("@")[0])||"Ø¹Ù…ÙŠÙ„",restaurantId:x,createdAt:X()});N(!0),A(Z.id),z(Ne=>Ne+1);const ne=J(C,"restaurantStats",x);if((await Ce(ne)).exists())await me(ne,{followersCount:Ke(1)});else{const{setDoc:Ne}=await qs(async()=>{const{setDoc:Y}=await import("./vendor-firebase-CIIT5h2g.js").then(te=>te.Z);return{setDoc:Y}},[]);await Ne(J(C,"restaurantStats",x),{restaurantId:x,totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:0,appDownloads:0,followersCount:1,dailyViews:{},updatedAt:X()})}I.success("Ø£Ù†Øª Ø§Ù„Ø¢Ù† ØªØªØ§Ø¨Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØ¬Ø±! ğŸ’œ")}}catch(Z){console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©:",Z),I.error("Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}};l.useEffect(()=>{(async()=>{let G;if(x){(o==null?void 0:o.uid)===x?G=fe(ee(C,"menuItems"),je("ownerId","==",x)):G=fe(ee(C,"menuItems"),je("available","==",!0),je("ownerId","==",x));const de=await Ce(J(C,"restaurants",x));de.exists()&&u({id:de.id,...de.data()});try{const oe=fe(ee(C,"promotions"),je("ownerId","==",x),je("isActive","==",!0)),ge=await be(oe);if(!ge.empty){const ke=ge.docs.map(_e=>{var Ye,Qe;return{id:_e.id,..._e.data(),expiresAt:(Qe=(Ye=_e.data().expiresAt)==null?void 0:Ye.toDate)==null?void 0:Qe.call(Ye)}}),Ae=new Date,Ue=ke.filter(_e=>!_e.expiresAt||new Date(_e.expiresAt)>Ae);if(Ue.length>0){const _e=Ue[0];w(_e),await me(J(C,"promotions",_e.id),{viewsCount:Ke(1)})}}}catch{}}else G=fe(ee(C,"menuItems"),je("available","==",!0));const ne=(await be(G)).docs.map(te=>({id:te.id,...te.data()})),ce=[...new Set(ne.map(te=>te.ownerId).filter(Boolean))],Ne=new Map;if(ce.length>0){const te=Tx(ce,30);for(const de of te){const oe=fe(ee(C,"restaurants"),je(Bc(),"in",de));(await be(oe)).docs.forEach(ke=>Ne.set(ke.id,{id:ke.id,...ke.data()}))}}const Y=ne.map(te=>({...te,restaurant:te.ownerId?Ne.get(te.ownerId):void 0}));t(Y),i(!1)})()},[x]);const S=G=>P.find(Z=>Z.id===G),V=G=>{var de,oe,ge;if(!G.ownerId){I.warning("âš ï¸ Ø§Ù„ØµÙ†Ù ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨Ù…Ø·Ø¹Ù…");return}const Z=(de=P[0])==null?void 0:de.ownerId;if(Z&&Z!==G.ownerId){I.warning("âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø·Ø¹Ù… ÙÙŠ Ù†ÙØ³ Ø§Ù„Ø·Ù„Ø¨");return}const ne=G.discountPercent&&G.discountPercent>0,ce=((ge=(oe=G.discountExpiresAt)==null?void 0:oe.toDate)==null?void 0:ge.call(oe))||(G.discountExpiresAt?new Date(G.discountExpiresAt):null),Ne=ne&&(!ce||ce>new Date),Y=G.price+b,te=Ne?Y-Y*((G.discountPercent||0)/100):Y;B({id:G.id,name:G.name,price:te,ownerId:G.ownerId}),I.success("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© âœ…")},Q=G=>{O.current&&O.current.scrollBy({left:G==="left"?-200:200,behavior:"smooth"})};if(a)return e.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center bg-gradient-to-b from-sky-50 to-white gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-sky-200 rounded-full"}),e.jsx("div",{className:"w-20 h-20 border-4 border-sky-500 border-t-transparent rounded-full animate-spin absolute inset-0"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sky-600 text-lg font-bold mb-1",children:"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ÙŠÙˆ"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Ù„Ø­Ø¸Ø§Øª..."})]})]});const ie=(c==null?void 0:c.isOpen)!==!1,re=o&&x===o.uid,ye=!o||R==="customer"||R==="admin"||R==="developer"||R==="owner"&&!re||!R,ue=P.reduce((G,Z)=>G+Z.qty,0),se=(G=>{switch(G){case"gold":return{label:"Ø°Ù‡Ø¨ÙŠ",bg:"from-yellow-400 to-amber-500",icon:"ğŸ‘‘"};case"silver":return{label:"ÙØ¶ÙŠ",bg:"from-gray-300 to-gray-400",icon:"ğŸ¥ˆ"};default:return{label:"Ø¨Ø±ÙˆÙ†Ø²ÙŠ",bg:"from-orange-400 to-orange-500",icon:"ğŸ¥‰"}}})(c==null?void 0:c.sellerTier),pe=[{value:"all",label:"Ø§Ù„ÙƒÙ„",icon:e.jsx(ut,{className:"w-4 h-4"})},{value:"popular",label:"Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§",icon:e.jsx(Yt,{className:"w-4 h-4"})},{value:"price_low",label:"Ø§Ù„Ø£Ø±Ø®Øµ",icon:e.jsx(Bs,{className:"w-4 h-4 rotate-180"})},{value:"price_high",label:"Ø§Ù„Ø£ØºÙ„Ù‰",icon:e.jsx(Bs,{className:"w-4 h-4"})},{value:"new",label:"Ø¬Ø¯ÙŠØ¯",icon:e.jsx(ps,{className:"w-4 h-4"})},{value:"available",label:"Ù…ØªÙˆÙØ± Ø§Ù„Ø¢Ù†",icon:e.jsx(Ie,{className:"w-4 h-4"})}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-200 via-slate-100 to-slate-200 pb-32 -mx-4 -mt-4",children:[!ie&&!re&&e.jsxs("div",{className:"bg-gradient-to-l from-red-500 to-rose-600 text-white p-4 flex items-center justify-center gap-3 shadow-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Ut,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-lg block",children:"Ø§Ù„Ù…ØªØ¬Ø± Ù…ØºÙ„Ù‚ Ø­Ø§Ù„ÙŠØ§Ù‹"}),e.jsx("span",{className:"text-white/80 text-sm",children:"Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"})]})]}),re&&e.jsxs("div",{className:"bg-gradient-to-l from-emerald-500 to-teal-600 text-white p-4 shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Ns,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold block",children:"Ù‡Ø°Ø§ Ù…ØªØ¬Ø±Ùƒ!"}),e.jsxs("span",{className:"text-white/80 text-sm",children:["Ø£Ù†Øª ØªØ±Ù‰ ",s.length," ØµÙ†Ù (",s.filter(G=>G.available!==!1).length," Ù…ØªØ§Ø­)"]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(ae,{to:"/owner/menu",className:"flex-1 bg-white text-emerald-600 px-4 py-2.5 rounded-xl font-bold hover:bg-gray-100 transition flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(ut,{className:"w-4 h-4"}),"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ÙŠÙˆ"]}),e.jsx(ae,{to:"/owner/edit",className:"flex-1 bg-white/20 text-white px-4 py-2.5 rounded-xl font-bold hover:bg-white/30 transition flex items-center justify-center gap-2",children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ØªØ¬Ø±"}),e.jsxs(ae,{to:"/",className:"flex-1 bg-white/20 text-white px-4 py-2.5 rounded-xl font-bold hover:bg-white/30 transition flex items-center justify-center gap-2",children:["Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",e.jsx(Es,{className:"w-4 h-4"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-56 sm:h-72 relative overflow-hidden",children:[c!=null&&c.coverUrl?e.jsx("img",{src:c.coverUrl,alt:"ØºÙ„Ø§Ù",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-sky-400 via-sky-500 to-sky-600"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-56 h-56 bg-sky-300/10 rounded-full translate-y-1/2 -translate-x-1/2 blur-2xl"}),e.jsxs(ae,{to:"/restaurants",className:"absolute top-4 right-4 flex items-center gap-2 bg-white/90 backdrop-blur-sm text-gray-700 px-4 py-2.5 rounded-xl text-sm font-bold hover:bg-white transition shadow-lg",children:[e.jsx(Es,{className:"w-4 h-4"}),"Ø±Ø¬ÙˆØ¹"]}),e.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:[!re&&e.jsxs("button",{onClick:h,className:`flex items-center gap-2 px-4 py-2.5 backdrop-blur-sm rounded-xl font-bold transition shadow-lg ${v?"bg-pink-500 text-white hover:bg-pink-600":"bg-white/90 text-gray-700 hover:bg-white"}`,children:[e.jsx(ht,{className:`w-5 h-5 ${v?"fill-white":""}`}),e.jsx("span",{className:"text-sm",children:v?"Ù…ØªØ§Ø¨ÙØ¹":"Ù…ØªØ§Ø¨Ø¹Ø©"})]}),e.jsx("button",{onClick:k,className:"p-3 bg-white/90 backdrop-blur-sm rounded-xl text-gray-700 hover:bg-white transition shadow-lg",children:e.jsx(nr,{className:"w-5 h-5"})})]}),c&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-2xl bg-white p-1 shadow-2xl",children:c.logoUrl?e.jsx("img",{src:c.logoUrl,alt:c.name,className:"w-full h-full rounded-xl object-cover"}):e.jsx("div",{className:"w-full h-full rounded-xl bg-gradient-to-br from-sky-100 to-sky-200 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ğŸ½ï¸"})})}),(c.isVerified||c.licenseStatus==="approved")&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center border-3 border-white shadow-lg",children:e.jsx(Ie,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"flex-1 pb-1",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-white mb-1 drop-shadow-lg",children:c.name}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[ie?e.jsxs("span",{className:"bg-emerald-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg flex items-center gap-1 shadow",children:[e.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"Ù…ØªØ§Ø­ Ø§Ù„Ø¢Ù†"]}):e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow",children:"Ù…ØºÙ„Ù‚"}),e.jsxs("span",{className:"bg-white/90 backdrop-blur-sm text-gray-700 text-xs font-bold px-3 py-1.5 rounded-lg flex items-center gap-1 shadow",children:[e.jsx(ls,{className:"w-4 h-4 text-amber-500 fill-amber-500"}),((le=c.averageRating)==null?void 0:le.toFixed(1))||"0.0"]}),e.jsxs("span",{className:`bg-gradient-to-r ${se.bg} text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow`,children:[se.icon," ",se.label]}),c.city&&e.jsxs("span",{className:"bg-white/90 backdrop-blur-sm text-gray-600 text-xs font-medium px-3 py-1.5 rounded-lg flex items-center gap-1 shadow",children:[e.jsx(Ze,{className:"w-3 h-3"}),c.city]})]})]})]})})]}),c&&e.jsx("div",{className:"mx-4 -mt-4 relative z-10",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-4",children:e.jsxs("div",{className:"grid grid-cols-4 divide-x divide-gray-100 divide-x-reverse",children:[e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-pink-50 rounded-xl flex items-center justify-center",children:e.jsx(ht,{className:"w-5 h-5 text-pink-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:j}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Ù…ØªØ§Ø¨Ø¹"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-amber-50 rounded-xl flex items-center justify-center",children:e.jsx(ut,{className:"w-5 h-5 text-amber-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:s.length}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ØµÙ†Ù"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-emerald-50 rounded-xl flex items-center justify-center",children:e.jsx(Me,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:c.totalOrders||0}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Ø·Ù„Ø¨"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-sky-50 rounded-xl flex items-center justify-center",children:e.jsx(Ge,{className:"w-5 h-5 text-sky-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:c.onTimeDeliveryRate?`${Math.round(c.onTimeDeliveryRate)}%`:"â€”"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Ø§Ù„ØªØ²Ø§Ù…"})]})]})})})]}),(c==null?void 0:c.announcement)&&e.jsx("div",{className:"mx-4 mt-4",children:e.jsxs("div",{className:"bg-gradient-to-l from-sky-50 to-sky-100 border border-sky-200 rounded-2xl p-4 flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-sky-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Us,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sky-900 font-medium leading-relaxed",children:c.announcement})})]})}),r&&D&&e.jsxs("div",{className:"mx-4 mt-6 bg-gradient-to-r from-violet-500 via-purple-500 to-pink-500 rounded-2xl shadow-xl overflow-hidden relative",children:[e.jsx("button",{onClick:()=>U(!1),className:"absolute top-3 left-3 z-10 p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:e.jsx(Oe,{className:"w-4 h-4"})}),e.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1.5 px-3 py-1.5 bg-white text-purple-600 text-xs font-bold rounded-full shadow",children:[e.jsx(Us,{className:"w-3.5 h-3.5"}),"Ø¥Ø¹Ù„Ø§Ù†"]}),r.mediaUrl&&e.jsx(Ra,{src:r.mediaUrl,alt:"Ø¥Ø¹Ù„Ø§Ù†",className:"w-full h-40"}),e.jsxs("div",{className:"p-4",children:[r.title&&e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:r.title}),r.description&&e.jsx("p",{className:"text-white/80 text-sm",children:r.description})]})]}),e.jsxs("div",{className:"px-4 mt-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† ØµÙ†Ù...",value:p,onChange:G=>f(G.target.value),className:"w-full pr-12 pl-12 py-4 bg-white rounded-2xl border-2 border-gray-100 focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-lg shadow-sm"}),p&&e.jsx("button",{onClick:()=>f(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide",children:pe.map(G=>e.jsxs("button",{onClick:()=>F(G.value),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all ${g===G.value?"bg-sky-500 text-white shadow-lg shadow-sky-200":"bg-white text-gray-600 border border-gray-200 hover:border-sky-300"}`,children:[G.icon,G.label]},G.value))}),y.length>1&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>Q("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 bg-gradient-to-l from-sky-50 via-sky-50 to-transparent flex items-center justify-start",children:e.jsx(ta,{className:"w-5 h-5 text-gray-500"})}),e.jsx("div",{ref:O,className:"flex items-center gap-2 overflow-x-auto px-8 py-2 scrollbar-hide scroll-smooth",children:y.map(G=>e.jsx("button",{onClick:()=>$(G),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all ${L===G?"bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-200":"bg-white text-gray-600 border border-gray-200 hover:border-sky-300 hover:bg-sky-50"}`,children:G==="all"?"ğŸ½ï¸ Ø§Ù„ÙƒÙ„":G},G))}),e.jsx("button",{onClick:()=>Q("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 bg-gradient-to-r from-sky-50 via-sky-50 to-transparent flex items-center justify-end",children:e.jsx(pt,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-sky-100 to-blue-100 rounded-2xl flex items-center justify-center shadow-sm",children:e.jsx(ut,{className:"w-6 h-6 text-sky-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[d.length," ØµÙ†Ù",re&&` â€¢ ${s.filter(G=>G.available===!1).length} ØºÙŠØ± Ù…ØªØ§Ø­`]})]})]}),re&&e.jsxs(ae,{to:"/owner/menu",className:"flex items-center gap-2 px-4 py-2 bg-sky-100 text-sky-600 rounded-xl font-medium hover:bg-sky-200 transition",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù"]})]}),d.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-3xl border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Qs,{className:"w-10 h-10 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 text-lg font-bold mb-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ØµÙ†Ø§Ù"}),e.jsx("p",{className:"text-gray-400",children:"Ø¬Ø±Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„ÙÙ„ØªØ± Ø£Ùˆ Ø§Ù„Ø¨Ø­Ø«"}),e.jsx("button",{onClick:()=>{f(""),$("all"),F("all")},className:"mt-4 px-6 py-2 bg-sky-100 text-sky-600 rounded-xl font-medium hover:bg-sky-200 transition",children:"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†"})]}):L==="all"&&!p?e.jsxs("div",{className:"space-y-8",children:[y.filter(G=>G!=="all").map(G=>{const Z=d.filter(ne=>ne.category===G);return Z.length===0?null:e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 px-5 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-xl",children:"ğŸ½ï¸"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:G}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Z.length," ØµÙ†Ù"]})]})]}),re&&e.jsxs("span",{className:"text-xs text-gray-400",children:[Z.filter(ne=>ne.available===!1).length," ØºÙŠØ± Ù…ØªØ§Ø­"]})]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:Z.map(ne=>e.jsx(qr,{item:ne,isOwnStore:re,canOrder:ye,isStoreOpen:ie,getItemInCart:S,handleAdd:V,changeQty:m,SERVICE_FEE_PER_ITEM:b},ne.id))})})]},G)}),(()=>{const G=d.filter(Z=>!Z.category);return G.length===0?null:e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 px-5 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-xl",children:"ğŸ“¦"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Ø£ØµÙ†Ø§Ù Ø£Ø®Ø±Ù‰"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[G.length," ØµÙ†Ù"]})]})]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:G.map(Z=>e.jsx(qr,{item:Z,isOwnStore:re,canOrder:ye,isStoreOpen:ie,getItemInCart:S,handleAdd:V,changeQty:m,SERVICE_FEE_PER_ITEM:b},Z.id))})})]})})()]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:d.map(G=>e.jsx(qr,{item:G,isOwnStore:re,canOrder:ye,isStoreOpen:ie,getItemInCart:S,handleAdd:V,changeQty:m,SERVICE_FEE_PER_ITEM:b},G.id))})]}),ue>0&&ye&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4 pb-6 bg-gradient-to-t from-white via-white/95 to-transparent",children:e.jsxs(ae,{to:"/checkout",className:"flex items-center justify-between w-full max-w-lg mx-auto px-6 py-4 rounded-2xl bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-2xl shadow-sky-300/50 font-bold hover:from-sky-600 hover:to-blue-700 transition-all transform hover:scale-[1.02] active:scale-[0.98]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(ns,{className:"w-6 h-6"})}),e.jsx("span",{className:"absolute -top-2 -right-2 w-6 h-6 bg-amber-400 text-sky-900 text-sm font-black rounded-full flex items-center justify-center shadow-lg",children:ue})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-lg font-bold",children:"Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©"}),e.jsxs("span",{className:"block text-sky-100 text-sm",children:[ue," Ù…Ù†ØªØ¬"]})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"block text-2xl font-black",children:T.toFixed(2)}),e.jsx("span",{className:"block text-sky-100 text-sm",children:"Ø±.Ø³"})]})]})})]})},qr=({item:s,isOwnStore:t,canOrder:a,isStoreOpen:i,getItemInCart:c,handleAdd:u,changeQty:r,SERVICE_FEE_PER_ITEM:w})=>{var j,z;const D=c(s.id),U=s.discountPercent&&s.discountPercent>0,v=((z=(j=s.discountExpiresAt)==null?void 0:j.toDate)==null?void 0:z.call(j))||(s.discountExpiresAt?new Date(s.discountExpiresAt):null),N=U&&(!v||v>new Date),E=s.price+w,A=N?E-E*((s.discountPercent||0)/100):E;return e.jsxs("div",{className:`bg-white rounded-2xl overflow-hidden border shadow-sm hover:shadow-xl transition-all duration-300 group ${s.available===!1?"border-red-200 opacity-75":"border-gray-100 hover:border-sky-200"}`,children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden",children:[e.jsx(Ra,{src:s.imageUrl,alt:s.name,className:`w-full h-full group-hover:scale-110 transition-transform duration-500 ${s.available===!1?"grayscale":""}`,fallback:e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:e.jsx("span",{className:"text-5xl opacity-30",children:"ğŸ½ï¸"})})}),s.available===!1&&t&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow-lg",children:"ğŸš« ØºÙŠØ± Ù…ØªØ§Ø­"})}),N&&s.available!==!1&&e.jsxs("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2.5 py-1 rounded-lg shadow-lg",children:["Ø®ØµÙ… ",s.discountPercent,"%"]}),(s.orderCount||0)>10&&s.available!==!1&&e.jsxs("div",{className:"absolute top-2 left-2 bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-lg shadow flex items-center gap-1",children:[e.jsx(Yt,{className:"w-3 h-3"}),"Ø´Ø§Ø¦Ø¹"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-1 line-clamp-1",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("span",{className:`text-lg font-black ${s.available===!1?"text-gray-400":"text-sky-600"}`,children:[A.toFixed(0)," Ø±.Ø³"]}),N&&e.jsx("span",{className:"text-sm text-gray-400 line-through",children:E.toFixed(0)})]}),a&&i&&s.available!==!1&&e.jsx(e.Fragment,{children:D?e.jsxs("div",{className:"flex items-center justify-between bg-sky-50 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>r(s.id,D.qty-1),className:"w-9 h-9 bg-white rounded-lg flex items-center justify-center text-sky-600 shadow-sm hover:bg-sky-100 transition",children:e.jsx(Gn,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-lg font-black text-sky-600",children:D.qty}),e.jsx("button",{onClick:()=>u(s),className:"w-9 h-9 bg-sky-500 rounded-lg flex items-center justify-center text-white shadow-lg hover:bg-sky-600 transition",children:e.jsx(Cs,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>u(s),className:"w-full py-2.5 rounded-xl font-bold text-sm bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-200 hover:shadow-xl hover:from-sky-600 hover:to-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Ø£Ø¶Ù"]})}),a&&!i&&e.jsxs("div",{className:"w-full py-2.5 rounded-xl font-bold text-sm bg-gray-100 text-gray-400 text-center flex items-center justify-center gap-2",children:[e.jsx(Ut,{className:"w-4 h-4"}),"Ù…ØºÙ„Ù‚"]})]})]})},Ex=.0157,Px=5,_x=()=>{const{items:s,subtotal:t,remove:a,clear:i,changeQty:c}=Ea(),u=l.useMemo(()=>s.reduce((w,D)=>D.price>=Px?w+Ex*D.qty:w,0),[s]),r=t+u;return s.length===0?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 flex flex-col items-center justify-center py-20 px-4",children:[e.jsx("div",{className:"w-24 h-24 bg-white/80 backdrop-blur rounded-full flex items-center justify-center mb-6 shadow-lg",children:e.jsx(ns,{className:"w-12 h-12 text-sky-400"})}),e.jsx("h2",{className:"text-xl font-bold text-sky-800 mb-2",children:"Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©"}),e.jsx("p",{className:"text-sky-600/70 mb-6",children:"Ø£Ø¶Ù Ø¨Ø¹Ø¶ Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„Ù„Ø°ÙŠØ°Ø©!"}),e.jsxs(ae,{to:"/restaurants",className:"flex items-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-sky-200/50 hover:shadow-xl transition",children:[e.jsx(lr,{className:"w-5 h-5"}),"ØªØµÙØ­ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…"]})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 py-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[e.jsx(ns,{className:"w-6 h-6 text-primary"}),"Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª",e.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:s.length})]})}),e.jsx("div",{className:"space-y-3",children:s.map(w=>e.jsxs("div",{className:"flex items-center gap-3 glass-card p-3 sm:p-4 rounded-xl",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-3xl",children:"ğŸŸ"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:w.name}),e.jsxs("p",{className:"text-primary font-bold text-sm",children:[w.price.toFixed(2)," Ø±.Ø³"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("button",{onClick:()=>w.qty>1?c(w.id,w.qty-1):a(w.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:e.jsx(Gn,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-lg w-8 text-center",children:w.qty}),e.jsx("button",{onClick:()=>c(w.id,w.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:e.jsx(Cs,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(w.price*w.qty).toFixed(2)," Ø±.Ø³"]}),e.jsx("button",{onClick:()=>a(w.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:e.jsx(ys,{className:"w-4 h-4"})})]})]},w.id))}),e.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sky-700",children:[e.jsx("span",{children:"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ"}),e.jsxs("span",{className:"font-bold",children:[t.toFixed(2)," Ø±.Ø³"]})]}),u>0&&e.jsxs("div",{className:"flex justify-between text-gray-500",children:[e.jsx("span",{children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"}),e.jsxs("span",{className:"font-semibold",children:[u.toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex justify-between text-amber-600",children:[e.jsx("span",{children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx("span",{className:"font-semibold text-sm",children:"ØªÙØ­Ø¯Ø¯ Ø¹Ù†Ø¯ Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨"})]}),e.jsx("div",{className:"h-px bg-sky-200/50"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-lg text-sky-900",children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ"}),e.jsxs("span",{className:"font-bold text-xl text-sky-600",children:[r.toFixed(2)," Ø±.Ø³"]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"ğŸ’¡ Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ ÙŠØ­Ø¯Ø¯Ù‡Ø§ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ Ø£Ùˆ Ø§Ù„Ø£Ø³Ø±Ø© Ø­Ø³Ø¨ Ù…ÙˆÙ‚Ø¹Ùƒ"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[e.jsxs("button",{onClick:i,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl glass-light text-sky-700 font-semibold hover:bg-white/70 transition",children:[e.jsx(ys,{className:"w-5 h-5"}),"ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø©"]}),e.jsx(ae,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg shadow-green-200/50 hover:shadow-xl hover:scale-[1.02] transition",children:"âœ… Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨"})]})]})})},Za=5,Fx=15*60*1e3,$x=10*60*1e3,In=async s=>{try{await Pe(ee(C,"loginAttempts"),{...s,timestamp:X(),createdAt:new Date().toISOString()})}catch(t){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„:",t)}},Oi=async s=>{try{const t=new Date(Date.now()-$x),a=fe(ee(C,"loginAttempts"),je("email","==",s.toLowerCase()),je("status","==","failed"),je("timestamp",">=",Da.fromDate(t)));return(await be(a)).size}catch(t){return console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„:",t),0}},Ox=async(s,t=10)=>{try{const a=fe(ee(C,"loginAttempts"),je("userId","==",s),es("timestamp","desc"),js(t));return(await be(a)).docs.map(c=>{var u,r;return{id:c.id,...c.data(),timestamp:((r=(u=c.data().timestamp)==null?void 0:u.toDate)==null?void 0:r.call(u))||new Date(c.data().createdAt)}})}catch(a){return console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„:",a),[]}},zr=async s=>{try{const t=fe(ee(C,"users"),je("email","==",s.toLowerCase())),a=await be(t);if(!a.empty){const r=a.docs[0].data().security;if(r!=null&&r.isDeactivated)return{isBlocked:!0,remainingAttempts:0,message:"Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…ÙˆÙ‚ÙˆÙ. ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©."};if(r!=null&&r.lockedUntil){const w=r.lockedUntil instanceof Da?r.lockedUntil.toDate():new Date(r.lockedUntil);if(w>new Date){const D=Math.ceil((w.getTime()-Date.now())/6e4);return{isBlocked:!0,remainingAttempts:0,blockedUntil:w,message:`Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ø­Ø¸ÙˆØ± Ù…Ø¤Ù‚ØªØ§Ù‹. Ø­Ø§ÙˆÙ„ Ø¨Ø¹Ø¯ ${D} Ø¯Ù‚ÙŠÙ‚Ø©.`}}}}const i=await Oi(s),c=Math.max(0,Za-i);return i>=Za?{isBlocked:!0,remainingAttempts:0,message:"ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹."}:{isBlocked:!1,remainingAttempts:c}}catch(t){return console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Rate Limit:",t),{isBlocked:!1,remainingAttempts:Za}}},Lx=async s=>{try{const t=fe(ee(C,"users"),je("email","==",s.toLowerCase())),a=await be(t);if(!a.empty){const i=a.docs[0];await Oi(s)+1>=Za?await me(J(C,"users",i.id),{"security.failedAttempts":Ke(1),"security.lastFailedAttempt":X(),"security.lockedUntil":Da.fromDate(new Date(Date.now()+Fx))}):await me(J(C,"users",i.id),{"security.failedAttempts":Ke(1),"security.lastFailedAttempt":X()})}}catch(t){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ÙØ§Ø´Ù„Ø©:",t)}},Mx=async s=>{try{await me(J(C,"users",s),{"security.failedAttempts":0,"security.lockedUntil":null,"security.lastLogin":X()})}catch(t){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª:",t)}},Li=async s=>{try{await Pe(ee(C,"auditLogs"),{...s,timestamp:X(),createdAt:new Date().toISOString()})}catch(t){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø³Ø¬Ù„ Audit:",t)}},Ux=s=>{switch(s){case"owner":return"/owner";case"admin":return"/admin";case"developer":return"/developer";case"courier":return"/courier";case"supervisor":return"/supervisor";case"social_media":return"/social-media";case"support":return"/support";case"accountant":return"/accounting";default:return"/"}},Bx=()=>{const{user:s,role:t,loading:a}=Ee(),i=os();l.useEffect(()=>{!a&&s&&t&&i(Ux(t),{replace:!0})},[a,s,t,i]);const[c,u]=l.useState(""),[r,w]=l.useState(""),[D,U]=l.useState(!1),[v,N]=l.useState(!1),[E,A]=l.useState(""),[j,z]=l.useState(!1),[p,f]=l.useState(!1),[L,$]=l.useState(""),[g,F]=l.useState(5),O=os(),B=Ps(),T=He();l.useEffect(()=>{const R=setTimeout(async()=>{if(c&&c.includes("@")){const I=await zr(c);f(I.isBlocked),$(I.message||""),F(I.remainingAttempts)}},500);return()=>clearTimeout(R)},[c]);const P=async o=>{var I;o.preventDefault();const R=await zr(c);if(R.isBlocked){B.error(R.message||"ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„",{title:"Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ø­Ø¸ÙˆØ± Ù…Ø¤Ù‚ØªØ§Ù‹"}),f(!0),$(R.message||"");return}U(!0);try{const x=(await Vc(fs,c,r)).user.uid;await In({email:c.toLowerCase(),status:"success",userId:x,userAgent:navigator.userAgent}),await Mx(x),await Li({action:"login_success",performedBy:x,performedByName:c,details:"ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù†Ø§Ø¬Ø­"});const b=await Ce(J(C,"users",x));if(b.exists()){const y=b.data();if((I=y.security)!=null&&I.isDeactivated){T.error("Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…ÙˆÙ‚ÙˆÙ. ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©."),await fs.signOut();return}y.role==="owner"?O("/owner"):y.role==="admin"?O("/admin"):y.role==="developer"?O("/developer"):y.role==="courier"?O("/courier"):y.role==="supervisor"?O("/supervisor"):y.role==="social_media"?O("/social-media"):y.role==="support"?O("/support"):y.role==="accountant"?O("/accounting"):O("/")}else B.warning("Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Auth Ù„ÙƒÙ† Ù„Ø§ ØªÙˆØ¬Ø¯ Ù„Ù‡ Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Firestore")}catch(q){await In({email:c.toLowerCase(),status:"failed",errorCode:q.code,errorMessage:q.message,userAgent:navigator.userAgent}),await Lx(c);let x=q.message;q.code==="auth/user-not-found"?x="Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨ Ù…Ø³Ø¬Ù„ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ":q.code==="auth/wrong-password"?x="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©":q.code==="auth/invalid-email"?x="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­":q.code==="auth/too-many-requests"?x="ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹.":q.code==="auth/invalid-credential"&&(x="Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.");const b=await zr(c);F(b.remainingAttempts),b.isBlocked&&(f(!0),$(b.message||"")),B.error(x,{title:"Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",...b.remainingAttempts>0&&b.remainingAttempts<3&&{description:`ØªØ¨Ù‚Ù‰ ${b.remainingAttempts} Ù…Ø­Ø§ÙˆÙ„Ø© Ù‚Ø¨Ù„ Ø­Ø¸Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ø¤Ù‚ØªØ§Ù‹`}})}finally{U(!1)}},m=async o=>{if(o.preventDefault(),!E.trim()){T.warning("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ");return}z(!0);try{await zn(fs,E.trim().toLowerCase()),T.success("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±! ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨Ø±ÙŠØ¯Ùƒ ğŸ“§"),setTimeout(()=>{B.info("Ø¥Ø°Ø§ Ù„Ù… ØªØ¬Ø¯ Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ØºÙŠØ± Ø§Ù„Ù…Ø±ØºÙˆØ¨Ø© (Spam)",{title:"ğŸ’¡ Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©"})},1e3),N(!1),A("")}catch(R){console.error("Reset password error:",R),R.code==="auth/user-not-found"?T.error("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨ Ù…Ø³Ø¬Ù„ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"):R.code==="auth/invalid-email"?T.error("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­"):R.code==="auth/too-many-requests"?T.error("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ø§Øª ÙƒØ«ÙŠØ±Ø©ØŒ Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø«Ù… Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰"):T.error(`Ø­Ø¯Ø« Ø®Ø·Ø£: ${R.message}`)}finally{z(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 px-4",children:[e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:e.jsx("span",{className:"text-4xl",children:"  ğŸ"})}),e.jsx("h1",{className:"text-3xl font-black text-sky-600",children:"Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"}),e.jsx("p",{className:"text-sky-500 mt-1",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[p&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-4 flex items-start gap-3",children:[e.jsx(us,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-700 font-semibold text-sm",children:"Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ø­Ø¸ÙˆØ± Ù…Ø¤Ù‚ØªØ§Ù‹"}),e.jsx("p",{className:"text-red-600 text-xs mt-1",children:L})]})]}),!p&&g<3&&g>0&&e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-2xl p-4 flex items-start gap-3",children:[e.jsx(Ts,{className:"w-5 h-5 text-amber-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-700 font-semibold text-sm",children:"ØªÙ†Ø¨ÙŠÙ‡ Ø£Ù…Ù†ÙŠ"}),e.jsxs("p",{className:"text-amber-600 text-xs mt-1",children:["ØªØ¨Ù‚Ù‰ ",g," Ù…Ø­Ø§ÙˆÙ„Ø© ÙÙ‚Ø· Ù‚Ø¨Ù„ Ø­Ø¸Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ø¤Ù‚ØªØ§Ù‹"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{type:"email",placeholder:"Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:c,onChange:o=>u(o.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ut,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{type:"password",placeholder:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:r,onChange:o=>w(o.target.value)})]}),e.jsx("div",{className:"text-left",children:e.jsx("button",{type:"button",onClick:()=>{N(!0),A(c)},className:"text-sm text-sky-500 hover:text-sky-700 font-medium hover:underline",children:"ğŸ”‘ Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ"})}),e.jsx("button",{disabled:D||p,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100`,children:D?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±Ù Ø§Ù„Ø¯Ø®ÙˆÙ„..."]}):p?e.jsxs(e.Fragment,{children:[e.jsx(us,{className:"w-5 h-5"}),"Ù…Ø­Ø¸ÙˆØ± Ù…Ø¤Ù‚ØªØ§Ù‹"]}):e.jsxs(e.Fragment,{children:[e.jsx(Kn,{className:"w-5 h-5"}),"Ø¯Ø®ÙˆÙ„"]})})]}),e.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ"," ",e.jsx(ae,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¢Ù† âœ¨"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-sky-100",children:[e.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"Ø¹Ù…ÙŠÙ„ ØªØ±ÙŠØ¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ØŸ"}),e.jsx(ae,{to:"/customer-login",className:"block w-full text-center bg-green-50 hover:bg-green-100 text-green-700 font-semibold py-3 px-4 rounded-2xl transition",children:"ğŸ“± Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„"})]})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-8 relative",children:[e.jsx("button",{onClick:()=>N(!1),className:"absolute top-4 left-4 p-2 hover:bg-gray-100 rounded-full transition",children:e.jsx(Es,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(bl,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ"}),e.jsx("p",{className:"text-gray-500 mt-2 text-sm",children:"Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ³Ù†Ø±Ø³Ù„ Ù„Ùƒ Ø±Ø§Ø¨Ø· Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-amber-500"}),e.jsx("input",{type:"email",placeholder:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",className:`w-full rounded-2xl p-4 pr-12 bg-amber-50 text-gray-900 border-2 border-amber-100 
                             focus:outline-none focus:border-amber-400 focus:ring-4 focus:ring-amber-100 transition-all`,value:E,onChange:o=>A(o.target.value),autoFocus:!0})]}),e.jsx("button",{type:"submit",disabled:j,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold p-4 rounded-2xl 
                           shadow-xl shadow-amber-300/50 transition-all hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed`,children:j?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{className:"w-5 h-5"}),"Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†"]})})]}),e.jsx("button",{onClick:()=>N(!1),className:"w-full mt-4 text-center text-gray-500 hover:text-gray-700 font-medium",children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"})]})})]})},Vx=()=>{const{user:s,role:t,loading:a}=Ee(),i=os();l.useEffect(()=>{!a&&s&&t&&i({owner:"/owner",admin:"/admin",developer:"/developer",courier:"/courier",supervisor:"/supervisor"}[t]||"/",{replace:!0})},[a,s,t,i]);const[c]=Aa(),u=c.get("ref_restaurant"),r=c.get("type"),[w,D]=l.useState(""),[U,v]=l.useState(""),[N,E]=l.useState(""),[A,j]=l.useState(""),[z,p]=l.useState(""),[f,L]=l.useState(""),[$,g]=l.useState(!1),[F,O]=l.useState(!1),B=os(),[T,P]=l.useState(!1),[m,o]=l.useState(!1),[R,I]=l.useState(!1);l.useEffect(()=>{(r==="customer"||r==="courier"||r==="owner")&&L(r)},[r]),l.useEffect(()=>{u&&L("customer")},[u]);const q=f==="owner"||f==="courier",x=d=>{L(d),g(!1)},b=async d=>{if(d.preventDefault(),!f)return alert("Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨");if(f==="owner"&&!A)return alert("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…");if(q&&!$)return alert("ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…");O(!0);try{const M=await Pt(fs,w,U);if(await Be(J(C,"users",M.user.uid),{name:N,email:w,role:f,restaurantName:f==="owner"?A:null,referredBy:u||null,createdAt:X()}),f==="owner"&&await Be(J(C,"restaurants",M.user.uid),{name:A||N||"Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯",ownerId:M.user.uid,email:w,phone:"",city:z||"",location:"",logoUrl:""},{merge:!0}),u&&f==="customer")try{await Pe(ee(C,"customerRegistrations"),{customerId:M.user.uid,customerName:N,customerEmail:w,restaurantId:u,registrationType:"website",createdAt:X()});const k=J(C,"restaurantStats",u);(await Ce(k)).exists()?await me(k,{registeredCustomers:Ke(1),updatedAt:X()}):await Be(k,{totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:1,appDownloads:0,dailyViews:{},updatedAt:X()}),await Pe(ee(C,"notifications"),{recipientId:u,title:"ğŸ‰ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ Ø³Ø¬Ù„ Ø¹Ø¨Ø± Ø±Ø§Ø¨Ø·Ùƒ!",message:`Ø§Ù„Ø¹Ù…ÙŠÙ„ "${N}" Ø³Ø¬Ù„ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ø¨Ø± Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ`,type:"new_customer_registration",read:!1,createdAt:X()})}catch(k){console.warn("Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©:",k)}B("/")}catch(M){alert(M.message)}finally{O(!1)}},y=[{value:"customer",label:"Ø¹Ù…ÙŠÙ„",icon:Ws,color:"sky"},{value:"courier",label:"Ù…Ù†Ø¯ÙˆØ¨",icon:Ve,color:"emerald"},{value:"owner",label:"ØµØ§Ø­Ø¨ Ù…Ø·Ø¹Ù…",icon:wt,color:"orange"}];return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 px-4 py-8",children:[T&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-sky-50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-bold text-lg",children:"Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…"})]}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-sky-100 rounded-full",children:e.jsx(Oe,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 text-sm leading-relaxed space-y-4",children:[e.jsx("h3",{className:"font-bold text-sky-600",children:"1. Ø§Ù„ØªØ¹Ø±ÙŠÙ"}),e.jsx("p",{children:"Ù…Ù†ØµØ© Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª Ù‡ÙŠ Ù…Ù†ØµØ© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ØªÙ‡Ø¯Ù Ø¥Ù„Ù‰ Ø¹Ø±Ø¶ ÙˆØªØ³ÙˆÙŠÙ‚ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø© ÙˆØ±Ø¨Ø·Ù‡Ø§ Ø¨Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ø¨Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚."}),e.jsx("h3",{className:"font-bold text-sky-600",children:"2. Ø§Ù„ØªØ³Ø¬ÙŠÙ„"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Ù…Ù†ØµØ© Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª Ù…Ø¬Ø§Ù†ÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„."}),e.jsx("li",{children:"Ù„Ø§ ÙŠØªÙ… ÙØ±Ø¶ Ø£ÙŠ Ø±Ø³ÙˆÙ… ØªØ³Ø¬ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø©."})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"3. ØªØ³Ø¹ÙŠØ± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ±Ø³ÙˆÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù†ØµØ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ØªÙ‚ÙˆÙ… Ø§Ù„Ø£Ø³Ø±Ø© Ø¨Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ù…Ù†ØªØ¬."}),e.jsxs("li",{children:["ØªÙˆØ§ÙÙ‚ Ø§Ù„Ø£Ø³Ø±Ø© Ø¹Ù„Ù‰ Ù‚ÙŠØ§Ù… Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø¥Ø¶Ø§ÙØ© Ø±Ø³ÙˆÙ… ØªØ´ØºÙŠÙ„ Ù‚Ø¯Ø±Ù‡Ø§ ",e.jsx("strong",{className:"text-sky-600",children:"1.75 Ø±ÙŠØ§Ù„"})," Ø¹Ù„Ù‰ ÙƒÙ„ Ù…Ù†ØªØ¬."]}),e.jsxs("li",{children:["Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø³Ø¹Ø± 1 Ø£Ùˆ 2 Ø±ÙŠØ§Ù„ØŒ ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© ",e.jsx("strong",{className:"text-sky-600",children:"0.25 Ø±ÙŠØ§Ù„"})," ÙÙ‚Ø·."]}),e.jsx("li",{children:"ÙŠØ¸Ù‡Ø± Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù„Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø¹Ù…ÙŠÙ„ Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø£Ù†Ù‡ Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬."}),e.jsx("li",{children:"Ù„Ø§ ÙŠØªÙ… Ø®ØµÙ… Ø£ÙŠ Ù…Ø¨Ø§Ù„Øº Ù…Ù† Ø¯Ø®Ù„ Ø§Ù„Ø£Ø³Ø±Ø©ØŒ ÙˆØ¬Ù…ÙŠØ¹ Ø±Ø³ÙˆÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù†ØµØ© ØªÙØ­Ù…Ù‘Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„."})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"4. Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ù„Ø¯ÙØ¹"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù„Ù„Ù…Ù†ØªØ¬ Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØ© Ø±Ø³ÙˆÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù†ØµØ©."}),e.jsx("li",{children:"Ù‚Ø¯ ÙŠØªÙ… Ø§Ø­ØªØ³Ø§Ø¨ Ø±Ø³ÙˆÙ… Ø£Ø®Ø±Ù‰ Ù…Ø«Ù„ Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ ÙˆØ¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ©."}),e.jsx("li",{children:"ØªØ­ØªÙØ¸ Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø­Ù‚ ØªØ­Ø¯ÙŠØ« Ø£Ùˆ Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø§Øª Ø£Ùˆ Ø±Ø³ÙˆÙ… Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©."})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"5. Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø©"}),e.jsx("p",{children:"ØªØªØ­Ù…Ù„ Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø© ÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø¹Ù†:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ³Ù„Ø§Ù…Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù"}),e.jsx("li",{children:"Ù†Ø¸Ø§ÙØ© ÙˆØªØ­Ø¶ÙŠØ± Ø§Ù„Ø·Ø¹Ø§Ù… ÙˆØ§Ù„ØªØºÙ„ÙŠÙ"}),e.jsx("li",{children:"Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ø§Ø´ØªØ±Ø§Ø·Ø§Øª Ø§Ù„ØµØ­ÙŠØ© Ø§Ù„Ù…Ø¹Ù…ÙˆÙ„ Ø¨Ù‡Ø§"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"6. Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù…Ù†ØµØ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ØªÙˆÙÙŠØ± Ù…Ù†ØµØ© ØªÙ‚Ù†ÙŠØ© Ù„Ù„ØªÙˆØ§ØµÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø³Ø± ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡"}),e.jsx("li",{children:"Ø§Ù„Ù…Ù†ØµØ© Ù„ÙŠØ³Øª Ø·Ø±ÙØ§Ù‹ ÙÙŠ Ø£ÙŠ Ø¹Ù‚Ø¯ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø³Ø±Ø© ÙˆØ§Ù„Ø¹Ù…ÙŠÙ„"}),e.jsx("li",{children:"Ø§Ù„Ù…Ù†ØµØ© ØºÙŠØ± Ù…Ø³Ø¤ÙˆÙ„Ø© Ø¹Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø£Ùˆ Ù…ÙˆØ«ÙˆÙ‚ÙŠØªÙ‡Ø§"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"7. Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsx("p",{children:"ØªØ­ØªÙØ¸ Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø­Ù‚ ØªØ¹Ù„ÙŠÙ‚ Ø£Ùˆ Ø¥Ù†Ù‡Ø§Ø¡ Ø£ÙŠ Ø­Ø³Ø§Ø¨ ÙŠØ®Ø§Ù„Ù Ø§Ù„Ø´Ø±ÙˆØ· Ø£Ùˆ ÙŠØ¶Ø± Ø¨Ø³Ù…Ø¹Ø© Ø§Ù„Ù…Ù†ØµØ© Ø£Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†."})]}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsx("button",{onClick:()=>P(!1),className:"w-full py-3 bg-sky-500 text-white font-bold rounded-xl hover:bg-sky-600 transition",children:"ÙÙ‡Ù…Øª âœ“"})})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-sky-50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[e.jsx(us,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-bold text-lg",children:"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©"})]}),e.jsx("button",{onClick:()=>o(!1),className:"p-2 hover:bg-sky-100 rounded-full",children:e.jsx(Oe,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 text-sm leading-relaxed space-y-4",children:[e.jsx("h3",{className:"font-bold text-sky-600",children:"1. Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"}),e.jsx("p",{children:"Ù†Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„ØªÙ‚Ø¯ÙŠÙ… Ø®Ø¯Ù…Ø§ØªÙ†Ø§:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„"}),e.jsx("li",{children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (Ø¹Ù†Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©)"}),e.jsx("li",{children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"2. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙˆØªÙ†ÙÙŠØ° Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("li",{children:"Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø¨Ø´Ø£Ù† Ø·Ù„Ø¨Ø§ØªÙƒ"}),e.jsx("li",{children:"ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("li",{children:"Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù‡Ù…Ø©"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"3. Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"}),e.jsx("p",{children:"Ù†Ø³ØªØ®Ø¯Ù… ØªÙ‚Ù†ÙŠØ§Øª Ø£Ù…Ø§Ù† Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ø­Ù…Ø§ÙŠØ© Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆÙ„Ø§ Ù†Ø´Ø§Ø±ÙƒÙ‡Ø§ Ù…Ø¹ Ø£Ø·Ø±Ø§Ù Ø«Ø§Ù„Ø«Ø© Ø¥Ù„Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø¶Ø±ÙˆØ±Ø© Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø®Ø¯Ù…Ø©."}),e.jsx("h3",{className:"font-bold text-sky-600",children:"4. Ø­Ù‚ÙˆÙ‚Ùƒ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Ø­Ù‚ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ"}),e.jsx("li",{children:"Ø­Ù‚ ØªØµØ­ÙŠØ­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©"}),e.jsx("li",{children:"Ø­Ù‚ Ø·Ù„Ø¨ Ø­Ø°Ù Ø­Ø³Ø§Ø¨Ùƒ ÙˆØ¨ÙŠØ§Ù†Ø§ØªÙƒ"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"5. Ø§Ù„ØªÙˆØ§ØµÙ„"}),e.jsx("p",{children:"Ù„Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª Ø­ÙˆÙ„ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©ØŒ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ."})]}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsx("button",{onClick:()=>o(!1),className:"w-full py-3 bg-sky-500 text-white font-bold rounded-xl hover:bg-sky-600 transition",children:"ÙÙ‡Ù…Øª âœ“"})})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-emerald-50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-600",children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-bold text-lg",children:"Ø´Ø±ÙˆØ· ÙˆØ£Ø­ÙƒØ§Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"})]}),e.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-emerald-100 rounded-full",children:e.jsx(Oe,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 text-sm leading-relaxed space-y-4",children:[e.jsx("h3",{className:"font-bold text-emerald-600",children:"1. ØµÙØ© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"}),e.jsx("p",{children:"ÙŠØ¹Ù…Ù„ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ÙƒÙ…Ù‚Ø§ÙˆÙ„ Ù…Ø³ØªÙ‚Ù„ ÙˆÙ„ÙŠØ³ Ù…ÙˆØ¸ÙØ§Ù‹ Ù„Ø¯Ù‰ Ø§Ù„Ù…Ù†ØµØ©. ÙŠØªØ­Ù…Ù„ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø¹Ù† ØªØµØ±ÙØ§ØªÙ‡."}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"2. Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Ø§Ù„Ø¹Ù…Ø± 18 Ø³Ù†Ø© ÙÙ…Ø§ ÙÙˆÙ‚"}),e.jsx("li",{children:"Ø±Ø®ØµØ© Ù‚ÙŠØ§Ø¯Ø© Ø³Ø§Ø±ÙŠØ© Ø§Ù„Ù…ÙØ¹ÙˆÙ„"}),e.jsx("li",{children:"Ù…Ø±ÙƒØ¨Ø© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„ØªÙˆØµÙŠÙ„"}),e.jsx("li",{children:"Ù‡Ø§ØªÙ Ø°ÙƒÙŠ Ù…Ø¹ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª"})]}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"3. Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ØªÙˆØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯"}),e.jsx("li",{children:"Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx("li",{children:"Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ø¨Ù„Ø·Ù Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„Ø£Ø³Ø±"}),e.jsx("li",{children:"Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ù…Ø±ÙˆØ±"})]}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"4. Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ÙˆØ§Ù„Ø±Ø³ÙˆÙ…"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ ÙŠØ­Ø¯Ø¯Ù‡Ø§ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ Ø£Ùˆ Ø§Ù„Ø£Ø³Ø±Ø©"}),e.jsxs("li",{children:["Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù†ØµØ©: ",e.jsx("strong",{children:"3.75 Ø±ÙŠØ§Ù„"})," Ù„ÙƒÙ„ Ø·Ù„Ø¨ ØªÙˆØµÙŠÙ„"]}),e.jsx("li",{children:"Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ØªÙØ¶Ø§Ù Ù„Ù„Ù…Ø­ÙØ¸Ø© ÙÙˆØ±Ø§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…"})]}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"5. Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÙŠØ¨Ø¯Ø£ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ Ø¨Ù€ 100 Ù†Ù‚Ø·Ø©"}),e.jsx("li",{children:"ØªÙØ®ØµÙ… Ù†Ù‚Ø§Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰ Ø£Ùˆ Ø§Ù„ØªØ£Ø®ÙŠØ±"}),e.jsx("li",{children:"ÙŠÙÙˆÙ‚Ù Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„ Ø§Ù„Ù†Ù‚Ø§Ø· Ù„Ù€ 30 Ø£Ùˆ Ø£Ù‚Ù„"})]}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"6. Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsx("p",{children:"ÙŠØ­Ù‚ Ù„Ù„Ù…Ù†ØµØ© Ø¥ÙŠÙ‚Ø§Ù Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ÙÙŠ Ø­Ø§Ù„Ø§Øª Ù…Ø®Ø§Ù„ÙØ© Ø§Ù„Ø´Ø±ÙˆØ· Ø£Ùˆ ØªÙ„Ù‚ÙŠ Ø´ÙƒØ§ÙˆÙ‰ Ù…ØªÙƒØ±Ø±Ø© Ø£Ùˆ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª."})]}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsx("button",{onClick:()=>I(!1),className:"w-full py-3 bg-emerald-500 text-white font-bold rounded-xl hover:bg-emerald-600 transition",children:"ÙÙ‡Ù…Øª âœ“"})})]})}),e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:e.jsx(ot,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ms,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"Ø§Ù„Ø§Ø³Ù…",value:N,onChange:d=>E(d.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„",type:"email",value:w,onChange:d=>D(d.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ut,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",type:"password",value:U,onChange:d=>v(d.target.value)})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:y.map(d=>{const M=d.icon,k=f===d.value;return e.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${k?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[e.jsx("input",{type:"radio",name:"role",value:d.value,className:"hidden",onChange:()=>x(d.value)}),e.jsx(M,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm font-bold",children:d.label})]},d.value)})}),f==="owner"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),e.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…",value:A,onChange:d=>j(d.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400 pointer-events-none"}),e.jsxs("select",{value:z,onChange:d=>p(d.target.value),className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all appearance-none cursor-pointer",children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"}),fr.map(d=>e.jsx("option",{value:d,children:d},d))]})]}),e.jsxs("div",{onClick:()=>g(!$),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${$?"bg-green-50 border-green-400":"bg-orange-50 border-orange-200 hover:border-orange-300"}`,children:[$?e.jsx(rn,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):e.jsx(ln,{className:"w-6 h-6 text-orange-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm leading-relaxed",children:[e.jsxs("span",{className:$?"text-green-700":"text-orange-700",children:["Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰"," "]}),e.jsx("button",{type:"button",onClick:d=>{d.stopPropagation(),P(!0)},className:"text-sky-600 hover:text-sky-800 font-bold underline",children:"Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…"}),e.jsxs("span",{className:$?"text-green-700":"text-orange-700",children:[" ","Ùˆ"," "]}),e.jsx("button",{type:"button",onClick:d=>{d.stopPropagation(),o(!0)},className:"text-sky-600 hover:text-sky-800 font-bold underline",children:"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©"}),e.jsxs("span",{className:$?"text-green-700":"text-orange-700",children:[" ","Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù…Ù†ØµØ© Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"]})]})]})]}),f==="courier"&&e.jsxs("div",{onClick:()=>g(!$),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${$?"bg-green-50 border-green-400":"bg-emerald-50 border-emerald-200 hover:border-emerald-300"}`,children:[$?e.jsx(rn,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):e.jsx(ln,{className:"w-6 h-6 text-emerald-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm leading-relaxed",children:[e.jsxs("span",{className:$?"text-green-700":"text-emerald-700",children:["Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰"," "]}),e.jsx("button",{type:"button",onClick:d=>{d.stopPropagation(),I(!0)},className:"text-emerald-600 hover:text-emerald-800 font-bold underline",children:"Ø´Ø±ÙˆØ· ÙˆØ£Ø­ÙƒØ§Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"}),e.jsxs("span",{className:$?"text-green-700":"text-emerald-700",children:[" ","ÙˆØ£ØªØ­Ù…Ù„ ÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© ÙƒÙ…Ù†Ø¯ÙˆØ¨ Ù…Ø³ØªÙ‚Ù„"]})]})]}),e.jsx("button",{disabled:F||q&&!$,className:`w-full flex items-center justify-center gap-3 text-white font-bold p-4 rounded-2xl shadow-xl transition-all ${q&&!$?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 shadow-sky-300/50 hover:scale-[1.02]"}`,children:F?"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„...":e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"w-5 h-5"}),"ØªØ³Ø¬ÙŠÙ„"]})}),q&&!$&&e.jsx("p",{className:`text-center text-sm p-3 rounded-xl ${f==="courier"?"text-emerald-600 bg-emerald-50":"text-orange-600 bg-orange-50"}`,children:"âš ï¸ ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„"})]}),e.jsxs("p",{className:"mt-6 text-center text-sky-600",children:["Ø¹Ù†Ø¯Ùƒ Ø­Ø³Ø§Ø¨ØŸ"," ",e.jsx(ae,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„ âœ¨"})]})]})]})},qx={owner:"/owner",admin:"/admin",developer:"/developer",courier:"/courier",supervisor:"/supervisor",social_media:"/social-media",support:"/support",accountant:"/accounting",customer:"/"},zx=[{id:"customer",title:"Ø¹Ù…ÙŠÙ„",subtitle:"Ø£Ø¨ØºÙ‰ Ø£Ø·Ù„Ø¨ Ø£ÙƒÙ„",emoji:"ğŸ›’",icon:e.jsx(ns,{className:"w-8 h-8"}),color:"from-green-500 to-emerald-600",shadowColor:"shadow-green-500/30",href:"/register/form?type=customer",features:["ØªØµÙØ­ Ø§Ù„Ù…ØªØ§Ø¬Ø±","Ø§Ø·Ù„Ø¨ Ø£ÙƒÙ„ Ø¨ÙŠØªÙŠ","ØªØ§Ø¨Ø¹ Ø·Ù„Ø¨Ø§ØªÙƒ"]},{id:"courier",title:"Ù…Ù†Ø¯ÙˆØ¨ ØªÙˆØµÙŠÙ„",subtitle:"Ø£Ø¨ØºÙ‰ Ø£ÙˆØµÙ„ Ø·Ù„Ø¨Ø§Øª",emoji:"ğŸš—",icon:e.jsx(Ve,{className:"w-8 h-8"}),color:"from-sky-500 to-blue-600",shadowColor:"shadow-sky-500/30",href:"/register/form?type=courier",features:["Ø§Ø³ØªÙ„Ù… Ø·Ù„Ø¨Ø§Øª","Ø§ÙƒØ³Ø¨ ÙÙ„ÙˆØ³","Ø§Ø´ØªØºÙ„ Ø¨ÙˆÙ‚ØªÙƒ"]},{id:"owner",title:"Ø£Ø³Ø±Ø© Ù…Ù†ØªØ¬Ø©",subtitle:"Ø¹Ù†Ø¯ÙŠ Ø£ÙƒÙ„ Ø¨ÙŠØªÙŠ Ø£Ø¨ÙŠØ¹Ù‡",emoji:"ğŸ‘©â€ğŸ³",icon:e.jsx(wt,{className:"w-8 h-8"}),color:"from-amber-500 to-orange-600",shadowColor:"shadow-orange-500/30",href:"/register-owner",features:["Ø³Ø¬Ù‘Ù„ Ù…ØªØ¬Ø±Ùƒ","Ø£Ø¶Ù Ø£ØµÙ†Ø§ÙÙƒ","Ø§Ø³ØªÙ‚Ø¨Ù„ Ø·Ù„Ø¨Ø§Øª"]},{id:"restaurant",title:"Ù…Ø·Ø¹Ù…",subtitle:"Ø¹Ù†Ø¯ÙŠ Ù…Ø·Ø¹Ù… ÙˆØ£Ø¨ØºÙ‰ Ø£ÙˆØµÙ„ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡",emoji:"ğŸ½ï¸",icon:e.jsx(wt,{className:"w-8 h-8"}),color:"from-rose-500 to-red-600",shadowColor:"shadow-rose-500/30",href:"/register-owner?type=restaurant",features:["Ø³Ø¬Ù‘Ù„ Ù…Ø·Ø¹Ù…Ùƒ","Ù‚Ø§Ø¦Ù…Ø© Ø·Ø¹Ø§Ù… ÙƒØ§Ù…Ù„Ø©","ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹"]}],Hx=()=>{const{user:s,role:t,loading:a}=Ee(),i=os();return l.useEffect(()=>{!a&&s&&t&&i(qx[t]||"/",{replace:!0})},[a,s,t,i]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-purple-500 to-pink-500 
            rounded-3xl flex items-center justify-center shadow-2xl shadow-purple-500/30`,children:e.jsx("span",{className:"text-4xl",children:"âœ¨"})}),e.jsx("h1",{className:"text-3xl font-black text-gray-800 mb-2",children:"Ø³Ø¬Ù‘Ù„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯"}),e.jsx("p",{className:"text-gray-500",children:"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø­Ø³Ø§Ø¨Ùƒ"})]}),e.jsx(ae,{to:"/customer-login",className:`block bg-gradient-to-r from-emerald-500 to-green-600 text-white 
            rounded-2xl p-5 mb-6 shadow-xl shadow-emerald-500/30
            active:scale-[0.98] transition-all duration-200 border-2 border-emerald-300`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-16 h-16 bg-white/20 backdrop-blur rounded-2xl 
              flex items-center justify-center flex-shrink-0`,children:e.jsx(Yn,{className:"w-8 h-8"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl font-bold",children:"ğŸ“± Ø¯Ø®ÙˆÙ„ Ø³Ø±ÙŠØ¹ Ø¨Ø§Ù„Ø¬ÙˆØ§Ù„"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø³Ø¬Ù‘Ù„ Ø£Ùˆ Ø§Ø¯Ø®Ù„ Ø¨Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„Ùƒ ÙÙ‚Ø·"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:"Ø¨Ø¯ÙˆÙ† Ø¥ÙŠÙ…ÙŠÙ„"}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:"Ø¨Ø¯ÙˆÙ† ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±"}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:"Ø³Ø±ÙŠØ¹ ÙˆØ¢Ù…Ù†"})]})]}),e.jsx(Es,{className:"w-6 h-6 flex-shrink-0"})]})}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Ø£Ùˆ Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø­Ø³Ø§Ø¨Ùƒ"}),e.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),e.jsx("div",{className:"space-y-4",children:zx.map(c=>e.jsx(ae,{to:c.href,className:`block bg-gradient-to-r ${c.color} text-white 
                rounded-2xl p-5 shadow-xl ${c.shadowColor}
                active:scale-[0.98] transition-all duration-200`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-16 h-16 bg-white/20 backdrop-blur rounded-2xl 
                  flex items-center justify-center flex-shrink-0`,children:e.jsx("span",{className:"text-4xl",children:c.emoji})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl font-bold",children:c.title}),e.jsx("p",{className:"text-white/80 text-sm",children:c.subtitle}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.features.map((u,r)=>e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:u},r))})]}),e.jsx(Es,{className:"w-6 h-6 flex-shrink-0"})]})},c.id))}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("p",{className:"text-gray-500",children:["Ø¹Ù†Ø¯Ùƒ Ø­Ø³Ø§Ø¨ØŸ"," ",e.jsx(ae,{to:"/login",className:"text-purple-600 font-bold hover:underline",children:"Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„"})]})}),e.jsx(ae,{to:"/",className:"block text-center mt-4 text-gray-400 text-sm hover:text-gray-600",children:"â† Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})})},Wx=()=>{const s=os(),[t,a]=l.useState(1),[i,c]=l.useState(!1),[u,r]=l.useState(""),[w,D]=l.useState(""),[U,v]=l.useState(""),[N,E]=l.useState(""),[A,j]=l.useState(""),[z,p]=l.useState(!1),f=()=>{switch(t){case 1:return w.trim().length>=2&&U!=="";case 2:return N.includes("@")&&N.length>=5&&A.length>=6;case 3:return z;default:return!1}},L=()=>{f()&&t<3&&(a(t+1),r(""))},$=()=>{t>1&&(a(t-1),r(""))},g=async()=>{if(f()){c(!0),r("");try{const F=await Pt(fs,N,A);await Be(J(C,"users",F.user.uid),{name:w,email:N,role:"owner",city:U,createdAt:X()}),await Be(J(C,"restaurants",F.user.uid),{name:w,ownerId:F.user.uid,email:N,city:U,isOpen:!0,packageType:"free",licenseStatus:"pending",createdAt:X()}),s("/owner")}catch(F){console.error("Registration error:",F),F.code==="auth/email-already-in-use"?r("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹. Ø¬Ø±Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"):F.code==="auth/weak-password"?r("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ©. Ø§Ø³ØªØ®Ø¯Ù… 6 Ø£Ø­Ø±Ù Ø£Ùˆ Ø£ÙƒØ«Ø±"):r("Ø­Ø¯Ø« Ø®Ø·Ø£. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}finally{c(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-amber-500 to-orange-500 
            rounded-3xl flex items-center justify-center shadow-2xl shadow-orange-500/30`,children:e.jsx(wt,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-black text-gray-800 mb-2",children:"Ø³Ø¬Ù‘Ù„ Ø£Ø³Ø±ØªÙƒ Ø§Ù„Ù…Ù†ØªØ¬Ø©"}),e.jsx("p",{className:"text-gray-500",children:"Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¨ÙŠØ¹ ÙÙŠ Ø¯Ù‚Ø§Ø¦Ù‚! ğŸš€"})]}),e.jsx("div",{className:"flex items-center justify-center gap-3 mb-8",children:[1,2,3].map(F=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg
                transition-all duration-300 ${t>F?"bg-green-500 text-white":t===F?"bg-amber-500 text-white shadow-lg scale-110":"bg-gray-200 text-gray-400"}`,children:t>F?e.jsx(bs,{className:"w-5 h-5"}):F}),F<3&&e.jsx("div",{className:`w-8 h-1 mx-1 rounded transition-all duration-300 ${t>F?"bg-green-500":"bg-gray-200"}`})]},F))}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 mb-6",children:[t===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ "}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-2",children:"Ø¹Ø±Ù‘ÙÙ†Ø§ Ø¨Ø£Ø³Ø±ØªÙƒ"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Ø§ÙŠØ´ Ø§Ø³Ù… Ù…Ø·Ø¨Ø®ÙƒØŸ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-lg",children:"Ø§Ø³Ù… Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø©"}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 text-amber-500"}),e.jsx("input",{type:"text",value:w,onChange:F=>D(F.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ù…Ø·Ø¨Ø® Ø£Ù… Ø³Ø§Ø±Ø©",className:`w-full p-4 pr-14 text-lg rounded-2xl border-2 border-gray-200 
                      focus:border-amber-500 focus:ring-4 focus:ring-amber-100 transition-all
                      placeholder:text-gray-400`})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"ğŸ’¡ Ø§Ø®ØªØ± Ø§Ø³Ù… ÙŠØ¹Ø¨Ø± Ø¹Ù† Ù‡ÙˆÙŠØªÙƒ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-lg",children:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 text-amber-500 pointer-events-none"}),e.jsxs("select",{value:U,onChange:F=>v(F.target.value),className:`w-full p-4 pr-14 text-lg rounded-2xl border-2 border-gray-200 
                      focus:border-amber-500 focus:ring-4 focus:ring-amber-100 transition-all
                      appearance-none cursor-pointer bg-white`,children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ù…Ø¯ÙŠÙ†ØªÙƒ"}),fr.map(F=>e.jsx("option",{value:F,children:F},F))]})]})]})]}),t===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ“§"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-2",children:"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Ù„ØªÙ‚Ø¯Ø± ØªØ¯Ø®Ù„ Ø­Ø³Ø§Ø¨Ùƒ Ù„Ø§Ø­Ù‚Ø§Ù‹"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-lg",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 text-amber-500"}),e.jsx("input",{type:"email",value:N,onChange:F=>E(F.target.value),placeholder:"example@email.com",className:`w-full p-4 pr-14 text-lg rounded-2xl border-2 border-gray-200 
                      focus:border-amber-500 focus:ring-4 focus:ring-amber-100 transition-all
                      placeholder:text-gray-400 text-left`,dir:"ltr"})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"ğŸ“§ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-lg",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ut,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 text-amber-500"}),e.jsx("input",{type:"password",value:A,onChange:F=>j(F.target.value),placeholder:"6 Ø£Ø­Ø±Ù Ø£Ùˆ Ø£ÙƒØ«Ø±",className:`w-full p-4 pr-14 text-lg rounded-2xl border-2 border-gray-200 
                      focus:border-amber-500 focus:ring-4 focus:ring-amber-100 transition-all
                      placeholder:text-gray-400`})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"ğŸ”’ Ø§Ø­ÙØ¸Ù‡Ø§ ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ù…Ù†"})]})]}),t===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("span",{className:"text-5xl",children:"âœ¨"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-2",children:"Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ù†Ø·Ù„Ø§Ù‚!"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Ø®Ø·ÙˆØ© Ø£Ø®ÙŠØ±Ø© ÙÙ‚Ø·"})]}),e.jsxs("div",{className:"bg-amber-50 rounded-2xl p-4 space-y-3",children:[e.jsx("h3",{className:"font-bold text-amber-800 mb-3",children:"ğŸ“‹ Ù…Ù„Ø®Øµ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ:"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ø³Ù… Ø§Ù„Ø£Ø³Ø±Ø©:"}),e.jsx("span",{className:"font-bold text-gray-800",children:w})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:"}),e.jsx("span",{className:"font-bold text-gray-800",children:U})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:"}),e.jsx("span",{className:"font-bold text-gray-800",dir:"ltr",children:N})]})]}),e.jsxs("button",{onClick:()=>p(!z),className:`w-full p-4 rounded-2xl border-2 flex items-center gap-4 transition-all ${z?"bg-green-50 border-green-500":"bg-white border-gray-200 hover:border-amber-300"}`,children:[z?e.jsx(Ie,{className:"w-8 h-8 text-green-500 flex-shrink-0"}):e.jsx(Gc,{className:"w-8 h-8 text-gray-300 flex-shrink-0"}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`font-bold ${z?"text-green-700":"text-gray-700"}`,children:"Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.jsx(ae,{to:"/terms",target:"_blank",className:"text-amber-600 underline",children:"Ø§Ù‚Ø±Ø£ Ø§Ù„Ø´Ø±ÙˆØ·"})})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-amber-100 to-orange-100 rounded-2xl p-4 text-center",children:e.jsx("p",{className:"text-amber-800 font-bold",children:"ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ØªÙ‚Ø¯Ø± ØªØ¶ÙŠÙ Ø£ØµÙ†Ø§ÙÙƒ ÙˆØªØ¨Ø¯Ø£ ØªØ³ØªÙ‚Ø¨Ù„ Ø·Ù„Ø¨Ø§Øª"})})]}),u&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border-2 border-red-200 rounded-2xl text-red-700 text-center",children:["âš ï¸ ",u]})]}),e.jsxs("div",{className:"flex gap-3",children:[t>1&&e.jsxs("button",{onClick:$,className:`flex-1 py-4 px-6 rounded-2xl bg-white border-2 border-gray-200 
                text-gray-600 font-bold text-lg flex items-center justify-center gap-2
                active:scale-95 transition-all`,children:[e.jsx(Es,{className:"w-5 h-5"}),"Ø±Ø¬ÙˆØ¹"]}),e.jsx("button",{onClick:t===3?g:L,disabled:!f()||i,className:`flex-1 py-4 px-6 rounded-2xl font-bold text-lg 
              flex items-center justify-center gap-2 transition-all
              ${f()&&!i?"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-xl shadow-orange-500/30 active:scale-95":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„..."]}):t===3?e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"w-5 h-5"}),"Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†!"]}):e.jsxs(e.Fragment,{children:["Ø§Ù„ØªØ§Ù„ÙŠ",e.jsx(lr,{className:"w-5 h-5"})]})})]}),e.jsxs("p",{className:"text-center text-gray-500 mt-6",children:["Ø¹Ù†Ø¯Ùƒ Ø­Ø³Ø§Ø¨ØŸ"," ",e.jsx(ae,{to:"/login",className:"text-amber-600 font-bold hover:underline",children:"Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„"})]})]})})},Dn=s=>{let t=s.replace(/\D/g,"");return t.startsWith("0")&&(t=t.substring(1)),t.startsWith("966")||(t="966"+t),"+"+t},Qx=()=>{const{user:s,role:t,loading:a}=Ee(),[i,c]=l.useState(""),[u,r]=l.useState(""),[w,D]=l.useState("phone"),[U,v]=l.useState(!1),[N,E]=l.useState(null),[A,j]=l.useState(0),z=l.useRef(null),p=l.useRef(null),f=os(),L=Ps();l.useEffect(()=>{!a&&s&&t&&f({owner:"/owner",admin:"/admin",developer:"/developer",courier:"/courier",supervisor:"/supervisor"}[t]||"/",{replace:!0})},[a,s,t,f]),l.useEffect(()=>(z.current&&!p.current&&(p.current=new tn(fs,z.current,{size:"invisible",callback:()=>{},"expired-callback":()=>{p.current=null}})),()=>{p.current&&(p.current.clear(),p.current=null)}),[]),l.useEffect(()=>{if(A>0){const O=setTimeout(()=>j(A-1),1e3);return()=>clearTimeout(O)}},[A]);const $=async()=>{if(!i||i.length<9){L.warning("Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„ ØµØ­ÙŠØ­");return}const O=Dn(i);v(!0);try{!p.current&&z.current&&(p.current=new tn(fs,z.current,{size:"invisible"}));const B=await qc(fs,O,p.current);E(B),D("otp"),j(60),L.success("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø¬ÙˆØ§Ù„Ùƒ")}catch(B){console.error("OTP Error:",B),p.current&&(p.current.clear(),p.current=null),B.code==="auth/invalid-phone-number"?L.error("Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ØºÙŠØ± ØµØ­ÙŠØ­"):B.code==="auth/too-many-requests"?L.error("Ù…Ø­Ø§ÙˆÙ„Ø§Øª ÙƒØ«ÙŠØ±Ø©ØŒ Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹"):B.code==="auth/quota-exceeded"?L.error("ØªÙ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠØŒ Ø­Ø§ÙˆÙ„ ØºØ¯Ø§Ù‹"):L.error(B.message||"ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²")}finally{v(!1)}},g=async()=>{if(!u||u.length!==6){L.warning("Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù…");return}if(!N){L.error("Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ Ø£Ø¹Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²"),D("phone");return}v(!0);try{const O=await N.confirm(u),B=O.user.uid,T=O.user.phoneNumber,P=await Ce(J(C,"users",B));let m=!1;P.exists()?L.success("Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ! ğŸ‘‹"):(m=!0,await Be(J(C,"users",B),{phone:T,role:"customer",name:"",createdAt:X()}),L.success("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰"));const o=P.exists()?P.data():{role:"customer"};if(!((o==null?void 0:o.savedLocation)||(o==null?void 0:o.location))&&(o.role==="customer"||m))try{navigator.geolocation&&navigator.geolocation.getCurrentPosition(async I=>{const q={lat:I.coords.latitude,lng:I.coords.longitude,address:"Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ"};await me(J(C,"users",B),{savedLocation:q,location:{lat:q.lat,lng:q.lng}}),sessionStorage.setItem("broast_session_location",JSON.stringify({lat:q.lat,lng:q.lng}))},I=>{console.warn("ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:",I)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}catch(I){console.warn("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹:",I)}o.role==="owner"?f("/owner"):o.role==="admin"?f("/admin"):o.role==="developer"?f("/developer"):o.role==="courier"?f("/courier"):f("/")}catch(O){console.error("Verify Error:",O),O.code==="auth/invalid-verification-code"?L.error("Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ØºÙŠØ± ØµØ­ÙŠØ­"):O.code==="auth/code-expired"?(L.error("Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø±Ù…Ø²ØŒ Ø£Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"),D("phone")):L.error(O.message||"ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚")}finally{v(!1)}},F=()=>{A>0||(D("phone"),r(""),E(null))};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 px-4",children:[e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),e.jsx("div",{ref:z,id:"recaptcha-container"}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:e.jsx("span",{className:"text-4xl",children:"ğŸ"})}),e.jsx("h1",{className:"text-3xl font-black text-sky-600",children:"Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"}),e.jsx("p",{className:"text-sky-500 mt-1",children:w==="phone"?"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„":"Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚"})]}),w==="phone"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(fl,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-lg tracking-wider`,value:i,onChange:O=>c(O.target.value.replace(/\D/g,"")),maxLength:10})]}),e.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Ø³Ù†Ø±Ø³Ù„ Ù„Ùƒ Ø±Ù…Ø² ØªØ­Ù‚Ù‚ Ø¹Ø¨Ø± SMS"}),e.jsx("button",{onClick:$,disabled:U||i.length<9,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:U?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"w-5 h-5"}),"Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚"]})})]}),w==="otp"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("p",{className:"text-gray-600",children:"Ø£Ø±Ø³Ù„Ù†Ø§ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰"}),e.jsx("p",{className:"font-bold text-sky-600 text-lg",dir:"ltr",children:Dn(i)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(bl,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{type:"text",inputMode:"numeric",placeholder:"000000",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-2xl tracking-[0.5em] font-bold`,value:u,onChange:O=>r(O.target.value.replace(/\D/g,"")),maxLength:6,autoFocus:!0})]}),e.jsx("button",{onClick:g,disabled:U||u.length!==6,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-green-300/50 transition-all hover:scale-[1.02] hover:shadow-green-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:U?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Kn,{className:"w-5 h-5"}),"ØªØ£ÙƒÙŠØ¯ ÙˆØ¯Ø®ÙˆÙ„"]})}),e.jsx("div",{className:"text-center",children:A>0?e.jsxs("p",{className:"text-gray-500 text-sm",children:["Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø¹Ø¯ ",e.jsx("span",{className:"font-bold text-sky-600",children:A})," Ø«Ø§Ù†ÙŠØ©"]}):e.jsx("button",{onClick:F,className:"text-sky-600 hover:text-sky-700 font-semibold text-sm",children:"Ù„Ù… ÙŠØµÙ„Ùƒ Ø§Ù„Ø±Ù…Ø²ØŸ Ø£Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"})}),e.jsx("button",{onClick:()=>{D("phone"),r("")},className:"w-full text-gray-500 hover:text-gray-700 text-sm",children:"â† ØªØºÙŠÙŠØ± Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„"})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-sky-100",children:[e.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"ØµØ§Ø­Ø¨ Ù…Ø·Ø¹Ù… Ø£Ùˆ Ù…Ù†Ø¯ÙˆØ¨ØŸ"}),e.jsx(ae,{to:"/login",className:"block text-center text-sky-600 hover:text-sky-700 font-semibold",children:"ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ â†’"})]})]})]})};function Gx(){return e.jsx("div",{className:"min-h-screen bg-slate-200 text-gray-800 px-4 py-10 leading-relaxed",children:e.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-6 sm:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-4 text-center",children:"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© ÙˆØ¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©"}),e.jsx("p",{className:"text-center text-gray-600 mb-8",children:"ğŸ  Ù…Ù†ØµØ© Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"}),e.jsx("section",{className:"mb-6",children:e.jsxs("p",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4 text-gray-800",children:["Ù†Ø­Ù† ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ ",e.jsx("strong",{children:"Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"})," Ù†Ø­ØªØ±Ù… Ø®ØµÙˆØµÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆÙ†Ø³Ø¹Ù‰ Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…Ù†ØµØ© Ø¢Ù…Ù†Ø© ÙˆØ³Ù‡Ù„Ø© ØªØ±Ø¨Ø· Ø¨ÙŠÙ† Ù…Ù‚Ø¯Ù…ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡."]})}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"1. Ø·Ø¨ÙŠØ¹Ø© Ø¯ÙˆØ± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsxs("li",{children:["ØªØ·Ø¨ÙŠÙ‚ Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª ÙŠØ¹Ù…Ù„ ÙƒÙ€",e.jsx("strong",{className:"text-sky-600",children:"Ù…Ù†ØµØ© ÙˆØ³ÙŠØ·Ø© ÙÙ‚Ø·"})," Ù„Ø±Ø¨Ø· Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø© ÙˆØ§Ù„Ù…Ø·Ø§Ø¹Ù… ÙˆÙ…Ù‚Ø¯Ù…ÙŠ Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„."]}),e.jsxs("li",{children:["Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ",e.jsx("strong",{className:"text-red-600",children:"Ù„Ø§ ÙŠÙ‚ÙˆÙ…"})," Ø¨Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø·Ø¹Ø§Ù…ØŒ ÙˆÙ„Ø§ Ø¨ØªØºÙ„ÙŠÙÙ‡ØŒ ÙˆÙ„Ø§ Ø¨ØªØ®Ø²ÙŠÙ†Ù‡ØŒ ÙˆÙ„Ø§ Ø¨ØªÙˆØµÙŠÙ„Ù‡ Ø¨Ø´ÙƒÙ„ Ù…Ø¨Ø§Ø´Ø±."]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-red-500 pr-3",children:"2. Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø¹Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø·Ø¹Ø§Ù…"}),e.jsxs("p",{className:"mb-3 text-gray-700",children:["Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø·Ø¹Ù…Ø© ÙˆØ§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯Ù‡Ø§ ÙˆØªØ¬Ù‡ÙŠØ²Ù‡Ø§ Ù…Ù† Ù‚Ø¨Ù„ ",e.jsx("strong",{children:"Ù…Ù‚Ø¯Ù…ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø© Ø£Ù†ÙØ³Ù‡Ù…"}),". ÙˆØ¹Ù„ÙŠÙ‡:"]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"font-bold text-red-700 mb-3",children:"Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ØºÙŠØ± Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù†:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-red-700 mr-4",children:[e.jsx("li",{children:"Ø¬ÙˆØ¯Ø© Ø§Ù„Ø·Ø¹Ø§Ù…"}),e.jsx("li",{children:"Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª"}),e.jsx("li",{children:"Ø³ÙˆØ¡ Ø§Ù„ØªØ®Ø²ÙŠÙ†"}),e.jsx("li",{children:"Ø§Ù„ØªØ³Ù…Ù… Ø§Ù„ØºØ°Ø§Ø¦ÙŠ"}),e.jsx("li",{children:"Ø£ÙŠ Ø£Ø¶Ø±Ø§Ø± ØµØ­ÙŠØ© Ø£Ùˆ Ø­Ø³Ø§Ø³ÙŠØ© ØºØ°Ø§Ø¦ÙŠØ©"}),e.jsx("li",{children:"Ø§Ù„Ù†Ø¸Ø§ÙØ© Ø£Ùˆ Ø§Ù„ØªØºÙ„ÙŠÙ"})]}),e.jsx("p",{className:"mt-4 font-bold text-gray-800 bg-amber-100 p-2 rounded",children:"âš ï¸ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø© ØªÙ‚Ø¹ Ø¹Ù„Ù‰ Ù…Ù‚Ø¯Ù… Ø§Ù„Ø®Ø¯Ù…Ø© (Ø§Ù„Ø£Ø³Ø±Ø© / Ø§Ù„Ù…Ø·Ø¹Ù…)"})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-amber-500 pr-3",children:"3. Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ© Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© ÙˆØ§Ù„ØªØºØ°ÙŠØ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsxs("li",{children:["ÙŠØªØ­Ù…Ù„ ",e.jsx("strong",{children:"Ø§Ù„Ø¹Ù…ÙŠÙ„"})," Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø·Ù„Ø¨ØŒ Ø®Ø§ØµØ© ÙÙŠ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ© Ø£Ùˆ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ø§Ù„Ø®Ø§ØµØ©."]}),e.jsxs("li",{children:["Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ",e.jsx("strong",{className:"text-red-600",children:"Ù„Ø§ ÙŠØ¶Ù…Ù†"})," Ø¯Ù‚Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© Ù…Ù† Ù…Ù‚Ø¯Ù…ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©."]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"4. Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsxs("p",{className:"mb-3 text-gray-700",children:["Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ ÙŠØªÙ… ØªÙ†ÙÙŠØ°Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© ",e.jsx("strong",{children:"Ø·Ø±Ù Ø«Ø§Ù„Ø« Ù…Ø³ØªÙ‚Ù„"}),"."]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"font-bold text-gray-700 mb-2",children:"Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ØºÙŠØ± Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù†:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600 mr-4",children:[e.jsx("li",{children:"ØªØ£Ø®ÙŠØ± Ø§Ù„Ø·Ù„Ø¨"}),e.jsx("li",{children:"ØªÙ„Ù Ø§Ù„Ø·Ù„Ø¨ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‚Ù„"}),e.jsx("li",{children:"Ø³ÙˆØ¡ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ù† Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"})]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"5. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"}),e.jsx("p",{className:"mb-3 text-gray-700",children:"Ù‚Ø¯ Ù†Ù‚ÙˆÙ… Ø¨Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© Ù…Ø«Ù„:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-700 mr-4 mb-3",children:[e.jsx("li",{children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("li",{children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("li",{children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ"}),e.jsx("li",{children:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨"})]}),e.jsxs("div",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-gray-700",children:["ÙˆØ°Ù„Ùƒ ",e.jsx("strong",{children:"ÙÙ‚Ø·"})," Ù„ØºØ±Ø¶ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø© ÙˆØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…."]}),e.jsx("p",{className:"text-sky-700 font-bold mt-2",children:"âœ… Ù„Ø§ ÙŠØªÙ… Ø¨ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø£ÙŠ Ø·Ø±Ù Ø®Ø§Ø±Ø¬ÙŠ"})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-purple-500 pr-3",children:"6. Ø§Ù„Ù†Ø²Ø§Ø¹Ø§Øª"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsxs("li",{children:["Ø£ÙŠ Ù†Ø²Ø§Ø¹ ÙŠØªØ¹Ù„Ù‚ Ø¨Ø§Ù„Ø·Ø¹Ø§Ù… Ø£Ùˆ Ø§Ù„Ø®Ø¯Ù…Ø© ÙŠØªÙ… Ø­Ù„Ù‡ ",e.jsx("strong",{children:"Ù…Ø¨Ø§Ø´Ø±Ø©"})," Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆÙ…Ù‚Ø¯Ù… Ø§Ù„Ø®Ø¯Ù…Ø©."]}),e.jsxs("li",{children:["Ø¯ÙˆØ± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠÙ‚ØªØµØ± Ø¹Ù„Ù‰ ",e.jsx("strong",{className:"text-sky-600",children:"Ø§Ù„ÙˆØ³Ø§Ø·Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ© ÙÙ‚Ø·"}),"."]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-green-500 pr-3",children:"7. Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©"}),e.jsx("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4",children:e.jsxs("p",{className:"text-green-800",children:["Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŒ ÙØ¥Ù†Ùƒ ",e.jsx("strong",{children:"ØªÙˆØ§ÙÙ‚"})," Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØªÙ‚Ø± Ø¨Ø£Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ",e.jsx("strong",{children:"ÙˆØ³ÙŠØ· ØªÙ‚Ù†ÙŠ ÙÙ‚Ø·"})," ÙˆÙ„Ø§ ÙŠØªØ­Ù…Ù„ Ø£ÙŠ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©."]})})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"8. ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§"}),e.jsxs("div",{className:"bg-sky-50 rounded-lg p-4",children:[e.jsxs("p",{className:"mb-2",children:["ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: ",e.jsx("strong",{children:"afrtalbyt2026@gmail.com"})]}),e.jsxs("p",{className:"mb-2",children:["ğŸ“ Ø§Ù„Ø¬ÙˆØ§Ù„: ",e.jsx("strong",{dir:"ltr",children:"0535534208"})]}),e.jsx("p",{children:"ğŸ“± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: Ù‚Ø³Ù… Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©"})]})]}),e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-400 rounded-lg p-4 mt-8 text-center",children:[e.jsx("p",{className:"text-amber-800 font-bold text-lg",children:"âš ï¸ Ø¥Ù‚Ø±Ø§Ø± Ù…Ù‡Ù…"}),e.jsx("p",{className:"text-amber-700 mt-2",children:'Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ù…ÙˆØ§ÙÙ‚" Ø£Ùˆ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŒ Ø£Ù†Øª ØªÙ‚Ø± Ø¨Ø£Ù†Ùƒ Ù‚Ø±Ø£Øª ÙˆÙÙ‡Ù…Øª Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© ÙˆØ¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© ÙˆØªÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.'})]}),e.jsxs("p",{className:"mt-6 text-sm text-gray-500 text-center",children:["ØªÙ… Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙŠØ§Ø³Ø© Ø¨ØªØ§Ø±ÙŠØ® ",new Date().toLocaleDateString("ar-SA")]}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(ae,{to:"/terms",className:"text-white bg-sky-500 hover:bg-sky-600 px-6 py-3 rounded-lg inline-block transition-colors text-center font-bold",children:"ğŸ“‹ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…"}),e.jsx(ae,{to:"/",className:"text-sky-600 bg-sky-100 hover:bg-sky-200 px-6 py-3 rounded-lg inline-block transition-colors text-center",children:"Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})]})})}function Kx(){return e.jsx("div",{className:"min-h-screen bg-slate-200 text-gray-800 px-4 py-10 leading-relaxed",children:e.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-6 sm:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-6 text-center",children:"Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… - ğŸ  Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"1. Ø§Ù„ØªØ¹Ø±ÙŠÙ"}),e.jsx("p",{children:"Ù…Ù†ØµØ© Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª Ù‡ÙŠ Ù…Ù†ØµØ© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ØªÙ‡Ø¯Ù Ø¥Ù„Ù‰ Ø¹Ø±Ø¶ ÙˆØªØ³ÙˆÙŠÙ‚ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø© ÙˆØ±Ø¨Ø·Ù‡Ø§ Ø¨Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ø¨Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚."})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"2. Ø§Ù„ØªØ³Ø¬ÙŠÙ„"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Ù…Ù†ØµØ© Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª Ù…Ø¬Ø§Ù†ÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„."}),e.jsx("li",{children:"Ù„Ø§ ÙŠØªÙ… ÙØ±Ø¶ Ø£ÙŠ Ø±Ø³ÙˆÙ… ØªØ³Ø¬ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø©."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"3. ØªØ³Ø¹ÙŠØ± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ±Ø³ÙˆÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù†ØµØ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ØªÙ‚ÙˆÙ… Ø§Ù„Ø£Ø³Ø±Ø© Ø¨Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ù…Ù†ØªØ¬."}),e.jsxs("li",{children:["ØªÙˆØ§ÙÙ‚ Ø§Ù„Ø£Ø³Ø±Ø© Ø¹Ù„Ù‰ Ù‚ÙŠØ§Ù… Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø¥Ø¶Ø§ÙØ© Ø±Ø³ÙˆÙ… ØªØ´ØºÙŠÙ„ Ù‚Ø¯Ø±Ù‡Ø§"," ",e.jsx("strong",{className:"text-sky-600",children:"1.75 Ø±ÙŠØ§Ù„"})," Ø¹Ù„Ù‰ ÙƒÙ„ Ù…Ù†ØªØ¬."]}),e.jsxs("li",{children:["Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªÙŠ ÙŠÙƒÙˆÙ† Ø³Ø¹Ø±Ù‡Ø§ 1 Ø±ÙŠØ§Ù„ Ø£Ùˆ 2 Ø±ÙŠØ§Ù„ØŒ ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ©"," ",e.jsx("strong",{className:"text-sky-600",children:"0.25 Ø±ÙŠØ§Ù„"})," ÙÙ‚Ø·."]}),e.jsx("li",{children:"ÙŠØ¸Ù‡Ø± Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù„Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø¹Ù…ÙŠÙ„ Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø£Ù†Ù‡ Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬."}),e.jsx("li",{children:"Ù„Ø§ ÙŠØªÙ… Ø®ØµÙ… Ø£ÙŠ Ù…Ø¨Ø§Ù„Øº Ù…Ù† Ø¯Ø®Ù„ Ø§Ù„Ø£Ø³Ø±Ø©ØŒ ÙˆØ¬Ù…ÙŠØ¹ Ø±Ø³ÙˆÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù†ØµØ© ØªÙØ­Ù…Ù‘Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"4. Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ù„Ø¯ÙØ¹"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù„Ù„Ù…Ù†ØªØ¬ Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØ© Ø±Ø³ÙˆÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù†ØµØ©."}),e.jsxs("li",{children:["Ù‚Ø¯ ÙŠØªÙ… Ø§Ø­ØªØ³Ø§Ø¨ Ø±Ø³ÙˆÙ… Ø£Ø®Ø±Ù‰ Ù…Ø«Ù„:",e.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[e.jsx("li",{children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx("li",{children:"Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© Ø­Ø³Ø¨ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø¹Ù…ÙˆÙ„ Ø¨Ù‡Ø§"})]})]}),e.jsx("li",{children:"ØªØ­ØªÙØ¸ Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø­Ù‚ ØªØ­Ø¯ÙŠØ« Ø£Ùˆ Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø§Øª Ø£Ùˆ Ø±Ø³ÙˆÙ… Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©ØŒ Ù…Ø¹ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ø°Ù„Ùƒ."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"5. Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø©"}),e.jsx("p",{className:"mb-3",children:"ØªØªØ­Ù…Ù„ Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø© ÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø¹Ù†:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[e.jsx("li",{children:"Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),e.jsx("li",{children:"Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù"}),e.jsx("li",{children:"Ù†Ø¸Ø§ÙØ© ÙˆØªØ­Ø¶ÙŠØ± Ø§Ù„Ø·Ø¹Ø§Ù…"}),e.jsx("li",{children:"Ø§Ù„ØªØºÙ„ÙŠÙ ÙˆØ§Ù„ØªØ¹Ø¨Ø¦Ø©"}),e.jsx("li",{children:"Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ø§Ø´ØªØ±Ø§Ø·Ø§Øª Ø§Ù„ØµØ­ÙŠØ© Ø§Ù„Ù…Ø¹Ù…ÙˆÙ„ Ø¨Ù‡Ø§"})]}),e.jsx("p",{className:"mt-3",children:"ØªÙ„ØªØ²Ù… Ø§Ù„Ø£Ø³Ø±Ø© Ø¨ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© ÙˆØ§Ù„Ù…ØªÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§ Ù…Ø¹ Ø§Ù„Ø¹Ù…ÙŠÙ„."})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"6. Ø§Ù„ØªÙˆØµÙŠÙ„ ÙˆØ§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ØªØ¹Ù…Ù„ Ù…Ù†ØµØ© Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª ÙƒÙˆØ³ÙŠØ· ØªÙ‚Ù†ÙŠ Ù„Ø±Ø¨Ø· Ø§Ù„Ø£Ø·Ø±Ø§Ù."}),e.jsxs("li",{children:["Ù„Ø§ ØªØªØ­Ù…Ù„ Ø§Ù„Ù…Ù†ØµØ© Ø£ÙŠ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø¹Ù†:",e.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[e.jsx("li",{children:"ØªØµØ±ÙØ§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"}),e.jsx("li",{children:"ØªØ£Ø®ÙŠØ± Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx("li",{children:"Ø³ÙˆØ¡ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ³Ù„ÙŠÙ…"}),e.jsx("li",{children:"ØªÙ„Ù Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø¹Ø¯ Ø®Ø±ÙˆØ¬Ù‡ Ù…Ù† Ø§Ù„Ø£Ø³Ø±Ø©"})]})]}),e.jsx("li",{children:"Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ø§Ù„ØªÙˆØµÙŠÙ„ ÙŠØªÙ… Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹Ù‡Ø§ Ø­Ø³Ø¨ Ø³ÙŠØ§Ø³Ø© Ù…Ø²ÙˆØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"7. Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ØªØªÙŠØ­ Ø§Ù„Ù…Ù†ØµØ© Ø®Ø¯Ù…Ø§Øª Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© Ø£Ùˆ ØªØ±ÙˆÙŠØ¬ÙŠØ© Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ù‚Ø§Ø¨Ù„ Ø±Ø³ÙˆÙ…."}),e.jsx("li",{children:"Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ø®ØªÙŠØ§Ø±ÙŠØ© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ ÙˆÙ„Ø§ ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø¹Ø±Ø¶ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£Ø³Ø±Ø© ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ."}),e.jsx("li",{children:"Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ØªÙ‡Ø¯Ù Ø¥Ù„Ù‰ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¸Ù‡ÙˆØ± ÙˆÙ„Ø§ ØªØ¶Ù…Ù† Ø¹Ø¯Ø¯Ù‹Ø§ Ù…Ø¹ÙŠÙ†Ù‹Ø§ Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø£Ùˆ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"8. Ø­Ø¯ÙˆØ¯ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù…Ù†ØµØ©"}),e.jsx("p",{className:"mb-3",children:"Ù…Ù†ØµØ© Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª ØºÙŠØ± Ù…Ø³Ø¤ÙˆÙ„Ø© Ø¹Ù†:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[e.jsx("li",{children:"Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø£Ùˆ ØµÙˆØ±Ù‡Ø§"}),e.jsx("li",{children:"Ø§Ø®ØªÙ„Ø§Ù Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ© Ù„Ù„Ø¹Ù…ÙŠÙ„"}),e.jsx("li",{children:"Ø£ÙŠ Ø£Ø¶Ø±Ø§Ø± Ù†Ø§ØªØ¬Ø© Ø¹Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ØªØ¬"})]}),e.jsx("p",{className:"mt-3",children:"ÙŠÙ‚ØªØµØ± Ø¯ÙˆØ± Ø§Ù„Ù…Ù†ØµØ© Ø¹Ù„Ù‰:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4 mt-2",children:[e.jsx("li",{children:"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),e.jsx("li",{children:"ØªØ³Ù‡ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨"}),e.jsx("li",{children:"Ø±Ø¨Ø· Ø§Ù„Ø£Ø·Ø±Ø§Ù Ø¹Ø¨Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚Ù†ÙŠ"})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"9. Ø§Ù„ØªØ¹Ø¯ÙŠÙ„"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ÙŠØ­Ù‚ Ù„Ù„Ù…Ù†ØµØ© ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ· Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© Ø¨Ù…Ø§ ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø©."}),e.jsx("li",{children:"ÙŠØªÙ… Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ø£ÙŠ ØªØ­Ø¯ÙŠØ«Ø§Øª."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"10. Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©"}),e.jsx("p",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4 text-gray-800",children:"Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ØŒ ÙØ¥Ù†Ùƒ ØªÙ‚Ø± Ø¨Ù‚Ø±Ø§Ø¡Ø© ÙˆÙÙ‡Ù… ÙˆØ§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… Ø£Ø¹Ù„Ø§Ù‡."})]}),e.jsxs("div",{className:"border-t-2 border-gray-200 pt-6 mt-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-6 text-center",children:"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-3 text-gray-700",children:[e.jsx("li",{children:"ØªØ­ØªØ±Ù… Ù…Ù†ØµØ© Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª Ø®ØµÙˆØµÙŠØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†."}),e.jsxs("li",{children:["ÙŠØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙ‚Ø· Ù„ØºØ±Ø¶:",e.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[e.jsx("li",{children:"ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"}),e.jsx("li",{children:"ØªÙ†ÙÙŠØ° Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("li",{children:"Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsx("li",{children:"ØªØ­Ø³ÙŠÙ† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø®Ø¯Ù…Ø©"})]})]}),e.jsx("li",{children:"Ù„Ø§ ÙŠØªÙ… Ù…Ø´Ø§Ø±ÙƒØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø¹ Ø£ÙŠ Ø·Ø±Ù Ø«Ø§Ù„Ø« Ø¥Ù„Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø¶Ø±ÙˆØ±Ø© Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø®Ø¯Ù…Ø© Ø£Ùˆ ÙˆÙÙ‚ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø¹Ù…ÙˆÙ„ Ø¨Ù‡Ø§."}),e.jsx("li",{children:"ØªØ­ØªÙØ¸ Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø­Ù‚ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª ÙˆØ§Ù„ØªÙØ§Ø¹Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„Ø£ØºØ±Ø§Ø¶ ØªØ´ØºÙŠÙ„ÙŠØ© ÙˆØªØ­Ù„ÙŠÙ„ÙŠØ© ÙˆØªØ­Ø³ÙŠÙ†ÙŠØ©."})]})]}),e.jsx("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4 mt-8 text-center",children:e.jsx("p",{className:"text-green-800 font-medium",children:"â˜‘ï¸ Ø¨Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©ØŒ Ø£Ù†Øª ØªÙ‚Ø± Ø¨Ù‚Ø±Ø§Ø¡Ø© ÙˆÙÙ‡Ù… Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… ÙˆØ³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©"})}),e.jsxs("p",{className:"mt-6 text-sm text-gray-500 text-center",children:["ØªÙ… Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ· Ø¨ØªØ§Ø±ÙŠØ® ",new Date().toLocaleDateString("ar-SA")]}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(ae,{to:"/register",className:"text-white bg-sky-500 hover:bg-sky-600 px-6 py-3 rounded-lg inline-block transition-colors text-center font-bold",children:"âœ… Ù…ÙˆØ§ÙÙ‚ - Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ³Ø¬ÙŠÙ„"}),e.jsx(ae,{to:"/",className:"text-sky-600 bg-sky-100 hover:bg-sky-200 px-6 py-3 rounded-lg inline-block transition-colors text-center",children:"Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})]})})}function Yx(){return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-200 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"ØªÙ… Ø­Ø°Ù Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Ù†Ø£Ø³Ù Ù„Ù…ØºØ§Ø¯Ø±ØªÙƒ ğŸ— ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¹ÙˆØ¯Ø© ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯."}),e.jsx(ae,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})}const $e=({allow:s,children:t})=>{const{role:a,loading:i}=Ee();return i?e.jsx("div",{className:"p-8 text-center",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."}):!a||!s.includes(a)?e.jsx(ur,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:t})},Mi=({isOpen:s,onClose:t,onConfirm:a,initialLocation:i})=>{const[c,u]=l.useState(i||null),[r,w]=l.useState(""),[D,U]=l.useState(!1),[v,N]=l.useState(!1),[E,A]=l.useState(null),[j,z]=l.useState(!1),[p,f]=l.useState(""),[L,$]=l.useState([]),[g,F]=l.useState(!1),[O,B]=l.useState(!1),[T,P]=l.useState("map"),m={lat:24.7136,lng:46.6753},o=l.useCallback(async y=>{if(!y.trim()||y.length<2){$([]),B(!1);return}F(!0);try{const d=y.includes("Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©")?y:`${y}, Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©`,k=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(d)}&limit=5&accept-language=ar`,{headers:{Accept:"application/json"}})).json();$(k),B(k.length>0)}catch(d){console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«:",d),$([])}finally{F(!1)}},[]),R=l.useCallback(y=>{const d={lat:parseFloat(y.lat),lng:parseFloat(y.lon)};u(d),f(""),$([]),B(!1),window.leafletMap&&(window.leafletMap.setView([d.lat,d.lng],16,{animate:!0,duration:.5}),window.leafletMarker&&window.leafletMarker.setLatLng([d.lat,d.lng]));const M=y.display_name.split(",").slice(0,3).join("ØŒ");w(M)},[]),I=l.useCallback(()=>{if(!navigator.geolocation){A("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹");return}N(!0),A(null),navigator.geolocation.getCurrentPosition(y=>{const d={lat:y.coords.latitude,lng:y.coords.longitude};u(d),N(!1),window.leafletMap&&(window.leafletMap.setView([d.lat,d.lng],17),window.leafletMarker&&window.leafletMarker.setLatLng([d.lat,d.lng]))},y=>{N(!1),y.code===1?A("ØªÙ… Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹. ÙØ¹Ù‘Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØµÙØ­"):y.code===2?A("ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹. ØªØ£ÙƒØ¯ Ù…Ù† ØªÙØ¹ÙŠÙ„ GPS"):A("Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);l.useEffect(()=>{if(s){if(!document.getElementById("leaflet-css")){const y=document.createElement("link");y.id="leaflet-css",y.rel="stylesheet",y.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(y)}if(window.L)z(!0);else{const y=document.createElement("script");y.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",y.onload=()=>z(!0),document.body.appendChild(y)}}},[s]),l.useEffect(()=>{if(!s||!j||!window.L)return;const y=window.L;if(!document.getElementById("location-map"))return;window.leafletMap&&window.leafletMap.remove();const M=c||m,k=y.map("location-map",{zoomControl:!1,attributionControl:!1}).setView([M.lat,M.lng],c?17:12);y.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(k);const h=y.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;">ğŸ“</div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),S=y.marker([M.lat,M.lng],{icon:h,draggable:!0}).addTo(k);return S.on("dragend",()=>{const V=S.getLatLng();u({lat:V.lat,lng:V.lng})}),k.on("click",V=>{const{lat:Q,lng:ie}=V.latlng;S.setLatLng([Q,ie]),u({lat:Q,lng:ie})}),window.leafletMap=k,window.leafletMarker=S,c&&u(c),()=>{window.leafletMap&&(window.leafletMap.remove(),window.leafletMap=null,window.leafletMarker=null)}},[s,j]);const q=()=>{c&&window.leafletMap&&window.leafletMap.setView([c.lat,c.lng],17,{animate:!0,duration:.5})},x={Ø§Ù„Ø±ÙŠØ§Ø¶:{lat:24.7136,lng:46.6753},Ø¬Ø¯Ø©:{lat:21.4858,lng:39.1925},"Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©":{lat:21.3891,lng:39.8579},"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©":{lat:24.5247,lng:39.5692},Ø§Ù„Ø¯Ù…Ø§Ù…:{lat:26.4207,lng:50.0888},Ø§Ù„Ø®Ø¨Ø±:{lat:26.2172,lng:50.1971},Ø§Ù„Ø£Ø­Ø³Ø§Ø¡:{lat:25.3548,lng:49.5886},Ø§Ù„Ø·Ø§Ø¦Ù:{lat:21.2703,lng:40.4158},ØªØ¨ÙˆÙƒ:{lat:28.3838,lng:36.555},Ø¨Ø±ÙŠØ¯Ø©:{lat:26.326,lng:43.975},"Ø®Ù…ÙŠØ³ Ù…Ø´ÙŠØ·":{lat:18.3066,lng:42.7283},Ø£Ø¨Ù‡Ø§:{lat:18.2164,lng:42.5053},Ø§Ù„Ù‚Ø·ÙŠÙ:{lat:26.5196,lng:50.0115},Ù†Ø¬Ø±Ø§Ù†:{lat:17.4924,lng:44.1277},Ø¬Ø§Ø²Ø§Ù†:{lat:16.8892,lng:42.5611},ÙŠÙ†Ø¨Ø¹:{lat:24.0895,lng:38.0618},Ø­Ø§Ø¦Ù„:{lat:27.5114,lng:41.7208}},b=()=>{var y;if(T==="manual"){if(!r.trim()){A("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ");return}const d=(y=r.split("ØŒ")[0])==null?void 0:y.trim(),M=x[d]||{lat:24.7136,lng:46.6753};a(M,r);return}if(!c){A("Ø­Ø¯Ø¯ Ù…ÙˆÙ‚Ø¹Ùƒ Ø£ÙˆÙ„Ø§Ù‹");return}if(!r.trim()){A("Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†");return}a(c,r)};return s?e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),e.jsxs("div",{className:"relative w-full h-full sm:w-[95%] sm:h-[90%] sm:max-w-2xl sm:rounded-3xl overflow-hidden bg-white shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(Ze,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:"ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx("p",{className:"text-sm text-white/80",children:T==="map"?"Ø§Ø¨Ø­Ø« Ø£Ùˆ Ø§Ø³Ø­Ø¨ Ø§Ù„Ø¯Ø¨ÙˆØ³":"Ø§ÙƒØªØ¨ Ø¹Ù†ÙˆØ§Ù†Ùƒ ÙŠØ¯ÙˆÙŠØ§Ù‹"})]})]}),e.jsx("button",{onClick:t,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("button",{onClick:()=>P("map"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${T==="map"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[e.jsx(Kc,{className:"w-4 h-4"}),"Ø§Ù„Ø®Ø±ÙŠØ·Ø©"]}),e.jsxs("button",{onClick:()=>P("manual"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${T==="manual"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[e.jsx(Qt,{className:"w-4 h-4"}),"Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ"]})]}),T==="map"&&e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:p,onChange:y=>{f(y.target.value),o(y.target.value)},onFocus:()=>L.length>0&&B(!0),placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø­ÙŠØŒ Ø´Ø§Ø±Ø¹ØŒ Ø£Ùˆ Ù…ÙƒØ§Ù†...",className:"w-full bg-white/95 text-gray-800 rounded-xl p-3 pr-10 pl-10 focus:outline-none focus:ring-2 focus:ring-white/50 transition placeholder:text-gray-400"}),g&&e.jsx(as,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-500 animate-spin"}),O&&L.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl overflow-hidden z-[1001] max-h-60 overflow-y-auto",children:L.map((y,d)=>e.jsxs("button",{onClick:()=>R(y),className:"w-full p-3 text-right hover:bg-sky-50 border-b border-gray-100 last:border-0 transition flex items-start gap-3",children:[e.jsx(Ze,{className:"w-5 h-5 text-sky-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-700 text-sm leading-relaxed",children:y.display_name})]},d))})]})]}),T==="map"&&e.jsxs("div",{className:"flex-1 relative",children:[!j&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(as,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-sky-600 font-medium",children:"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø±ÙŠØ·Ø©..."})]})}),e.jsx("div",{id:"location-map",className:"w-full h-full"}),e.jsxs("div",{className:"absolute left-4 top-4 flex flex-col gap-2 z-[1000]",children:[e.jsx("button",{onClick:I,disabled:v,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition disabled:opacity-50",title:"Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ",children:v?e.jsx(as,{className:"w-5 h-5 text-sky-500 animate-spin"}):e.jsx(at,{className:"w-5 h-5 text-sky-500"})}),c&&e.jsx("button",{onClick:q,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition",title:"ØªÙ…Ø±ÙƒØ²",children:e.jsx(xt,{className:"w-5 h-5 text-gray-600"})})]}),c&&e.jsxs("div",{className:"absolute right-4 top-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 z-[1000] max-w-[200px]",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[e.jsx(bs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹"})]}),e.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[c.lat.toFixed(6),", ",c.lng.toFixed(6)]})]})]}),T==="manual"&&e.jsx("div",{className:"flex-1 p-6 overflow-y-auto bg-gray-50",children:e.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(Qt,{className:"w-10 h-10 text-sky-500"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù†Ùƒ ÙŠØ¯ÙˆÙŠØ§Ù‹"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø¯Ù‚Ø© Ù„ÙŠØµÙ„Ùƒ Ø§Ù„Ø·Ù„Ø¨"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-xl p-3 bg-white focus:border-sky-400 focus:outline-none",onChange:y=>w(d=>{const M=d.split("ØŒ").slice(1);return y.target.value+(M.length?"ØŒ"+M.join("ØŒ"):"")}),children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"}),e.jsx("option",{value:"Ø§Ù„Ø±ÙŠØ§Ø¶",children:"Ø§Ù„Ø±ÙŠØ§Ø¶"}),e.jsx("option",{value:"Ø¬Ø¯Ø©",children:"Ø¬Ø¯Ø©"}),e.jsx("option",{value:"Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©",children:"Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©"}),e.jsx("option",{value:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©",children:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©"}),e.jsx("option",{value:"Ø§Ù„Ø¯Ù…Ø§Ù…",children:"Ø§Ù„Ø¯Ù…Ø§Ù…"}),e.jsx("option",{value:"Ø§Ù„Ø®Ø¨Ø±",children:"Ø§Ù„Ø®Ø¨Ø±"}),e.jsx("option",{value:"Ø§Ù„Ø£Ø­Ø³Ø§Ø¡",children:"Ø§Ù„Ø£Ø­Ø³Ø§Ø¡"}),e.jsx("option",{value:"Ø§Ù„Ø·Ø§Ø¦Ù",children:"Ø§Ù„Ø·Ø§Ø¦Ù"}),e.jsx("option",{value:"ØªØ¨ÙˆÙƒ",children:"ØªØ¨ÙˆÙƒ"}),e.jsx("option",{value:"Ø¨Ø±ÙŠØ¯Ø©",children:"Ø¨Ø±ÙŠØ¯Ø©"}),e.jsx("option",{value:"Ø®Ù…ÙŠØ³ Ù…Ø´ÙŠØ·",children:"Ø®Ù…ÙŠØ³ Ù…Ø´ÙŠØ·"}),e.jsx("option",{value:"Ø£Ø¨Ù‡Ø§",children:"Ø£Ø¨Ù‡Ø§"}),e.jsx("option",{value:"Ø§Ù„Ù‚Ø·ÙŠÙ",children:"Ø§Ù„Ù‚Ø·ÙŠÙ"}),e.jsx("option",{value:"Ù†Ø¬Ø±Ø§Ù†",children:"Ù†Ø¬Ø±Ø§Ù†"}),e.jsx("option",{value:"Ø¬Ø§Ø²Ø§Ù†",children:"Ø¬Ø§Ø²Ø§Ù†"}),e.jsx("option",{value:"ÙŠÙ†Ø¨Ø¹",children:"ÙŠÙ†Ø¨Ø¹"}),e.jsx("option",{value:"Ø­Ø§Ø¦Ù„",children:"Ø­Ø§Ø¦Ù„"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ø§Ù„Ø­ÙŠ"}),e.jsx("input",{type:"text",placeholder:"Ù…Ø«Ø§Ù„: Ø­ÙŠ Ø§Ù„Ù†Ø±Ø¬Ø³",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:y=>w(d=>(d.split("ØŒ")[0]||"")+(y.target.value?"ØŒ "+y.target.value:""))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ø§Ù„Ø´Ø§Ø±Ø¹"}),e.jsx("input",{type:"text",placeholder:"Ù…Ø«Ø§Ù„: Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…Ù„Ùƒ Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ²",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:y=>w(d=>d.split("ØŒ").slice(0,2).join("ØŒ")+(y.target.value?"ØŒ "+y.target.value:""))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©"}),e.jsx("textarea",{placeholder:"Ø±Ù‚Ù… Ø§Ù„Ù…Ø¨Ù†Ù‰ØŒ Ø§Ù„Ø¯ÙˆØ±ØŒ Ø¹Ù„Ø§Ù…Ø© Ù…Ù…ÙŠØ²Ø©...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none resize-none",onChange:y=>w(d=>d.split("ØŒ").slice(0,3).join("ØŒ")+(y.target.value?"ØŒ "+y.target.value:""))})]}),r&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[e.jsx(bs,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:"})]}),e.jsx("p",{className:"text-gray-700",children:r})]})]})}),e.jsxs("div",{className:"bg-white border-t p-4 space-y-3",children:[E&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-3 text-sm flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 flex-shrink-0"}),E]}),T==="map"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(Yn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:r,onChange:y=>w(y.target.value),placeholder:"ÙˆØµÙ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ù…Ø«Ø§Ù„: Ø­ÙŠ Ø§Ù„Ù†Ø±Ø¬Ø³ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…Ù„Ùƒ Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ²ØŒ Ø¨Ø¬Ø§Ù†Ø¨ Ù…Ø³Ø¬Ø¯...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 pr-10 focus:border-sky-400 focus:outline-none transition text-gray-800"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"ğŸ’¡ Ø£Ø¶Ù ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ø¶Ø­Ø© Ù„ÙŠØµÙ„Ùƒ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø³Ø±Ø¹Ø©"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:t,className:"flex-1 py-3 px-4 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsxs("button",{onClick:b,disabled:T==="map"&&!c,className:"flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5"}),"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹"]})]})]})]}),e.jsx("style",{children:`
        .custom-marker {
          background: transparent !important;
          border: none !important;
        }
        .leaflet-container {
          font-family: inherit;
        }
        .leaflet-control-zoom {
          display: none;
        }
        #location-map {
          background: #f0f9ff;
        }
      `})]}):null},Tn=.27,sa={clientId:"AR7QZ7sgXORp99wUPIY75Wl9m4YLtLtVzaStB5g-q7eUT9jOLIKEeGGlxT8jlC9n1sDTcpCpD1peRxR5",currency:"USD",environment:"live",minRecharge:10,maxRecharge:1e3,sarToUsd:s=>Math.round(s*Tn*100)/100,usdToSar:s=>Math.round(s/Tn*100)/100,calculateFee:s=>Math.round((s*.029+.3)*100)/100},Ui=()=>({clientId:sa.clientId,currency:sa.currency,intent:"capture",components:"buttons"}),zt=1,jt=.75,Rn=3.75,Jx=.0157,Xx=5,ba=!0,Zx=()=>{const{items:s,subtotal:t,clear:a}=Ea(),{user:i}=Ee(),c=os(),u=Ps(),r=He(),[w,D]=l.useState(""),[U,v]=l.useState(!1),[N,E]=l.useState(null),[A,j]=l.useState(null),[z,p]=l.useState(!1),[f,L]=l.useState("pickup"),[$,g]=l.useState("cod"),[F,O]=l.useState(0),[B,T]=l.useState(!1),[P,m]=l.useState([]),[o,R]=l.useState(null),[I,q]=l.useState(!1);s.reduce((h,S)=>h+S.qty,0);const x=l.useMemo(()=>s.reduce((h,S)=>S.price>=Xx?h+Jx*S.qty:h,0),[s]),b=l.useMemo(()=>{if(!o)return 0;switch(o.offerType){case"percent_discount":const h=t*(o.discountPercent||0)/100;return Math.min(h,t);case"fixed_discount":return Math.min(o.discountAmount||0,t);case"bundle_meal":return o.bundleOriginalPrice&&o.bundlePrice?o.bundleOriginalPrice-o.bundlePrice:0;case"buy_x_get_y":return 0;default:return 0}},[o,t]),y=t+x-b;l.useEffect(()=>{(async()=>{var ie,re,ye;if(!i)return;try{const ue=await Ce(J(C,"wallets",i.uid));ue.exists()&&O(((ie=ue.data())==null?void 0:ie.balance)||0)}catch(ue){console.warn("Error loading wallet:",ue)}if(s.length===0)return;let S=(re=s[0])==null?void 0:re.ownerId;if(!S&&((ye=s[0])!=null&&ye.id))try{const ue=await Ce(J(C,"menuItems",s[0].id)),_=ue.exists()?ue.data():null;S=(_==null?void 0:_.ownerId)||null}catch(ue){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµÙ†Ù:",ue)}if(!S){E(null);return}const V=await Ce(J(C,"restaurants",S)),Q=V.exists()?V.data():null;E({id:S,name:(Q==null?void 0:Q.name)||"Ù…Ø·Ø¹Ù…",referredBy:Q==null?void 0:Q.referredBy,referrerType:Q==null?void 0:Q.referrerType})})()},[s,i]),l.useEffect(()=>{(async()=>{if(!(N!=null&&N.id)){m([]);return}q(!0);try{const S=fe(ee(C,"offers"),je("ownerId","==",N.id),je("isActive","==",!0)),V=await be(S),Q=new Date,ie=V.docs.map(re=>{var ye,ue,_,se;return{id:re.id,...re.data(),expiresAt:(ue=(ye=re.data().expiresAt)==null?void 0:ye.toDate)==null?void 0:ue.call(ye),startsAt:(se=(_=re.data().startsAt)==null?void 0:_.toDate)==null?void 0:se.call(_)}}).filter(re=>!(re.expiresAt&&new Date(re.expiresAt)<Q||re.startsAt&&new Date(re.startsAt)>Q||re.minOrderAmount&&t<re.minOrderAmount));m(ie),ie.length===1&&R(ie[0])}catch(S){console.warn("Error loading offers:",S),m([])}finally{q(!1)}})()},[N==null?void 0:N.id,t]);const d=(h,S)=>{j(h),D(S),p(!1),r.success("ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ Ø¨Ù†Ø¬Ø§Ø­! ğŸ“")},M=async()=>{var S;if(!i)return;if(s.length===0){u.warning("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");return}if(f==="delivery"&&ba){if(!w){u.warning("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†");return}if(!A){u.warning("Ø­Ø¯Ù‘Ø¯ Ù…ÙˆÙ‚Ø¹Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©");return}}let h=N==null?void 0:N.id;if(!h&&((S=s[0])!=null&&S.id)){const V=await Ce(J(C,"menuItems",s[0].id)),Q=V.exists()?V.data():null;h=(Q==null?void 0:Q.ownerId)||null}if(!h){u.error("ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø·Ø¹Ù… Ù„Ù„Ø·Ù„Ø¨. Ø£Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©.");return}v(!0);try{const V=(N==null?void 0:N.referrerType)==="admin"&&(N==null?void 0:N.referredBy),Q=s.reduce((G,Z)=>G+Z.qty,0),ie=zt+jt,re=t-ie*Q,ue=Math.max(0,re-b),_=zt*Q,se=V?jt*Q:0,pe=_+(V?0:jt*Q),le=await Pe(ee(C,"orders"),{customerId:i.uid,customerName:i.displayName||i.email||"Ø¹Ù…ÙŠÙ„",ownerId:h,restaurantId:h,restaurantName:(N==null?void 0:N.name)||"Ù…Ø·Ø¹Ù…",items:s.map(G=>({id:G.id,name:G.name,price:G.price,qty:G.qty,ownerId:G.ownerId??h})),subtotal:t,deliveryFee:0,deliveryFeeSetBy:null,deliveryFeeSetAt:null,total:y,status:"pending",deliveryType:f,address:f==="pickup"?"Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø·Ø¹Ù…":w,location:f==="pickup"?null:A,createdAt:X(),updatedAt:X(),paymentMethod:"cod",appliedOffer:o?{id:o.id,title:o.title,offerType:o.offerType,discountPercent:o.discountPercent||null,discountAmount:o.discountAmount||null}:null,discountAmount:b,restaurantEarnings:ue,platformFee:_,platformFeePerItem:zt,adminCommission:se,adminCommissionPerItem:jt,appEarnings:pe,totalItemsCount:Q,referredBy:(N==null?void 0:N.referredBy)||null,courierPlatformFee:f==="delivery"?Rn:0});try{const G=J(C,"wallets",h);(await Ce(G)).exists()?await me(G,{pendingBalance:Ke(ue),totalEarnings:Ke(ue),updatedAt:X()}):await Be(G,{balance:0,pendingBalance:ue,totalEarnings:ue,totalSales:0,totalWithdrawn:0,ownerType:"restaurant",updatedAt:X()})}catch(G){console.warn("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ù…Ø­ÙØ¸Ø© Ø§Ù„Ù…Ø·Ø¹Ù…:",G)}if(V&&(N!=null&&N.referredBy)&&se>0)try{const G=J(C,"wallets",N.referredBy);(await Ce(G)).exists()?await me(G,{balance:Ke(se),totalEarnings:Ke(se),updatedAt:X()}):await Be(G,{balance:se,totalEarnings:se,totalWithdrawn:0,transactions:[],updatedAt:X()})}catch(G){console.warn("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ù…Ø­ÙØ¸Ø© Ø§Ù„Ù…Ø´Ø±Ù:",G)}try{const G=J(C,"wallets","app_earnings");(await Ce(G)).exists()?await me(G,{balance:Ke(pe),totalEarnings:Ke(pe),updatedAt:X()}):await Be(G,{balance:pe,totalEarnings:pe,totalWithdrawn:0,transactions:[],updatedAt:X()})}catch(G){console.warn("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ù…Ø­ÙØ¸Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:",G)}if(o)try{await me(J(C,"offers",o.id),{usedCount:Ke(1),updatedAt:X()})}catch(G){console.warn("Error updating offer usage count:",G)}try{const{notifyRestaurantNewOrder:G,notifyOrderCreated:Z}=await qs(async()=>{const{notifyRestaurantNewOrder:ne,notifyOrderCreated:ce}=await Promise.resolve().then(()=>Ca);return{notifyRestaurantNewOrder:ne,notifyOrderCreated:ce}},void 0);await G(h,le.id,i.displayName||"Ø¹Ù…ÙŠÙ„",y,s.reduce((ne,ce)=>ne+ce.qty,0)),await Z(i.uid,le.id,(N==null?void 0:N.name)||"Ø§Ù„Ù…Ø·Ø¹Ù…",y),console.log("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯")}catch(G){console.warn("âš ï¸ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:",G)}a(),c("/orders")}catch(V){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨:",V),u.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.")}finally{v(!1)}},k=async(h,S)=>{var G;if(!i)return;if(s.length===0){u.warning("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");return}if(f==="delivery"&&ba){if(!w){u.warning("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†");return}if(!A){u.warning("Ø­Ø¯Ù‘Ø¯ Ù…ÙˆÙ‚Ø¹Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©");return}}if(h==="wallet"&&F<y){u.warning("Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø­ÙØ¸Ø© ØºÙŠØ± ÙƒØ§ÙÙŠ");return}let V=N==null?void 0:N.id;if(!V&&((G=s[0])!=null&&G.id)){const Z=await Ce(J(C,"menuItems",s[0].id)),ne=Z.exists()?Z.data():null;V=(ne==null?void 0:ne.ownerId)||null}if(!V){u.error("ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø·Ø¹Ù… Ù„Ù„Ø·Ù„Ø¨. Ø£Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©.");return}v(!0);const Q=(N==null?void 0:N.referrerType)==="admin"&&(N==null?void 0:N.referredBy),ie=s.reduce((Z,ne)=>Z+ne.qty,0),re=zt+jt,ye=t-re*ie,_=Math.max(0,ye-b),se=zt*ie,pe=Q?jt*ie:0,le=se+(Q?0:jt*ie);try{if(h==="wallet"){const ne=J(C,"wallets",i.uid),ce={id:`order_${Date.now()}`,type:"debit",amount:y,description:`Ø¯ÙØ¹ Ø·Ù„Ø¨ Ù…Ù† ${N==null?void 0:N.name}`,createdAt:new Date};await me(ne,{balance:Ke(-y),transactions:hl(ce),updatedAt:X()}),O(Ne=>Ne-y)}const Z=await Pe(ee(C,"orders"),{customerId:i.uid,customerName:i.displayName||i.email||"Ø¹Ù…ÙŠÙ„",ownerId:V,restaurantId:V,restaurantName:(N==null?void 0:N.name)||"Ù…Ø·Ø¹Ù…",items:s.map(ne=>({id:ne.id,name:ne.name,price:ne.price,qty:ne.qty,ownerId:ne.ownerId??V})),subtotal:t,deliveryFee:0,deliveryFeeSetBy:null,deliveryFeeSetAt:null,total:y,status:"pending",deliveryType:f,address:f==="pickup"?"Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø·Ø¹Ù…":w,location:f==="pickup"?null:A,createdAt:X(),updatedAt:X(),paymentMethod:h,paymentStatus:"paid",paypalOrderId:S||null,paidAt:X(),appliedOffer:o?{id:o.id,title:o.title,offerType:o.offerType,discountPercent:o.discountPercent||null,discountAmount:o.discountAmount||null}:null,discountAmount:b,restaurantEarnings:_,platformFee:se,platformFeePerItem:zt,adminCommission:pe,adminCommissionPerItem:jt,appEarnings:le,totalItemsCount:ie,referredBy:(N==null?void 0:N.referredBy)||null,courierPlatformFee:f==="delivery"?Rn:0});try{const ne=J(C,"wallets",V);(await Ce(ne)).exists()?await me(ne,{pendingBalance:Ke(_),totalEarnings:Ke(_),updatedAt:X()}):await Be(ne,{pendingBalance:_,totalEarnings:_,balance:0,totalWithdrawn:0,transactions:[],updatedAt:X()})}catch(ne){console.warn("Error updating restaurant wallet:",ne)}if(Q&&(N!=null&&N.referredBy)&&pe>0)try{const ne=J(C,"wallets",N.referredBy);(await Ce(ne)).exists()?await me(ne,{balance:Ke(pe),totalEarnings:Ke(pe),updatedAt:X()}):await Be(ne,{balance:pe,totalEarnings:pe,totalWithdrawn:0,transactions:[],updatedAt:X()})}catch(ne){console.warn("Error updating admin wallet:",ne)}if(o)try{await me(J(C,"offers",o.id),{usedCount:Ke(1),updatedAt:X()})}catch(ne){console.warn("Error updating offer usage count:",ne)}try{const{notifyRestaurantNewOrder:ne,notifyOrderCreated:ce}=await qs(async()=>{const{notifyRestaurantNewOrder:Ne,notifyOrderCreated:Y}=await Promise.resolve().then(()=>Ca);return{notifyRestaurantNewOrder:Ne,notifyOrderCreated:Y}},void 0);await ne(V,Z.id,i.displayName||"Ø¹Ù…ÙŠÙ„",y,s.reduce((Ne,Y)=>Ne+Y.qty,0)),await ce(i.uid,Z.id,(N==null?void 0:N.name)||"Ø§Ù„Ù…Ø·Ø¹Ù…",y),console.log("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯")}catch(ne){console.warn("âš ï¸ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:",ne)}a(),u.success(h==="paypal"?`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! âœ…
ØªÙ… Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± PayPal`:`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! âœ…
ØªÙ… Ø§Ù„Ø®ØµÙ… Ù…Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©`),c("/orders")}catch(Z){console.error("Error placing order:",Z),u.error("ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨")}finally{v(!1)}};return e.jsx($e,{allow:["customer","owner","admin","developer"],children:e.jsxs("div",{className:"max-w-xl mx-auto space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(ns,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨"}),e.jsx("p",{className:"text-sm text-white/80",children:(N==null?void 0:N.name)||"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5 text-sky-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨"}),e.jsxs("span",{className:"text-xs bg-sky-100 text-sky-600 px-2 py-0.5 rounded-full mr-auto",children:[s.length," ØµÙ†Ù"]})]}),e.jsx("div",{className:"p-4 space-y-2",children:s.map(h=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center text-sm",children:[h.qty,"Ã—"]}),e.jsx("span",{className:"text-gray-800 font-medium",children:h.name})]}),e.jsxs("span",{className:"font-bold text-sky-600",children:[(h.price*h.qty).toFixed(2)," Ø±.Ø³"]})]},h.id))})]}),(P.length>0||I)&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…ØªØ§Ø­Ø©"}),P.length>0&&e.jsxs("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full mr-auto",children:[P.length," Ø¹Ø±Ø¶"]})]}),e.jsx("div",{className:"p-4 space-y-3",children:I?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-orange-300 border-t-orange-600 rounded-full animate-spin"}),e.jsx("span",{className:"mr-2 text-gray-500",children:"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶..."})]}):e.jsxs(e.Fragment,{children:[P.map(h=>{const S=(o==null?void 0:o.id)===h.id,V=h.offerType==="percent_discount"?e.jsx(gl,{className:"w-5 h-5"}):h.offerType==="fixed_discount"?e.jsx(aa,{className:"w-5 h-5"}):e.jsx(Ms,{className:"w-5 h-5"}),Q=h.offerType==="percent_discount"?`${h.discountPercent}%`:h.offerType==="fixed_discount"?`${h.discountAmount} Ø±.Ø³`:h.offerType==="bundle_meal"&&h.bundlePrice?`${h.bundlePrice} Ø±.Ø³`:"";return e.jsxs("button",{onClick:()=>R(S?null:h),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-3 ${S?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-300"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${S?"bg-orange-500 text-white":"bg-orange-100 text-orange-600"}`,children:V}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:`font-bold ${S?"text-orange-700":"text-gray-800"}`,children:h.title}),e.jsx("p",{className:"text-sm text-gray-500",children:h.description||(h.offerType==="percent_discount"?`Ø®ØµÙ… ${h.discountPercent}% Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ùƒ`:h.offerType==="fixed_discount"?`Ø®ØµÙ… ${h.discountAmount} Ø±.Ø³ Ù…Ù† Ø·Ù„Ø¨Ùƒ`:h.offerType==="bundle_meal"?`ÙˆØ¬Ø¨Ø© Ù…Ø¬Ù…Ù‘Ø¹Ø© Ø¨Ø³Ø¹Ø± ${h.bundlePrice} Ø±.Ø³`:h.offerType==="buy_x_get_y"?`Ø§Ø´ØªØ±Ù ${h.buyQuantity} ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ ${h.getQuantity} Ù…Ø¬Ø§Ù†Ø§Ù‹`:"Ø¹Ø±Ø¶ Ø®Ø§Øµ")}),h.minOrderAmount&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø·Ù„Ø¨: ",h.minOrderAmount," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[Q&&e.jsx("span",{className:`text-lg font-black ${S?"text-orange-600":"text-gray-700"}`,children:Q}),S&&e.jsx(bs,{className:"w-5 h-5 text-orange-500 mt-1"})]})]},h.id)}),o&&e.jsx("button",{onClick:()=>R(null),className:"w-full text-center text-sm text-gray-500 hover:text-red-500 py-2",children:"Ø¥Ù„ØºØ§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ø±Ø¶"})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-sky-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("button",{onClick:()=>L("pickup"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-4 ${f==="pickup"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${f==="pickup"?"bg-green-500":"bg-gray-100"}`,children:e.jsx(Le,{className:`w-6 h-6 ${f==="pickup"?"text-white":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:`font-bold ${f==="pickup"?"text-green-700":"text-gray-800"}`,children:"Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ù…Ø¬Ø§Ù†Ø§Ù‹ - Ø¨Ø¯ÙˆÙ† Ø±Ø³ÙˆÙ… ØªÙˆØµÙŠÙ„"})]}),f==="pickup"&&e.jsx(bs,{className:"w-6 h-6 text-green-500"})]}),e.jsxs("button",{onClick:()=>L("delivery"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-4 ${f==="delivery"?"border-sky-500 bg-sky-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${f==="delivery"?"bg-sky-500":"bg-gray-100"}`,children:e.jsx(Ve,{className:`w-6 h-6 ${f==="delivery"?"text-white":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:`font-bold ${f==="delivery"?"text-sky-700":"text-gray-800"}`,children:"ØªÙˆØµÙŠÙ„ Ù„Ù„Ù…Ù†Ø²Ù„"}),e.jsx("p",{className:"text-sm text-amber-600",children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ ÙŠØ­Ø¯Ø¯Ù‡Ø§ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨/Ø§Ù„Ø£Ø³Ø±Ø©"})]}),f==="delivery"&&e.jsx(bs,{className:"w-6 h-6 text-sky-500"})]})]})]}),f==="delivery"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙˆØµÙŠÙ„"})]}),e.jsx("div",{className:"p-4",children:A?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(bs,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-bold text-green-700 mb-1",children:"ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ âœ“"}),e.jsx("p",{className:"text-sm text-gray-600 break-words",children:w}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 font-mono",children:[A.lat.toFixed(5),", ",A.lng.toFixed(5)]})]})]})}),e.jsxs("button",{onClick:()=>p(!0),className:"w-full py-3 px-4 rounded-xl border-2 border-sky-200 text-sky-600 font-semibold hover:bg-sky-50 transition flex items-center justify-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),"ØªØºÙŠÙŠØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹"]})]}):e.jsxs("button",{onClick:()=>p(!0),className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-500 to-sky-600 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[e.jsx(Ze,{className:"w-6 h-6"}),e.jsx("span",{children:"ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx(pt,{className:"w-5 h-5"})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Ks,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"Ù…Ù„Ø®Øµ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[e.jsx("span",{children:"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ"}),e.jsxs("span",{className:"font-semibold",children:[t.toFixed(2)," Ø±.Ø³"]})]}),x>0&&e.jsxs("div",{className:"flex items-center justify-between text-gray-500",children:[e.jsx("span",{className:"text-sm",children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"}),e.jsxs("span",{className:"font-semibold text-sm",children:[x.toFixed(2)," Ø±.Ø³"]})]}),o&&b>0&&e.jsxs("div",{className:"flex items-center justify-between text-green-600 bg-green-50 -mx-4 px-4 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["Ø®ØµÙ…: ",o.title]})]}),e.jsxs("span",{className:"font-bold",children:["- ",b.toFixed(2)," Ø±.Ø³"]})]}),f==="delivery"&&e.jsxs("div",{className:"flex items-center justify-between text-amber-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„"})]}),e.jsx("span",{className:"font-semibold text-sm",children:"ØªÙØ­Ø¯Ø¯ Ù„Ø§Ø­Ù‚Ø§Ù‹"})]}),f==="pickup"&&e.jsxs("div",{className:"flex items-center justify-between text-green-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø·Ø¹Ù…"})]}),e.jsx("span",{className:"font-semibold",children:"Ù…Ø¬Ø§Ù†Ø§Ù‹"})]}),e.jsx("div",{className:"h-px bg-gray-200 my-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-bold text-lg text-gray-800",children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ"}),e.jsxs("div",{className:"text-left",children:[b>0&&e.jsx("span",{className:"text-sm text-gray-400 line-through ml-2",children:t.toFixed(2)}),e.jsxs("span",{className:"font-black text-xl text-sky-600",children:[y.toFixed(2)," Ø±.Ø³"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Ks,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹"})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("button",{onClick:()=>g("cod"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-3 ${$==="cod"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${$==="cod"?"border-green-500":"border-gray-300"}`,children:$==="cod"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:"font-bold text-gray-800",children:"ğŸ’µ Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ø§Ø¯ÙØ¹ Ù†Ù‚Ø¯Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ"})]})]}),e.jsxs("button",{onClick:()=>g("paypal"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-3 ${$==="paypal"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${$==="paypal"?"border-blue-500":"border-gray-300"}`,children:$==="paypal"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:"font-bold text-gray-800",children:"ğŸ’³ PayPal"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ø§Ø¯ÙØ¹ Ø¨Ù€ Visa/Mastercard Ø£Ùˆ Ø­Ø³Ø§Ø¨ PayPal"})]})]}),e.jsxs("button",{onClick:()=>g("wallet"),disabled:F<y,className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-3 ${$==="wallet"?"border-sky-500 bg-sky-50":F<y?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${$==="wallet"?"border-sky-500":"border-gray-300"}`,children:$==="wallet"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-sky-500"})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsxs("p",{className:"font-bold text-gray-800",children:[e.jsx(is,{className:"w-4 h-4 inline ml-1"}),"Ø§Ù„Ù…Ø­ÙØ¸Ø©",e.jsxs("span",{className:`text-sm mr-2 ${F>=y?"text-green-600":"text-red-500"}`,children:["(",F.toFixed(2)," Ø±.Ø³)"]})]}),F<y?e.jsxs("p",{className:"text-xs text-red-500",children:["Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ - ØªØ­ØªØ§Ø¬ ",(y-F).toFixed(2)," Ø±.Ø³"]}):e.jsx("p",{className:"text-xs text-gray-500",children:"Ø§Ø¯ÙØ¹ Ù…Ù† Ø±ØµÙŠØ¯ Ù…Ø­ÙØ¸ØªÙƒ"})]})]})]})]}),$==="paypal"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± PayPal Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹ Ø¨Ù…Ø¨Ù„Øº ",e.jsxs("span",{className:"font-bold text-sky-600",children:[y.toFixed(2)," Ø±.Ø³"]}),e.jsxs("span",{className:"text-gray-400 text-xs mr-1",children:["(â‰ˆ $",sa.sarToUsd(y),")"]})]}),e.jsx(ti,{options:Ui(),children:e.jsx(ai,{style:{layout:"vertical",shape:"pill",color:"blue",label:"pay",height:50},disabled:U||B||f==="delivery"&&ba&&!A,createOrder:(h,S)=>{const V=sa.sarToUsd(y);return S.order.create({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:V.toString()},description:`Ø·Ù„Ø¨ Ù…Ù† ${(N==null?void 0:N.name)||"Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"}`}]})},onApprove:async(h,S)=>{if(S.order){T(!0);try{const V=await S.order.capture();await k("paypal",V.id)}catch(V){console.error("PayPal capture error:",V),r.error("ÙØ´Ù„ ÙÙŠ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹")}finally{T(!1)}}},onError:h=>{console.error("PayPal Error:",h),r.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹")},onCancel:()=>{r.info("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹")}})}),B&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sky-600",children:[e.jsx(ze,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Ø¬Ø§Ø±Ù Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨Ùƒ..."})]})]}):e.jsx("button",{disabled:U||f==="delivery"&&ba&&!A||$==="wallet"&&F<y,onClick:()=>{$==="wallet"?k("wallet"):M()},className:"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-3",children:U?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Ø¬Ø§Ø±Ù Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨..."]}):e.jsxs(e.Fragment,{children:[e.jsx(bs,{className:"w-6 h-6"}),$==="wallet"?`ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ (Ø®ØµÙ… ${y.toFixed(2)} Ù…Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©)`:f==="pickup"?"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ (Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø·Ø¹Ù…)":"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ (Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…)"]})}),f==="delivery"&&ba&&!A&&e.jsx("p",{className:"text-center text-sm text-amber-600 bg-amber-50 rounded-xl p-3",children:"âš ï¸ ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙˆØµÙŠÙ„ Ù‚Ø¨Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨"}),e.jsx(Mi,{isOpen:z,onClose:()=>p(!1),onConfirm:d,initialLocation:A})]})})},em={restaurant:{title:"Ù‚ÙŠÙ‘Ù… Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø©",icon:Le,color:"amber",placeholder:"ÙƒÙŠÙ ÙƒØ§Ù†Øª Ø¬ÙˆØ¯Ø© Ø§Ù„Ø·Ø¹Ø§Ù… ÙˆØ§Ù„Ø®Ø¯Ù…Ø©ØŸ",headerClass:"from-amber-500 to-amber-600",btnClass:"from-amber-500 to-amber-600",btnHoverClass:"hover:from-amber-600 hover:to-amber-700"},courier:{title:"Ù‚ÙŠÙ‘Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨",icon:Ve,color:"emerald",placeholder:"ÙƒÙŠÙ ÙƒØ§Ù† Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ØŸ",headerClass:"from-emerald-500 to-emerald-600",btnClass:"from-emerald-500 to-emerald-600",btnHoverClass:"hover:from-emerald-600 hover:to-emerald-700"},customer:{title:"Ù‚ÙŠÙ‘Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„",icon:ms,color:"sky",placeholder:"ÙƒÙŠÙ ÙƒØ§Ù† ØªØ¹Ø§Ù…Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„ØŸ",headerClass:"from-sky-500 to-sky-600",btnClass:"from-sky-500 to-sky-600",btnHoverClass:"hover:from-sky-600 hover:to-sky-700"}},Dl=({isOpen:s,onClose:t,onSubmit:a,type:i,targetName:c,orderId:u})=>{const[r,w]=l.useState(0),[D,U]=l.useState(0),[v,N]=l.useState(""),[E,A]=l.useState(!1),[j,z]=l.useState(""),p=em[i],f=p.icon,L=async()=>{if(r===0){z("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø¬ÙˆÙ…");return}A(!0),z("");try{await a({stars:r,comment:v.trim()}),w(0),N(""),t()}catch{z("Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}finally{A(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md overflow-hidden shadow-2xl animate-in fade-in zoom-in duration-200",children:[e.jsx("div",{className:`bg-gradient-to-r ${p.headerClass} p-6 text-white`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsx(f,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:p.title}),c&&e.jsx("p",{className:"text-white/80 text-sm",children:c})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-xl transition",children:e.jsx(Oe,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"ÙƒÙ… ØªÙ‚ÙŠÙŠÙ…ÙƒØŸ"}),e.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map($=>e.jsx("button",{type:"button",onClick:()=>w($),onMouseEnter:()=>U($),onMouseLeave:()=>U(0),className:"p-1 transition-transform hover:scale-110",children:e.jsx(ls,{className:`w-10 h-10 transition-colors ${$<=(D||r)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`})},$))}),r>0&&e.jsxs("p",{className:"mt-2 text-lg font-bold text-gray-800",children:[r===1&&"Ø³ÙŠØ¡ ğŸ˜",r===2&&"Ù…Ù‚Ø¨ÙˆÙ„ ğŸ˜",r===3&&"Ø¬ÙŠØ¯ ğŸ™‚",r===4&&"Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹ ğŸ˜Š",r===5&&"Ù…Ù…ØªØ§Ø²! ğŸŒŸ"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ØªØ¹Ù„ÙŠÙ‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("textarea",{value:v,onChange:$=>N($.target.value),placeholder:p.placeholder,rows:3,className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sky-500 resize-none"})]}),j&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm text-center",children:j}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{onClick:L,disabled:E||r===0,className:`flex-1 flex items-center justify-center gap-2 py-3 px-6 
                         bg-gradient-to-r ${p.btnClass} 
                         ${p.btnHoverClass}
                         text-white rounded-xl font-bold transition-all disabled:opacity-50`,children:E?e.jsx(as,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(ra,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…"})]})})})]})]})}):null},hs={STARTING_POINTS:100,SUSPENSION_THRESHOLD:30,WARNING_THRESHOLD:50},er={PREPARATION_TIME:30,COURIER_PICKUP_TIME:15,DELIVERY_TIME:30,WARNING_THRESHOLD:.75},sm=(s,t)=>{var D;if(!s)return{elapsed:0,remaining:t,percentage:0};const a=(D=s==null?void 0:s.toDate)!=null&&D.call(s)?s.toDate():s instanceof Date?s:new Date(s);if(isNaN(a.getTime()))return{elapsed:0,remaining:t,percentage:0};const c=new Date().getTime()-a.getTime(),u=Math.floor(c/6e4),r=t-u,w=Math.min(u/t*100,100);return{elapsed:u,remaining:r,percentage:w}},tm=s=>s>=100?"exceeded":s>=er.WARNING_THRESHOLD*100?"warning":"normal",fa=s=>{const t=Math.abs(s);if(t<60)return`${t} Ø¯Ù‚ÙŠÙ‚Ø©`;const a=Math.floor(t/60),i=t%60;return`${a}Ø³ ${i}Ø¯`},En=s=>{switch(s){case"preparation":return"Ø§Ù„ØªØ¬Ù‡ÙŠØ²";case"pickup":return"Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…";case"delivery":return"Ø§Ù„ØªÙˆØµÙŠÙ„"}},am=s=>{switch(s){case"preparation":return er.PREPARATION_TIME;case"pickup":return er.COURIER_PICKUP_TIME;case"delivery":return er.DELIVERY_TIME}},rm=(s,t)=>{if(s.timestamps)switch(t){case"preparation":return s.timestamps.acceptedAt;case"pickup":return s.timestamps.readyAt;case"delivery":return s.timestamps.pickedUpAt}},lm=(s,t)=>{switch(t){case"preparation":return s.status==="ready"||s.status==="out_for_delivery"||s.status==="delivered";case"pickup":return s.status==="out_for_delivery"||s.status==="delivered";case"delivery":return s.status==="delivered"}},nm=(s,t)=>{switch(t){case"preparation":return s.status==="accepted"||s.status==="preparing";case"pickup":return s.status==="ready";case"delivery":return s.status==="out_for_delivery"}},ya=({order:s,type:t,showLabel:a=!0,compact:i=!1})=>{const[c,u]=l.useState({elapsed:0,remaining:0,percentage:0}),[r,w]=l.useState("normal"),D=am(t),U=rm(s,t),v=lm(s,t),N=nm(s,t);if(l.useEffect(()=>{if(!N||v||!U)return;const j=()=>{const p=sm(U,D);u(p),w(tm(p.percentage))};j();const z=setInterval(j,1e4);return()=>clearInterval(z)},[U,D,N,v]),!U&&!v)return null;if(v)return i?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"âœ“"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 px-3 py-1.5 rounded-lg",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:[En(t)," âœ“"]})]});if(!N)return null;const A={normal:{bg:"bg-sky-50",border:"border-sky-200",text:"text-sky-700",bar:"bg-sky-500",icon:"text-sky-500"},warning:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700",bar:"bg-amber-500",icon:"text-amber-500"},exceeded:{bg:"bg-red-50",border:"border-red-300",text:"text-red-700",bar:"bg-red-500",icon:"text-red-500"}}[r];return i?e.jsxs("div",{className:`flex items-center gap-1 ${A.text}`,children:[r==="exceeded"?e.jsx(Ts,{className:"w-4 h-4 animate-pulse"}):e.jsx(Ge,{className:`w-4 h-4 ${A.icon}`}),e.jsx("span",{className:"text-xs font-bold",children:c.remaining>0?fa(c.remaining):`+${fa(Math.abs(c.remaining))}`})]}):e.jsxs("div",{className:`${A.bg} ${A.border} border rounded-xl p-3 space-y-2`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r==="exceeded"?e.jsx(Ts,{className:`w-5 h-5 ${A.icon} animate-pulse`}):e.jsx(Ge,{className:`w-5 h-5 ${A.icon}`}),a&&e.jsx("span",{className:`text-sm font-bold ${A.text}`,children:En(t)})]}),e.jsx("div",{className:`text-lg font-bold ${A.text}`,children:c.remaining>0?e.jsx("span",{children:fa(c.remaining)}):e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsxs("span",{children:["+",fa(Math.abs(c.remaining))]}),e.jsx("span",{className:"text-xs",children:"âš ï¸"})]})})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${A.bar} transition-all duration-500`,style:{width:`${Math.min(c.percentage,100)}%`}})}),r==="exceeded"&&e.jsx("div",{className:"text-xs text-red-600 font-medium animate-pulse",children:"âš ï¸ ØªØ¬Ø§ÙˆØ² Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯! ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¥Ø³Ø±Ø§Ø¹."}),r==="warning"&&e.jsxs("div",{className:"text-xs text-amber-600 font-medium",children:["â° Ø§Ù„ÙˆÙ‚Øª ÙŠÙ†ÙØ¯! Ø¨Ø§Ù‚ÙŠ ",fa(c.remaining)," ÙÙ‚Ø·."]})]})},im=()=>{var b,y;const{user:s}=Ee(),t=os(),a=He(),{clear:i,add:c}=Ea(),[u,r]=l.useState(null),[w,D]=l.useState([]),[U,v]=l.useState(null),[N,E]=l.useState(null),[A,j]=l.useState(null),[z,p]=l.useState(!1),[f,L]=l.useState(null),$=async(d,M)=>{p(!0),E(M);try{const k=await Ce(J(C,"restaurants",d,"private","bankInfo"));if(k.exists()){const h=k.data();j({bankName:h.bankName||"",bankAccountName:h.bankAccountName||"",bankAccountNumber:h.bankAccountNumber||""})}else{const h=await Ce(J(C,"restaurants",d));if(h.exists()){const S=h.data();j({bankName:S.bankName||"",bankAccountName:S.bankAccountName||"",bankAccountNumber:S.bankAccountNumber||""})}else j(null)}}catch{a.error("ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙØ¹"),j(null)}finally{p(!1)}},g=d=>{navigator.clipboard.writeText(d),a.success("ØªÙ… Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨! ğŸ“‹")};l.useEffect(()=>{if(!s)return;r(null),v(null);const d=fe(ee(C,"orders"),je("customerId","==",s.uid),es("createdAt","desc")),M=cs(d,k=>{D(k.docs.map(h=>({id:h.id,...h.data()}))),r(null)},async k=>{console.error("TrackOrders onSnapshot error:",k),r("âš ï¸ Ø§Ø­ØªÙ…Ø§Ù„ ØªØ­ØªØ§Ø¬ Composite Index Ù„Ù€ customerId + createdAt. Ø¨Ù†Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯ÙˆÙ† ØªØ±ØªÙŠØ¨ Ù…Ø¤Ù‚ØªÙ‹Ø§.");const h=fe(ee(C,"orders"),je("customerId","==",s.uid)),V=(await be(h)).docs.map(re=>({id:re.id,...re.data()})),Q=fe(ee(C,"orders"),es("createdAt","desc"),js(5));let ie=[];try{ie=(await be(Q)).docs.map(ye=>{var _,se,pe,le;const ue=ye.data();return{id:ye.id,customerId:ue.customerId,restaurantId:ue.restaurantId,createdAt:((le=(pe=(se=(_=ue.createdAt)==null?void 0:_.toDate)==null?void 0:se.call(_))==null?void 0:pe.toISOString)==null?void 0:le.call(pe))??null}})}catch{}v({uid:s.uid,fallbackCount:V.length,sample:ie}),D(V)});return()=>M()},[s]);const F=d=>{var M;i(),(M=d.items)==null||M.forEach(k=>{c({id:k.id,name:k.name,price:k.price,ownerId:k.ownerId||d.restaurantId},k.qty)}),a.success("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù„Ù„Ø³Ù„Ø©! ğŸ›’"),d.restaurantId?t(`/menu?restaurant=${d.restaurantId}`):t("/cart")},[O,B]=l.useState(null),T=async d=>{if(d.status!=="pending"){a.error("Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø¹Ø¯ Ù‚Ø¨ÙˆÙ„Ù‡");return}if(window.confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ØŸ")){B(d.id);try{await me(J(C,"orders",d.id),{status:"cancelled",cancelledAt:X(),cancelledBy:"customer",updatedAt:X()});const{processOrderRefund:k,notifyRefundParties:h}=await qs(async()=>{const{processOrderRefund:V,notifyRefundParties:Q}=await import("./refundService-DAeeGHOB.js");return{processOrderRefund:V,notifyRefundParties:Q}},__vite__mapDeps([0,1,2,3,4])),S=await k({id:d.id,customerId:d.customerId,restaurantId:d.restaurantId||"",subtotal:d.subtotal,total:d.total,restaurantEarnings:d.restaurantEarnings,platformFee:d.platformFee,adminCommission:d.adminCommission,appEarnings:d.appEarnings,referredBy:d.referredBy,paymentMethod:d.paymentMethod});await h({id:d.id,customerId:d.customerId,restaurantId:d.restaurantId||"",subtotal:d.subtotal,total:d.total},S,"customer"),S.details.customerRefunded>0?a.success(`ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ø³ØªØ±Ø¯Ø§Ø¯ ${S.details.customerRefunded.toFixed(2)} Ø±.Ø³ Ù„Ù…Ø­ÙØ¸ØªÙƒ âœ…`):a.success("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­ âœ…")}catch(k){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨:",k),a.error("ÙØ´Ù„ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨")}finally{B(null)}}},P=d=>({pending:{text:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",emoji:"â³",color:"bg-yellow-500",icon:Ge},accepted:{text:"ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„",emoji:"âœ…",color:"bg-blue-500",icon:Ie},preparing:{text:"Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±",emoji:"ğŸ‘¨â€ğŸ³",color:"bg-orange-500",icon:wt},ready:{text:"Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ³Ù„ÙŠÙ…",emoji:"ğŸ“¦",color:"bg-purple-500",icon:Me},out_for_delivery:{text:"ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚",emoji:"ğŸš—",color:"bg-sky-500",icon:Ve},delivered:{text:"ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…",emoji:"ğŸ‰",color:"bg-green-500",icon:Ie},cancelled:{text:"Ù…Ù„ØºÙŠ",emoji:"âŒ",color:"bg-red-500",icon:rt}})[d]||{text:d,emoji:"ğŸ“¦",color:"bg-gray-500",icon:Me},m=d=>d.courierId&&d.status==="out_for_delivery",o=d=>{const M=["pending","accepted","preparing","ready"];return!d.courierId&&d.restaurantId&&M.includes(d.status)},R=d=>["pending","accepted"].includes(d.status),I=d=>{var h,S,V,Q;if(d.status!=="delivered")return!1;const M=(S=(h=d.ratings)==null?void 0:h.customerToRestaurant)==null?void 0:S.stars,k=(Q=(V=d.ratings)==null?void 0:V.customerToCourier)==null?void 0:Q.stars;return d.courierId?!M||!k:!M},q=async(d,M,k)=>{var ue,_;const h=w.find(se=>se.id===d);if(!h)return;const S={stars:k.stars,comment:k.comment||void 0,createdAt:new Date},Q={[M==="restaurant"?"ratings.customerToRestaurant":"ratings.customerToCourier"]:S,updatedAt:X()},ie=h.ratings||{};M==="restaurant"?ie.customerToRestaurant=S:ie.customerToCourier=S;const re=(ue=ie.customerToRestaurant)==null?void 0:ue.stars,ye=(_=ie.customerToCourier)==null?void 0:_.stars;h.courierId?re&&ye&&(Q.ratingCompleted=!0):re&&(Q.ratingCompleted=!0),await me(J(C,"orders",d),Q),M==="restaurant"&&h.restaurantId&&await x(h.restaurantId,k.stars),a.success("Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙ‚ÙŠÙŠÙ…Ùƒ! â­")},x=async(d,M)=>{try{const k=await Ce(J(C,"restaurants",d));if(k.exists()){const h=k.data(),S=h.averageRating||0,V=h.totalRatings||0,Q=V>0?(S*V+M)/(V+1):M;await me(J(C,"restaurants",d),{averageRating:Math.round(Q*10)/10,totalRatings:V+1,updatedAt:X()})}}catch(k){console.error("Error updating restaurant rating:",k)}};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Ø·Ù„Ø¨Ø§ØªÙŠ"}),f&&e.jsx(Dl,{isOpen:f.isOpen,onClose:()=>L(null),onSubmit:async d=>{await q(f.orderId,f.type,d),L(null)},type:f.type,targetName:f.targetName,orderId:f.orderId}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>E(null),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",onClick:d=>d.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ks,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹"})]}),e.jsx("button",{onClick:()=>E(null),className:"p-1 hover:bg-white/20 rounded-lg",children:e.jsx(Oe,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-5",children:z?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-10 h-10 border-3 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]}):A&&A.bankName&&A.bankAccountNumber?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 bg-amber-50 p-3 rounded-xl",children:"ğŸ’° Ø­ÙˆÙ‘Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ Ø§Ù„ØªØ§Ù„ÙŠ Ø«Ù… Ø£Ø¨Ù„Øº ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ns,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ø§Ù„Ø¨Ù†Ùƒ"}),e.jsx("p",{className:"font-bold text-gray-800",children:A.bankName})]})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsx("p",{className:"font-bold text-gray-800",children:A.bankAccountName})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ¨Ø§Ù† / Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-mono font-bold text-gray-800 flex-1 text-left",dir:"ltr",children:A.bankAccountNumber}),e.jsx("button",{onClick:()=>g(A.bankAccountNumber||""),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition",children:e.jsx(Jn,{className:"w-4 h-4"})})]})]})]}),w.find(d=>d.id===N)&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-sm text-green-600 mb-1",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ­ÙˆÙŠÙ„Ù‡"}),e.jsxs("p",{className:"text-3xl font-black text-green-700",children:[(y=(b=w.find(d=>d.id===N))==null?void 0:b.total)==null?void 0:y.toFixed(2)," Ø±.Ø³"]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"âš ï¸ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ØŒ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø·Ø¹Ù… Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹"})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ns,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø·Ø¹Ù… Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù…Ø¹Ø±ÙØ© Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹"})]})})]})}),u&&e.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[u,U&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{children:["UID: ",e.jsx("b",{children:U.uid})]}),e.jsxs("div",{children:["Ø¹Ø¯Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ÙÙˆÙ„Ø¨Ù‘Ø§Ùƒ: ",e.jsx("b",{children:U.fallbackCount})]}),Array.isArray(U.sample)&&U.sample.length>0&&e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"font-semibold",children:"Ø¹ÙŠÙ†Ø© (Ø£Ø­Ø¯Ø« 5):"}),U.sample.map(d=>e.jsxs("div",{className:"truncate",children:["#",d.id," â€¢ customerId: ",String(d.customerId)," â€¢ restaurantId: ",String(d.restaurantId)," â€¢ createdAt: ",d.createdAt||"â€”"]},d.id))]})]})]}),w.map(d=>{var M,k,h,S,V,Q,ie,re,ye,ue,_,se,pe,le,G,Z,ne,ce,Ne;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:`${P(d.status).color} px-4 py-3 flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("span",{className:"text-xl",children:P(d.status).emoji}),e.jsx("span",{className:"font-bold",children:P(d.status).text})]}),e.jsxs("div",{className:"text-white/80 text-sm font-medium",children:["#",d.id.slice(-6)]})]}),e.jsxs("div",{className:"p-4",children:[d.restaurantName&&e.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold mb-2",children:[e.jsx("span",{children:"ğŸ½ï¸"}),e.jsx("span",{children:String(d.restaurantName)})]}),(d.status==="accepted"||d.status==="preparing")&&e.jsx("div",{className:"mb-3",children:e.jsx(ya,{order:d,type:"preparation"})}),d.status==="ready"&&d.deliveryType==="delivery"&&e.jsx("div",{className:"mb-3",children:e.jsx(ya,{order:d,type:"pickup"})}),d.status==="out_for_delivery"&&e.jsx("div",{className:"mb-3",children:e.jsx(ya,{order:d,type:"delivery"})}),e.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 rounded-xl p-3 mb-3",children:(M=d.items)==null?void 0:M.map(Y=>`${Y.name}Ã—${Y.qty}`).join(" â€¢ ")}),e.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:d.deliveryType==="pickup"?e.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-medium bg-green-50 rounded-xl p-3",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø·Ø¹Ù…"})]}):e.jsxs("div",{className:"space-y-1 bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ:"}),e.jsxs("span",{children:[((h=(k=d.subtotal)==null?void 0:k.toFixed)==null?void 0:h.call(k,2))||"â€”"," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„:"}),d.deliveryFee!==void 0&&d.deliveryFee>0?e.jsxs("span",{className:"font-medium",children:[(V=(S=d.deliveryFee)==null?void 0:S.toFixed)==null?void 0:V.call(S,2)," Ø±.Ø³"]}):e.jsx("span",{className:"text-amber-600",children:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø·Ø¹Ù…"})]})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"font-bold text-lg text-primary",children:["Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ",(ie=(Q=d.total)==null?void 0:Q.toFixed)==null?void 0:ie.call(Q,2)," Ø±.Ø³"]})}),R(d)&&d.restaurantId&&e.jsxs("button",{onClick:()=>$(d.restaurantId,d.id),className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-500 to-green-600 
                             text-white rounded-xl font-bold shadow-lg hover:shadow-xl 
                             hover:scale-[1.02] transition-all duration-200`,children:[e.jsx(Ks,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹ ğŸ’³"})]}),d.status==="pending"&&e.jsx("button",{onClick:()=>T(d),disabled:O===d.id,className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 
                             text-white rounded-xl font-bold shadow-lg hover:shadow-xl 
                             hover:scale-[1.02] transition-all duration-200 disabled:opacity-50`,children:O===d.id?e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù„ØºØ§Ø¡..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ âŒ"})]})}),I(d)&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border-2 border-amber-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ls,{className:"w-5 h-5 text-amber-500 fill-amber-500"}),e.jsx("span",{className:"font-bold text-amber-800",children:"Ù‚ÙŠÙ‘Ù… ØªØ¬Ø±Ø¨ØªÙƒ â­"})]}),e.jsx("p",{className:"text-sm text-amber-700 mb-4",children:"Ø³Ø§Ø¹Ø¯Ù†Ø§ ÙÙŠ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø®Ø¯Ù…Ø© Ø¨ØªÙ‚ÙŠÙŠÙ…Ùƒ"}),e.jsxs("div",{className:"space-y-2",children:[!((ye=(re=d.ratings)==null?void 0:re.customerToRestaurant)!=null&&ye.stars)&&e.jsxs("button",{onClick:()=>L({isOpen:!0,orderId:d.id,type:"restaurant",targetName:d.restaurantName||"Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø©"}),className:`w-full flex items-center justify-between px-4 py-3 bg-white border-2 border-amber-300 
                                   rounded-xl hover:bg-amber-50 transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Le,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Ù‚ÙŠÙ‘Ù… Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø©"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(Y=>e.jsx(ls,{className:"w-4 h-4 text-gray-300 group-hover:text-amber-400 transition"},Y))})]}),d.courierId&&!((_=(ue=d.ratings)==null?void 0:ue.customerToCourier)!=null&&_.stars)&&e.jsxs("button",{onClick:()=>L({isOpen:!0,orderId:d.id,type:"courier",targetName:"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"}),className:`w-full flex items-center justify-between px-4 py-3 bg-white border-2 border-emerald-300 
                                   rounded-xl hover:bg-emerald-50 transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"w-5 h-5 text-emerald-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Ù‚ÙŠÙ‘Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(Y=>e.jsx(ls,{className:"w-4 h-4 text-gray-300 group-hover:text-emerald-400 transition"},Y))})]})]}),(((pe=(se=d.ratings)==null?void 0:se.customerToRestaurant)==null?void 0:pe.stars)||((G=(le=d.ratings)==null?void 0:le.customerToCourier)==null?void 0:G.stars))&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-amber-200 space-y-2",children:[((ne=(Z=d.ratings)==null?void 0:Z.customerToRestaurant)==null?void 0:ne.stars)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ø±Ø©:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(Y=>e.jsx(ls,{className:`w-4 h-4 ${Y<=d.ratings.customerToRestaurant.stars?"text-amber-400 fill-amber-400":"text-gray-300"}`},Y))})]}),((Ne=(ce=d.ratings)==null?void 0:ce.customerToCourier)==null?void 0:Ne.stars)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(Y=>e.jsx(ls,{className:`w-4 h-4 ${Y<=d.ratings.customerToCourier.stars?"text-emerald-400 fill-emerald-400":"text-gray-300"}`},Y))})]})]})]}),d.status==="delivered"&&d.ratingCompleted&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx(Ie,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"ØªÙ… ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø·Ù„Ø¨ âœ…"})]})}),(d.status==="delivered"||d.status==="cancelled")&&d.items&&d.items.length>0&&e.jsxs("button",{onClick:()=>F(d),className:`w-full flex items-center justify-center gap-2 px-4 py-3 
                             bg-gradient-to-r from-sky-500 to-sky-600 
                             text-white rounded-xl font-bold shadow-lg 
                             hover:shadow-xl hover:scale-[1.02] 
                             transition-all duration-200`,children:[e.jsx(ze,{className:"w-5 h-5"}),e.jsx("span",{children:"ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø·Ù„Ø¨"})]}),e.jsxs("div",{className:"flex gap-2",children:[m(d)&&e.jsxs("button",{onClick:()=>t(`/chat?orderId=${d.id}`),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-primary to-accent 
                               text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                               hover:scale-105 transition-all duration-200 animate-pulse`,children:[e.jsx(Gs,{className:"w-5 h-5"}),e.jsx("span",{children:"ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ğŸš—"})]}),o(d)&&e.jsxs("button",{onClick:()=>t(`/chat?orderId=${d.id}`),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 
                               text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                               hover:scale-105 transition-all duration-200`,children:[e.jsx(Le,{className:"w-5 h-5"}),e.jsx("span",{children:"ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø·Ø¹Ù… ğŸ½ï¸"})]}),e.jsxs("button",{onClick:()=>t(`/support?orderId=${d.id}`),className:`flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 
                             text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                             hover:scale-105 transition-all duration-200`,title:"ØªÙ‚Ø¯ÙŠÙ… Ø´ÙƒÙˆÙ‰ Ø£Ùˆ Ø·Ù„Ø¨ Ø¯Ø¹Ù…",children:[e.jsx(Kt,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø´ÙƒÙˆÙ‰"})]})]})]})]})]},d.id)}),w.length===0&&!u&&e.jsx("div",{className:"text-gray-600",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†."})]})},cm=()=>{const{user:s,role:t}=Ee(),a=Ps(),i=He(),c=l.useRef(null),[u,r]=l.useState({name:"",phone:"",city:"",address:"",restaurantName:""}),[w,D]=l.useState(null),[U,v]=l.useState(!1),[N,E]=l.useState({totalOrders:0,favoriteRestaurants:0,pendingOrders:0}),[A,j]=l.useState(0),[z,p]=l.useState([]),[f,L]=l.useState(!1),[$,g]=l.useState(""),[F,O]=l.useState(!1),[B,T]=l.useState(!1),[P,m]=l.useState([]),[o,R]=l.useState(0),[I,q]=l.useState(!1),[x,b]=l.useState(null),[y,d]=l.useState(""),[M,k]=l.useState(!0),[h,S]=l.useState(!1);l.useEffect(()=>{if(!s)return;(async()=>{const G=await Ce(J(C,"users",s.uid));if(G.exists()){const Z=G.data();r({name:Z.name||"",phone:Z.phone||s.phoneNumber||"",city:Z.city||"",address:Z.address||"",restaurantName:Z.restaurantName||""}),D(Z.photoUrl||null),Z.savedLocations&&Array.isArray(Z.savedLocations)?(m(Z.savedLocations),R(Z.defaultLocationIndex||0)):Z.savedLocation&&(m([{...Z.savedLocation,label:"Ø§Ù„Ù…Ù†Ø²Ù„"}]),R(0))}if(t==="customer")try{const Z=await Ce(J(C,"wallets",s.uid));if(Z.exists()){const ne=Z.data();j((ne==null?void 0:ne.balance)||0),p((ne==null?void 0:ne.transactions)||[])}}catch(Z){console.warn("Error loading wallet:",Z)}if(t==="customer")try{const{collection:Z,query:ne,where:ce,getDocs:Ne}=await qs(async()=>{const{collection:ke,query:Ae,where:Ue,getDocs:_e}=await import("./vendor-firebase-CIIT5h2g.js").then(Ye=>Ye.Z);return{collection:ke,query:Ae,where:Ue,getDocs:_e}},[]),Y=ne(Z(C,"orders"),ce("customerId","==",s.uid)),te=await Ne(Y),de=te.docs.filter(ke=>["pending","accepted","preparing","ready","out_for_delivery"].includes(ke.data().status)).length,oe=ne(Z(C,"storeFollowers"),ce("followerId","==",s.uid)),ge=await Ne(oe);E({totalOrders:te.size,favoriteRestaurants:ge.size,pendingOrders:de})}catch(Z){console.warn("Error loading stats:",Z)}k(!1)})()},[s,t]);const V=async le=>{if(le.preventDefault(),!!s){S(!0);try{const G=P[o]||null;await me(J(C,"users",s.uid),{name:u.name,phone:u.phone,city:u.city,address:u.address,photoUrl:w,savedLocation:G,savedLocations:P,defaultLocationIndex:o,...t==="owner"&&{restaurantName:u.restaurantName}}),a.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­! âœ…")}catch{a.error("ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{S(!1)}}},Q=async le=>{var Z;const G=(Z=le.target.files)==null?void 0:Z[0];if(!(!G||!s)){if(!G.type.startsWith("image/")){i.error("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ØµØ§Ù„Ø­Ø©");return}if(G.size>5*1024*1024){i.error("Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† 5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª");return}v(!0);try{const ne=As(kt,`users/${s.uid}/profile.${G.name.split(".").pop()}`);await Nt(ne,G);const ce=await Is(ne);D(ce),i.success("ØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©! Ø§Ø¶ØºØ· Ø­ÙØ¸ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª")}catch(ne){console.error("Error uploading photo:",ne),i.error("ÙØ´Ù„ ÙÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©")}finally{v(!1)}}},ie=()=>{D(null),i.info("ØªÙ… Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø©! Ø§Ø¶ØºØ· Ø­ÙØ¸ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª")},re=async le=>{var Z,ne,ce;if(!s)return;const G=parseFloat($);O(!0);try{const{collection:Ne,addDoc:Y}=await qs(async()=>{const{collection:ge,addDoc:ke}=await import("./vendor-firebase-CIIT5h2g.js").then(Ae=>Ae.Z);return{collection:ge,addDoc:ke}},[]);await Y(Ne(C,"rechargeRequests"),{userId:s.uid,userName:u.name||s.email,userPhone:u.phone,amount:G,paymentMethod:"paypal",paypalOrderId:le.id,paypalPayerId:(Z=le.payer)==null?void 0:Z.payer_id,paypalEmail:(ne=le.payer)==null?void 0:ne.email_address,status:"approved",createdAt:X(),updatedAt:X()});const te=J(C,"wallets",s.uid),de=await Ce(te),oe={id:le.id,type:"credit",amount:G,description:"Ø´Ø­Ù† Ø¹Ø¨Ø± PayPal",paypalOrderId:le.id,createdAt:new Date};if(de.exists()){const ge=((ce=de.data())==null?void 0:ce.balance)||0;await me(te,{balance:ge+G,transactions:hl(oe),updatedAt:X()}),j(ge+G)}else await Be(te,{id:s.uid,balance:G,totalEarnings:G,totalWithdrawn:0,transactions:[oe],createdAt:X(),updatedAt:X()}),j(G);p(ge=>[oe,...ge]),a.success(`ØªÙ… Ø´Ø­Ù† ${G} Ø±ÙŠØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­! âœ…`),g(""),L(!1)}catch(Ne){console.error("Error processing PayPal payment:",Ne),a.error("ÙØ´Ù„ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¯ÙØ¹")}finally{O(!1)}},ye=(le,G)=>{const Z={lat:le.lat,lng:le.lng,address:G,label:y||`Ø¹Ù†ÙˆØ§Ù† ${P.length+1}`};m([...P,Z]),d(""),q(!1),i.success("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†ÙˆØ§Ù†! Ø§Ø¶ØºØ· Ø­ÙØ¸ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª")},ue=(le,G)=>{if(x===null)return;const Z=[...P];Z[x]={...Z[x],lat:le.lat,lng:le.lng,address:G},m(Z),b(null),q(!1),i.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ÙˆØ§Ù†! Ø§Ø¶ØºØ· Ø­ÙØ¸ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª")},_=async le=>{if(!await a.confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŸ"))return;const Z=P.filter((ne,ce)=>ce!==le);m(Z),o>=Z.length?R(Math.max(0,Z.length-1)):o>le&&R(o-1),i.info("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù†ÙˆØ§Ù†")},se=le=>{R(le),i.success("ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙƒØ§ÙØªØ±Ø§Ø¶ÙŠ")};if(M)return e.jsxs("div",{className:"flex items-center justify-center h-96 text-lg",children:[e.jsx(ze,{className:"w-6 h-6 animate-spin ml-2"}),"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."]});const pe=()=>t==="owner"?"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…":t==="courier"?"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨":t==="admin"?"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±Ù":"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙŠ";return e.jsxs("div",{className:"max-w-md mx-auto py-8 px-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-sky-100 border-4 border-sky-200 shadow-lg",children:w?e.jsx("img",{src:w,alt:"ØµÙˆØ±ØªÙŠ",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ms,{className:"w-12 h-12 text-sky-400"})})}),e.jsx("button",{type:"button",onClick:()=>{var le;return(le=c.current)==null?void 0:le.click()},disabled:U,className:"absolute bottom-0 right-0 w-8 h-8 bg-sky-500 hover:bg-sky-600 text-white rounded-full shadow-lg flex items-center justify-center transition disabled:opacity-50",children:U?e.jsx(ze,{className:"w-4 h-4 animate-spin"}):e.jsx(vt,{className:"w-4 h-4"})}),w&&e.jsx("button",{type:"button",onClick:ie,className:"absolute top-0 right-0 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg flex items-center justify-center transition opacity-0 group-hover:opacity-100",children:e.jsx(Oe,{className:"w-3 h-3"})}),e.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:Q,className:"hidden"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:pe()}),e.jsx("p",{className:"text-sm text-gray-500",children:(s==null?void 0:s.email)||(s==null?void 0:s.phoneNumber)})]})]}),t==="customer"&&e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs(ae,{to:"/orders",className:"bg-sky-50 rounded-xl p-3 text-center hover:bg-sky-100 transition",children:[e.jsx(ns,{className:"w-6 h-6 text-sky-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-black text-sky-600",children:N.totalOrders}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ø·Ù„Ø¨Ø§ØªÙŠ"})]}),e.jsxs("div",{className:"bg-pink-50 rounded-xl p-3 text-center",children:[e.jsx(ht,{className:"w-6 h-6 text-pink-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-black text-pink-600",children:N.favoriteRestaurants}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ù…ØªØ§Ø¨ÙØ¹"})]}),e.jsxs(ae,{to:"/orders",className:"bg-amber-50 rounded-xl p-3 text-center hover:bg-amber-100 transition",children:[e.jsx($t,{className:"w-6 h-6 text-amber-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-black text-amber-600",children:N.pendingOrders}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°"})]})]}),t==="customer"&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 via-sky-600 to-sky-700 rounded-2xl p-5 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(is,{className:"w-6 h-6"})}),e.jsx("span",{className:"font-bold",children:"Ù…Ø­ÙØ¸ØªÙŠ"})]}),e.jsxs("button",{type:"button",onClick:()=>L(!0),className:"px-4 py-2 bg-white text-sky-600 rounded-xl font-bold text-sm hover:bg-sky-50 transition flex items-center gap-1",children:[e.jsx(nn,{className:"w-4 h-4"}),"Ø´Ø­Ù†"]})]}),e.jsxs("div",{className:"text-center py-3",children:[e.jsx("p",{className:"text-sky-100 text-sm mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsxs("p",{className:"text-4xl font-black",children:[A.toFixed(2)," ",e.jsx("span",{className:"text-lg",children:"Ø±.Ø³"})]})]}),z.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20",children:[e.jsx("p",{className:"text-xs text-sky-100 mb-2",children:"Ø¢Ø®Ø± Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:z.slice(-3).reverse().map((le,G)=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-white/10 rounded-lg p-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[le.type==="credit"?e.jsx(nn,{className:"w-4 h-4 text-green-300"}):e.jsx(Yc,{className:"w-4 h-4 text-red-300"}),e.jsx("span",{className:"text-xs",children:le.description||(le.type==="credit"?"Ø´Ø­Ù†":"Ø®ØµÙ…")})]}),e.jsxs("span",{className:le.type==="credit"?"text-green-300 font-bold":"text-red-300 font-bold",children:[le.type==="credit"?"+":"-",le.amount," Ø±.Ø³"]})]},G))})]})]})}),t==="customer"&&e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs(ae,{to:"/notifications",className:"flex-1 flex items-center justify-center gap-2 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition text-gray-700 font-medium",children:[e.jsx(yt,{className:"w-5 h-5"}),"Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"]}),e.jsxs(ae,{to:"/orders",className:"flex-1 flex items-center justify-center gap-2 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition text-gray-700 font-medium",children:[e.jsx(ns,{className:"w-5 h-5"}),"Ø·Ù„Ø¨Ø§ØªÙŠ"]})]}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(ms,{className:"w-4 h-4 inline ml-1"}),"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ",value:u.name,onChange:le=>r({...u,name:le.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(fl,{className:"w-4 h-4 inline ml-1"}),"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"05xxxxxxxx",value:u.phone,onChange:le=>r({...u,phone:le.target.value}),dir:"ltr"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Ns,{className:"w-4 h-4 inline ml-1"}),"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"Ù…Ø«Ø§Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶",value:u.city,onChange:le=>r({...u,city:le.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Ze,{className:"w-4 h-4 inline ml-1"}),"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ"]}),e.jsx("textarea",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition h-24",placeholder:"Ø§Ù„Ø­ÙŠØŒ Ø§Ù„Ø´Ø§Ø±Ø¹ØŒ Ø±Ù‚Ù… Ø§Ù„Ù…Ø¨Ù†Ù‰ØŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...",value:u.address,onChange:le=>r({...u,address:le.target.value})})]}),(t==="customer"||t==="admin")&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-1",children:[e.jsx(at,{className:"w-4 h-4"}),"Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©"]}),e.jsxs("span",{className:"text-xs text-gray-400",children:[P.length,"/5"]})]}),P.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:P.map((le,G)=>e.jsxs("div",{className:`rounded-xl p-3 border-2 transition ${G===o?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${G===o?"bg-green-500":"bg-gray-400"}`,children:e.jsx(Ze,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-bold text-gray-800",children:le.label||`Ø¹Ù†ÙˆØ§Ù† ${G+1}`}),G===o&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-500 text-white text-xs font-bold rounded-full",children:[e.jsx(ls,{className:"w-3 h-3"})," Ø§ÙØªØ±Ø§Ø¶ÙŠ"]})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:le.address})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[G!==o&&e.jsxs("button",{type:"button",onClick:()=>se(G),className:"flex-1 py-2 px-3 rounded-lg border border-green-200 text-green-600 text-xs font-medium hover:bg-green-50 transition flex items-center justify-center gap-1",children:[e.jsx(bs,{className:"w-3 h-3"})," ØªØ¹ÙŠÙŠÙ† ÙƒØ§ÙØªØ±Ø§Ø¶ÙŠ"]}),e.jsx("button",{type:"button",onClick:()=>{b(G),q(!0)},className:"flex-1 py-2 px-3 rounded-lg border border-sky-200 text-sky-600 text-xs font-medium hover:bg-sky-50 transition",children:"ØªØ¹Ø¯ÙŠÙ„"}),e.jsx("button",{type:"button",onClick:()=>_(G),className:"py-2 px-3 rounded-lg border border-red-200 text-red-500 hover:bg-red-50 transition",children:e.jsx(ys,{className:"w-4 h-4"})})]})]},G))}),P.length<5&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:y,onChange:le=>d(le.target.value),placeholder:"Ø§Ø³Ù… Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ù…Ø«Ø§Ù„: Ø§Ù„Ù…Ù†Ø²Ù„ØŒ Ø§Ù„Ø¹Ù…Ù„...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 text-sm focus:border-sky-400 focus:outline-none"}),e.jsxs("button",{type:"button",onClick:()=>{b(null),q(!0)},className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-100 to-sky-50 border-2 border-dashed border-sky-300 text-sky-600 font-semibold hover:border-sky-400 transition flex items-center justify-center gap-3",children:[e.jsx(Cs,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø¬Ø¯ÙŠØ¯"})]})]}),P.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"ğŸ’¡ Ø£Ø¶Ù Ø¹Ù†Ø§ÙˆÙŠÙ†Ùƒ Ø§Ù„Ù…ÙØ¶Ù„Ø© Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨"})]}),t==="owner"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(rr,{className:"w-4 h-4 inline ml-1"}),"Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…",value:u.restaurantName,onChange:le=>r({...u,restaurantName:le.target.value})})]}),e.jsx("button",{type:"submit",disabled:h,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:h?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jl,{className:"w-5 h-5"}),"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª"]})})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t text-center text-sm text-gray-500",children:[e.jsx("p",{children:"ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª"}),(t==="customer"||t==="admin")&&e.jsx("p",{className:"mt-1",children:"ğŸ“ ÙŠÙ…ÙƒÙ†Ùƒ Ø­ÙØ¸ Ø­ØªÙ‰ 5 Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ø®ØªÙ„ÙØ©"})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-t-3xl sm:rounded-2xl w-full max-w-md shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5 text-sky-500"}),"Ø´Ø­Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©"]}),e.jsx("button",{onClick:()=>L(!1),className:"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:e.jsx(Oe,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-sky-600 rounded-xl p-4 text-center text-white",children:[e.jsx("p",{className:"text-sm text-sky-100 mb-1",children:"Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsxs("p",{className:"text-3xl font-black",children:[A.toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ø§Ø®ØªØ± Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ø­Ù† (Ø±ÙŠØ§Ù„)"}),e.jsx("input",{type:"number",value:$,onChange:le=>g(le.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº (10 - 1000)",className:"w-full border-2 border-gray-200 rounded-xl p-4 text-lg font-bold text-center focus:border-sky-400 focus:outline-none",min:"10",max:"1000",dir:"ltr"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[20,50,100,200].map(le=>e.jsxs("button",{type:"button",onClick:()=>g(le.toString()),className:`py-3 rounded-xl font-bold text-sm transition ${$===le.toString()?"bg-sky-500 text-white shadow-lg scale-105":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[le," Ø±.Ø³"]},le))}),$&&parseFloat($)>=10&&parseFloat($)<=1e3&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("p",{className:"text-sm text-center text-gray-600 mb-3",children:["ğŸ’³ Ø§Ø¯ÙØ¹ ",e.jsxs("span",{className:"font-bold text-sky-600",children:[$," Ø±.Ø³"]}),e.jsxs("span",{className:"text-gray-400 text-xs mr-1",children:["(â‰ˆ $",sa.sarToUsd(parseFloat($)),")"]}),"Ø¹Ø¨Ø± PayPal"]}),e.jsx(ti,{options:Ui(),children:e.jsx(ai,{style:{layout:"vertical",shape:"pill",color:"blue",label:"pay",height:50},disabled:F,createOrder:(le,G)=>{const Z=sa.sarToUsd(parseFloat($));return G.order.create({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:Z.toString()},description:`Ø´Ø­Ù† Ù…Ø­ÙØ¸Ø© Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª - ${$} Ø±.Ø³`}]})},onApprove:async(le,G)=>{if(G.order){const Z=await G.order.capture();re(Z)}},onError:le=>{console.error("PayPal Error:",le),i.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹")},onCancel:()=>{i.info("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹")}})}),F&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 text-sky-600",children:[e.jsx(ze,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Ø¬Ø§Ø±Ù Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¯ÙØ¹..."})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ks,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-blue-800",children:"Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¢Ù…Ù† Ø¹Ø¨Ø± PayPal"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±ØµÙŠØ¯ ÙÙˆØ±Ø§Ù‹ Ø¨Ø¹Ø¯ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨Ø·Ø§Ù‚Ø© Visa/Mastercard Ø£Ùˆ Ø­Ø³Ø§Ø¨ PayPal."})]})]})}),e.jsx("p",{className:"text-xs text-center text-gray-400",children:"ğŸ”’ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù…Ø´ÙØ±Ø© ÙˆØ¢Ù…Ù†Ø©"})]})]})}),e.jsx(Mi,{isOpen:I,onClose:()=>{q(!1),b(null)},onConfirm:(le,G)=>{x!==null?ue(le,G):ye(le,G)},initialLocation:x!==null&&P[x]?{lat:P[x].lat,lng:P[x].lng}:null})]})},om=()=>{var V,Q,ie,re,ye,ue;const{user:s}=Ee(),t=He(),[a,i]=l.useState(!0),[c,u]=l.useState(!1),[r,w]=l.useState(null),[D,U]=l.useState("overview"),[v,N]=l.useState({todayOrders:0,todayRevenue:0,weekOrders:0,weekRevenue:0,monthOrders:0,monthRevenue:0,totalOrders:0,totalRevenue:0,pendingOrders:0,preparingOrders:0,deliveredOrders:0,cancelledOrders:0,menuItems:0,availableItems:0,averageRating:0,deliveryRate:0,activePromotions:0,totalViews:0,uniqueCustomers:0,profileViews:0,menuViews:0,itemViews:0,shareClicks:0,whatsappShares:0,registeredViaLink:0,todayViews:0,followersCount:0}),[E,A]=l.useState(!1),[j,z]=l.useState(null),p=_=>{const se=`${window.location.origin}/menu?restaurant=${s==null?void 0:s.uid}`;return _?`${se}&ref=${_}`:se},f=async _=>{if(s!=null&&s.uid)try{const se=J(C,"restaurantStats",s.uid),pe={totalShareClicks:Ke(1),updatedAt:X()};_==="whatsapp"&&(pe.whatsappShareCount=Ke(1)),await me(se,pe).catch(async()=>{await Be(se,{totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:1,whatsappShareCount:_==="whatsapp"?1:0,registeredCustomers:0,appDownloads:0,dailyViews:{},updatedAt:X()})})}catch(se){console.warn("Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©:",se)}},L=async()=>{const _=p("copy");await navigator.clipboard.writeText(_),A(!0),setTimeout(()=>A(!1),2e3),t.success("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·! ğŸ“‹"),f("copy")},$=()=>{const _=p("whatsapp"),se=encodeURIComponent(`ğŸ½ï¸ ØªÙØ¶Ù„ Ø¨Ø²ÙŠØ§Ø±Ø© Ù…ØªØ¬Ø± ${(r==null?void 0:r.name)||"Ù…ØªØ¬Ø±ÙŠ"} Ø¹Ù„Ù‰ Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª!

${_}`);window.open(`https://wa.me/?text=${se}`,"_blank"),t.success("Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨... ğŸ“±"),f("whatsapp")},g=async()=>{const _=p("social");if(navigator.share)try{await navigator.share({title:(r==null?void 0:r.name)||"Ù…ØªØ¬Ø±ÙŠ",text:`ØªÙØ¶Ù„ Ø¨Ø²ÙŠØ§Ø±Ø© ${r==null?void 0:r.name} Ø¹Ù„Ù‰ Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª`,url:_}),f("social")}catch{L()}else L()},[F,O]=l.useState([]),[B,T]=l.useState([]),[P,m]=l.useState([]),o=async()=>{var _,se,pe;if(s!=null&&s.uid)try{const le=await Ce(J(C,"restaurants",s.uid));le.exists()&&w(le.data());const G=fe(ee(C,"menuItems"),je("ownerId","==",s.uid)),ne=(await be(G)).docs.map(ve=>({id:ve.id,...ve.data()})),ce=fe(ee(C,"orders"),je("ownerId","==",s.uid),es("createdAt","desc")),Y=(await be(ce)).docs.map(ve=>({id:ve.id,...ve.data()}));let te=0,de=0;try{const ve=fe(ee(C,"promotions"),je("ownerId","==",s.uid));(await be(ve)).docs.forEach(ss=>{const Je=ss.data();Je.isActive&&te++,de+=Je.viewsCount||0})}catch{}const oe=new Date,ge=new Date(oe.getFullYear(),oe.getMonth(),oe.getDate()),ke=new Date(ge.getTime()-7*24*60*60*1e3),Ae=new Date(ge.getTime()-30*24*60*60*1e3),Ue=Y.filter(ve=>{var ss,Je;return(((Je=(ss=ve.createdAt)==null?void 0:ss.toDate)==null?void 0:Je.call(ss))||new Date(0))>=ge&&ve.status!=="cancelled"}),_e=Y.filter(ve=>{var ss,Je;return(((Je=(ss=ve.createdAt)==null?void 0:ss.toDate)==null?void 0:Je.call(ss))||new Date(0))>=ke&&ve.status!=="cancelled"}),Ye=Y.filter(ve=>{var ss,Je;return(((Je=(ss=ve.createdAt)==null?void 0:ss.toDate)==null?void 0:Je.call(ss))||new Date(0))>=Ae&&ve.status!=="cancelled"}),Qe=Y.filter(ve=>ve.status==="delivered"),_s=Y.filter(ve=>ve.status==="pending"),Fs=Y.filter(ve=>["accepted","preparing"].includes(ve.status)),lt=Y.filter(ve=>ve.status==="cancelled"),nt=new Set(Y.map(ve=>ve.customerId).filter(Boolean)),ds={};Qe.forEach(ve=>{var Fe;(Fe=ve.items)==null||Fe.forEach(ss=>{const Je=ss.name||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";ds[Je]=(ds[Je]||0)+(ss.qty||1)})});const bt=Object.entries(ds).sort((ve,Fe)=>Fe[1]-ve[1]).slice(0,5).map(([ve,Fe])=>({name:ve,count:Fe}));T(bt),O(Y.slice(0,5));let Js=0,$s=0,Xs=0,Zs=0,na=0,St=0,ia=0,Bt=0;try{const ve=await Ce(J(C,"restaurantStats",s.uid));if(ve.exists()){const Fe=ve.data();z(Fe),Js=Fe.totalProfileViews||0,$s=Fe.totalMenuViews||0,Xs=Fe.totalItemViews||0,Zs=Fe.totalShareClicks||0,na=Fe.whatsappShareCount||0,St=Fe.registeredCustomers||0,Bt=Fe.followersCount||0;const ss=new Date().toISOString().split("T")[0];ia=((_=Fe.dailyViews)==null?void 0:_[ss])||0}}catch(ve){console.warn("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª:",ve)}try{const ve=fe(ee(C,"customerRegistrations"),je("restaurantId","==",s.uid));St=(await be(ve)).size}catch{}try{const ve=fe(ee(C,"storeFollowers"),je("restaurantId","==",s.uid));Bt=(await be(ve)).size}catch{}try{const ve=fe(ee(C,"stories"),je("ownerId","==",s.uid)),ss=(await be(ve)).docs.map(Je=>{var et,it,zs,ca;return{id:Je.id,...Je.data(),expiresAt:(it=(et=Je.data().expiresAt)==null?void 0:et.toDate)==null?void 0:it.call(et),createdAt:(ca=(zs=Je.data().createdAt)==null?void 0:zs.toDate)==null?void 0:ca.call(zs)}}).filter(Je=>Je.expiresAt&&new Date(Je.expiresAt)>oe).sort((Je,et)=>{var it,zs;return(((it=et.createdAt)==null?void 0:it.getTime())||0)-(((zs=Je.createdAt)==null?void 0:zs.getTime())||0)});m(ss)}catch(ve){console.warn("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø³ØªÙˆØ±ÙŠ:",ve)}N({todayOrders:Ue.length,todayRevenue:Ue.reduce((ve,Fe)=>ve+(Fe.subtotal||0),0),weekOrders:_e.length,weekRevenue:_e.reduce((ve,Fe)=>ve+(Fe.subtotal||0),0),monthOrders:Ye.length,monthRevenue:Ye.reduce((ve,Fe)=>ve+(Fe.subtotal||0),0),totalOrders:Y.filter(ve=>ve.status!=="cancelled").length,totalRevenue:Qe.reduce((ve,Fe)=>ve+(Fe.subtotal||0),0),pendingOrders:_s.length,preparingOrders:Fs.length,deliveredOrders:Qe.length,cancelledOrders:lt.length,menuItems:ne.length,availableItems:ne.filter(ve=>ve.available).length,averageRating:((se=le.data())==null?void 0:se.rating)||0,deliveryRate:((pe=le.data())==null?void 0:pe.deliveryRate)||0,activePromotions:te,totalViews:de,uniqueCustomers:nt.size,profileViews:Js,menuViews:$s,itemViews:Xs,shareClicks:Zs,whatsappShares:na,registeredViaLink:St,todayViews:ia,followersCount:Bt})}catch(le){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:",le)}finally{i(!1),u(!1)}};l.useEffect(()=>{o()},[s==null?void 0:s.uid]);const R=()=>{u(!0),o()},I=_=>({pending:{label:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù‚Ø¨ÙˆÙ„",color:"bg-yellow-100 text-yellow-700",icon:Ge},accepted:{label:"Ù…Ù‚Ø¨ÙˆÙ„",color:"bg-blue-100 text-blue-700",icon:Ie},preparing:{label:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¶ÙŠØ±",color:"bg-orange-100 text-orange-700",icon:wt},ready:{label:"Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙˆØµÙŠÙ„",color:"bg-purple-100 text-purple-700",icon:Me},out_for_delivery:{label:"ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚",color:"bg-indigo-100 text-indigo-700",icon:Ve},delivered:{label:"ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„",color:"bg-green-100 text-green-700",icon:Ie},cancelled:{label:"Ù…Ù„ØºÙŠ",color:"bg-red-100 text-red-700",icon:Rs}})[_]||{label:_,color:"bg-gray-100 text-gray-700",icon:Ge},q=_=>{switch(_){case"gold":return{label:"Ø°Ù‡Ø¨ÙŠ",color:"from-yellow-400 to-amber-500",icon:"ğŸ‘‘"};case"silver":return{label:"ÙØ¶ÙŠ",color:"from-gray-300 to-gray-400",icon:"ğŸ¥ˆ"};default:return{label:"Ø¨Ø±ÙˆÙ†Ø²ÙŠ",color:"from-orange-500 to-orange-600",icon:"ğŸ¥‰"}}};if(a)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]})});const x=(r==null?void 0:r.packageType)==="premium",b=q(r==null?void 0:r.sellerTier),d=(()=>{var le,G;if(!(r!=null&&r.packageExpiresAt))return null;const _=((G=(le=r.packageExpiresAt)==null?void 0:le.toDate)==null?void 0:G.call(le))||new Date(r.packageExpiresAt),se=new Date,pe=_.getTime()-se.getTime();return Math.ceil(pe/(1e3*60*60*24))})(),M=d!==null&&d<=7&&d>0,k=d!==null&&d<=0,S=(()=>{const _=v.totalRevenue,se=v.deliveredOrders*3.75;return _-se})();return x?e.jsxs("div",{className:"space-y-6 pb-24 -mx-4 -mt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-40 sm:h-48 bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-amber-500/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-500/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]}),e.jsx("button",{onClick:R,disabled:c,className:"absolute top-4 left-4 p-2 bg-white/10 hover:bg-white/20 rounded-xl transition z-10",children:e.jsx(ze,{className:`w-5 h-5 text-white ${c?"animate-spin":""}`})}),e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 px-4 py-1.5 rounded-full flex items-center gap-2 shadow-lg",children:[e.jsx(ts,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"text-white font-bold text-sm",children:"Ø¨Ø§Ù‚Ø© Ù…Ù…ÙŠØ²Ø©"})]})})]}),e.jsx("div",{className:"relative px-4 -mt-16",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-5",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative -mt-12",children:[e.jsx("div",{className:"w-24 h-24 rounded-2xl bg-white shadow-xl overflow-hidden border-4 border-white",children:r!=null&&r.logoUrl?e.jsx("img",{src:r.logoUrl,alt:r.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center",children:e.jsx(Le,{className:"w-10 h-10 text-amber-500"})})}),(r==null?void 0:r.isVerified)&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white",children:e.jsx(Ie,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"flex-1 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:(r==null?void 0:r.name)||"Ù…ØªØ¬Ø±ÙŠ"}),e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold text-white bg-gradient-to-r ${b.color}`,children:[b.icon," ",b.label]})]}),(r==null?void 0:r.city)&&e.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-1 mt-1",children:[e.jsx(Ze,{className:"w-3 h-3"}),r.city]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ls,{className:"w-4 h-4 text-amber-500 fill-amber-500"}),e.jsx("span",{className:"font-bold",children:v.averageRating.toFixed(1)})]}),e.jsx("div",{className:"text-gray-300",children:"|"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-bold text-gray-900",children:v.totalOrders})," Ø·Ù„Ø¨"]}),e.jsx("div",{className:"text-gray-300",children:"|"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-bold text-gray-900",children:v.menuItems})," ØµÙ†Ù"]})]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2 -mx-2 px-2",children:[e.jsxs(ae,{to:`/menu?restaurant=${s==null?void 0:s.uid}`,className:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap",children:[e.jsx(Ss,{className:"w-4 h-4"}),"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…ØªØ¬Ø±"]}),e.jsxs(ae,{to:"/owner/edit",className:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap",children:[e.jsx(Qt,{className:"w-4 h-4"}),"ØªØ¹Ø¯ÙŠÙ„"]}),e.jsxs(ae,{to:"/owner/promotion",className:"flex items-center gap-2 bg-purple-100 hover:bg-purple-200 text-purple-700 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap",children:[e.jsx(Us,{className:"w-4 h-4"}),"Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯"]})]})]})})]}),e.jsxs("div",{className:"px-4 space-y-3",children:[(k||M)&&e.jsx(ae,{to:"/owner/packages",className:`block rounded-2xl p-4 shadow-lg ${k?"bg-gradient-to-r from-red-600 to-red-500 text-white":"bg-gradient-to-r from-amber-500 to-orange-500 text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(ts,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1",children:k?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-bold text-lg",children:"âš ï¸ Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ø´ØªØ±Ø§ÙƒÙƒ!"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø¬Ø¯Ù‘Ø¯ Ø§Ù„Ø¢Ù† Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø²Ø§ÙŠØ§"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-bold text-lg",children:["â° Ø¨Ø§Ù‚ÙŠ ",d," ÙŠÙˆÙ… Ø¹Ù„Ù‰ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ø´ØªØ±Ø§ÙƒÙƒ"]}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø¬Ø¯Ù‘Ø¯ Ù…Ø¨ÙƒØ±Ø§Ù‹ ÙˆØ§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ù…Ø²Ø§ÙŠØ§"})]})}),e.jsx(Es,{className:"w-6 h-6"})]})}),(r==null?void 0:r.commercialLicenseUrl)&&r.licenseStatus!=="approved"&&e.jsx("div",{className:`rounded-2xl p-4 ${r.licenseStatus==="rejected"?"bg-red-50 border border-red-200":"bg-yellow-50 border border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r.licenseStatus==="rejected"?"bg-red-500":"bg-yellow-500"}`,children:e.jsx(us,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:r.licenseStatus==="rejected"?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-bold text-red-700",children:"âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„ØªØ±Ø®ÙŠØµ"}),e.jsx("p",{className:"text-sm text-red-600",children:r.licenseNotes||"ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ ØªØ±Ø®ÙŠØµ ØµØ§Ù„Ø­"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-bold text-yellow-700",children:"â³ Ø§Ù„ØªØ±Ø®ÙŠØµ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"Ø³ÙŠØªÙ… Ø¥Ø´Ø¹Ø§Ø±Ùƒ Ø¨Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹"})]})}),r.licenseStatus==="rejected"&&e.jsx(ae,{to:"/owner/edit",className:"text-red-600 text-sm font-bold underline",children:"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø±ÙØ¹"})]})}),v.pendingOrders>0&&e.jsx(ae,{to:"/owner/orders",className:"block bg-gradient-to-r from-red-500 to-orange-500 rounded-2xl p-4 text-white shadow-lg animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(yt,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-bold text-lg",children:["ğŸ”” ",v.pendingOrders," Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯!"]}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø§Ø¶ØºØ· Ù„Ù„Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¢Ù†"})]}),e.jsx(Es,{className:"w-6 h-6"})]})}),!(r!=null&&r.bankName)&&e.jsx(ae,{to:"/owner/edit#bank",className:"block bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-xl flex items-center justify-center",children:e.jsx(Ns,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-amber-700",children:"Ø£Ø¶Ù Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¨Ù†ÙƒÙŠ"}),e.jsx("p",{className:"text-sm text-amber-600",children:"Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"})]})]})})]}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 via-pink-600 to-rose-500 rounded-2xl p-5 text-white shadow-xl relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white rounded-full translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(nr,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"ğŸ“¢ Ø§Ù†Ø´Ø±ÙŠ Ù…ØªØ¬Ø±Ùƒ!"})]}),e.jsx("p",{className:"text-white/80 text-sm mb-4",children:"Ø´Ø§Ø±ÙƒÙŠ Ø±Ø§Ø¨Ø· Ù…ØªØ¬Ø±Ùƒ Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ØŒ ØªÙˆÙŠØªØ±ØŒ Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù… Ø£Ùˆ Ø£ÙŠ Ù…Ù†ØµØ©!"}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-3 mb-4",children:[e.jsx("p",{className:"text-white/60 text-xs mb-1",children:"Ø±Ø§Ø¨Ø· Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ø®Ø§Øµ:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 bg-white/10 rounded-lg p-2 text-sm font-mono truncate",dir:"ltr",children:[window.location.origin,"/menu?restaurant=",s==null?void 0:s.uid]}),e.jsx("button",{onClick:L,className:`p-2 rounded-lg transition ${E?"bg-green-500":"bg-white/20 hover:bg-white/30"}`,children:E?e.jsx(Ie,{className:"w-5 h-5"}):e.jsx(Jn,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:$,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-xl transition",children:[e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"ÙˆØ§ØªØ³Ø§Ø¨"]}),e.jsxs("button",{onClick:g,className:"flex-1 flex items-center justify-center gap-2 bg-white text-purple-600 font-bold py-3 rounded-xl hover:bg-purple-50 transition",children:[e.jsx(nr,{className:"w-5 h-5"}),"Ù…Ø´Ø§Ø±ÙƒØ©"]}),e.jsxs(ae,{to:`/menu?restaurant=${s==null?void 0:s.uid}`,className:"flex items-center justify-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-3 rounded-xl transition",children:[e.jsx(Ss,{className:"w-5 h-5"}),"Ù…Ø¹Ø§ÙŠÙ†Ø©"]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-2 mt-4 pt-4 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:v.followersCount}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"Ù…ØªØ§Ø¨Ø¹ ğŸ’œ"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:v.todayViews}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:v.profileViews}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"Ù…Ø´Ø§Ù‡Ø¯Ø© ØµÙØ­Ø©"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:v.whatsappShares}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§ØªØ³"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:v.registeredViaLink}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"ØªØ³Ø¬ÙŠÙ„ Ø¹Ø¨Ø±Ùƒ"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 pt-2 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:v.uniqueCustomers}),e.jsx("p",{className:"text-white/70 text-xs",children:"Ø¹Ù…ÙŠÙ„"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:v.totalViews}),e.jsx("p",{className:"text-white/70 text-xs",children:"Ù…Ø´Ø§Ù‡Ø¯Ø©"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:v.totalOrders}),e.jsx("p",{className:"text-white/70 text-xs",children:"Ø·Ù„Ø¨"})]})]})]})]})}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 via-fuchsia-600 to-pink-600 rounded-2xl p-5 text-white shadow-xl relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white rounded-full translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"ğŸ“¸ Ø³ØªÙˆØ±ÙŠ Ø§Ù„Ø£Ø³Ø±Ø©"})]}),e.jsx(ae,{to:"/owner/stories",className:"bg-white/20 hover:bg-white/30 px-3 py-1.5 rounded-lg text-sm font-bold transition",children:"+ Ø£Ø¶Ù Ø³ØªÙˆØ±ÙŠ"})]}),e.jsx("p",{className:"text-white/80 text-sm mb-4",children:"Ø´Ø§Ø±ÙƒÙŠ Ù‚ØµØªÙƒ Ù…Ø¹ Ø¹Ù…Ù„Ø§Ø¦Ùƒ! ØµÙˆØ± Ø£ÙƒÙ„Ø§ØªÙƒØŒ Ù…Ø·Ø¨Ø®ÙƒØŒ ÙˆØ£Ø¬ÙˆØ§Ø¡ Ø§Ù„ØªØ­Ø¶ÙŠØ± ğŸ³"}),P.length===0?e.jsxs(ae,{to:"/owner/stories",className:"block bg-white/10 backdrop-blur rounded-xl p-6 text-center hover:bg-white/20 transition",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Cs,{className:"w-8 h-8"})}),e.jsx("p",{className:"font-bold",children:"Ø£Ø¶ÙŠÙÙŠ Ø£ÙˆÙ„ Ø³ØªÙˆØ±ÙŠ!"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:"Ø§Ø¬Ø°Ø¨ÙŠ Ø¹Ù…Ù„Ø§Ø¡ Ø¬Ø¯Ø¯ Ø¨ØµÙˆØ± Ù„Ø°ÙŠØ°Ø©"})]}):e.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-2 px-2",children:[e.jsxs(ae,{to:"/owner/stories",className:"flex-shrink-0 w-20 h-28 bg-white/20 rounded-xl flex flex-col items-center justify-center hover:bg-white/30 transition",children:[e.jsx("div",{className:"w-10 h-10 bg-white/30 rounded-full flex items-center justify-center mb-1",children:e.jsx(Cs,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs",children:"Ø¬Ø¯ÙŠØ¯"})]}),P.slice(0,4).map(_=>e.jsxs(ae,{to:"/owner/stories",className:"flex-shrink-0 w-20 h-28 rounded-xl overflow-hidden relative group",children:[_.type==="text"?e.jsx("div",{className:"w-full h-full flex items-center justify-center p-2",style:{backgroundColor:_.backgroundColor||"#0ea5e9"},children:e.jsx("p",{className:"text-[10px] text-center line-clamp-3",style:{color:_.textColor||"#fff"},children:_.caption})}):e.jsx("img",{src:_.mediaUrl,alt:"",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute bottom-1 left-1 right-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx(Ss,{className:"w-3 h-3"}),_.viewsCount||0]})})]},_.id)),P.length>4&&e.jsxs(ae,{to:"/owner/stories",className:"flex-shrink-0 w-20 h-28 bg-white/20 rounded-xl flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-2xl font-bold",children:["+",P.length-4]}),e.jsx("span",{className:"text-xs",children:"Ø§Ù„Ù…Ø²ÙŠØ¯"})]})]}),P.length>0&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-4 pt-3 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:P.length}),e.jsx("p",{className:"text-white/70 text-xs",children:"Ø³ØªÙˆØ±ÙŠ Ù†Ø´Ø·Ø©"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:P.reduce((_,se)=>_+(se.viewsCount||0),0)}),e.jsx("p",{className:"text-white/70 text-xs",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:"24 Ø³"}),e.jsx("p",{className:"text-white/70 text-xs",children:"Ù…Ø¯Ø© Ø§Ù„Ø³ØªÙˆØ±ÙŠ"})]})]})]})]})}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-emerald-700 rounded-2xl p-5 text-white shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"ğŸ’° Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª"})]}),e.jsx(ae,{to:"/owner/orders",className:"text-white/80 text-sm hover:text-white",children:"Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ â†"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"Ø§Ù„ÙŠÙˆÙ…"}),e.jsxs("p",{className:"text-2xl font-bold",children:[v.todayRevenue.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"Ø±.Ø³"})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[v.todayOrders," Ø·Ù„Ø¨"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹"}),e.jsxs("p",{className:"text-2xl font-bold",children:[v.weekRevenue.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"Ø±.Ø³"})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[v.weekOrders," Ø·Ù„Ø¨"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"Ø§Ù„Ø´Ù‡Ø±"}),e.jsxs("p",{className:"text-2xl font-bold",children:[v.monthRevenue.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"Ø±.Ø³"})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[v.monthOrders," Ø·Ù„Ø¨"]})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl p-4 ring-2 ring-white/30",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ"}),e.jsxs("p",{className:"text-2xl font-bold",children:[v.totalRevenue.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"Ø±.Ø³"})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[v.deliveredOrders," Ù…ÙƒØªÙ…Ù„"]})]})]})]})}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Bs,{className:"w-6 h-6 text-green-600"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"ğŸ“Š ØªÙ‚Ø±ÙŠØ± ØµØ§ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[v.totalRevenue.toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù†ØµØ©"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["(",v.deliveredOrders," Ø·Ù„Ø¨ Ã— 3.75 Ø±.Ø³)"]})]}),e.jsxs("span",{className:"font-bold text-red-600",children:["- ",(v.deliveredOrders*3.75).toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl px-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx(is,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-bold text-green-800",children:"ØµØ§ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"})]}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[S.toFixed(2)," Ø±.Ø³"]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Ù†Ø³Ø¨Ø© ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­"}),e.jsxs("span",{className:`font-bold ${S>=0?"text-green-600":"text-red-600"}`,children:[v.totalRevenue>0?(S/v.totalRevenue*100).toFixed(1):0,"%"]})]}),e.jsx("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 rounded-full transition-all duration-500",style:{width:`${v.totalRevenue>0?Math.max(0,S/v.totalRevenue*100):0}%`}})})]})]})}),e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"âš¡ ØªØ­ÙƒÙ… Ø³Ø±ÙŠØ¹"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(ae,{to:"/owner/orders",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mb-3",children:e.jsx(ir,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[v.pendingOrders," Ø¬Ø¯ÙŠØ¯"]}),e.jsxs("span",{className:"bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[v.preparingOrders," ØªØ­Ø¶ÙŠØ±"]})]})]}),e.jsxs(ae,{to:"/owner/menu",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center mb-3",children:e.jsx(ut,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[v.availableItems," Ù…ØªØ§Ø­"]}),e.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[v.menuItems," Ø¥Ø¬Ù…Ø§Ù„ÙŠ"]})]})]}),e.jsxs(ae,{to:"/owner/promotion",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center mb-3",children:e.jsx(Us,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[v.activePromotions," Ù†Ø´Ø·"]}),e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(Ss,{className:"w-3 h-3"}),v.totalViews]})]})]}),e.jsxs(ae,{to:"/owner/edit",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-600 to-gray-700 rounded-xl flex items-center justify-center mb-3",children:e.jsx(wa,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±"})]})]})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4 border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs(ae,{to:"/owner/orders?status=pending",className:"text-center p-3 bg-yellow-50 rounded-xl hover:bg-yellow-100 transition",children:[e.jsx(Ge,{className:"w-6 h-6 text-yellow-500 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-yellow-700",children:v.pendingOrders}),e.jsx("p",{className:"text-xs text-yellow-600",children:"Ø¬Ø¯ÙŠØ¯"})]}),e.jsxs(ae,{to:"/owner/orders?status=preparing",className:"text-center p-3 bg-orange-50 rounded-xl hover:bg-orange-100 transition",children:[e.jsx(wt,{className:"w-6 h-6 text-orange-500 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-orange-700",children:v.preparingOrders}),e.jsx("p",{className:"text-xs text-orange-600",children:"ØªØ­Ø¶ÙŠØ±"})]}),e.jsxs(ae,{to:"/owner/orders?status=delivered",className:"text-center p-3 bg-green-50 rounded-xl hover:bg-green-100 transition",children:[e.jsx(Ie,{className:"w-6 h-6 text-green-500 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-green-700",children:v.deliveredOrders}),e.jsx("p",{className:"text-xs text-green-600",children:"Ù…ÙƒØªÙ…Ù„"})]}),e.jsxs(ae,{to:"/owner/orders?status=cancelled",className:"text-center p-3 bg-red-50 rounded-xl hover:bg-red-100 transition",children:[e.jsx(Rs,{className:"w-6 h-6 text-red-500 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-red-700",children:v.cancelledOrders}),e.jsx("p",{className:"text-xs text-red-600",children:"Ù…Ù„ØºÙŠ"})]})]})})]}),B.length>0&&e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"ğŸ† Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹"}),e.jsx(ae,{to:"/owner/menu",className:"text-amber-600 text-sm font-semibold",children:"Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ â†"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:B.map((_,se)=>e.jsxs("div",{className:`flex items-center gap-3 p-4 ${se!==B.length-1?"border-b":""}`,children:[e.jsx("span",{className:"text-2xl w-8",children:se===0?"ğŸ¥‡":se===1?"ğŸ¥ˆ":se===2?"ğŸ¥‰":`#${se+1}`}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-semibold text-gray-900",children:_.name})}),e.jsxs("div",{className:"bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-sm font-bold",children:[_.count," Ù…Ø¨ÙŠØ¹Ø§Øª"]})]},se))})]}),F.length>0&&e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"ğŸ“¦ Ø¢Ø®Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx(ae,{to:"/owner/orders",className:"text-blue-600 text-sm font-semibold",children:"Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ â†"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:F.map((_,se)=>{var G,Z,ne,ce;const pe=I(_.status),le=pe.icon;return e.jsxs(ae,{to:"/owner/orders",className:`flex items-center gap-3 p-4 hover:bg-gray-50 transition ${se!==F.length-1?"border-b":""}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${pe.color}`,children:e.jsx(le,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[((G=_.items)==null?void 0:G.length)||0," Ø£ØµÙ†Ø§Ù"]}),e.jsx("p",{className:"text-xs text-gray-500",children:((ne=(Z=_.createdAt)==null?void 0:Z.toDate)==null?void 0:ne.call(Z).toLocaleDateString("ar-SA"))||""})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-green-600",children:[(ce=_.subtotal)==null?void 0:ce.toFixed(0)," Ø±.Ø³"]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${pe.color}`,children:pe.label})]})]},_.id)})})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"ğŸ› ï¸ Ø£Ø¯ÙˆØ§Øª Ø¥Ø¶Ø§ÙÙŠØ©"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs(ae,{to:"/owner/edit#hiring",className:`flex items-center gap-3 bg-white rounded-2xl shadow p-4 border ${r!=null&&r.isHiring?"border-purple-300 bg-purple-50":"border-gray-100"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r!=null&&r.isHiring?"bg-purple-500":"bg-gray-200"}`,children:e.jsx(Jt,{className:`w-5 h-5 ${r!=null&&r.isHiring?"text-white":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"ØªÙˆØ¸ÙŠÙ Ø¹Ø§Ù…Ù„Ø§Øª"}),e.jsx("p",{className:"text-xs text-gray-500",children:r!=null&&r.isHiring?"âœ“ Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„ØªÙˆØ¸ÙŠÙ Ù…ÙØ¹Ù‘Ù„":"Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø§Ù„Ø·Ø¨Ø®"})]})]}),e.jsxs(ae,{to:"/owner/edit#bank",className:`flex items-center gap-3 bg-white rounded-2xl shadow p-4 border ${r!=null&&r.bankName?"border-green-300 bg-green-50":"border-gray-100"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r!=null&&r.bankName?"bg-green-500":"bg-gray-200"}`,children:e.jsx(Ns,{className:`w-5 h-5 ${r!=null&&r.bankName?"text-white":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ"}),e.jsx("p",{className:"text-xs text-gray-500",children:r!=null&&r.bankName?`âœ“ ${r.bankName}`:"Ø£Ø¶Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨"})]})]}),e.jsxs(ae,{to:"/owner/packages",className:"flex items-center gap-3 bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl shadow p-4 border border-amber-200",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center",children:e.jsx(ts,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-amber-700",children:"Ø¨Ø§Ù‚ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-amber-600",children:"ğŸ‘‘ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ù…ÙŠØ²Ø©"}),d!==null&&e.jsx("span",{className:`px-2 py-0.5 rounded-full ${k?"bg-red-100 text-red-600":M?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:k?"Ù…Ù†ØªÙ‡ÙŠØ©":`${d} ÙŠÙˆÙ…`})]})]})]}),e.jsxs(ae,{to:`/menu?restaurant=${s==null?void 0:s.uid}`,className:"flex items-center gap-3 bg-white rounded-2xl shadow p-4 border border-gray-100",children:[e.jsx("div",{className:"w-10 h-10 bg-sky-500 rounded-xl flex items-center justify-center",children:e.jsx(Jc,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…ØªØ¬Ø±"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ø´Ø§Ù‡Ø¯ Ù…ØªØ¬Ø±Ùƒ ÙƒÙ…Ø§ ÙŠØ±Ø§Ù‡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"})]})]})]})]}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Me,{className:"w-5 h-5 text-amber-600"}),e.jsx("h3",{className:"font-bold text-amber-800",children:"ğŸ“‹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø§Ù‚Ø©"}),e.jsxs("span",{className:"bg-amber-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1",children:[e.jsx(ts,{className:"w-4 h-4"}),"Ù…Ù…ÙŠØ²Ø©"]})]}),(r==null?void 0:r.packageSubscribedAt)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("span",{className:"text-gray-900 font-medium",children:((ie=(Q=(V=r.packageSubscribedAt)==null?void 0:V.toDate)==null?void 0:Q.call(V))==null?void 0:ie.toLocaleDateString("ar-SA"))||"-"})]}),(r==null?void 0:r.packageExpiresAt)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"}),e.jsx("span",{className:`font-medium ${k?"text-red-600":M?"text-yellow-600":"text-gray-900"}`,children:((ue=(ye=(re=r.packageExpiresAt)==null?void 0:re.toDate)==null?void 0:ye.call(re))==null?void 0:ue.toLocaleDateString("ar-SA"))||"-"})]}),d!==null&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©"}),e.jsx("span",{className:`text-lg font-bold ${k?"text-red-600":M?"text-yellow-600":"text-green-600"}`,children:k?"Ù…Ù†ØªÙ‡ÙŠØ©":`${d} ÙŠÙˆÙ…`})]})]}),(k||M)&&e.jsx(ae,{to:"/owner/packages",className:"mt-4 block w-full text-center bg-gradient-to-r from-amber-500 to-orange-500 text-white font-bold py-3 rounded-xl hover:from-amber-600 hover:to-orange-600 transition",children:"ğŸ”„ ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ø¢Ù†"})]})}),(r==null?void 0:r.bankName)&&e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ns,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"font-bold text-green-800",children:"âœ… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ Ù…ÙØ¹Ù‘Ù„"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Ø§Ù„Ø¨Ù†Ùƒ:"})," ",r.bankName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:"})," ",r.bankAccountName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ¨Ø§Ù†:"})," ",r.bankAccountNumber]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"ğŸ’¡ ÙŠØ¸Ù‡Ø± Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ"})]})})]}):e.jsxs("div",{className:"space-y-6 pb-20",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-50 rounded-2xl p-4 border-2 border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-xl flex items-center justify-center",children:e.jsx(Me,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-700",children:"ğŸ“¦ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©"})]})]}),e.jsx(ae,{to:"/owner/packages",className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-2 rounded-xl text-sm font-bold hover:shadow-lg transition",children:"ØªØ±Ù‚ÙŠØ© âœ¨"})]})}),r!=null&&r.commercialLicenseUrl?e.jsx("div",{className:`rounded-2xl p-4 border-2 ${r.licenseStatus==="approved"?"bg-green-50 border-green-200":r.licenseStatus==="rejected"?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${r.licenseStatus==="approved"?"bg-green-500":r.licenseStatus==="rejected"?"bg-red-500":"bg-yellow-500"}`,children:e.jsx(us,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:`font-bold ${r.licenseStatus==="approved"?"text-green-700":r.licenseStatus==="rejected"?"text-red-700":"text-yellow-700"}`,children:[r.licenseStatus==="approved"&&"âœ… Ø§Ù„ØªØ±Ø®ÙŠØµ Ù…ÙØ¹ØªÙ…Ø¯",r.licenseStatus==="rejected"&&"âŒ Ø§Ù„ØªØ±Ø®ÙŠØµ Ù…Ø±ÙÙˆØ¶",(!r.licenseStatus||r.licenseStatus==="pending")&&"â³ Ø§Ù„ØªØ±Ø®ÙŠØµ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"]}),r.licenseStatus==="rejected"&&r.licenseNotes&&e.jsx("p",{className:"text-sm text-red-600",children:r.licenseNotes})]}),r.licenseStatus==="rejected"&&e.jsx(ae,{to:"/owner/edit",className:"text-red-600 text-sm font-bold underline",children:"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø±ÙØ¹"})]})}):e.jsx(ae,{to:"/owner/edit",className:"block bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-200 rounded-2xl p-4 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(us,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-orange-700",children:"ğŸ“„ Ø§Ø±ÙØ¹ ØªØ±Ø®ÙŠØµÙƒ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ"}),e.jsx("p",{className:"text-sm text-orange-600",children:"Ù„ØªÙØ¹ÙŠÙ„ Ù…ØªØ¬Ø±Ùƒ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„"})]})]})}),(r==null?void 0:r.points)&&e.jsxs("div",{className:`rounded-2xl p-4 border-2 ${r.points.isSuspended?"bg-red-50 border-red-300":r.points.currentPoints<hs.WARNING_THRESHOLD?"bg-amber-50 border-amber-300":"bg-sky-50 border-sky-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r.points.isSuspended?"bg-red-500":r.points.currentPoints<hs.WARNING_THRESHOLD?"bg-amber-500":"bg-sky-500"}`,children:e.jsx(us,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:`font-bold ${r.points.isSuspended?"text-red-700":r.points.currentPoints<hs.WARNING_THRESHOLD?"text-amber-700":"text-sky-700"}`,children:r.points.isSuspended?"â›” Ø­Ø³Ø§Ø¨Ùƒ Ù…ÙˆÙ‚ÙˆÙ!":"ğŸ›¡ï¸ Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‚Ø§Ø·"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`text-3xl font-bold ${r.points.isSuspended?"text-red-600":r.points.currentPoints<hs.WARNING_THRESHOLD?"text-amber-600":"text-sky-600"}`,children:r.points.currentPoints}),e.jsxs("div",{className:"text-sm text-gray-500",children:["/ ",hs.STARTING_POINTS," Ù†Ù‚Ø·Ø©"]})]}),e.jsx("div",{className:"flex-1 max-w-[150px] mr-4",children:e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${r.points.isSuspended?"bg-red-500":r.points.currentPoints<hs.WARNING_THRESHOLD?"bg-amber-500":"bg-sky-500"}`,style:{width:`${Math.min(100,r.points.currentPoints)}%`}})})})]}),r.points.isSuspended&&e.jsxs("div",{className:"mt-3 bg-red-100 rounded-xl p-3",children:[e.jsx("p",{className:"text-sm text-red-700",children:"â›” Ø­Ø³Ø§Ø¨Ùƒ Ù…ÙˆÙ‚ÙˆÙ Ø¨Ø³Ø¨Ø¨ Ø§Ù†Ø®ÙØ§Ø¶ Ø§Ù„Ù†Ù‚Ø§Ø·. ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„Ù‡."}),e.jsx(ae,{to:"/support",className:"inline-block mt-2 text-red-600 font-bold underline text-sm",children:"ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… â†"})]}),!r.points.isSuspended&&r.points.currentPoints<hs.WARNING_THRESHOLD&&e.jsx("div",{className:"mt-3 bg-amber-100 rounded-xl p-3",children:e.jsx("p",{className:"text-sm text-amber-700",children:"âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ù†Ù‚Ø§Ø·Ùƒ Ù…Ù†Ø®ÙØ¶Ø©! Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¬ÙˆØ¯Ø© Ø§Ù„Ø®Ø¯Ù…Ø© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù."})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-4 border-2 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx(is,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"font-bold text-green-700",children:"ğŸ’° Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.totalRevenue.toFixed(0)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ø±.Ø³)"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:S.toFixed(0)}),e.jsx("p",{className:"text-xs text-gray-500",children:"ØµØ§ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ (Ø±.Ø³)"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"* Ø¨Ø¹Ø¯ Ø®ØµÙ… Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù†ØµØ© (3.75 Ø±.Ø³ Ù„ÙƒÙ„ Ø·Ù„Ø¨)"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 rounded-3xl shadow-2xl p-6 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white rounded-full -translate-y-1/2 translate-x-1/2"})}),e.jsxs("div",{className:"relative z-10 text-center py-6",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ts,{className:"w-10 h-10 text-yellow-300"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ğŸŒŸ Ø§Ø´ØªØ±Ùƒ ÙÙŠ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ù…ÙŠØ²Ø©"}),e.jsx("p",{className:"text-white/80 mb-4",children:"Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù…Ø¹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ÙØµÙ‘Ù„Ø© ÙˆÙ…Ø²Ø§ÙŠØ§ Ø­ØµØ±ÙŠØ©!"}),e.jsxs(ae,{to:"/owner/packages",className:"inline-flex items-center gap-2 bg-white text-amber-600 font-bold px-6 py-3 rounded-xl hover:bg-yellow-50 transition shadow-lg",children:[e.jsx(ps,{className:"w-5 h-5"}),"Ø§ÙƒØªØ´Ù Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø¢Ù†"]})]})]}),!(r!=null&&r.bankName)&&e.jsx(ae,{to:"/owner/edit#bank",className:"block bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-2xl p-4 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Ns,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-red-700",children:"âš ï¸ Ø£Ø¶Ù Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¨Ù†ÙƒÙŠ!"}),e.jsx("p",{className:"text-sm text-red-600",children:"Ù„ØªØªÙ…ÙƒÙ† Ù…Ù† Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"})]})]})}),v.pendingOrders>0&&e.jsx(ae,{to:"/owner/orders",className:"block bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-2xl p-4 hover:shadow-lg transition animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(ns,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-bold text-yellow-700",children:["ğŸ”” Ù„Ø¯ÙŠÙƒ ",v.pendingOrders," Ø·Ù„Ø¨ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù‚Ø¨ÙˆÙ„!"]}),e.jsx("p",{className:"text-sm text-yellow-600",children:"Ø§Ø¶ØºØ· Ù„Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs(ae,{to:"/owner/packages",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-5 ring-2 ring-amber-300 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 py-1.5 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-white text-sm font-bold",children:[e.jsx(ps,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø§ÙƒØªØ´Ù Ø§Ù„Ø¨Ø§Ù‚Ø§Øª"}),e.jsx(ps,{className:"w-4 h-4"})]})}),e.jsx("div",{className:"h-6"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ts,{className:"w-8 h-8 text-amber-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"Ø¨Ø§Ù‚Ø§Øª Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…Ø²Ø§ÙŠØ§ Ø­ØµØ±ÙŠØ©!"})]}),e.jsxs(ae,{to:"/owner/menu",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-yellow-50 to-white p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ut,{className:"w-8 h-8 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ø¥Ø¶Ø§ÙØ© ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£ØµÙ†Ø§Ù ÙˆØ§Ù„ÙˆØ¬Ø¨Ø§Øª."})]}),e.jsxs(ae,{to:"/owner/orders",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-green-50 to-white p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ir,{className:"w-8 h-8 text-green-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨."}),v.pendingOrders>0&&e.jsxs("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold mt-2 inline-block",children:[v.pendingOrders," Ø¬Ø¯ÙŠØ¯!"]})]}),e.jsxs(ae,{to:"/owner/edit",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-blue-50 to-white p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(wa,{className:"w-8 h-8 text-blue-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±."})]}),e.jsxs(ae,{to:"/owner/wallet",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-emerald-50 to-white p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(is,{className:"w-8 h-8 text-emerald-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"Ù…Ø­ÙØ¸ØªÙŠ"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ø£Ø±Ø¨Ø§Ø­."})]}),e.jsxs(ae,{to:"/owner/offers",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-pink-50 to-white p-5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-1 -left-1 bg-gradient-to-r from-pink-500 to-red-500 text-white text-xs font-bold px-3 py-1 rounded-br-xl",children:"Ø¬Ø¯ÙŠØ¯ âœ¨"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ms,{className:"w-8 h-8 text-pink-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø®Ø§ØµØ©"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ø£Ø¶Ù Ø®ØµÙˆÙ…Ø§Øª ÙˆØ¹Ø±ÙˆØ¶ Ù„Ø¬Ø°Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡."})]}),ea()&&e.jsxs(ae,{to:"/owner/offers?type=ramadan",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-purple-900 via-purple-800 to-emerald-900 p-5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-1 -left-1 bg-gradient-to-r from-amber-400 to-amber-500 text-purple-900 text-xs font-bold px-3 py-1 rounded-br-xl",children:"ğŸŒ™ Ø±Ù…Ø¶Ø§Ù†"}),e.jsx("div",{className:"absolute top-2 right-2 text-2xl animate-pulse",children:"ğŸŒ™"}),e.jsx("div",{className:"absolute bottom-2 left-2 text-xl opacity-50",children:"âœ¨"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:"ğŸ˜ï¸"}),e.jsx("h3",{className:"text-lg font-extrabold text-white",children:"Ø¹Ø±ÙˆØ¶ Ø±Ù…Ø¶Ø§Ù†"})]}),e.jsx("p",{className:"text-sm text-purple-200",children:"Ø£Ø¶Ù Ø¨Ø§Ù‚Ø§Øª Ø¥ÙØ·Ø§Ø± ÙˆØ³Ø­ÙˆØ± ÙˆØ¹Ø±ÙˆØ¶ Ø®Ø§ØµØ©"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("span",{className:"bg-amber-400/20 text-amber-300 text-xs px-2 py-1 rounded-full",children:"Ø¨Ø§Ù‚Ø© Ø¥ÙØ·Ø§Ø±"}),e.jsx("span",{className:"bg-purple-400/20 text-purple-300 text-xs px-2 py-1 rounded-full",children:"Ø¨Ø§Ù‚Ø© Ø³Ø­ÙˆØ±"}),e.jsx("span",{className:"bg-emerald-400/20 text-emerald-300 text-xs px-2 py-1 rounded-full",children:"Ø¹Ø±Ø¶ Ø¹Ø§Ø¦Ù„ÙŠ"})]})]}),e.jsxs(ae,{to:"/owner/stories",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-purple-50 to-white p-5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-1 -left-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-3 py-1 rounded-br-xl",children:"Ø¬Ø¯ÙŠØ¯ âœ¨"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(vt,{className:"w-8 h-8 text-purple-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"Ø³ØªÙˆØ±ÙŠ Ø§Ù„Ø£Ø³Ø±Ø©"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ø´Ø§Ø±Ùƒ Ø·Ø¨Ø® Ø§Ù„ÙŠÙˆÙ… ÙˆØ¹Ø±ÙˆØ¶Ùƒ Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡."})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ts,{className:"w-6 h-6 text-amber-400"}),e.jsx("h3",{className:"text-lg font-bold",children:"ğŸš€ Ù…Ø²Ø§ÙŠØ§ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ù…ÙŠØ²Ø©"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(Vs,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ø§Ù„ÙŠØ© Ù…ÙØµÙ‘Ù„Ø©"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(ls,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{children:"Ø£ÙƒØ«Ø± Ø§Ù„Ø£ØµÙ†Ø§Ù Ù…Ø¨ÙŠØ¹Ø§Ù‹"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(Us,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{children:"Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù…Ù…ÙˆÙ„Ø© Ù…Ø¬Ø§Ù†ÙŠØ©"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(us,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{children:"Ø´Ø§Ø±Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ù…ÙŠØ²Ø©"})]})]}),e.jsx(ae,{to:"/owner/packages",className:"block w-full text-center bg-gradient-to-r from-amber-500 to-orange-500 text-white font-bold py-3 rounded-xl hover:from-amber-600 hover:to-orange-600 transition",children:"ğŸš€ Ø§Ø´ØªØ±Ùƒ Ø§Ù„Ø¢Ù†"})]})]})},dm=({kind:s,message:t,onClose:a})=>{const i=s==="success"?"bg-green-600":s==="error"?"bg-rose-600":s==="warning"?"bg-amber-500":"bg-slate-800";return l.useEffect(()=>{const c=setTimeout(a,2500);return()=>clearTimeout(c)},[a]),e.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${i}`,children:t})},Ba=()=>({name:"",desc:"",price:0,available:!0,file:null,discountPercent:0,discountExpiresAt:""});async function Pn(s,t=900,a=.8){try{const i=await createImageBitmap(s),c=Math.min(1,t/i.width),u=Math.round(i.width*c),r=Math.round(i.height*c),w=document.createElement("canvas");w.width=u,w.height=r,w.getContext("2d").drawImage(i,0,0,u,r);const U=s.type.includes("png")?"image/png":"image/jpeg";return await new Promise(N=>w.toBlob(E=>N(E),U,a))}catch{return s}}const xm=()=>{const{user:s}=Ee(),t=Ps(),[a,i]=l.useState([]),[c,u]=l.useState(!0),[r,w]=l.useState(Ba()),[D,U]=l.useState(!1),[v,N]=l.useState(null),[E,A]=l.useState(Ba()),[j,z]=l.useState(!1),p=l.useRef(null),[f,L]=l.useState(null),$=(I,q)=>L({kind:I,message:q}),g=Ia(ks),F=l.useRef(null),O=async()=>{if(!s)return;u(!0);const I=fe(ee(C,"menuItems"),je("ownerId","==",s.uid)),q=await be(I);i(q.docs.map(x=>({id:x.id,...x.data()}))),u(!1)};l.useEffect(()=>{O()},[s]);const B=async I=>{if(I.preventDefault(),!s){$("warning","âš ï¸ Ù„Ø§Ø²Ù… ØªØ³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„");return}const q=Number(r.price||0);if(!r.name.trim()){$("warning","âš ï¸ Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù");return}if(!Number.isFinite(q)||q<=0){$("warning","âš ï¸ Ø£Ø¯Ø®Ù„ Ø³Ø¹Ø± ØµØ§Ù„Ø­");return}U(!0);const x="temp_"+Date.now(),b=r.file?URL.createObjectURL(r.file):void 0,y={_tempId:x,_optimistic:!0,_progress:r.file?1:100,name:r.name,desc:r.desc||"",price:q,imageUrl:b,available:r.available??!0,ownerId:s.uid};i(d=>[y,...d]);try{let d;if(r.file){const h=await Pn(r.file),S=r.file.name.replace(/\s+/g,"_").slice(-60),V=`menuImages/${s.uid}_${Date.now()}_${S}`,Q=As(g,V),ie=Ot(Q,h,{contentType:r.file.type||"image/jpeg"});await new Promise((re,ye)=>{ie.on("state_changed",ue=>{const _=Math.round(ue.bytesTransferred/ue.totalBytes*100);i(se=>se.map(pe=>pe._tempId===x?{...pe,_progress:_}:pe))},ye,async()=>{const ue=await Is(ie.snapshot.ref);d=`${ue}${ue.includes("?")?"&":"?"}v=${Date.now()}`,re()})})}const M={name:y.name,desc:y.desc,price:q,imageUrl:d||"",available:y.available,ownerId:s.uid,...y.categoryId?{categoryId:y.categoryId}:{},...r.discountPercent&&r.discountPercent>0?{discountPercent:r.discountPercent}:{},...r.discountExpiresAt?{discountExpiresAt:new Date(r.discountExpiresAt)}:{}},k=await Pe(ee(C,"menuItems"),M);i(h=>h.map(S=>S._tempId===x?{...S,id:k.id,imageUrl:d||S.imageUrl,_optimistic:!1,_progress:100}:S)),$("success","âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù Ø¨Ù†Ø¬Ø§Ø­")}catch(d){i(M=>M.filter(k=>k._tempId!==x)),$("error",`âŒ ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù: ${(d==null?void 0:d.message)||d}`)}finally{U(!1),w(Ba()),F.current&&(F.current.value=""),b&&URL.revokeObjectURL(b)}},T=async(I,q)=>{if(I){i(x=>x.map(b=>b.id===I?{...b,available:!q}:b));try{await me(J(C,"menuItems",I),{available:!q}),$("success","ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©")}catch{i(x=>x.map(b=>b.id===I?{...b,available:!!q}:b)),$("error","Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØºÙŠÙŠØ±. Ø£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.")}}},P=async I=>{if(!I||!await t.confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØµÙ†Ù Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§ØŸ",{dangerous:!0,title:"Ø­Ø°Ù Ø§Ù„ØµÙ†Ù"}))return;const x=a;i(b=>b.filter(y=>y.id!==I));try{await Ds(J(C,"menuItems",I)),$("success","ØªÙ… Ø§Ù„Ø­Ø°Ù")}catch{i(x),$("error","Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­Ø°Ù. Ø£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.")}},m=I=>{N(I.id||null),A({...I,file:null})},o=()=>{N(null),A(Ba()),p.current&&(p.current.value="")},R=async I=>{if(I.preventDefault(),!s||!v)return;const q=Number(E.price||0);if(!E.name.trim()){$("warning","âš ï¸ Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù");return}if(!Number.isFinite(q)||q<=0){$("warning","âš ï¸ Ø£Ø¯Ø®Ù„ Ø³Ø¹Ø± ØµØ§Ù„Ø­");return}z(!0);const x=a;i(b=>b.map(y=>y.id===v?{...y,name:E.name,desc:E.desc,price:q,available:E.available}:y));try{let b=E.imageUrl;if(E.file){const y=await Pn(E.file),d=E.file.name.replace(/\s+/g,"_").slice(-60),M=`menuImages/${s.uid}_${Date.now()}_${d}`,k=As(g,M),h=Ot(k,y,{contentType:E.file.type||"image/jpeg"});await new Promise((S,V)=>{h.on("state_changed",null,V,async()=>{const Q=await Is(h.snapshot.ref);b=`${Q}${Q.includes("?")?"&":"?"}v=${Date.now()}`,S()})})}await me(J(C,"menuItems",v),{name:E.name,desc:E.desc||"",price:q,available:E.available,...b?{imageUrl:b}:{},discountPercent:E.discountPercent||0,...E.discountExpiresAt?{discountExpiresAt:new Date(E.discountExpiresAt)}:{discountExpiresAt:null}}),b&&i(y=>y.map(d=>d.id===v?{...d,imageUrl:b}:d)),$("success","âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ†Ù Ø¨Ù†Ø¬Ø§Ø­"),o()}catch(b){i(x),$("error",`âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«: ${(b==null?void 0:b.message)||b}`)}finally{z(!1)}};return c?e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[e.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(I=>e.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},I))})]}):e.jsxs(e.Fragment,{children:[f&&e.jsx(dm,{kind:f.kind,message:f.message,onClose:()=>L(null)}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("form",{onSubmit:B,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù"}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù",value:r.name,onChange:I=>w({...r,name:I.target.value})}),e.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:"Ø§Ù„ÙˆØµÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",value:r.desc,onChange:I=>w({...r,desc:I.target.value})}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"Ø§Ù„Ø³Ø¹Ø±",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(r.price)?r.price:0,onChange:I=>w({...r,price:Number(I.target.value)})}),e.jsxs("div",{className:"border border-dashed border-amber-300 rounded-xl p-4 bg-amber-50/50 space-y-3",children:[e.jsx("h3",{className:"text-sm font-bold text-amber-700 flex items-center gap-2",children:"ğŸ·ï¸ Ø¥Ø¶Ø§ÙØ© Ø®ØµÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… %"}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"Ù…Ø«Ø§Ù„: 20",type:"number",min:0,max:100,value:r.discountPercent||"",onChange:I=>w({...r,discountPercent:Number(I.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"ÙŠÙ†ØªÙ‡ÙŠ ÙÙŠ"}),e.jsx("input",{className:"w-full border rounded-xl p-3",type:"date",value:r.discountExpiresAt?typeof r.discountExpiresAt=="string"?r.discountExpiresAt:new Date(r.discountExpiresAt).toISOString().split("T")[0]:"",onChange:I=>w({...r,discountExpiresAt:I.target.value})})]})]}),r.discountPercent&&r.discountPercent>0&&e.jsxs("div",{className:"text-sm bg-green-100 text-green-700 p-2 rounded-lg",children:["Ø§Ù„Ø³Ø¹Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…: ",e.jsxs("strong",{children:[(r.price-r.price*(r.discountPercent/100)).toFixed(2)," Ø±.Ø³"]}),e.jsxs("span",{className:"line-through text-gray-400 mr-2",children:[r.price.toFixed(2)," Ø±.Ø³"]})]})]}),e.jsx("input",{ref:F,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:I=>{var q;return w({...r,file:((q=I.target.files)==null?void 0:q[0])||null})}}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:r.available,onChange:I=>w({...r,available:I.target.checked})}),"Ù…ØªØ§Ø­"]}),e.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:D,children:D?"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸â€¦":"Ø­ÙØ¸"})]}),e.jsxs("div",{className:"space-y-3",children:[a.map(I=>e.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:v===I.id?e.jsxs("form",{onSubmit:R,className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("img",{src:E.file?URL.createObjectURL(E.file):E.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:q=>{q.currentTarget.style.display="none"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø©"}),e.jsx("input",{ref:p,type:"file",accept:"image/*",className:"w-full text-sm border rounded-lg p-2",onChange:q=>{var x;return A({...E,file:((x=q.target.files)==null?void 0:x[0])||null})}})]})]}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù",value:E.name,onChange:q=>A({...E,name:q.target.value})}),e.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:"Ø§Ù„ÙˆØµÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",value:E.desc||"",onChange:q=>A({...E,desc:q.target.value})}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"Ø§Ù„Ø³Ø¹Ø±",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(E.price)?E.price:0,onChange:q=>A({...E,price:Number(q.target.value)})}),e.jsxs("div",{className:"border border-dashed border-amber-300 rounded-xl p-4 bg-amber-50/50 space-y-3",children:[e.jsx("h3",{className:"text-sm font-bold text-amber-700 flex items-center gap-2",children:"ğŸ·ï¸ Ø§Ù„Ø®ØµÙ…"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… %"}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"Ù…Ø«Ø§Ù„: 20",type:"number",min:0,max:100,value:E.discountPercent||"",onChange:q=>A({...E,discountPercent:Number(q.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"ÙŠÙ†ØªÙ‡ÙŠ ÙÙŠ"}),e.jsx("input",{className:"w-full border rounded-xl p-3",type:"date",value:E.discountExpiresAt?typeof E.discountExpiresAt=="string"?E.discountExpiresAt:new Date(E.discountExpiresAt).toISOString().split("T")[0]:"",onChange:q=>A({...E,discountExpiresAt:q.target.value})})]})]}),E.discountPercent&&E.discountPercent>0&&e.jsxs("div",{className:"text-sm bg-green-100 text-green-700 p-2 rounded-lg",children:["Ø§Ù„Ø³Ø¹Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…: ",e.jsxs("strong",{children:[(E.price-E.price*(E.discountPercent/100)).toFixed(2)," Ø±.Ø³"]}),e.jsxs("span",{className:"line-through text-gray-400 mr-2",children:[E.price.toFixed(2)," Ø±.Ø³"]})]}),E.discountPercent&&E.discountPercent>0&&e.jsx("button",{type:"button",onClick:()=>A({...E,discountPercent:0,discountExpiresAt:""}),className:"text-xs text-red-500 hover:text-red-700",children:"âŒ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®ØµÙ…"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:E.available,onChange:q=>A({...E,available:q.target.checked})}),"Ù…ØªØ§Ø­"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:j,className:"flex-1 px-4 py-2 rounded-xl bg-green-600 text-white disabled:opacity-60",children:j?"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸â€¦":"ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª"}),e.jsx("button",{type:"button",onClick:o,disabled:j,className:"px-4 py-2 rounded-xl bg-gray-400 text-white disabled:opacity-60",children:"Ø¥Ù„ØºØ§Ø¡"})]})]}):e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:I.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:q=>{q.currentTarget.style.display="none"}}),I._optimistic&&e.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:e.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${I._progress||1}%`}})})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold",children:I.name}),I.desc&&e.jsx("div",{className:"text-sm text-gray-600",children:I.desc}),(()=>{var y,d,M,k,h,S;const q=I.discountPercent&&I.discountPercent>0,x=((d=(y=I.discountExpiresAt)==null?void 0:y.toDate)==null?void 0:d.call(y))||(I.discountExpiresAt?new Date(I.discountExpiresAt):null),b=!x||x>new Date;return q&&b?e.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"font-bold text-green-600",children:[(I.price-I.price*((I.discountPercent||0)/100)).toFixed(2)," Ø±.Ø³"]}),e.jsxs("span",{className:"text-sm text-gray-400 line-through",children:[(k=(M=I.price)==null?void 0:M.toFixed)==null?void 0:k.call(M,2)," Ø±.Ø³"]}),e.jsxs("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:["Ø®ØµÙ… ",I.discountPercent,"%"]})]}):e.jsxs("div",{className:"font-semibold mt-1",children:[(S=(h=I.price)==null?void 0:h.toFixed)==null?void 0:S.call(h,2)," Ø±.Ø³"]})})(),I._optimistic&&e.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:"ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸â€¦"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{onClick:()=>m(I),disabled:!!I._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-amber-500 text-white disabled:opacity-50",children:"âœï¸ ØªØ¹Ø¯ÙŠÙ„"}),e.jsx("button",{onClick:()=>T(I.id,I.available),disabled:!!I._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:I.available?"ØªØ¹Ø·ÙŠÙ„":"ØªÙØ¹ÙŠÙ„"}),e.jsx("button",{onClick:()=>P(I.id),disabled:!!I._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:"Ø­Ø°Ù"})]})]})},I.id||I._tempId)),a.length===0&&e.jsx("div",{className:"text-gray-600",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ØµÙ†Ø§Ù Ø¨Ø¹Ø¯."})]})]})]})},Hr=s=>({pending:"â³ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",accepted:"âœ… ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„",preparing:"ğŸ‘¨â€ğŸ³ Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±",ready:"ğŸ“¦ Ø¬Ø§Ù‡Ø²",out_for_delivery:"ğŸšš ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚",delivered:"ğŸ‰ ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…",cancelled:"âŒ Ù…Ù„ØºÙŠ"})[s]||s,_n=s=>{switch(s){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},mm=()=>{const{user:s}=Ee(),t=os(),a=He(),[i,c]=l.useState([]),[u,r]=l.useState([]),[w,D]=l.useState("incoming"),[U,v]=l.useState(null),[N,E]=l.useState({}),[A,j]=l.useState(null),[z,p]=l.useState(null);l.useRef(null);const[f,L]=l.useState(!0),$=l.useRef(new Set),g=l.useRef(!0),F=l.useMemo(()=>(s==null?void 0:s.uid)??null,[s]);l.useEffect(()=>{Ri()},[]),l.useEffect(()=>{if(!F)return;v(null);const o=cs(ee(C,"orders"),R=>{const q=R.docs.map(x=>({id:x.id,...x.data()})).filter(x=>{var d,M;const b=x.restaurantId===F,y=((M=(d=x==null?void 0:x.items)==null?void 0:d[0])==null?void 0:M.ownerId)===F;return b||y});if(q.sort((x,b)=>{var M,k,h,S;const y=((k=(M=x.createdAt)==null?void 0:M.toMillis)==null?void 0:k.call(M))??0;return(((S=(h=b.createdAt)==null?void 0:h.toMillis)==null?void 0:S.call(h))??0)-y}),!g.current&&f){new Set(q.map(b=>b.id));const x=$.current;for(const b of q)if(!x.has(b.id)&&b.status==="pending"){console.log("ğŸ”” Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯!",b.id),tx(),a.success("ğŸ”” Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯!");break}}$.current=new Set(q.map(x=>x.id)),g.current=!1,c(q),v(null)},R=>{console.error("Firestore error:",R),v("Ø­Ø¯Ø«Øª Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª.")});return()=>o()},[F,f,a]),l.useEffect(()=>{if(!F)return;const o=cs(ee(C,"orders"),R=>{const q=R.docs.map(x=>({id:x.id,...x.data()})).filter(x=>x.customerId===F);q.sort((x,b)=>{var M,k,h,S;const y=((k=(M=x.createdAt)==null?void 0:M.toMillis)==null?void 0:k.call(M))??0;return(((S=(h=b.createdAt)==null?void 0:h.toMillis)==null?void 0:S.call(h))??0)-y}),r(q)},R=>{console.error("Firestore error (my orders):",R)});return()=>o()},[F]);const O=async(o,R,I)=>{const q={status:R,updatedAt:X()};if(R==="accepted"&&(I==null?void 0:I.deliveryType)==="delivery"){const x=N[o]||0;q.deliveryFee=x,q.total=(I.subtotal||0)+x}if(R==="cancelled"&&(q.cancelledAt=X(),q.cancelledBy="owner"),await me(J(C,"orders",o),q),R==="cancelled"&&I){try{const{processOrderRefund:x,notifyRefundParties:b}=await qs(async()=>{const{processOrderRefund:d,notifyRefundParties:M}=await import("./refundService-DAeeGHOB.js");return{processOrderRefund:d,notifyRefundParties:M}},__vite__mapDeps([0,1,2,3,4])),y=await x({id:I.id||o,customerId:I.customerId,restaurantId:I.restaurantId||F||"",subtotal:I.subtotal,total:I.total,restaurantEarnings:I.restaurantEarnings,platformFee:I.platformFee,adminCommission:I.adminCommission,appEarnings:I.appEarnings,referredBy:I.referredBy,paymentMethod:I.paymentMethod});await b({id:I.id||o,customerId:I.customerId,restaurantId:I.restaurantId||F||"",subtotal:I.subtotal,total:I.total},y,"owner"),y.success&&a.success("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¨Ø§Ù„Øº ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ âœ…")}catch(x){console.warn("âš ï¸ ØªØ¹Ø°Ø± Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ:",x),a.warning("ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡ Ù„ÙƒÙ† ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ")}return}try{const{notifyOrderAccepted:x,notifyOrderPreparing:b,notifyOrderReady:y,notifyCourierOrderReady:d}=await qs(async()=>{const{notifyOrderAccepted:h,notifyOrderPreparing:S,notifyOrderReady:V,notifyCourierOrderReady:Q}=await Promise.resolve().then(()=>Ca);return{notifyOrderAccepted:h,notifyOrderPreparing:S,notifyOrderReady:V,notifyCourierOrderReady:Q}},void 0),M=I==null?void 0:I.customerId,k=(I==null?void 0:I.restaurantName)||"Ø§Ù„Ù…Ø·Ø¹Ù…";if(M){if(R==="accepted")await x(M,o,k);else if(R==="preparing")await b(M,o,k);else if(R==="ready"&&(await y(M,o,k,(I==null?void 0:I.deliveryType)||"delivery"),(I==null?void 0:I.deliveryType)==="delivery"&&F)){const{collection:h,query:S,where:V,getDocs:Q}=await qs(async()=>{const{collection:ue,query:_,where:se,getDocs:pe}=await import("./vendor-firebase-CIIT5h2g.js").then(le=>le.Z);return{collection:ue,query:_,where:se,getDocs:pe}},[]),ie=S(h(C,"hiringRequests"),V("restaurantId","==",F),V("status","==","accepted")),re=await Q(ie),ye=(I==null?void 0:I.address)||"Ø§Ù„Ø¹Ù…ÙŠÙ„";for(const ue of re.docs){const _=ue.data().courierId;_&&await d(_,o,k,ye)}}}}catch(x){console.warn("âš ï¸ ØªØ¹Ø°Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:",x)}},B=async(o,R)=>{const I={stars:R.stars,comment:R.comment||void 0,createdAt:new Date};await me(J(C,"orders",o),{"ratings.restaurantToCustomer":I,updatedAt:X()}),a.success("ØªÙ… ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! â­")},T=o=>{var R,I;return o.status==="delivered"&&!((I=(R=o.ratings)==null?void 0:R.restaurantToCustomer)!=null&&I.stars)},P=async(o,R)=>{if(R){p(o);try{const I=As(kt,`orders/${o}/ready_${Date.now()}.jpg`);await Nt(I,R);const q=await Is(I);await me(J(C,"orders",o),{readyPhotoUrl:q,readyPhotoAt:X(),updatedAt:X()}),a.success("ØªÙ… Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­! ğŸ“¸")}catch(I){console.error("Error uploading photo:",I),a.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©")}finally{p(null)}}},m=(o,R)=>{var q;const I=(q=R.target.files)==null?void 0:q[0];I&&P(o,I)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"ğŸ“‹ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("button",{onClick:()=>L(!f),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all ${f?"bg-sky-100 text-sky-700 hover:bg-sky-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,title:f?"Ø¥ÙŠÙ‚Ø§Ù ØµÙˆØª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª":"ØªÙØ¹ÙŠÙ„ ØµÙˆØª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Qn,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm hidden sm:inline",children:"Ø§Ù„ØµÙˆØª Ù…ÙØ¹Ù‘Ù„"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Wn,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm hidden sm:inline",children:"Ø§Ù„ØµÙˆØª Ù…ØºÙ„Ù‚"})]})})]}),e.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-xl",children:[e.jsxs("button",{onClick:()=>D("incoming"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-bold transition-all ${w==="incoming"?"bg-white text-sky-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(Le,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"}),i.filter(o=>o.status==="pending").length>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full animate-pulse",children:i.filter(o=>o.status==="pending").length})]}),e.jsxs("button",{onClick:()=>D("my_orders"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-bold transition-all ${w==="my_orders"?"bg-white text-amber-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(ns,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø·Ù„Ø¨Ø§ØªÙŠ"}),u.length>0&&e.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-0.5 rounded-full",children:u.length})]})]}),A&&e.jsx(Dl,{isOpen:A.isOpen,onClose:()=>j(null),onSubmit:async o=>{await B(A.orderId,o),j(null)},type:"customer",targetName:A.customerName,orderId:A.orderId}),U&&e.jsx("div",{className:"text-red-500 text-sm mb-2",children:U}),w==="incoming"&&e.jsx(e.Fragment,{children:i.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl shadow",children:[e.jsx(Le,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-semibold",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø­Ø§Ù„ÙŠØ§Ù‹"})]}):i.map(o=>{var R,I,q,x,b,y,d;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"font-bold text-lg",children:["Ø·Ù„Ø¨ #",o.id.slice(-6),e.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(R=o.items)==null?void 0:R.map(M=>`${M.name}Ã—${M.qty}`).join(" â€¢ ")})]}),e.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(q=(I=o.total)==null?void 0:I.toFixed)==null?void 0:q.call(I,2)," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Ø§Ù„Ø­Ø§Ù„Ø©:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${_n(o.status)}`,children:Hr(o.status||"pending")})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:"})," ",o.address]}),o.location&&e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù…ÙŠÙ„:"}),e.jsx("iframe",{title:`map-${o.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${o.location.lat},${o.location.lng}&hl=ar&z=15&output=embed`})]}),o.status==="pending"&&o.deliveryType==="delivery"&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-800 mb-2",children:"ğŸ’µ Ø­Ø¯Ø¯ Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ Ù‚Ø¨Ù„ Ø§Ù„Ù‚Ø¨ÙˆÙ„:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",min:"0",step:"0.5",placeholder:"Ù…Ø«Ø§Ù„: 10",value:N[o.id]||"",onChange:M=>E(k=>({...k,[o.id]:parseFloat(M.target.value)||0})),className:"flex-1 px-4 py-3 border-2 border-amber-300 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-lg font-bold text-center"}),e.jsx("span",{className:"text-amber-700 font-bold",children:"Ø±.Ø³"})]}),e.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ù†Ø¯ Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨"})]}),o.deliveryFee!==void 0&&o.deliveryFee>0&&e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„:"})," ",(b=(x=o.deliveryFee)==null?void 0:x.toFixed)==null?void 0:b.call(x,2)," Ø±.Ø³"]}),["preparing","ready"].includes(o.status)&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(vt,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-bold text-purple-800",children:"ğŸ“¸ ØµÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¬Ø§Ù‡Ø²"})]}),o.readyPhotoUrl?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:o.readyPhotoUrl,alt:"ØµÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨",className:"w-full h-48 object-cover rounded-xl border-2 border-purple-300"}),e.jsxs("div",{className:"absolute top-2 left-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"}),"ØªÙ… Ø§Ù„Ø±ÙØ¹"]})]}),e.jsx("p",{className:"text-xs text-purple-600 text-center",children:"âœ… ØªÙ… Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨ - ÙŠÙ…ÙƒÙ† Ù„Ù„Ù…Ù†Ø¯ÙˆØ¨ Ø§Ø³ØªÙ„Ø§Ù…Ù‡ Ø§Ù„Ø¢Ù†"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-purple-700",children:"âš ï¸ ÙŠÙØ±Ø¬Ù‰ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨ Ù‚Ø¨Ù„ ØªØ³Ù„ÙŠÙ…Ù‡ Ù„Ù„Ù…Ù†Ø¯ÙˆØ¨"}),e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:M=>m(o.id,M),className:"hidden",id:`photo-${o.id}`}),e.jsx("label",{htmlFor:`photo-${o.id}`,className:`flex items-center justify-center gap-3 w-full py-4 rounded-xl cursor-pointer transition-all ${z===o.id?"bg-purple-200 cursor-wait":"bg-purple-500 hover:bg-purple-600 text-white"}`,children:z===o.id?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold",children:"ğŸ“¸ Ø§Ù„ØªÙ‚Ø· ØµÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨"})]})})]})]}),o.readyPhotoUrl&&!["preparing","ready"].includes(o.status)&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xt,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ØµÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨:"})]}),e.jsx("img",{src:o.readyPhotoUrl,alt:"ØµÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨",className:"w-full h-32 object-cover rounded-lg"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:[!o.courierId&&["pending","accepted","preparing","ready"].includes(o.status)&&e.jsxs("button",{onClick:()=>t(`/chat?orderId=${o.id}`),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gradient-to-r from-orange-500 to-amber-500 text-white hover:shadow-lg transition flex items-center gap-2",children:[e.jsx(Gs,{className:"w-4 h-4"}),"Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ ğŸ’¬"]}),["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(M=>{const k=M==="accepted"&&o.status==="pending"&&o.deliveryType==="delivery",h=N[o.id]!==void 0&&N[o.id]>=0,S=k&&!h;return e.jsx("button",{onClick:()=>O(o.id,M,o),disabled:S,className:`px-4 py-2 rounded-xl text-sm font-semibold transition ${S?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,title:S?"Ø­Ø¯Ø¯ Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ Ø£ÙˆÙ„Ø§Ù‹":"",children:Hr(M)},M)})]}),T(o)&&e.jsxs("div",{className:"mt-4 bg-gradient-to-r from-sky-50 to-blue-50 border-2 border-sky-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ls,{className:"w-5 h-5 text-sky-500 fill-sky-500"}),e.jsx("span",{className:"font-bold text-sky-800",children:"Ù‚ÙŠÙ‘Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ â­"})]}),e.jsxs("button",{onClick:()=>j({isOpen:!0,orderId:o.id,customerName:"Ø§Ù„Ø¹Ù…ÙŠÙ„"}),className:`w-full flex items-center justify-between px-4 py-3 bg-white border-2 border-sky-300 
                           rounded-xl hover:bg-sky-50 transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ms,{className:"w-5 h-5 text-sky-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Ù‚ÙŠÙ‘Ù… ØªØ¹Ø§Ù…Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(M=>e.jsx(ls,{className:"w-4 h-4 text-gray-300 group-hover:text-sky-400 transition"},M))})]})]}),((d=(y=o.ratings)==null?void 0:y.restaurantToCustomer)==null?void 0:d.stars)&&e.jsx("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"ØªÙ‚ÙŠÙŠÙ…Ùƒ Ù„Ù„Ø¹Ù…ÙŠÙ„:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(M=>e.jsx(ls,{className:`w-4 h-4 ${M<=o.ratings.restaurantToCustomer.stars?"text-sky-400 fill-sky-400":"text-gray-300"}`},M))})]})})]},o.id)})}),w==="my_orders"&&e.jsx(e.Fragment,{children:u.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl shadow",children:[e.jsx(ns,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-semibold",children:"Ù„Ù… ØªØ·Ù„Ø¨ Ù…Ù† Ø£ÙŠ Ù…Ø·Ø¹Ù… Ø¨Ø¹Ø¯"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"ÙŠÙ…ÙƒÙ†Ùƒ ØªØµÙØ­ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… ÙˆØ§Ù„Ø·Ù„Ø¨ ÙƒØ¹Ù…ÙŠÙ„"})]}):u.map(o=>{var R,I,q,x,b,y,d;return e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-200 rounded-2xl p-5 text-gray-900 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"font-bold text-lg",children:[e.jsx("span",{className:"text-amber-600",children:"ğŸ›’ Ø·Ù„Ø¨ÙŠ"})," #",o.id.slice(-6)]}),e.jsxs("div",{className:"font-extrabold text-xl text-amber-600",children:[(I=(R=o.total)==null?void 0:R.toFixed)==null?void 0:I.call(R,2)," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:o.restaurantName||"Ù…Ø·Ø¹Ù…"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:(q=o.items)==null?void 0:q.map(M=>`${M.name} Ã— ${M.qty}`).join(" â€¢ ")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Ø§Ù„Ø­Ø§Ù„Ø©:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${_n(o.status)}`,children:Hr(o.status||"pending")})]}),e.jsx("div",{className:"text-xs text-gray-400",children:((d=(y=(b=(x=o.createdAt)==null?void 0:x.toDate)==null?void 0:b.call(x))==null?void 0:y.toLocaleString)==null?void 0:d.call(y,"ar-SA"))||""})]},o.id)})})]})},hm=[{value:"",label:"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø·Ø¨Ø®"},{value:"traditional",label:"ğŸš Ø£ÙƒÙ„Ø§Øª Ø´Ø¹Ø¨ÙŠØ©"},{value:"sweets",label:"ğŸ° Ø­Ù„ÙˆÙŠØ§Øª"},{value:"pastries",label:"ğŸ¥§ Ù…Ø¹Ø¬Ù†Ø§Øª"},{value:"grills",label:"ğŸ– Ù…Ø´ÙˆÙŠØ§Øª"},{value:"healthy",label:"ğŸ¥— Ø£ÙƒÙ„ ØµØ­ÙŠ"},{value:"international",label:"ğŸŒ Ø£ÙƒÙ„Ø§Øª Ø¹Ø§Ù„Ù…ÙŠØ©"}],um=()=>{var T;const{user:s}=Ee(),t=He(),[a,i]=l.useState({name:"",phone:"",city:"",location:"",logoUrl:"",isOpen:!0,allowDelivery:!0,allowPickup:!1,cuisineType:"",announcement:"",commercialLicenseUrl:"",licenseStatus:void 0,licenseNotes:"",bankName:"",bankAccountName:"",bankAccountNumber:"",isHiring:!1,hiringDescription:"",hiringContact:""}),[c,u]=l.useState(null),[r,w]=l.useState(""),[D,U]=l.useState(null),[v,N]=l.useState(""),E=l.useRef(null),[A,j]=l.useState(!0),[z,p]=l.useState(!1),f=l.useMemo(()=>!z&&!!s,[z,s]);l.useEffect(()=>{s&&(async()=>{try{const P=await Ce(J(C,"restaurants",s.uid));if(P.exists()){const m=P.data();let o={bankName:"",bankAccountName:"",bankAccountNumber:""};try{const R=await Ce(J(C,"restaurants",s.uid,"private","bankInfo"));if(R.exists()){const I=R.data();o={bankName:I.bankName??"",bankAccountName:I.bankAccountName??"",bankAccountNumber:I.bankAccountNumber??""}}}catch{}i({name:m.name??"",phone:m.phone??"",city:m.city??"",location:m.location??"",logoUrl:m.logoUrl??"",isOpen:m.isOpen??!0,allowDelivery:m.allowDelivery??!0,allowPickup:m.allowPickup??!1,cuisineType:m.cuisineType??"",announcement:m.announcement??"",commercialLicenseUrl:m.commercialLicenseUrl??"",licenseStatus:m.licenseStatus,licenseNotes:m.licenseNotes??"",bankName:o.bankName,bankAccountName:o.bankAccountName,bankAccountNumber:o.bankAccountNumber,isHiring:m.isHiring??!1,hiringDescription:m.hiringDescription??"",hiringContact:m.hiringContact??""})}}catch{t.error("ØªØ¹Ø°Ù‘Ø±Øª Ù‚Ø±Ø§Ø¡Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…")}finally{j(!1)}})()},[s,t]),l.useEffect(()=>()=>{r&&URL.revokeObjectURL(r)},[r]),l.useEffect(()=>()=>{v&&URL.revokeObjectURL(v)},[v]);const L=P=>{const{name:m,value:o}=P.target;i(R=>({...R,[m]:o}))},$=P=>{var o;const m=((o=P.target.files)==null?void 0:o[0])||null;if(u(m),m){const R=URL.createObjectURL(m);w(R)}else w("")},g=P=>{var m;try{const o=(m=P.target.files)==null?void 0:m[0];if(!o){U(null),N("");return}if(!/^(image\/|application\/pdf)/.test(o.type)){t.warning("ğŸ“„ Ø§Ù„Ù…Ù„Ù ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† ØµÙˆØ±Ø© Ø£Ùˆ PDF"),E.current&&(E.current.value="");return}const I=5*1024*1024;if(o.size>I){t.warning("ğŸ“ Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ÙƒØ¨ÙŠØ±ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ø£Ù‚Ù„ Ù…Ù† 5MB"),E.current&&(E.current.value="");return}if(U(o),o.type.startsWith("image/")){const q=URL.createObjectURL(o);N(q)}else N("");t.success("âœ… ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„Ù Ø¨Ù†Ø¬Ø§Ø­")}catch(o){console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„Ù:",o),t.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„Ù")}},F=async()=>{if(!s||!c)return;if(!/^image\//.test(c.type)){t.warning("Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø®ØªØ§Ø± Ù„ÙŠØ³ ØµÙˆØ±Ø©");return}const m=3*1024*1024;if(c.size>m){t.warning("Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ±ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£Ù‚Ù„ Ù…Ù† 3MB");return}const o=c.name.replace(/\s+/g,"_"),R=`restaurants/${s.uid}/logo_${Date.now()}_${o}`,I=As(kt,R),q={contentType:c.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await Nt(I,c,q);const x=await Is(I);return`${x}${x.includes("?")?"&":"?"}v=${Date.now()}`},O=async(P,m)=>{if(!s||!P)return;if(!/^(image\/|application\/pdf)/.test(P.type)){t.warning("Ø§Ù„Ù…Ù„Ù ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† ØµÙˆØ±Ø© Ø£Ùˆ PDF");return}const R=5*1024*1024;if(P.size>R){t.warning("Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ÙƒØ¨ÙŠØ±ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ø£Ù‚Ù„ Ù…Ù† 5MB");return}const I=P.name.replace(/\s+/g,"_"),q=`restaurants/${s.uid}/licenses/${m}_${Date.now()}_${I}`,x=As(kt,q),b={contentType:P.type,cacheControl:"public,max-age=31536000,immutable"};return await Nt(x,P,b),await Is(x)},B=async P=>{if(P.preventDefault(),!s){t.warning("âš ï¸ ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹");return}if(!a.name.trim()){t.warning("Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…");return}p(!0);try{let m=a.logoUrl,o=a.commercialLicenseUrl,R=a.licenseStatus;if(c){t.info("â³ Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø± â€¦");const b=await F();b&&(m=b)}if(D){t.info("â³ Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„Ø±Ø®ØµØ© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© â€¦");const b=await O(D,"commercial");b&&(o=b,R="pending")}const{bankAccountName:I,bankAccountNumber:q,...x}=a;await Be(J(C,"restaurants",s.uid),{...x,logoUrl:m,commercialLicenseUrl:o,licenseStatus:R},{merge:!0}),(a.bankName||I||q)&&await Be(J(C,"restaurants",s.uid,"private","bankInfo"),{bankName:a.bankName||"",bankAccountName:I||"",bankAccountNumber:q||""},{merge:!0}),r&&URL.revokeObjectURL(r),v&&URL.revokeObjectURL(v),w(""),N(""),u(null),U(null),t.success("ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ ğŸ‰",{title:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø·Ø¹Ù…"})}catch(m){t.error(`ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: ${(m==null?void 0:m.message)||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}`)}finally{p(!1)}};return A?e.jsx("div",{className:"p-6 text-center",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦"}):e.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block font-semibold",children:"Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:r||a.logoUrl?e.jsx("img",{src:r||a.logoUrl,className:"w-full h-full object-cover",onError:P=>P.currentTarget.style.display="none",alt:"logo"}):null}),e.jsx("input",{type:"file",accept:"image/*",onChange:$})]}),c&&e.jsxs("div",{className:"text-xs text-gray-600",children:["Ø³ÙŠØªÙ… Ø±ÙØ¹: ",e.jsx("span",{className:"font-semibold",children:c.name})]})]}),e.jsx("input",{name:"name",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…",value:a.name,onChange:L,className:"w-full border p-3 rounded-xl"}),e.jsx("input",{name:"phone",placeholder:"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„",value:a.phone,onChange:L,className:"w-full border p-3 rounded-xl"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400 pointer-events-none"}),e.jsxs("select",{name:"city",value:a.city,onChange:P=>i(m=>({...m,city:P.target.value})),className:"w-full border p-3 pr-10 rounded-xl bg-white appearance-none cursor-pointer focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"}),fr.map(P=>e.jsx("option",{value:P,children:P},P))]})]}),e.jsx("input",{name:"location",placeholder:"Ø§Ù„Ù…ÙˆÙ‚Ø¹",value:a.location,onChange:L,className:"w-full border p-3 rounded-xl"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{name:"cuisineType",value:a.cuisineType||"",onChange:P=>i(m=>({...m,cuisineType:P.target.value})),className:"w-full border p-3 rounded-xl bg-white appearance-none cursor-pointer focus:border-amber-400 focus:ring-2 focus:ring-amber-100",children:hm.map(P=>e.jsx("option",{value:P.value,children:P.label},P.value))}),e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm pointer-events-none",children:"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø·Ø¨Ø®"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5 text-sky-500"}),"Ù…Ù„Ø§Ø­Ø¸Ø© Ù‚ØµÙŠØ±Ø© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡"]}),e.jsx("textarea",{name:"announcement",placeholder:"Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸Ø© Ù‚ØµÙŠØ±Ø© ØªØ¸Ù‡Ø± Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ù†Ø¯ Ø²ÙŠØ§Ø±Ø© Ù…ØªØ¬Ø±Ùƒ... Ù…Ø«Ù„Ø§Ù‹: Ù†Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ù† Ø§Ù„Ø³Ø§Ø¹Ø© 4 Ø¹ØµØ±Ø§Ù‹",value:a.announcement||"",onChange:L,maxLength:150,rows:2,className:"w-full border p-3 rounded-xl resize-none focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsxs("span",{children:[((T=a.announcement)==null?void 0:T.length)||0,"/150"]}),"Ø­Ø±Ù"]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-green-500"}),"Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø·Ù„Ø¨"]}),e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl mb-3 ${a.isOpen?"bg-green-50 border-2 border-green-200":"bg-red-50 border-2 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${a.isOpen?"bg-green-500":"bg-red-500"}`,children:a.isOpen?e.jsx(Le,{className:"w-5 h-5 text-white"}):e.jsx(Ut,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${a.isOpen?"text-green-800":"text-red-800"}`,children:a.isOpen?"âœ“ Ø§Ù„Ù…ØªØ¬Ø± Ù…ØªØ§Ø­":"âœ• Ø§Ù„Ù…ØªØ¬Ø± Ù…ØºÙ„Ù‚"}),e.jsx("p",{className:"text-sm text-gray-500",children:a.isOpen?"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙŠÙ…ÙƒÙ†Ù‡Ù… Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†":"Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ø¹Ø·Ù„Ø© Ù…Ø¤Ù‚ØªØ§Ù‹"})]})]}),e.jsx("button",{type:"button",onClick:()=>i(P=>({...P,isOpen:!P.isOpen})),className:`relative w-14 h-8 rounded-full transition-colors ${a.isOpen?"bg-green-500":"bg-red-400"}`,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${a.isOpen?"right-1":"left-1"}`})})]}),!a.isOpen&&e.jsx("p",{className:"mb-3 text-sm text-red-600 bg-red-50 p-2 rounded-lg",children:"âš ï¸ Ø§Ù„Ù…ØªØ¬Ø± Ù…ØºÙ„Ù‚ - Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù„Ù† ÙŠØªÙ…ÙƒÙ†ÙˆØ§ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ø£ØµÙ†Ø§Ù Ù„Ù„Ø³Ù„Ø©"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${a.allowDelivery?"bg-sky-500":"bg-gray-300"}`,children:e.jsx(Ze,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Ø§Ù„ØªÙˆØµÙŠÙ„ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ØªÙˆØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù…ÙŠÙ„"})]})]}),e.jsx("button",{type:"button",onClick:()=>i(P=>({...P,allowDelivery:!P.allowDelivery})),className:`relative w-14 h-8 rounded-full transition-colors ${a.allowDelivery?"bg-sky-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${a.allowDelivery?"right-1":"left-1"}`})})]}),a.allowDelivery&&e.jsx("p",{className:"mb-3 text-sm text-sky-600 bg-sky-50 p-2 rounded-lg",children:'ğŸš— Ø§Ù„ØªÙˆØµÙŠÙ„ Ù…ÙØ¹Ù‘Ù„ - Ø³ØªØ¸Ù‡Ø± Ø¹Ù„Ø§Ù…Ø© "ØªÙˆØµÙŠÙ„" Ø¨Ø¬Ø§Ù†Ø¨ Ù…Ø·Ø¹Ù…Ùƒ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡'}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${a.allowPickup?"bg-green-500":"bg-gray-300"}`,children:e.jsx(Le,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ù„Ø³Ù…Ø§Ø­ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ø§ØªÙ‡Ù… Ù…Ù† Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø·Ø¹Ù…"})]})]}),e.jsx("button",{type:"button",onClick:()=>i(P=>({...P,allowPickup:!P.allowPickup})),className:`relative w-14 h-8 rounded-full transition-colors ${a.allowPickup?"bg-green-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${a.allowPickup?"right-1":"left-1"}`})})]}),a.allowPickup&&e.jsx("p",{className:"mt-2 text-sm text-green-600 bg-green-50 p-2 rounded-lg",children:"âœ“ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙŠÙ…ÙƒÙ†Ù‡Ù… Ø§Ø®ØªÙŠØ§Ø± Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ø§ØªÙ‡Ù… Ù…Ù† Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø·Ø¹Ù… (Ø¨Ø¯ÙˆÙ† Ø±Ø³ÙˆÙ… ØªÙˆØµÙŠÙ„)"})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5 text-sky-500"}),"Ø§Ù„ØªØ±Ø§Ø®ÙŠØµ ÙˆØ§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª"]}),a.licenseStatus&&e.jsxs("div",{className:`mb-4 p-3 rounded-xl flex items-center gap-2 ${a.licenseStatus==="approved"?"bg-green-50 text-green-700":a.licenseStatus==="rejected"?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"}`,children:[a.licenseStatus==="approved"&&e.jsx(Ie,{className:"w-5 h-5"}),a.licenseStatus==="rejected"&&e.jsx(Rs,{className:"w-5 h-5"}),a.licenseStatus==="pending"&&e.jsx(Ge,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold",children:[a.licenseStatus==="approved"&&"Ø§Ù„ØªØ±Ø§Ø®ÙŠØµ Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§ âœ“",a.licenseStatus==="rejected"&&"Ø§Ù„ØªØ±Ø§Ø®ÙŠØµ Ù…Ø±ÙÙˆØ¶Ø©",a.licenseStatus==="pending"&&"Ø§Ù„ØªØ±Ø§Ø®ÙŠØµ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©..."]})]}),a.licenseNotes&&a.licenseStatus==="rejected"&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-xl text-red-600 text-sm",children:[e.jsx("strong",{children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª:"})," ",a.licenseNotes]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(Xc,{className:"w-4 h-4 text-orange-500"}),"Ø§Ù„Ø±Ø®ØµØ© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[v&&e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden border bg-gray-100",children:e.jsx("img",{src:v,alt:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØªØ±Ø®ÙŠØµ",className:"w-full h-full object-cover"})}),a.commercialLicenseUrl&&!v&&e.jsxs("a",{href:a.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-sky-50 text-sky-600 px-3 py-2 rounded-lg text-sm hover:bg-sky-100",children:[e.jsx(vs,{className:"w-4 h-4"}),"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø­Ø§Ù„ÙŠ"]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"relative cursor-pointer",children:[e.jsx("input",{ref:E,type:"file",accept:"image/*,application/pdf",capture:"environment",onChange:g,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-sky-100 hover:bg-sky-200 text-sky-700 px-4 py-3 rounded-xl text-sm font-medium transition-colors",children:[e.jsx(vs,{className:"w-5 h-5"}),D?"ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù„Ù":"Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ø§Ù„ØªØ±Ø®ÙŠØµ"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"ğŸ“· ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø£Ùˆ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù (ØµÙˆØ±Ø© Ø£Ùˆ PDF Ø¨Ø­Ø¯ Ø£Ù‚ØµÙ‰ 5MB)"})]}),D&&e.jsxs("div",{className:"flex items-center gap-2 bg-green-50 text-green-700 px-3 py-2 rounded-lg text-sm mt-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Ø³ÙŠØªÙ… Ø±ÙØ¹: ",e.jsx("span",{className:"font-semibold",children:D.name})]})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ns,{className:"w-5 h-5 text-green-500"}),"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 bg-green-50 p-3 rounded-xl",children:"ğŸ’° Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¨Ù†ÙƒÙŠ Ù„ÙŠØªÙ…ÙƒÙ† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† ØªØ­ÙˆÙŠÙ„ Ù…Ø¨Ù„Øº Ø§Ù„Ø·Ù„Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø©"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"relative",children:e.jsxs("select",{name:"bankName",value:a.bankName||"",onChange:P=>i(m=>({...m,bankName:P.target.value})),className:"w-full border p-3 rounded-xl bg-white appearance-none cursor-pointer focus:border-green-400 focus:ring-2 focus:ring-green-100",children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù†Ùƒ"}),e.jsx("option",{value:"Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ",children:"Ø¨Ù†Ùƒ Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ"}),e.jsx("option",{value:"Ø§Ù„Ø£Ù‡Ù„ÙŠ",children:"Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ"}),e.jsx("option",{value:"Ø§Ù„Ø¥Ù†Ù…Ø§Ø¡",children:"Ù…ØµØ±Ù Ø§Ù„Ø¥Ù†Ù…Ø§Ø¡"}),e.jsx("option",{value:"Ø§Ù„Ø±ÙŠØ§Ø¶",children:"Ø¨Ù†Ùƒ Ø§Ù„Ø±ÙŠØ§Ø¶"}),e.jsx("option",{value:"Ø§Ù„Ø¨Ù„Ø§Ø¯",children:"Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯"}),e.jsx("option",{value:"Ø§Ù„Ø¬Ø²ÙŠØ±Ø©",children:"Ø¨Ù†Ùƒ Ø§Ù„Ø¬Ø²ÙŠØ±Ø©"}),e.jsx("option",{value:"Ø§Ù„Ø¹Ø±Ø¨ÙŠ",children:"Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„ÙˆØ·Ù†ÙŠ"}),e.jsx("option",{value:"Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ø§Ù„ÙØ±Ù†Ø³ÙŠ",children:"Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ø§Ù„ÙØ±Ù†Ø³ÙŠ"}),e.jsx("option",{value:"Ø³Ø§Ø¨",children:"Ø¨Ù†Ùƒ Ø³Ø§Ø¨"}),e.jsx("option",{value:"stc pay",children:"STC Pay"}),e.jsx("option",{value:"Ø£Ø®Ø±Ù‰",children:"Ø£Ø®Ø±Ù‰"})]})}),e.jsx("input",{name:"bankAccountName",placeholder:"Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨",value:a.bankAccountName||"",onChange:L,className:"w-full border p-3 rounded-xl focus:border-green-400 focus:ring-2 focus:ring-green-100"}),e.jsx("input",{name:"bankAccountNumber",placeholder:"Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ¨Ø§Ù† Ø£Ùˆ Ø§Ù„Ø­Ø³Ø§Ø¨",value:a.bankAccountNumber||"",onChange:L,className:"w-full border p-3 rounded-xl focus:border-green-400 focus:ring-2 focus:ring-green-100 font-mono text-left",dir:"ltr"}),a.bankName&&a.bankAccountName&&a.bankAccountNumber&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 text-green-700 text-sm",children:"âœ… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù†Ùƒ Ù…ÙƒØªÙ…Ù„Ø© - Ø³ÙŠØªÙ…ÙƒÙ† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† Ø±Ø¤ÙŠØªÙ‡Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨"})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5 text-purple-500"}),"ØªÙˆØ¸ÙŠÙ Ø¹Ø§Ù…Ù„Ø§Øª Ù„Ù„Ø·Ø¨Ø®"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 bg-purple-50 p-3 rounded-xl",children:"ğŸ‘©â€ğŸ³ ÙØ¹Ù‘Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø®ÙŠØ§Ø± Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ¨Ø­Ø« Ø¹Ù† Ø¹Ø§Ù…Ù„Ø§Øª Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø§Ù„Ø·Ø¨Ø®"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${a.isHiring?"bg-purple-500":"bg-gray-300"}`,children:e.jsx(Jt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…ÙˆØ¸ÙØ§Øª"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¹Ø±Ø¶ Ø¥Ø¹Ù„Ø§Ù† ØªÙˆØ¸ÙŠÙ ÙÙŠ ØµÙØ­ØªÙƒ"})]})]}),e.jsx("button",{type:"button",onClick:()=>i(P=>({...P,isHiring:!P.isHiring})),className:`relative w-14 h-8 rounded-full transition-colors ${a.isHiring?"bg-purple-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${a.isHiring?"right-1":"left-1"}`})})]}),a.isHiring&&e.jsxs("div",{className:"space-y-3 bg-purple-50 p-4 rounded-xl",children:[e.jsx("textarea",{name:"hiringDescription",placeholder:"ÙˆØµÙ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ù…Ø«Ø§Ù„: Ù†Ø¨Ø­Ø« Ø¹Ù† Ø·Ø¨Ø§Ø®Ø© Ù…Ø§Ù‡Ø±Ø© Ù„Ù„Ø¹Ù…Ù„ Ø¨Ø¯ÙˆØ§Ù… Ø¬Ø²Ø¦ÙŠ...)",value:a.hiringDescription||"",onChange:P=>i(m=>({...m,hiringDescription:P.target.value})),className:"w-full border p-3 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-100 min-h-[100px]",rows:3}),e.jsx("input",{name:"hiringContact",placeholder:"Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù„Ù„ØªÙˆØ¸ÙŠÙ (ÙˆØ§ØªØ³Ø§Ø¨)",value:a.hiringContact||"",onChange:L,className:"w-full border p-3 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-100"}),a.hiringDescription&&a.hiringContact&&e.jsx("div",{className:"bg-purple-100 border border-purple-200 rounded-xl p-3 text-purple-700 text-sm",children:"âœ… Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„ØªÙˆØ¸ÙŠÙ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ø±Ø¶ ÙÙŠ ØµÙØ­ØªÙƒ"})]})]}),e.jsx("button",{type:"submit",disabled:!f,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:z?"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸â€¦":"Ø­ÙØ¸"})]})]})},pm=()=>{const{user:s}=Ee(),t=Ps(),a=He(),[i,c]=l.useState([]),[u,r]=l.useState(!0);l.useEffect(()=>{s&&(async()=>{const p=fe(ee(C,"hiringRequests"),je("restaurantId","==",s.uid)),f=await be(p);c(f.docs.map(L=>({id:L.id,...L.data()}))),r(!1)})()},[s]);const w=async(p,f)=>{await me(J(C,"hiringRequests",p),{status:f}),c(L=>L.map($=>$.id===p?{...$,status:f}:$)),a.success(f==="accepted"?"ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ âœ…":"ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨")},D=async p=>{await t.confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ ÙØµÙ„ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ "${p.courierName}"ØŸ`,{title:"ÙØµÙ„ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨",confirmText:"Ù†Ø¹Ù…ØŒ ÙØµÙ„",cancelText:"Ø¥Ù„ØºØ§Ø¡",dangerous:!0})&&(await me(J(C,"hiringRequests",p.id),{status:"terminated"}),c(L=>L.map($=>$.id===p.id?{...$,status:"terminated"}:$)),a.success("ØªÙ… ÙØµÙ„ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"))},U=async p=>{await t.confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø·Ù„Ø¨ "${p.courierName}" Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ`,{title:"Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨",confirmText:"Ù†Ø¹Ù…ØŒ Ø­Ø°Ù",cancelText:"Ø¥Ù„ØºØ§Ø¡",dangerous:!0})&&(await Ds(J(C,"hiringRequests",p.id)),c(L=>L.filter($=>$.id!==p.id)),a.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨"))},v=async p=>{await me(J(C,"hiringRequests",p.id),{status:"accepted"}),c(f=>f.map(L=>L.id===p.id?{...L,status:"accepted"}:L)),a.success("ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ âœ…")},N=p=>{switch(p){case"pending":return{text:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯",color:"bg-yellow-100 text-yellow-700",icon:Ge};case"accepted":return{text:"Ù…Ù‚Ø¨ÙˆÙ„ âœ…",color:"bg-green-100 text-green-700",icon:Ie};case"rejected":return{text:"Ù…Ø±ÙÙˆØ¶",color:"bg-red-100 text-red-700",icon:rt};case"terminated":return{text:"Ù…ÙØµÙˆÙ„",color:"bg-gray-100 text-gray-700",icon:cn};default:return{text:p,color:"bg-gray-100 text-gray-700",icon:Ge}}};if(u)return e.jsx("div",{className:"text-center py-10",children:"â³ Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."});const E=i.filter(p=>p.status==="accepted"),A=i.filter(p=>p.status==="pending"),j=i.filter(p=>p.status==="terminated"),z=i.filter(p=>p.status==="rejected");return e.jsxs("div",{className:"py-6 space-y-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary text-center mb-6",children:"ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨"}),i.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ğŸ‘¥"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ØªÙˆØ¸ÙŠÙ"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù…Ø·Ø¹Ù…Ùƒ"})]}):e.jsxs(e.Fragment,{children:[E.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-green-600 mb-3 flex items-center gap-2",children:[e.jsx(Or,{className:"w-5 h-5"}),"Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨ Ø§Ù„Ù†Ø´Ø·ÙŠÙ† (",E.length,")"]}),e.jsx("div",{className:"space-y-3",children:E.map(p=>{const f=N(p.status);return e.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-2xl",children:"ğŸš—"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-800",children:p.courierName}),e.jsxs("div",{className:`text-xs px-2 py-1 rounded-full inline-flex items-center gap-1 ${f.color}`,children:[e.jsx(f.icon,{className:"w-3 h-3"}),f.text]})]})]}),e.jsxs("button",{onClick:()=>D(p),className:`flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-xl 
                                     hover:bg-red-100 transition-all font-medium`,children:[e.jsx(Zc,{className:"w-4 h-4"}),"ÙØµÙ„"]})]})},p.id)})})]}),A.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-yellow-600 mb-3 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5"}),"Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© (",A.length,")"]}),e.jsx("div",{className:"space-y-3",children:A.map(p=>e.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-2xl",children:"ğŸ‘¤"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-800",children:p.courierName}),e.jsx("div",{className:"text-xs text-yellow-600",children:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯ â³"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>w(p.id,"accepted"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-green-500 text-white hover:bg-green-600 transition-all font-medium",children:[e.jsx(Or,{className:"w-4 h-4"}),"Ù‚Ø¨ÙˆÙ„"]}),e.jsxs("button",{onClick:()=>w(p.id,"rejected"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-red-500 text-white hover:bg-red-600 transition-all font-medium",children:[e.jsx(rt,{className:"w-4 h-4"}),"Ø±ÙØ¶"]})]})]})},p.id))})]}),j.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-500 mb-3 flex items-center gap-2",children:[e.jsx(cn,{className:"w-5 h-5"}),"Ø§Ù„Ù…ÙØµÙˆÙ„ÙŠÙ† (",j.length,")"]}),e.jsx("div",{className:"space-y-3",children:j.map(p=>e.jsx("div",{className:"bg-gray-50 rounded-2xl shadow p-4 border-r-4 border-gray-400 opacity-75",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-2xl",children:"ğŸ‘¤"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-600",children:p.courierName}),e.jsx("div",{className:"text-xs text-gray-500",children:"Ù…ÙØµÙˆÙ„"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>v(p),className:`flex items-center gap-1 px-3 py-2 bg-green-100 text-green-600 rounded-xl 
                                     hover:bg-green-200 transition-all text-sm font-medium`,children:[e.jsx(Or,{className:"w-4 h-4"}),"Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„"]}),e.jsxs("button",{onClick:()=>U(p),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                     hover:bg-red-200 transition-all text-sm font-medium`,children:[e.jsx(ys,{className:"w-4 h-4"}),"Ø­Ø°Ù"]})]})]})},p.id))})]}),z.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-red-500 mb-3 flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5"}),"Ù…Ø±ÙÙˆØ¶ÙŠÙ† (",z.length,")"]}),e.jsx("div",{className:"space-y-3",children:z.map(p=>e.jsx("div",{className:"bg-red-50 rounded-2xl shadow p-4 border-r-4 border-red-400 opacity-75",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-2xl",children:"ğŸ‘¤"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-600",children:p.courierName}),e.jsx("div",{className:"text-xs text-red-500",children:"Ù…Ø±ÙÙˆØ¶"})]})]}),e.jsxs("button",{onClick:()=>U(p),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                   hover:bg-red-200 transition-all text-sm font-medium`,children:[e.jsx(ys,{className:"w-4 h-4"}),"Ø­Ø°Ù"]})]})},p.id))})]})]})]})},Va={premium:{displayName:"Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²",description:"Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…Ø²Ø§ÙŠØ§ Ø­ØµØ±ÙŠØ© ÙˆØ¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø©",isEnabled:!0,originalPrice:99,currentPrice:99,durationDays:30},free:{displayName:"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©",description:"Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù…Ø¬Ø§Ù†Ø§Ù‹",isEnabled:!0,originalPrice:0,currentPrice:0,durationDays:0},defaultPackage:"free"},Bi=s=>{var c,u,r,w;if(!(s!=null&&s.isActive))return!1;const t=new Date,a=((u=(c=s.startDate)==null?void 0:c.toDate)==null?void 0:u.call(c))||(s.startDate?new Date(s.startDate):null),i=((w=(r=s.endDate)==null?void 0:r.toDate)==null?void 0:w.call(r))||(s.endDate?new Date(s.endDate):null);return!(a&&t<a||i&&t>i)},gm=s=>{if(!Bi(s.discount))return s.originalPrice;const t=s.discount;return t.type==="percentage"?s.originalPrice-s.originalPrice*t.value/100:Math.max(0,s.originalPrice-t.value)},bm=()=>{var P;const{user:s}=Ee(),t=He(),a=Ps(),[i,c]=l.useState("free"),[u,r]=l.useState(!0),[w,D]=l.useState(!1),[U,v]=l.useState(!1),[N,E]=l.useState(Va),[A,j]=l.useState(null),[z,p]=l.useState(!1),[f,L]=l.useState(null),$=l.useRef(null),g=gm(N.premium),F=Bi(N.premium.discount);l.useEffect(()=>{console.log("ğŸ’° Ø­Ø§Ù„Ø© Ø§Ù„Ø¨Ø§Ù‚Ø©:",{pkgSettings:N.premium,discount:N.premium.discount,hasDiscount:F,premiumPrice:g,originalPrice:N.premium.originalPrice})},[N,F,g]),l.useEffect(()=>{if(!s)return;(async()=>{var I;try{const q=await Ce(J(C,"settings","packages"));if(q.exists()){const d=q.data();console.log("ğŸ“¦ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ù…Ù† Firestore:",d),E({...Va,...d,premium:{...Va.premium,...d.premium,discount:(I=d.premium)!=null&&I.discount?{...d.premium.discount,isActive:d.premium.discount.isActive??!1}:void 0},free:{...Va.free,...d.free}})}else console.log("âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ø§Ù‚Ø§Øª ÙÙŠ FirestoreØŒ ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ");const x=await Ce(J(C,"restaurants",s.uid));if(x.exists()){const d=x.data();c((d==null?void 0:d.packageType)||"free")}const b=fe(ee(C,"packageRequests"),je("restaurantId","==",s.uid)),y=await be(b);if(!y.empty){const M=y.docs.map(k=>({id:k.id,...k.data()})).find(k=>!["approved","rejected","expired"].includes(k.status));M&&j(M)}}catch(q){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:",q)}finally{r(!1)}})();const o=fe(ee(C,"packageRequests"),je("restaurantId","==",s.uid)),R=cs(o,I=>{if(!I.empty){const q=I.docs.map(y=>({id:y.id,...y.data()})),x=q.find(y=>!["approved","rejected","expired"].includes(y.status));j(x||null),q.find(y=>y.status==="approved")&&c("premium")}});return()=>R()},[s]);const O=async()=>{if(!s)return;if(i==="free"){t.info("Ø£Ù†Øª Ø¨Ø§Ù„ÙØ¹Ù„ Ù…Ø´ØªØ±Ùƒ ÙÙŠ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©");return}if(await a.confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©ØŸ Ø³ØªÙÙ‚Ø¯ Ù…Ù…ÙŠØ²Ø§Øª Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ².",{title:"ğŸ“¦ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©",confirmText:"Ù†Ø¹Ù…ØŒ Ø­ÙˆÙ‘Ù„ Ù„Ù„Ù…Ø¬Ø§Ù†ÙŠØ©",cancelText:"Ø¥Ù„ØºØ§Ø¡"})){v(!0);try{await me(J(C,"restaurants",s.uid),{packageType:"free",packageRequest:null,updatedAt:X()}),c("free"),t.success("ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©")}catch(o){console.error("Ø®Ø·Ø£:",o),t.error("Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}finally{v(!1)}}},B=async()=>{if(!s)return;if(A){t.info("Ù„Ø¯ÙŠÙƒ Ø·Ù„Ø¨ Ø§Ø´ØªØ±Ø§Ùƒ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©");return}if(g===0){if(!await a.confirm("Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² Ù…ØªØ§Ø­Ø© Ù…Ø¬Ø§Ù†Ø§Ù‹ Ø­Ø§Ù„ÙŠØ§Ù‹! Ù‡Ù„ ØªØ±ÙŠØ¯ ØªÙØ¹ÙŠÙ„Ù‡Ø§ Ø§Ù„Ø¢Ù†ØŸ",{title:"ğŸ Ø¹Ø±Ø¶ Ø®Ø§Øµ - Ø¨Ø§Ù‚Ø© Ù…Ø¬Ø§Ù†ÙŠØ©!",confirmText:"Ù†Ø¹Ù…ØŒ ÙØ¹Ù‘Ù„ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø¢Ù†",cancelText:"Ù„Ø§Ø­Ù‚Ø§Ù‹"}))return;D(!0);try{const R=new Date;R.setDate(R.getDate()+(N.premium.durationDays||30)),await me(J(C,"restaurants",s.uid),{packageType:"premium",packageSubscribedAt:X(),packageExpiresAt:R,packageRequest:null,updatedAt:X()}),c("premium"),t.success("ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! ØªÙ… ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² Ù…Ø¬Ø§Ù†Ø§Ù‹!")}catch(R){console.error("Ø®Ø·Ø£:",R),t.error("Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}finally{D(!1)}return}if(await a.confirm(`Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ù„Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² Ø¨Ù…Ø¨Ù„Øº ${g.toFixed(0)} Ø±ÙŠØ§Ù„. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ`,{title:"âœ¨ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²",confirmText:"Ù†Ø¹Ù…ØŒ Ø£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ",cancelText:"Ù„Ø§Ø­Ù‚Ø§Ù‹"})){D(!0);try{const R=(await Ce(J(C,"restaurants",s.uid))).data(),I=await Pe(ee(C,"packageRequests"),{restaurantId:s.uid,restaurantName:(R==null?void 0:R.name)||"Ø£Ø³Ø±Ø© Ù…Ù†ØªØ¬Ø©",ownerName:(R==null?void 0:R.ownerName)||"",ownerPhone:(R==null?void 0:R.phone)||"",status:"pending",subscriptionAmount:g,subscriptionDuration:N.premium.durationDays,requestedAt:X(),createdAt:X(),updatedAt:X()});await me(J(C,"restaurants",s.uid),{packageRequest:"premium",packageRequestedAt:X(),updatedAt:X()});try{const q=fe(ee(C,"users"),je("role","==","developer")),x=await be(q);if(x.empty){const b=fe(ee(C,"users"),je("role","==","admin")),y=await be(b);for(const d of y.docs)await Pe(ee(C,"notifications"),{recipientId:d.id,title:"ğŸ“¦ Ø·Ù„Ø¨ Ø§Ø´ØªØ±Ø§Ùƒ Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²",message:`${(R==null?void 0:R.name)||"Ø£Ø³Ø±Ø© Ù…Ù†ØªØ¬Ø©"} Ø·Ù„Ø¨Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²`,type:"package_request",read:!1,data:{requestId:I.id,restaurantId:s.uid},createdAt:X()})}else for(const b of x.docs)await Pe(ee(C,"notifications"),{recipientId:b.id,title:"ğŸ“¦ Ø·Ù„Ø¨ Ø§Ø´ØªØ±Ø§Ùƒ Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²",message:`${(R==null?void 0:R.name)||"Ø£Ø³Ø±Ø© Ù…Ù†ØªØ¬Ø©"} Ø·Ù„Ø¨Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²`,type:"package_request",read:!1,data:{requestId:I.id,restaurantId:s.uid},createdAt:X()})}catch(q){console.warn("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:",q)}t.success("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø·Ù„Ø¨Ùƒ! ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø£Ø¯Ù†Ø§Ù‡ ğŸ’³")}catch(o){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨:",o),t.error("Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}finally{D(!1)}}},T=async()=>{var m;if(!s||!A||!f){t.warning("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø¥Ø«Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„");return}p(!0);try{const o=`paymentProofs/${s.uid}_${Date.now()}_${f.name}`,R=As(kt,o);await Nt(R,f);const I=await Is(R);await me(J(C,"packageRequests",A.id),{status:"payment_sent",paymentProofImageUrl:I,paymentSentAt:X(),updatedAt:X()});try{const x=((m=(await Ce(J(C,"restaurants",s.uid))).data())==null?void 0:m.name)||"Ø£Ø³Ø±Ø© Ù…Ù†ØªØ¬Ø©",b=fe(ee(C,"users"),je("role","==","developer")),y=await be(b);if(y.empty){const d=fe(ee(C,"users"),je("role","==","admin")),M=await be(d);for(const k of M.docs)await Pe(ee(C,"notifications"),{recipientId:k.id,title:"ğŸ’³ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø«Ø¨Ø§Øª ØªØ­ÙˆÙŠÙ„",message:`${x} Ø£Ø±Ø³Ù„Øª Ø¥Ø«Ø¨Ø§Øª ØªØ­ÙˆÙŠÙ„ Ù…Ø¨Ù„Øº Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ`,type:"payment_proof_sent",read:!1,data:{requestId:A.id,restaurantId:s.uid},createdAt:X()})}else for(const d of y.docs)await Pe(ee(C,"notifications"),{recipientId:d.id,title:"ğŸ’³ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø«Ø¨Ø§Øª ØªØ­ÙˆÙŠÙ„",message:`${x} Ø£Ø±Ø³Ù„Øª Ø¥Ø«Ø¨Ø§Øª ØªØ­ÙˆÙŠÙ„ Ù…Ø¨Ù„Øº Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ`,type:"payment_proof_sent",read:!1,data:{requestId:A.id,restaurantId:s.uid},createdAt:X()})}catch(q){console.warn("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:",q)}t.success("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø«Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡ ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø© âœ¨"),L(null),$.current&&($.current.value="")}catch(o){console.error("Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ø¥Ø«Ø¨Ø§Øª:",o),t.error(`Ø­Ø¯Ø« Ø®Ø·Ø£: ${o.message}`)}finally{p(!1)}};return u?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]})}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-amber-100 to-yellow-100 px-5 py-2.5 rounded-full mb-4 shadow-sm",children:[e.jsx("span",{className:"text-xl",children:"ğŸ’¼"}),e.jsx("span",{className:"text-amber-700 font-bold text-lg",children:"Ø¨Ø§Ù‚Ø§Øª Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-black text-gray-900 mb-3",children:"Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ø£Ø³Ø±ØªÙƒ"}),e.jsx("p",{className:"text-gray-600 max-w-lg mx-auto",children:"Ø§Ø¨Ø¯Ø£ Ù…Ø¬Ø§Ù†Ø§Ù‹ ÙˆØ§Ø³ØªÙ…ØªØ¹ Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©ØŒ Ø£Ùˆ Ø§Ø´ØªØ±Ùƒ ÙÙŠ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø²Ø§ÙŠØ§ Ø­ØµØ±ÙŠØ©"})]}),A&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl p-6 border-2 border-amber-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-500 rounded-xl flex items-center justify-center",children:e.jsx(Ks,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800",children:"Ø·Ù„Ø¨ Ø§Ø´ØªØ±Ø§Ùƒ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©"}),e.jsxs("p",{className:"text-amber-600 text-sm",children:[A.status==="pending"&&"â³ ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„",A.status==="payment_sent"&&"ğŸ’³ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø«Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ - Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯"]})]})]}),A.status==="pending"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsxs("p",{className:"text-green-600 font-bold text-lg mb-2",children:["ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: ",A.subscriptionAmount||g," Ø±ÙŠØ§Ù„"]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"ÙŠØ±Ø¬Ù‰ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ù„Øº Ø£Ø¹Ù„Ø§Ù‡ Ø«Ù… Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"ğŸ“¤ Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„:"}),e.jsx("input",{ref:$,type:"file",accept:"image/*",onChange:m=>{var o;return L(((o=m.target.files)==null?void 0:o[0])||null)},className:"w-full border-2 border-dashed border-amber-300 rounded-xl p-4 bg-amber-50"}),f&&e.jsxs("p",{className:"text-sm text-green-600",children:["âœ… ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ",f.name]}),e.jsx("button",{onClick:T,disabled:z||!f,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 transition flex items-center justify-center gap-2",children:z?e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±Ù Ø§Ù„Ø±ÙØ¹..."]}):e.jsxs(e.Fragment,{children:[e.jsx(va,{className:"w-5 h-5"}),"Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„"]})})]})]}),A.status==="payment_sent"&&e.jsxs("div",{className:"bg-purple-100 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(Ge,{className:"w-8 h-8 text-purple-600 animate-pulse"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-purple-800",children:"ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­ âœ…"}),e.jsx("p",{className:"text-purple-600 text-sm",children:"Ø¬Ø§Ø±Ù Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„ ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø©... Ø³ÙŠØªÙ… Ø¥Ø´Ø¹Ø§Ø±Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${i==="free"?"ring-4 ring-green-400 shadow-2xl":"shadow-lg hover:shadow-xl"}`,children:[i==="free"&&e.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[e.jsx(bs,{className:"w-4 h-4"}),"Ø¨Ø§Ù‚ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©"]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 p-6 md:p-8 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(Ms,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900",children:"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©"}),e.jsx("p",{className:"text-green-600 font-semibold",children:"Ù„Ù„Ø¬Ù…ÙŠØ¹ â€¢ Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center",children:[e.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[e.jsx("span",{className:"text-5xl font-black text-gray-900",children:"0"}),e.jsx("span",{className:"text-xl text-gray-600",children:"Ø±.Ø³"})]}),e.jsx("p",{className:"text-green-600 font-medium mt-1",children:"Ù…Ø¬Ø§Ù†Ø§Ù‹ Ù„Ù„Ø£Ø¨Ø¯"})]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5 text-amber-500"}),"Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©:"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Dt,{icon:e.jsx(Ss,{className:"w-5 h-5"}),title:"Ø§Ù„Ø¸Ù‡ÙˆØ± ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",desc:"Ø£Ø³Ø±ØªÙƒ ØªØ¸Ù‡Ø± Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ Ù…Ù†Ø·Ù‚ØªÙƒ",included:!0}),e.jsx(Dt,{icon:e.jsx(ns,{className:"w-5 h-5"}),title:"Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª",desc:"Ø§Ø³ØªÙ‚Ø¨Ù„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø¯ÙˆÙ† Ø­Ø¯ÙˆØ¯",included:!0}),e.jsx(Dt,{icon:e.jsx(vs,{className:"w-5 h-5"}),title:"ØµÙØ­Ø© Ø®Ø§ØµØ© Ù„Ø£Ø³Ø±ØªÙƒ",desc:"ØµÙØ­Ø© Ù…Ø®ØµØµØ© ØªØ¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…ØªÙƒ ÙˆÙ…Ù†ØªØ¬Ø§ØªÙƒ",included:!0})]})]}),e.jsx("div",{className:"mt-6",children:i==="free"?e.jsxs("div",{className:"bg-green-100 text-green-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5"}),"Ø£Ù†Øª Ù…Ø´ØªØ±Ùƒ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø§Ù‚Ø©"]}):e.jsx("button",{onClick:O,disabled:U,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:U?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­ÙˆÙŠÙ„..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ms,{className:"w-6 h-6"}),"Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©",e.jsx(pt,{className:"w-5 h-5"})]})})})]})]}),e.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${i==="premium"?"ring-4 ring-amber-400 shadow-2xl":"shadow-lg hover:shadow-xl hover:scale-[1.01]"}`,children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-amber-500 py-2 text-center z-10",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-white font-bold",children:[e.jsx(ts,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ø¹Ø¨ÙŠØ©"}),e.jsx(ts,{className:"w-5 h-5"})]})}),i==="premium"&&e.jsxs("div",{className:"absolute top-12 right-4 bg-amber-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[e.jsx(ts,{className:"w-4 h-4"}),"Ø¨Ø§Ù‚ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©"]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-6 md:p-8 pt-14 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 via-yellow-400 to-orange-400 rounded-2xl flex items-center justify-center shadow-lg relative",children:[e.jsx(ts,{className:"w-8 h-8 text-white"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow",children:e.jsx(ps,{className:"w-4 h-4 text-amber-500"})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900",children:"Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠÙ‘Ø²"}),e.jsx("p",{className:"text-amber-600 font-semibold",children:"Ù„Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù…ÙŠØ²Ø© âœ¨"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-400/10 via-yellow-400/10 to-orange-400/10"}),e.jsxs("div",{className:"relative",children:[F&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"bg-red-500 text-white text-sm px-3 py-1 rounded-full font-bold",children:((P=N.premium.discount)==null?void 0:P.label)||"Ø®ØµÙ… Ø®Ø§Øµ!"}),N.premium.originalPrice>g&&e.jsxs("p",{className:"text-gray-400 line-through text-lg mt-1",children:[N.premium.originalPrice.toFixed(0)," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[e.jsx("span",{className:"text-5xl font-black bg-gradient-to-r from-amber-600 to-orange-500 bg-clip-text text-transparent",children:g===0?"Ù…Ø¬Ø§Ù†Ø§Ù‹":g.toFixed(0)}),g>0&&e.jsx("span",{className:"text-xl text-gray-600",children:"Ø±.Ø³"})]}),e.jsx("p",{className:"text-amber-600 font-medium mt-1",children:g===0?"Ø¹Ø±Ø¶ Ø®Ø§Øµ!":`Ù„Ù…Ø¯Ø© ${N.premium.durationDays} ÙŠÙˆÙ…`})]})]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5 text-amber-500"}),"Ø¬Ù…ÙŠØ¹ Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©ØŒ Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰:"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Dt,{icon:e.jsx(Bs,{className:"w-5 h-5"}),title:"Ø§Ù„Ø¸Ù‡ÙˆØ± Ø£Ø¹Ù„Ù‰ ÙÙŠ Ø§Ù„Ù†ØªØ§Ø¦Ø¬",desc:"Ø£Ø³Ø±ØªÙƒ ØªØ¸Ù‡Ø± ÙÙŠ Ø£Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ø­Ø« Ø¯Ø§Ø¦Ù…Ø§Ù‹",included:!0,premium:!0}),e.jsx(Dt,{icon:e.jsx(Na,{className:"w-5 h-5"}),title:"Ø¹Ù„Ø§Ù…Ø© Ø£Ø³Ø±Ø© Ù…Ù…ÙŠØ²Ø©",desc:"Ø´Ø§Ø±Ø© Ø°Ù‡Ø¨ÙŠØ© ØªÙ…ÙŠØ²Ùƒ Ø¹Ù† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†",included:!0,premium:!0}),e.jsx(Dt,{icon:e.jsx(rr,{className:"w-5 h-5"}),title:"Ø§Ù‚ØªØ±Ø§Ø­Ùƒ ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",desc:"Ø¸Ù‡ÙˆØ± Ø£Ø³Ø±ØªÙƒ ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù…ÙŠØ²Ø©",included:!0,premium:!0}),e.jsx(Dt,{icon:e.jsx(gt,{className:"w-5 h-5"}),title:"Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ³Ù…ÙŠØ©",desc:"Ø¯Ø®ÙˆÙ„ Ù…Ø¬Ø§Ù†ÙŠ ÙÙŠ Ø­Ù…Ù„Ø§Øª Ø±Ù…Ø¶Ø§Ù† ÙˆØ§Ù„Ø£Ø¹ÙŠØ§Ø¯",included:!0,premium:!0})]})]}),e.jsx("div",{className:"mt-6 space-y-3",children:i==="premium"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-amber-100 text-amber-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5"}),"Ø£Ù†Øª Ù…Ø´ØªØ±Ùƒ ÙÙŠ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²"]}),e.jsx("button",{onClick:O,disabled:U,className:"w-full py-3 px-6 rounded-xl bg-red-50 hover:bg-red-100 text-red-600 font-semibold text-sm border border-red-200 transition-all duration-300 flex items-center justify-center gap-2",children:U?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-red-300 border-t-red-600 rounded-full animate-spin"}),"Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ù„ØºØ§Ø¡..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4"}),"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"]})})]}):e.jsxs("button",{onClick:B,disabled:w,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 text-white font-bold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"w-6 h-6"}),"Ø§Ø´ØªØ±Ùƒ ÙÙŠ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠÙ‘Ø²",e.jsx(pt,{className:"w-5 h-5"})]})]})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 px-6 py-4",children:e.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5 text-amber-400"}),"Ù…Ù‚Ø§Ø±Ù†Ø© Ø³Ø±ÙŠØ¹Ø© Ø¨ÙŠÙ† Ø§Ù„Ø¨Ø§Ù‚Ø§Øª"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:"Ø§Ù„Ù…ÙŠØ²Ø©"}),e.jsx("th",{className:"px-6 py-4 text-center font-bold text-green-600",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©"]})}),e.jsx("th",{className:"px-6 py-4 text-center font-bold text-amber-600",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5"}),"Ø§Ù„ØªÙ…ÙŠÙ‘Ø²"]})})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.jsx(Tt,{label:"Ø§Ù„Ø¸Ù‡ÙˆØ± ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",free:!0,premium:!0}),e.jsx(Tt,{label:"Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª",free:!0,premium:!0}),e.jsx(Tt,{label:"ØµÙØ­Ø© Ø®Ø§ØµØ© Ù„Ø£Ø³Ø±ØªÙƒ",free:!0,premium:!0}),e.jsx(Tt,{label:"Ø§Ù„Ø¸Ù‡ÙˆØ± Ø£Ø¹Ù„Ù‰ ÙÙŠ Ø§Ù„Ù†ØªØ§Ø¦Ø¬",premium:!0}),e.jsx(Tt,{label:"Ø¹Ù„Ø§Ù…Ø© Ø£Ø³Ø±Ø© Ù…Ù…ÙŠØ²Ø©",premium:!0}),e.jsx(Tt,{label:"Ø§Ù‚ØªØ±Ø§Ø­Ùƒ ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",premium:!0}),e.jsx(Tt,{label:"Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ³Ù…ÙŠØ©",premium:!0})]})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-bold text-sky-600",children:"ğŸ’¡ Ù…Ù„Ø§Ø­Ø¸Ø©:"})," ","ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ±Ù‚ÙŠØ© Ø£Ùˆ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª. Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ù…Ø¯Ù‰."]})})]})},Dt=({icon:s,title:t,desc:a,included:i,premium:c})=>e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-xl transition ${i?c?"bg-gradient-to-r from-amber-100/50 to-yellow-100/50":"bg-white/50":"opacity-50"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${i?c?"bg-gradient-to-br from-amber-400 to-orange-400 text-white":"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:s}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:`font-bold ${i?"text-gray-800":"text-gray-400"}`,children:t}),c&&e.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-orange-400 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:"Ø­ØµØ±ÙŠ"})]}),e.jsx("p",{className:`text-sm ${i?"text-gray-500":"text-gray-400"}`,children:a})]}),i&&e.jsx(bs,{className:`w-5 h-5 flex-shrink-0 ${c?"text-amber-500":"text-green-500"}`})]}),Tt=({label:s,free:t,premium:a})=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4 text-gray-700 font-medium",children:s}),e.jsx("td",{className:"px-6 py-4 text-center",children:t?e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-green-100 rounded-full",children:e.jsx(bs,{className:"w-5 h-5 text-green-600"})}):e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:e.jsx("span",{className:"text-gray-400",children:"â€”"})})}),e.jsx("td",{className:"px-6 py-4 text-center",children:a?e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-amber-100 rounded-full",children:e.jsx(bs,{className:"w-5 h-5 text-amber-600"})}):e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:e.jsx("span",{className:"text-gray-400",children:"â€”"})})})]}),Wr=5,qa=24,fm=()=>{const{user:s}=Ee(),t=He(),a=Ps(),[i,c]=l.useState([]),[u,r]=l.useState(!0),[w,D]=l.useState(!1),[U,v]=l.useState(!1),[N,E]=l.useState(0),A=l.useRef(null),[j,z]=l.useState({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""});l.useEffect(()=>{s&&p()},[s]);const p=async()=>{if(s)try{const F=fe(ee(C,"promotions"),je("ownerId","==",s.uid)),B=(await be(F)).docs.map(T=>{var P,m,o,R;return{id:T.id,...T.data(),expiresAt:(m=(P=T.data().expiresAt)==null?void 0:P.toDate)==null?void 0:m.call(P),createdAt:(R=(o=T.data().createdAt)==null?void 0:o.toDate)==null?void 0:R.call(o)}});B.sort((T,P)=>{var m,o;return(((m=P.createdAt)==null?void 0:m.getTime())||0)-(((o=T.createdAt)==null?void 0:o.getTime())||0)}),c(B)}catch(F){t.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª"),console.error(F)}finally{r(!1)}},f=F=>F.expiresAt?new Date>new Date(F.expiresAt):!1,L=F=>{var m;const O=(m=F.target.files)==null?void 0:m[0];if(!O)return;const B=O.type.startsWith("image/"),T=O.type.startsWith("video/");if(!B&&!T){t.warning("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£Ùˆ ÙÙŠØ¯ÙŠÙˆ");return}const P=T?50*1024*1024:10*1024*1024;if(O.size>P){t.warning(T?"Ø­Ø¬Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† 50 Ù…ÙŠØ¬Ø§":"Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† 10 Ù…ÙŠØ¬Ø§");return}z({...j,type:T?"video":"image",mediaFile:O,mediaPreview:URL.createObjectURL(O)})},$=async F=>{if(F.preventDefault(),!!s){if(j.type!=="text"&&!j.mediaFile){t.warning("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£Ùˆ ÙÙŠØ¯ÙŠÙˆ");return}if(!j.title.trim()&&!j.description.trim()&&!j.mediaFile){t.warning("ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Ù…Ø­ØªÙˆÙ‰ Ù„Ù„Ø¥Ø¹Ù„Ø§Ù†");return}try{v(!0);let O="";if(j.mediaFile){const T=j.mediaFile.name.replace(/\s+/g,"_").slice(-60),P=`promotions/${s.uid}_${Date.now()}_${T}`,m=As(kt,P),o=Ot(m,j.mediaFile);await new Promise((R,I)=>{o.on("state_changed",q=>{const x=Math.round(q.bytesTransferred/q.totalBytes*100);E(x)},I,async()=>{O=await Is(o.snapshot.ref),R()})})}const B=new Date;B.setHours(B.getHours()+qa),await Pe(ee(C,"promotions"),{ownerId:s.uid,restaurantId:s.uid,type:j.type,title:j.title.trim(),description:j.description.trim(),mediaUrl:O,isActive:!0,isPaid:!0,price:Wr,duration:qa,viewsCount:0,expiresAt:Da.fromDate(B),createdAt:X(),updatedAt:X()}),t.success(`ØªÙ… Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†Ùƒ! âœ¨ Ø³ÙŠØ¸Ù‡Ø± Ù„Ù…Ø¯Ø© ${qa} Ø³Ø§Ø¹Ø©`),z({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""}),D(!1),E(0),p()}catch(O){t.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†"),console.error(O)}finally{v(!1)}}},g=async F=>{if(await a.confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ØŸ",{dangerous:!0}))try{await Ds(J(C,"promotions",F)),t.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†"),p()}catch{t.error("Ø­Ø¯Ø« Ø®Ø·Ø£")}};return u?e.jsxs("div",{className:"flex items-center justify-center h-96",children:[e.jsx(ze,{className:"w-6 h-6 animate-spin ml-2"}),"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."]}):e.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(Us,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ù…ÙˆÙ„Ø©"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Ø£Ù†Ø´Ø¦ Ø¥Ø¹Ù„Ø§Ù†Ùƒ ÙˆØ³ÙŠØ¸Ù‡Ø± Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ ØµÙØ­Ø© Ø£Ø³Ø±ØªÙƒ"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-2xl p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(ps,{className:"w-5 h-5 text-purple-500"}),e.jsxs("span",{className:"text-lg font-bold text-purple-700",children:[Wr," Ø±.Ø³ ÙÙ‚Ø· Ù„Ù…Ø¯Ø© ",qa," Ø³Ø§Ø¹Ø©"]}),e.jsx(ps,{className:"w-5 h-5 text-purple-500"})]}),e.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"Ø£Ø¶Ù ØµÙˆØ±Ø© Ø£Ùˆ ÙÙŠØ¯ÙŠÙˆ Ø£Ùˆ Ù†Øµ ØªØ±ÙˆÙŠØ¬ÙŠ Ù„Ø£Ø³Ø±ØªÙƒ"})]}),!w&&e.jsxs("button",{onClick:()=>D(!0),className:"w-full py-4 rounded-2xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[e.jsx(Cs,{className:"w-6 h-6"}),"Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯"]}),w&&e.jsxs("form",{onSubmit:$,className:"bg-white rounded-2xl shadow-xl p-6 space-y-4",children:[e.jsx("h2",{className:"font-bold text-lg text-gray-800 mb-4",children:"Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>z({...j,type:"text",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${j.type==="text"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Ù†Øµ"})]}),e.jsxs("button",{type:"button",onClick:()=>{var F;z({...j,type:"image"}),(F=A.current)==null||F.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${j.type==="image"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[e.jsx(Xt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"ØµÙˆØ±Ø©"})]}),e.jsxs("button",{type:"button",onClick:()=>{var F;z({...j,type:"video"}),(F=A.current)==null||F.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${j.type==="video"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[e.jsx(cr,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"ÙÙŠØ¯ÙŠÙˆ"})]})]})]}),e.jsx("input",{type:"file",ref:A,accept:"image/*,video/*",onChange:L,className:"hidden"}),j.mediaPreview&&e.jsxs("div",{className:"relative",children:[j.type==="video"?e.jsx("video",{src:j.mediaPreview,controls:!0,className:"w-full h-48 object-cover rounded-xl"}):e.jsx("img",{src:j.mediaPreview,alt:"Ù…Ø¹Ø§ÙŠÙ†Ø©",className:"w-full h-48 object-cover rounded-xl"}),e.jsx("button",{type:"button",onClick:()=>z({...j,mediaFile:null,mediaPreview:"",type:"text"}),className:"absolute top-2 left-2 p-2 bg-red-500 text-white rounded-full",children:e.jsx(rt,{className:"w-4 h-4"})})]}),j.type!=="text"&&!j.mediaPreview&&e.jsxs("button",{type:"button",onClick:()=>{var F;return(F=A.current)==null?void 0:F.click()},className:"w-full py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-purple-400 transition flex items-center justify-center gap-2",children:[e.jsx(va,{className:"w-5 h-5"}),"Ø§Ø®ØªØ± ",j.type==="video"?"ÙÙŠØ¯ÙŠÙˆ":"ØµÙˆØ±Ø©"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"text",value:j.title,onChange:F=>z({...j,title:F.target.value}),placeholder:"Ù…Ø«Ø§Ù„: Ø¹Ø±Ø¶ Ø®Ø§Øµ Ø§Ù„ÙŠÙˆÙ…!",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Ø§Ù„Ø´Ø±Ø­ Ø£Ùˆ Ø§Ù„ÙˆØµÙ"}),e.jsx("textarea",{value:j.description,onChange:F=>z({...j,description:F.target.value}),placeholder:"Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¹Ù„Ø§Ù†Ùƒ Ù‡Ù†Ø§...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),U&&N>0&&e.jsx("div",{className:"bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-full transition-all",style:{width:`${N}%`}})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:U,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:U?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±Ù Ø§Ù„Ù†Ø´Ø±..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-5 h-5"}),"Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† (",Wr," Ø±.Ø³)"]})}),e.jsx("button",{type:"button",onClick:()=>{D(!1),z({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""})},className:"px-4 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-medium",children:"Ø¥Ù„ØºØ§Ø¡"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"font-bold text-lg text-gray-800",children:"Ø¥Ø¹Ù„Ø§Ù†Ø§ØªÙƒ"}),i.length===0?e.jsxs("div",{className:"text-center py-10 text-gray-400",children:[e.jsx(Us,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Ù„Ù… ØªÙ†Ø´Ø¦ Ø£ÙŠ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨Ø¹Ø¯"})]}):i.map(F=>e.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden ${f(F)?"opacity-60":""}`,children:[F.mediaUrl&&(F.type==="video"?e.jsx("video",{src:F.mediaUrl,controls:!0,className:"w-full h-48 object-cover"}):e.jsx("img",{src:F.mediaUrl,alt:F.title,className:"w-full h-48 object-cover"})),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f(F)?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-500 text-xs font-medium rounded-full",children:[e.jsx(rt,{className:"w-3 h-3"})," Ù…Ù†ØªÙ‡ÙŠ"]}):F.isActive?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-600 text-xs font-medium rounded-full",children:[e.jsx(Ie,{className:"w-3 h-3"})," Ù†Ø´Ø·"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-600 text-xs font-medium rounded-full",children:[e.jsx(Ge,{className:"w-3 h-3"})," ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±"]}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-600 text-xs font-medium rounded-full",children:[e.jsx(Ss,{className:"w-3 h-3"})," ",F.viewsCount," Ù…Ø´Ø§Ù‡Ø¯Ø©"]})]}),F.title&&e.jsx("h3",{className:"font-bold text-gray-800",children:F.title}),F.description&&e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:F.description}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:[F.expiresAt&&!f(F)&&e.jsxs(e.Fragment,{children:["ÙŠÙ†ØªÙ‡ÙŠ: ",new Date(F.expiresAt).toLocaleString("ar-SA")]}),f(F)&&"Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†"]}),e.jsx("button",{onClick:()=>g(F.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition",children:e.jsx(ys,{className:"w-4 h-4"})})]})]})]},F.id))]}),e.jsxs(ae,{to:"/owner",className:"flex items-center justify-center gap-2 text-sky-600 hover:text-sky-700 py-4",children:[e.jsx(Es,{className:"w-5 h-5"}),"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"]})]})},Vi=[{value:"percent_discount",label:"Ø®ØµÙ… Ù†Ø³Ø¨Ø© %",icon:gl,desc:"Ø®ØµÙ… Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨"},{value:"fixed_discount",label:"Ø®ØµÙ… Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª",icon:aa,desc:"Ø®ØµÙ… Ù…Ø¨Ù„Øº Ù…Ø­Ø¯Ø¯ Ù…Ù† Ø§Ù„Ø·Ù„Ø¨"},{value:"bundle_meal",label:"ÙˆØ¬Ø¨Ø© Ù…Ø¬Ù…Ù‘Ø¹Ø©",icon:Me,desc:"Ù…Ø¬Ù…ÙˆØ¹Ø© Ø£ØµÙ†Ø§Ù Ø¨Ø³Ø¹Ø± Ø®Ø§Øµ"},{value:"buy_x_get_y",label:"Ø§Ø´ØªØ±Ù ÙˆØ§Ø­ØµÙ„",icon:Ms,desc:"Ø§Ø´ØªØ±Ù 2 ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ 1 Ù…Ø¬Ø§Ù†Ø§Ù‹"}],jm=[{value:"iftar_package",label:"Ø¨Ø§Ù‚Ø© Ø¥ÙØ·Ø§Ø±",icon:eo,desc:"ÙˆØ¬Ø¨Ø© Ø¥ÙØ·Ø§Ø± Ù…ØªÙƒØ§Ù…Ù„Ø©",color:"from-amber-500 to-orange-600"},{value:"suhoor_package",label:"Ø¨Ø§Ù‚Ø© Ø³Ø­ÙˆØ±",icon:pl,desc:"ÙˆØ¬Ø¨Ø© Ø³Ø­ÙˆØ± Ù…Ù…ÙŠØ²Ø©",color:"from-indigo-500 to-purple-600"},{value:"family_bundle",label:"Ø¹Ø±Ø¶ Ø¹Ø§Ø¦Ù„ÙŠ",icon:Ws,desc:"Ø¨Ø§Ù‚Ø© Ù„Ù„Ø¹Ø§Ø¦Ù„Ø© Ø¨Ø³Ø¹Ø± Ø®Ø§Øµ",color:"from-emerald-500 to-teal-600"},{value:"discount",label:"Ø®ØµÙ… Ø±Ù…Ø¶Ø§Ù†ÙŠ",icon:aa,desc:"Ø®ØµÙ… Ø®Ø§Øµ Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø±Ù…Ø¶Ø§Ù†",color:"from-rose-500 to-pink-600"}],Nm=Vi,Qr={offerType:"percent_discount",title:"",description:"",discountPercent:10,discountAmount:5,minOrderAmount:0,bundleItems:[],bundlePrice:0,buyQuantity:2,getQuantity:1,applicableItemIds:[],expiresAt:"",imageUrl:"",originalPrice:0,offerPrice:0,servesCount:4},ym=()=>{const{user:s}=Ee(),t=He(),[a]=Aa(),i=a.get("type")==="ramadan"&&ea(),[c,u]=l.useState([]),[r,w]=l.useState([]),[D,U]=l.useState(!0),[v,N]=l.useState(!1),[E,A]=l.useState(!1),[j,z]=l.useState(null),[p,f]=l.useState({...Qr,offerType:i?"iftar_package":"percent_discount"}),[L,$]=l.useState(null),[g,F]=l.useState(!1),[O,B]=l.useState(0),[T,P]=l.useState(null),m=l.useRef(null);l.useEffect(()=>{if(!s)return;(async()=>{try{const S=await Ce(J(C,"restaurants",s.uid));S.exists()&&$(S.data());const V=fe(ee(C,"offers"),je("ownerId","==",s.uid)),ie=(await be(V)).docs.map(pe=>({id:pe.id,...pe.data()})),re=fe(ee(C,"ramadanOffers"),je("ownerId","==",s.uid)),ue=(await be(re)).docs.map(pe=>({id:pe.id,...pe.data(),isRamadanOffer:!0}));u(i?ue:ie);const _=fe(ee(C,"menuItems"),je("ownerId","==",s.uid)),se=await be(_);w(se.docs.map(pe=>({id:pe.id,...pe.data()})))}catch(S){console.error("Error fetching data:",S),t.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{U(!1)}})()},[s,i]);const o=async h=>{if(s){F(!0),B(0);try{const S=Ia(ks),V=`ramadan_offers/${s.uid}/${Date.now()}_${h.name}`,Q=As(S,V),ie=Ot(Q,h);ie.on("state_changed",re=>{const ye=re.bytesTransferred/re.totalBytes*100;B(ye)},re=>{console.error("Upload error:",re),t.error("ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©"),F(!1)},async()=>{const re=await Is(ie.snapshot.ref);f(ye=>({...ye,imageUrl:re})),P(re),F(!1),t.success("ØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© âœ…")})}catch(S){console.error("Error uploading image:",S),t.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©"),F(!1)}}},R=h=>{var V;const S=(V=h.target.files)==null?void 0:V[0];if(S){if(S.size>5*1024*1024){t.error("Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† 5MB");return}const Q=new FileReader;Q.onload=ie=>{var re;P((re=ie.target)==null?void 0:re.result)},Q.readAsDataURL(S),o(S)}},I=h=>["iftar_package","suhoor_package","family_bundle","discount"].includes(h),q=async()=>{if(s){if(!p.title.trim()){t.error("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ø±Ø¶");return}if(i&&I(p.offerType)&&p.offerType!=="discount"&&(!p.offerPrice||p.offerPrice<=0)){t.error("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± Ø§Ù„Ø¹Ø±Ø¶");return}N(!0);try{const h=i?"ramadanOffers":"offers",S={ownerId:s.uid,restaurantId:s.uid,restaurantName:L==null?void 0:L.name,restaurantLogo:L==null?void 0:L.logoUrl,offerType:p.offerType,title:p.title.trim(),description:p.description.trim(),isActive:!0,viewsCount:0,usedCount:0,updatedAt:X()};if(i&&I(p.offerType)?(S.imageUrl=p.imageUrl||"",S.originalPrice=p.originalPrice||0,S.offerPrice=p.offerPrice||0,S.servesCount=p.servesCount||4,S.isRamadanOffer=!0,p.originalPrice>0&&p.offerPrice>0&&(S.discountPercent=Math.round((p.originalPrice-p.offerPrice)/p.originalPrice*100))):p.offerType==="percent_discount"?(S.discountPercent=p.discountPercent,S.minOrderAmount=p.minOrderAmount):p.offerType==="fixed_discount"?(S.discountAmount=p.discountAmount,S.minOrderAmount=p.minOrderAmount):p.offerType==="bundle_meal"?(S.bundleItems=p.bundleItems,S.bundlePrice=p.bundlePrice,S.bundleOriginalPrice=p.bundleItems.reduce((V,Q)=>V+Q.originalPrice*Q.quantity,0)):p.offerType==="buy_x_get_y"&&(S.buyQuantity=p.buyQuantity,S.getQuantity=p.getQuantity,S.applicableItemIds=p.applicableItemIds,S.applicableItemNames=r.filter(V=>p.applicableItemIds.includes(V.id)).map(V=>V.name)),p.expiresAt&&(S.expiresAt=new Date(p.expiresAt)),j)await me(J(C,h,j),S),u(V=>V.map(Q=>Q.id===j?{...Q,...S}:Q)),t.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶ âœ…");else{S.createdAt=X();const V=await Pe(ee(C,h),S);u(Q=>[{id:V.id,...S},...Q]),t.success("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø±Ø¶ âœ…")}A(!1),z(null),f({...Qr,offerType:i?"iftar_package":"percent_discount"}),P(null)}catch(h){console.error("Error saving offer:",h),t.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¹Ø±Ø¶")}finally{N(!1)}}},x=async h=>{const S=h.isRamadanOffer?"ramadanOffers":"offers";try{await me(J(C,S,h.id),{isActive:!h.isActive,updatedAt:X()}),u(V=>V.map(Q=>Q.id===h.id?{...Q,isActive:!Q.isActive}:Q)),t.success(h.isActive?"ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ø±Ø¶":"ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶")}catch{t.error("Ø­Ø¯Ø« Ø®Ø·Ø£")}},b=async(h,S)=>{if(!confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø±Ø¶ØŸ"))return;const V=i?"ramadanOffers":"offers";try{await Ds(J(C,V,h)),u(Q=>Q.filter(ie=>ie.id!==h)),t.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ø±Ø¶")}catch{t.error("Ø­Ø¯Ø« Ø®Ø·Ø£")}},y=h=>{z(h.id),f({offerType:h.offerType,title:h.title,description:h.description||"",discountPercent:h.discountPercent||10,discountAmount:h.discountAmount||5,minOrderAmount:h.minOrderAmount||0,bundleItems:h.bundleItems||[],bundlePrice:h.bundlePrice||0,buyQuantity:h.buyQuantity||2,getQuantity:h.getQuantity||1,applicableItemIds:h.applicableItemIds||[],expiresAt:h.expiresAt?new Date(h.expiresAt).toISOString().slice(0,16):"",imageUrl:h.imageUrl||"",originalPrice:h.originalPrice||0,offerPrice:h.offerPrice||0,servesCount:h.servesCount||4}),P(h.imageUrl||null),A(!0)},d=h=>{const S=p.bundleItems.find(V=>V.itemId===h.id);f(S?{...p,bundleItems:p.bundleItems.map(V=>V.itemId===h.id?{...V,quantity:V.quantity+1}:V)}:{...p,bundleItems:[...p.bundleItems,{itemId:h.id,itemName:h.name,quantity:1,originalPrice:h.price}]})},M=h=>{f({...p,bundleItems:p.bundleItems.filter(S=>S.itemId!==h)})},k=p.bundleItems.reduce((h,S)=>h+S.originalPrice*S.quantity,0);return D?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(as,{className:"w-8 h-8 text-sky-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`flex items-center justify-between ${i?"bg-gradient-to-r from-purple-900 to-emerald-900 -mx-4 -mt-4 p-4 rounded-b-2xl":""}`,children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${i?"text-amber-300":"text-sky-700"}`,children:i?"ğŸŒ™ Ø¹Ø±ÙˆØ¶ Ø±Ù…Ø¶Ø§Ù†":"ğŸ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø®Ø§ØµØ©"}),e.jsx("p",{className:`text-sm mt-1 ${i?"text-purple-200":"text-gray-500"}`,children:i?"Ø£Ø¶Ù Ø¨Ø§Ù‚Ø§Øª Ø¥ÙØ·Ø§Ø± ÙˆØ³Ø­ÙˆØ± ÙˆØ¹Ø±ÙˆØ¶ Ø±Ù…Ø¶Ø§Ù†ÙŠØ© Ù…Ù…ÙŠØ²Ø©":"Ø£Ø¶Ù Ø¹Ø±ÙˆØ¶ ØªØ¬Ø°Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØªØ²ÙŠØ¯ Ù…Ø¨ÙŠØ¹Ø§ØªÙƒ"})]}),e.jsxs("button",{onClick:()=>{A(!0),z(null),f({...Qr,offerType:i?"iftar_package":"percent_discount"}),P(null)},className:`flex items-center gap-2 px-4 py-2 rounded-xl font-bold shadow-lg hover:scale-105 transition ${i?"bg-gradient-to-r from-amber-400 to-amber-500 text-purple-900":"bg-gradient-to-r from-sky-500 to-sky-600 text-white"}`,children:[e.jsx(Cs,{className:"w-5 h-5"}),i?"Ø¹Ø±Ø¶ Ø±Ù…Ø¶Ø§Ù†ÙŠ":"Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯"]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:`p-4 text-white sticky top-0 z-10 ${i?"bg-gradient-to-r from-purple-900 to-emerald-900":"bg-gradient-to-r from-sky-500 to-sky-600"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold",children:j?i?"âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø¹Ø±Ø¶ Ø±Ù…Ø¶Ø§Ù†":"âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶":i?"ğŸŒ™ Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶ Ø±Ù…Ø¶Ø§Ù†ÙŠ":"â• Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯"}),e.jsx("button",{onClick:()=>{A(!1),P(null)},className:"p-1 hover:bg-white/20 rounded-lg",children:e.jsx(Oe,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø±Ø¶"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(i?jm:Vi).map(h=>e.jsxs("button",{onClick:()=>f({...p,offerType:h.value}),className:`p-3 rounded-xl border-2 text-right transition ${p.offerType===h.value?i?"border-purple-500 bg-purple-50":"border-sky-500 bg-sky-50":"border-gray-200 hover:border-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(h.icon,{className:`w-5 h-5 ${p.offerType===h.value?i?"text-purple-600":"text-sky-600":"text-gray-400"}`}),e.jsx("span",{className:"font-bold text-sm",children:h.label})]}),e.jsx("p",{className:"text-xs text-gray-500",children:h.desc})]},h.value))})]}),i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ØµÙˆØ±Ø© Ø§Ù„Ø¹Ø±Ø¶"}),e.jsxs("div",{className:"border-2 border-dashed border-purple-300 rounded-xl p-4 text-center bg-purple-50/50",children:[T?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:T,alt:"Ù…Ø¹Ø§ÙŠÙ†Ø©",className:"w-full h-48 object-cover rounded-xl"}),e.jsx("button",{onClick:()=>{P(null),f({...p,imageUrl:""})},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:e.jsx(Oe,{className:"w-4 h-4"})})]}):e.jsx("div",{onClick:()=>{var h;return(h=m.current)==null?void 0:h.click()},className:"cursor-pointer py-8",children:g?e.jsxs("div",{className:"space-y-2",children:[e.jsx(as,{className:"w-10 h-10 text-purple-500 animate-spin mx-auto"}),e.jsxs("p",{className:"text-purple-600 font-bold",children:[Math.round(O),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-12 h-12 text-purple-400 mx-auto mb-2"}),e.jsx("p",{className:"text-purple-600 font-semibold",children:"Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø¹Ø±Ø¶"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG Ø­ØªÙ‰ 5MB"})]})}),e.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:R,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ø±Ø¶ *"}),e.jsx("input",{type:"text",value:p.title,onChange:h=>f({...p,title:h.target.value}),placeholder:"Ù…Ø«Ø§Ù„: Ø¹Ø±Ø¶ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÙˆØµÙ Ø§Ù„Ø¹Ø±Ø¶"}),e.jsx("textarea",{value:p.description,onChange:h=>f({...p,description:h.target.value}),placeholder:i?"ÙˆØµÙ Ù…Ø­ØªÙˆÙŠØ§Øª Ø§Ù„Ø¨Ø§Ù‚Ø©...":"ÙˆØµÙ Ù…Ø®ØªØµØ± Ù„Ù„Ø¹Ø±Ø¶...",rows:2,className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none resize-none"})]}),i&&I(p.offerType)&&p.offerType!=="discount"&&e.jsxs("div",{className:"space-y-4 p-4 bg-gradient-to-br from-purple-50 to-amber-50 rounded-xl border-2 border-purple-200",children:[e.jsxs("h4",{className:"font-bold text-purple-800 flex items-center gap-2",children:[e.jsx(pl,{className:"w-5 h-5"}),"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø©"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ØªÙƒÙÙŠ ÙƒÙ… Ø´Ø®ØµØŸ"}),e.jsx("div",{className:"flex gap-2",children:[2,4,6,8,10].map(h=>e.jsx("button",{type:"button",onClick:()=>f({...p,servesCount:h}),className:`px-4 py-2 rounded-lg font-bold transition ${p.servesCount===h?"bg-purple-600 text-white":"bg-white border border-purple-200 text-purple-600 hover:bg-purple-50"}`,children:h},h))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ (Ø±.Ø³)"}),e.jsx("input",{type:"number",value:p.originalPrice||"",onChange:h=>f({...p,originalPrice:Number(h.target.value)||0}),placeholder:"150",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø³Ø¹Ø± Ø§Ù„Ø¹Ø±Ø¶ (Ø±.Ø³) *"}),e.jsx("input",{type:"number",value:p.offerPrice||"",onChange:h=>f({...p,offerPrice:Number(h.target.value)||0}),placeholder:"99",className:"w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none"})]})]}),p.originalPrice>0&&p.offerPrice>0&&p.originalPrice>p.offerPrice&&e.jsxs("div",{className:"bg-green-100 text-green-700 p-3 rounded-xl text-center font-bold",children:["ØªÙˆÙÙŠØ± ",Math.round((p.originalPrice-p.offerPrice)/p.originalPrice*100),"% ğŸ‰"]})]}),i&&p.offerType==="discount"&&e.jsx("div",{className:"space-y-4 p-4 bg-rose-50 rounded-xl",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… %"}),e.jsx("input",{type:"number",value:p.discountPercent,onChange:h=>f({...p,discountPercent:Number(h.target.value)}),min:1,max:90,className:"w-full border-2 border-rose-200 rounded-xl px-4 py-3 focus:border-rose-500 focus:outline-none"})]})}),!i&&p.offerType==="percent_discount"&&e.jsxs("div",{className:"space-y-4 p-4 bg-amber-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… %"}),e.jsx("input",{type:"number",value:p.discountPercent,onChange:h=>f({...p,discountPercent:Number(h.target.value)}),min:1,max:90,className:"w-full border-2 border-amber-200 rounded-xl px-4 py-3 focus:border-amber-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø·Ù„Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"number",value:p.minOrderAmount||"",onChange:h=>f({...p,minOrderAmount:Number(h.target.value)||0}),placeholder:"0 = Ø¨Ø¯ÙˆÙ† Ø­Ø¯ Ø£Ø¯Ù†Ù‰",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]})]}),!i&&p.offerType==="fixed_discount"&&e.jsxs("div",{className:"space-y-4 p-4 bg-green-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù…Ø¨Ù„Øº Ø§Ù„Ø®ØµÙ… (Ø±.Ø³)"}),e.jsx("input",{type:"number",value:p.discountAmount,onChange:h=>f({...p,discountAmount:Number(h.target.value)}),min:1,className:"w-full border-2 border-green-200 rounded-xl px-4 py-3 focus:border-green-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø·Ù„Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"number",value:p.minOrderAmount||"",onChange:h=>f({...p,minOrderAmount:Number(h.target.value)||0}),placeholder:"0 = Ø¨Ø¯ÙˆÙ† Ø­Ø¯ Ø£Ø¯Ù†Ù‰",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]})]}),!i&&p.offerType==="bundle_meal"&&e.jsxs("div",{className:"space-y-4 p-4 bg-purple-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø£ØµÙ†Ø§Ù Ø§Ù„ÙˆØ¬Ø¨Ø©"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:p.bundleItems.map(h=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white rounded-full text-sm border",children:[h.itemName," Ã— ",h.quantity,e.jsx("button",{onClick:()=>M(h.itemId),className:"text-red-500 hover:text-red-700",children:e.jsx(Oe,{className:"w-4 h-4"})})]},h.itemId))}),e.jsxs("select",{onChange:h=>{const S=r.find(V=>V.id===h.target.value);S&&d(S),h.target.value=""},className:"w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"+ Ø£Ø¶Ù ØµÙ†Ù Ù„Ù„ÙˆØ¬Ø¨Ø©"}),r.filter(h=>h.available!==!1).map(h=>e.jsxs("option",{value:h.id,children:[h.name," - ",h.price," Ø±.Ø³"]},h.id))]})]}),k>0&&e.jsxs("div",{className:"bg-white p-3 rounded-xl",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ: ",e.jsxs("span",{className:"line-through",children:[k," Ø±.Ø³"]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Ø³Ø¹Ø± Ø§Ù„Ø¹Ø±Ø¶"}),e.jsx("input",{type:"number",value:p.bundlePrice||"",onChange:h=>f({...p,bundlePrice:Number(h.target.value)}),placeholder:`Ø§Ù‚ØªØ±Ø­: ${(k*.8).toFixed(0)} Ø±.Ø³`,className:"w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none"})]})]})]}),!i&&p.offerType==="buy_x_get_y"&&e.jsxs("div",{className:"space-y-4 p-4 bg-pink-50 rounded-xl",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ø´ØªØ±Ù"}),e.jsx("input",{type:"number",value:p.buyQuantity,onChange:h=>f({...p,buyQuantity:Number(h.target.value)}),min:1,className:"w-full border-2 border-pink-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰"}),e.jsx("input",{type:"number",value:p.getQuantity,onChange:h=>f({...p,getQuantity:Number(h.target.value)}),min:1,className:"w-full border-2 border-pink-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„Ù…Ø´Ù…ÙˆÙ„Ø©"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:p.applicableItemIds.map(h=>{const S=r.find(V=>V.id===h);return S?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white rounded-full text-sm border",children:[S.name,e.jsx("button",{onClick:()=>f({...p,applicableItemIds:p.applicableItemIds.filter(V=>V!==h)}),className:"text-red-500",children:e.jsx(Oe,{className:"w-4 h-4"})})]},h):null})}),e.jsxs("select",{onChange:h=>{h.target.value&&!p.applicableItemIds.includes(h.target.value)&&f({...p,applicableItemIds:[...p.applicableItemIds,h.target.value]}),h.target.value=""},className:"w-full border-2 border-pink-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"+ Ø£Ø¶Ù ØµÙ†Ù"}),r.filter(h=>h.available!==!1&&!p.applicableItemIds.includes(h.id)).map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¹Ø±Ø¶ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"datetime-local",value:p.expiresAt,onChange:h=>f({...p,expiresAt:h.target.value}),className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{onClick:q,disabled:v,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-sky-500 to-sky-600 text-white rounded-xl font-bold shadow-lg hover:scale-[1.02] transition disabled:opacity-50",children:[v?e.jsx(as,{className:"w-5 h-5 animate-spin"}):e.jsx(jl,{className:"w-5 h-5"}),j?"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø±Ø¶"]}),e.jsx("button",{onClick:()=>A(!1),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition",children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]})}),c.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ms,{className:"w-10 h-10 text-sky-500"})}),e.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ø±ÙˆØ¶ Ø­Ø§Ù„ÙŠØ§Ù‹"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Ø£Ø¶Ù Ø¹Ø±ÙˆØ¶ Ù„Ø¬Ø°Ø¨ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"})]}):e.jsx("div",{className:"grid gap-4",children:c.map(h=>{var ie;const S=Nm.find(re=>re.value===h.offerType),V=(S==null?void 0:S.icon)||aa,Q=h.expiresAt&&new Date(h.expiresAt)<new Date;return e.jsx("div",{className:`bg-white rounded-2xl shadow-md overflow-hidden border-2 transition ${!h.isActive||Q?"border-gray-200 opacity-60":"border-sky-100"}`,children:e.jsxs("div",{className:"flex items-stretch",children:[e.jsx("div",{className:`w-24 flex-shrink-0 flex items-center justify-center ${h.offerType==="percent_discount"?"bg-amber-100":h.offerType==="fixed_discount"?"bg-green-100":h.offerType==="bundle_meal"?"bg-purple-100":"bg-pink-100"}`,children:e.jsx(V,{className:`w-10 h-10 ${h.offerType==="percent_discount"?"text-amber-600":h.offerType==="fixed_discount"?"text-green-600":h.offerType==="bundle_meal"?"text-purple-600":"text-pink-600"}`})}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:h.title}),e.jsx("p",{className:"text-sm text-gray-500",children:S==null?void 0:S.label})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>x(h),className:`p-2 rounded-lg transition ${h.isActive?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:h.isActive?"Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ø±Ø¶":"ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶",children:h.isActive?e.jsx(Ss,{className:"w-4 h-4"}):e.jsx(so,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y(h),className:"p-2 rounded-lg bg-sky-100 text-sky-600 hover:bg-sky-200 transition",children:e.jsx(to,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(h.id),className:"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition",children:e.jsx(ys,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[h.offerType==="percent_discount"&&e.jsxs("p",{className:"text-amber-600 font-bold",children:["Ø®ØµÙ… ",h.discountPercent,"%"]}),h.offerType==="fixed_discount"&&e.jsxs("p",{className:"text-green-600 font-bold",children:["Ø®ØµÙ… ",h.discountAmount," Ø±.Ø³"]}),h.offerType==="bundle_meal"&&e.jsxs("p",{className:"text-purple-600 font-bold",children:[(ie=h.bundleItems)==null?void 0:ie.length," Ø£ØµÙ†Ø§Ù Ø¨Ù€ ",h.bundlePrice," Ø±.Ø³",e.jsxs("span",{className:"text-gray-400 line-through mr-2",children:[h.bundleOriginalPrice," Ø±.Ø³"]})]}),h.offerType==="buy_x_get_y"&&e.jsxs("p",{className:"text-pink-600 font-bold",children:["Ø§Ø´ØªØ±Ù ",h.buyQuantity," ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ ",h.getQuantity," Ù…Ø¬Ø§Ù†Ø§Ù‹"]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ss,{className:"w-3 h-3"})," ",h.viewsCount||0," Ù…Ø´Ø§Ù‡Ø¯Ø©"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"w-3 h-3"})," ",h.usedCount||0," Ø§Ø³ØªØ®Ø¯Ø§Ù…"]}),Q&&e.jsxs("span",{className:"text-red-500 flex items-center gap-1",children:[e.jsx(Ge,{className:"w-3 h-3"})," Ù…Ù†ØªÙ‡ÙŠ"]})]})]})]})},h.id)})})]})},wm=24,vm=()=>{const{user:s}=Ee(),t=He(),[a,i]=l.useState([]),[c,u]=l.useState([]),[r,w]=l.useState(!0),[D,U]=l.useState(!1),[v,N]=l.useState(!1),[E,A]=l.useState(0),[j,z]=l.useState(null),p=l.useRef(null),[f,L]=l.useState({type:"image",mediaFile:null,mediaPreview:"",caption:"",backgroundColor:"#0ea5e9",textColor:"#ffffff",menuItemId:""});l.useEffect(()=>{s&&$()},[s]);const $=async()=>{if(s)try{const m=await Ce(J(C,"restaurants",s.uid));m.exists()&&z(m.data());const o=fe(ee(C,"stories"),je("ownerId","==",s.uid)),R=await be(o),I=new Date,q=R.docs.map(y=>{var d,M,k,h;return{id:y.id,...y.data(),expiresAt:(M=(d=y.data().expiresAt)==null?void 0:d.toDate)==null?void 0:M.call(d),createdAt:(h=(k=y.data().createdAt)==null?void 0:k.toDate)==null?void 0:h.call(k)}}).filter(y=>y.expiresAt&&new Date(y.expiresAt)>I).sort((y,d)=>{var M,k;return(((M=d.createdAt)==null?void 0:M.getTime())||0)-(((k=y.createdAt)==null?void 0:k.getTime())||0)});i(q);const x=fe(ee(C,"menuItems"),je("ownerId","==",s.uid)),b=await be(x);u(b.docs.map(y=>({id:y.id,...y.data()})))}catch(m){console.error("Error loading data:",m),t.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{w(!1)}},g=m=>{var x;const o=(x=m.target.files)==null?void 0:x[0];if(!o)return;const R=o.type.startsWith("image/"),I=o.type.startsWith("video/");if(!R&&!I){t.warning("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£Ùˆ ÙÙŠØ¯ÙŠÙˆ");return}const q=I?30*1024*1024:10*1024*1024;if(o.size>q){t.warning(I?"Ø­Ø¬Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† 30 Ù…ÙŠØ¬Ø§":"Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† 10 Ù…ÙŠØ¬Ø§");return}L({...f,type:I?"video":"image",mediaFile:o,mediaPreview:URL.createObjectURL(o)})},F=async()=>{if(s){if(f.type!=="text"&&!f.mediaFile){t.warning("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£Ùˆ ÙÙŠØ¯ÙŠÙˆ");return}if(f.type==="text"&&!f.caption.trim()){t.warning("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ù†Øµ Ø§Ù„Ø³ØªÙˆØ±ÙŠ");return}N(!0);try{let m="";if(f.mediaFile){const x=f.mediaFile.name.split(".").pop(),b=`stories/${s.uid}/${Date.now()}.${x}`,y=As(kt,b),d=Ot(y,f.mediaFile);await new Promise((M,k)=>{d.on("state_changed",h=>{const S=h.bytesTransferred/h.totalBytes*100;A(S)},k,async()=>{m=await Is(d.snapshot.ref),M()})})}const o=new Date;o.setHours(o.getHours()+wm);const R=c.find(x=>x.id===f.menuItemId),I={ownerId:s.uid,restaurantId:s.uid,restaurantName:j==null?void 0:j.name,restaurantLogo:j==null?void 0:j.logoUrl,type:f.type,mediaUrl:m||void 0,caption:f.caption.trim()||void 0,backgroundColor:f.type==="text"?f.backgroundColor:void 0,textColor:f.type==="text"?f.textColor:void 0,menuItemId:f.menuItemId||void 0,menuItemName:R==null?void 0:R.name,viewsCount:0,viewedBy:[],expiresAt:Da.fromDate(o),createdAt:X()},q=await Pe(ee(C,"stories"),I);console.log("âœ… Story created successfully:",q.id),i(x=>[{id:q.id,...I,expiresAt:o,createdAt:new Date},...x]),t.success("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø³ØªÙˆØ±ÙŠ! ğŸ‰"),U(!1),B()}catch(m){console.error("âŒ Error uploading story:",m),console.error("Error code:",m==null?void 0:m.code),console.error("Error message:",m==null?void 0:m.message),t.error(`Ø­Ø¯Ø« Ø®Ø·Ø£: ${(m==null?void 0:m.message)||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}`)}finally{N(!1),A(0)}}},O=async m=>{if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø³ØªÙˆØ±ÙŠØŸ"))try{await Ds(J(C,"stories",m)),i(o=>o.filter(R=>R.id!==m)),t.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø³ØªÙˆØ±ÙŠ")}catch{t.error("Ø­Ø¯Ø« Ø®Ø·Ø£")}},B=()=>{L({type:"image",mediaFile:null,mediaPreview:"",caption:"",backgroundColor:"#0ea5e9",textColor:"#ffffff",menuItemId:""}),p.current&&(p.current.value="")},T=m=>{const o=new Date,R=new Date(m).getTime()-o.getTime(),I=Math.floor(R/(1e3*60*60)),q=Math.floor(R%(1e3*60*60)/(1e3*60));return I>0?`${I} Ø³Ø§Ø¹Ø©`:`${q} Ø¯Ù‚ÙŠÙ‚Ø©`},P=["#0ea5e9","#8b5cf6","#ec4899","#f97316","#22c55e","#1f2937","#dc2626","#0891b2"];return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(as,{className:"w-8 h-8 text-sky-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-700",children:"ğŸ“¸ Ø³ØªÙˆØ±ÙŠ Ø§Ù„Ø£Ø³Ø±Ø©"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Ø´Ø§Ø±Ùƒ Ø·Ø¨Ø® Ø§Ù„ÙŠÙˆÙ… ÙˆØ¹Ø±ÙˆØ¶Ùƒ Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"})]}),e.jsxs("button",{onClick:()=>{U(!0),B()},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-bold shadow-lg hover:scale-105 transition",children:[e.jsx(Cs,{className:"w-5 h-5"}),"Ø³ØªÙˆØ±ÙŠ Ø¬Ø¯ÙŠØ¯"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl p-4 border border-pink-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-pink-700",children:[e.jsx(ps,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold",children:"Ø³ØªÙˆØ±ÙŠ Ù…Ø¬Ø§Ù†ÙŠ!"})]}),e.jsx("p",{className:"text-sm text-pink-600 mt-1",children:"Ø´Ø§Ø±Ùƒ ØµÙˆØ± Ø§Ù„Ø·Ø¨Ø® ÙˆØ§Ù„Ø¹Ø±ÙˆØ¶ Ù…Ø¹ Ø¹Ù…Ù„Ø§Ø¦Ùƒ. Ø§Ù„Ø³ØªÙˆØ±ÙŠ ÙŠØ¸Ù‡Ø± Ù„Ù€ 24 Ø³Ø§Ø¹Ø© Ø«Ù… ÙŠØ®ØªÙÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹."})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-500 p-4 text-white sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold",children:"ğŸ“¸ Ø³ØªÙˆØ±ÙŠ Ø¬Ø¯ÙŠØ¯"}),e.jsx("button",{onClick:()=>U(!1),className:"p-1 hover:bg-white/20 rounded-lg",children:e.jsx(Oe,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù†ÙˆØ¹ Ø§Ù„Ø³ØªÙˆØ±ÙŠ"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>L({...f,type:"image",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 flex flex-col items-center gap-1 transition ${f.type==="image"?"border-pink-500 bg-pink-50":"border-gray-200"}`,children:[e.jsx(Xt,{className:`w-6 h-6 ${f.type==="image"?"text-pink-600":"text-gray-400"}`}),e.jsx("span",{className:"text-xs font-medium",children:"ØµÙˆØ±Ø©"})]}),e.jsxs("button",{onClick:()=>L({...f,type:"video",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 flex flex-col items-center gap-1 transition ${f.type==="video"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[e.jsx(cr,{className:`w-6 h-6 ${f.type==="video"?"text-purple-600":"text-gray-400"}`}),e.jsx("span",{className:"text-xs font-medium",children:"ÙÙŠØ¯ÙŠÙˆ"})]}),e.jsxs("button",{onClick:()=>L({...f,type:"text",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 flex flex-col items-center gap-1 transition ${f.type==="text"?"border-sky-500 bg-sky-50":"border-gray-200"}`,children:[e.jsx(ao,{className:`w-6 h-6 ${f.type==="text"?"text-sky-600":"text-gray-400"}`}),e.jsx("span",{className:"text-xs font-medium",children:"Ù†Øµ"})]})]})]}),(f.type==="image"||f.type==="video")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:f.type==="image"?"ğŸ“· Ø§Ø®ØªØ± ØµÙˆØ±Ø©":"ğŸ¬ Ø§Ø®ØªØ± ÙÙŠØ¯ÙŠÙˆ"}),e.jsx("input",{ref:p,type:"file",accept:f.type==="video"?"video/*":"image/*",onChange:g,className:"hidden"}),f.mediaPreview?e.jsxs("div",{className:"relative rounded-xl overflow-hidden bg-black aspect-[9/16] max-h-[300px]",children:[f.type==="video"?e.jsx("video",{src:f.mediaPreview,className:"w-full h-full object-contain",controls:!0}):e.jsx("img",{src:f.mediaPreview,alt:"Preview",className:"w-full h-full object-contain"}),e.jsx("button",{onClick:()=>{L({...f,mediaFile:null,mediaPreview:""}),p.current&&(p.current.value="")},className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full",children:e.jsx(Oe,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>{var m;return(m=p.current)==null?void 0:m.click()},className:"w-full aspect-[9/16] max-h-[200px] border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-pink-400 hover:bg-pink-50 transition",children:[e.jsx(va,{className:"w-10 h-10 text-gray-400"}),e.jsx("span",{className:"text-gray-500 font-medium",children:"Ø§Ø¶ØºØ· Ù„Ù„Ø±ÙØ¹"}),e.jsx("span",{className:"text-xs text-gray-400",children:f.type==="video"?"Ø­Ø¯ 30 Ù…ÙŠØ¬Ø§":"Ø­Ø¯ 10 Ù…ÙŠØ¬Ø§"})]})]}),f.type==="text"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-[9/16] max-h-[250px] rounded-xl flex items-center justify-center p-6",style:{backgroundColor:f.backgroundColor},children:e.jsx("p",{className:"text-center text-xl font-bold leading-relaxed",style:{color:f.textColor},children:f.caption||"Ø§ÙƒØªØ¨ Ù†Øµ Ø§Ù„Ø³ØªÙˆØ±ÙŠ..."})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:P.map(m=>e.jsx("button",{onClick:()=>L({...f,backgroundColor:m}),className:`w-10 h-10 rounded-full transition-transform ${f.backgroundColor===m?"ring-4 ring-pink-300 scale-110":""}`,style:{backgroundColor:m}},m))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:f.type==="text"?"Ù†Øµ Ø§Ù„Ø³ØªÙˆØ±ÙŠ *":"Ù†Øµ Ù…ØµØ§Ø­Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("textarea",{value:f.caption,onChange:m=>L({...f,caption:m.target.value}),placeholder:f.type==="text"?"Ø§ÙƒØªØ¨ Ù†Øµ Ø§Ù„Ø³ØªÙˆØ±ÙŠ...":"Ù…Ø«Ø§Ù„: Ø·Ø¨Ø® Ø§Ù„ÙŠÙˆÙ… ğŸš",rows:3,className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none resize-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[e.jsx(ns,{className:"w-4 h-4 inline ml-1"}),"Ø±Ø¨Ø· Ø¨ØµÙ†Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"]}),e.jsxs("select",{value:f.menuItemId,onChange:m=>L({...f,menuItemId:m.target.value}),className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"Ø¨Ø¯ÙˆÙ† Ø±Ø¨Ø·"}),c.filter(m=>m.available!==!1).map(m=>e.jsxs("option",{value:m.id,children:[m.name," - ",m.price," Ø±.Ø³"]},m.id))]})]}),v&&e.jsxs("div",{className:"bg-pink-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(as,{className:"w-5 h-5 text-pink-500 animate-spin"}),e.jsx("span",{className:"text-pink-700 font-medium",children:"Ø¬Ø§Ø±Ù Ø§Ù„Ø±ÙØ¹..."})]}),e.jsx("div",{className:"h-2 bg-pink-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-purple-500 transition-all duration-300",style:{width:`${E}%`}})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{onClick:F,disabled:v,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-bold shadow-lg hover:scale-[1.02] transition disabled:opacity-50",children:[e.jsx(vt,{className:"w-5 h-5"}),"Ù†Ø´Ø± Ø§Ù„Ø³ØªÙˆØ±ÙŠ"]}),e.jsx("button",{onClick:()=>U(!1),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition",children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]})}),a.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(vt,{className:"w-10 h-10 text-pink-500"})}),e.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³ØªÙˆØ±ÙŠØ§Øª"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Ø´Ø§Ø±Ùƒ Ø·Ø¨Ø® Ø§Ù„ÙŠÙˆÙ… Ù…Ø¹ Ø¹Ù…Ù„Ø§Ø¦Ùƒ!"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map(m=>e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"aspect-[9/16] rounded-2xl overflow-hidden shadow-lg",children:[m.type==="text"?e.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:m.backgroundColor},children:e.jsx("p",{className:"text-center text-sm font-bold leading-relaxed line-clamp-6",style:{color:m.textColor},children:m.caption})}):m.type==="video"?e.jsx("video",{src:m.mediaUrl,className:"w-full h-full object-cover"}):e.jsx("img",{src:m.mediaUrl,alt:"",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),e.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 bg-black/50 text-white text-xs font-medium px-2 py-1 rounded-full",children:[e.jsx(Ge,{className:"w-3 h-3"}),T(m.expiresAt)]}),e.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-1 bg-black/50 text-white text-xs font-medium px-2 py-1 rounded-full",children:[e.jsx(Ss,{className:"w-3 h-3"}),m.viewsCount]}),e.jsx("button",{onClick:()=>O(m.id),className:"absolute top-2 left-2 p-2 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition",children:e.jsx(ys,{className:"w-4 h-4"})}),m.menuItemName&&e.jsxs("div",{className:"absolute bottom-2 left-2 flex items-center gap-1 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:[e.jsx(wt,{className:"w-3 h-3"}),m.menuItemName]})]}),m.caption&&m.type!=="text"&&e.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:m.caption})]},m.id))})]})};async function Ys(s){try{const t={...s,read:!1,createdAt:X()},a=await Pe(ee(C,"notifications"),t);console.log("ğŸ”” ØªÙ… Ø­ÙØ¸ Ø¥Ø´Ø¹Ø§Ø±:",s.type,"â†’",s.recipientId);try{await nx(s.title,s.message,{icon:"/icon-192.png",tag:s.type+"-"+(s.orderId||Date.now()),url:s.actionUrl||"/"}),console.log("ğŸ“± ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Push Notification")}catch(i){console.warn("âš ï¸ Push Notification ØºÙŠØ± Ù…ØªØ§Ø­:",i)}return a.id}catch(t){return console.error("âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:",t),null}}async function km(s,t,a){await Ys({type:"order_accepted",recipientId:s,recipientType:"customer",title:"ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø·Ù„Ø¨Ùƒ âœ…",message:`${a} Ø¨Ø¯Ø£Øª Ø¨ØªØ¬Ù‡ÙŠØ² Ø·Ù„Ø¨Ùƒ`,orderId:t,restaurantName:a,actionType:"order",actionUrl:"/track-orders",priority:"high"})}async function Sm(s,t,a,i){const c=i==="pickup"?`Ø·Ù„Ø¨Ùƒ Ù…Ù† ${a} Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù…! ØªØ¹Ø§Ù„ Ø§Ø³ØªÙ„Ù…Ù‡ ğŸƒ`:`Ø·Ù„Ø¨Ùƒ Ù…Ù† ${a} Ø¬Ø§Ù‡Ø²ØŒ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø¥Ù„ÙŠÙƒ ğŸš—`;await Ys({type:"order_ready",recipientId:s,recipientType:"customer",title:"Ø·Ù„Ø¨Ùƒ Ø¬Ø§Ù‡Ø²! ğŸ‰",message:c,orderId:t,restaurantName:a,actionType:"order",actionUrl:"/track-orders",priority:"high"})}async function qi(s,t,a){await Ys({type:"courier_assigned",recipientId:s,recipientType:"customer",title:"Ù…Ù†Ø¯ÙˆØ¨ ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ ğŸš—",message:`${a} Ø§Ø³ØªÙ„Ù… Ø·Ù„Ø¨Ùƒ ÙˆÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø¥Ù„ÙŠÙƒ`,orderId:t,actionType:"order",actionUrl:"/track-orders",priority:"normal"})}async function zi(s,t,a){await Ys({type:"order_delivered",recipientId:s,recipientType:"customer",title:"ÙˆØµÙ„ Ø·Ù„Ø¨Ùƒ! ğŸ“¦",message:`ØªÙ… ØªÙˆØµÙŠÙ„ Ø·Ù„Ø¨Ùƒ Ù…Ù† ${a}. Ø¨Ø§Ù„Ø¹Ø§ÙÙŠØ©! ğŸ½ï¸`,orderId:t,restaurantName:a,actionType:"order",actionUrl:"/track-orders",priority:"normal"})}async function Cm(s,t,a,i){await Ys({type:"order_ready",recipientId:s,recipientType:"courier",title:"Ø·Ù„Ø¨ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙˆØµÙŠÙ„ ğŸ“¦",message:`Ù…Ù† ${a} Ø¥Ù„Ù‰ ${i}`,orderId:t,restaurantName:a,actionType:"order",actionUrl:"/courier",priority:"high"})}async function Am(s,t,a,i,c){try{const u=fe(ee(C,"users"),je("role","in",["developer","admin"])),r=await be(u);for(const w of r.docs)await Ys({type:"admin_new_order",recipientId:w.id,recipientType:"admin",title:"ğŸ’° Ø·Ù„Ø¨ Ù†Ø§Ø¬Ø­!",message:`${t} â†’ ${a} | ${i.toFixed(2)} Ø±.Ø³ (Ø±Ø³ÙˆÙ…: ${c.toFixed(2)})`,orderId:s,restaurantName:t,actionType:"order",actionUrl:"/admin/orders",priority:"normal"});console.log("ğŸ“Š ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù† Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù†Ø§Ø¬Ø­")}catch(u){console.error("âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:",u)}}async function Im(s,t,a){await Ys({type:"order_preparing",recipientId:s,recipientType:"customer",title:"Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø·Ù„Ø¨Ùƒ ğŸ‘¨â€ğŸ³",message:`${a} Ø¨Ø¯Ø£Øª Ø¨ØªØ¬Ù‡ÙŠØ² Ø·Ù„Ø¨Ùƒ`,orderId:t,restaurantName:a,actionType:"order",actionUrl:"/orders",priority:"normal"})}async function Dm(s,t,a,i){await Ys({type:"order_new",recipientId:s,recipientType:"customer",title:"ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ âœ…",message:`Ø·Ù„Ø¨Ùƒ Ù…Ù† ${a} Ø¨Ù‚ÙŠÙ…Ø© ${i.toFixed(2)} Ø±.Ø³ ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù‚Ø¨ÙˆÙ„`,orderId:t,restaurantName:a,actionType:"order",actionUrl:"/orders",priority:"high"})}async function Tm(s,t,a,i,c){await Ys({type:"order_new",recipientId:s,recipientType:"owner",title:"ğŸ”” Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯!",message:`${a} Ø·Ù„Ø¨ ${c} Ù…Ù†ØªØ¬ Ø¨Ù‚ÙŠÙ…Ø© ${i.toFixed(2)} Ø±.Ø³`,orderId:t,actionType:"order",actionUrl:"/restaurant/orders",priority:"high"})}async function Rm(s,t,a,i,c){await Ys({type:"order_new",recipientId:s,recipientType:t,title:`ğŸ’¬ Ø±Ø³Ø§Ù„Ø© Ù…Ù† ${a}`,message:c.length>50?c.substring(0,50)+"...":c,orderId:i,actionType:"order",actionUrl:`/chat?orderId=${i}`,priority:"high"})}const Ca=Object.freeze(Object.defineProperty({__proto__:null,notifyAdminSuccessfulOrder:Am,notifyCourierAssigned:qi,notifyCourierOrderReady:Cm,notifyNewMessage:Rm,notifyOrderAccepted:km,notifyOrderCreated:Dm,notifyOrderDelivered:zi,notifyOrderPreparing:Im,notifyOrderReady:Sm,notifyRestaurantNewOrder:Tm,sendSmartNotification:Ys},Symbol.toStringTag,{value:"Module"})),Rt=3.75,Gr=3,Em=()=>{const{user:s}=Ee(),t=os(),a=He(),i=Ps(),[c,u]=l.useState("dashboard"),[r,w]=l.useState([]),[D,U]=l.useState([]),[v,N]=l.useState([]),[E,A]=l.useState({}),[j,z]=l.useState(null),[p,f]=l.useState(!1),[L,$]=l.useState([]),[g,F]=l.useState(null),[O,B]=l.useState(!0),[T,P]=l.useState(!1),[m,o]=l.useState({todayDeliveries:0,todayEarnings:0,weekDeliveries:0,weekEarnings:0,monthDeliveries:0,monthEarnings:0,totalDeliveries:0,totalEarnings:0,totalPlatformFees:0,netEarnings:0,pendingOrders:0,activeOrders:0}),[R,I]=l.useState(null),[q,x]=l.useState(!1),[b,y]=l.useState({}),[d,M]=l.useState({isOpen:!1,orderId:""});l.useEffect(()=>{if(!(s!=null&&s.uid))return;const Y=async()=>{const de=J(C,"couriers",s.uid),oe=await Ce(de);if(oe.exists())F(oe.data());else{const ge={name:s.displayName||"",phone:"",city:"",isAvailable:!0,totalDeliveries:0,rating:5,joinedAt:X()};await Be(de,ge),F(ge)}B(!1)},te=async()=>{const{getDocs:de}=await qs(async()=>{const{getDocs:Ae}=await import("./vendor-firebase-CIIT5h2g.js").then(Ue=>Ue.Z);return{getDocs:Ae}},[]),oe=fe(ee(C,"hiringRequests"),je("courierId","==",s.uid),je("status","==","accepted")),ke=(await de(oe)).docs.map(Ae=>Ae.data().restaurantId);$(ke)};Y(),te()},[s==null?void 0:s.uid]),l.useEffect(()=>{if(!(s!=null&&s.uid))return;const Y=fe(ee(C,"orders"),je("status","in",["ready"]),es("createdAt","desc"),js(50)),te=cs(Y,ge=>{const ke=ge.docs.map(Ae=>({id:Ae.id,...Ae.data()}));if(L.length>0){const Ae=ke.filter(Ue=>{var Ye,Qe;const _e=Ue.restaurantId||((Qe=(Ye=Ue.items)==null?void 0:Ye[0])==null?void 0:Qe.ownerId)||"";return L.includes(_e)});w(Ae)}else w([])}),de=fe(ee(C,"orders"),je("courierId","==",s.uid),es("createdAt","desc"),js(50)),oe=cs(de,ge=>{const ke=ge.docs.map(Ae=>({id:Ae.id,...Ae.data()}));U(ke),N(ke),k(ke)});return()=>{te(),oe()}},[s==null?void 0:s.uid,L]);const k=Y=>{const te=new Date,de=new Date(te.getFullYear(),te.getMonth(),te.getDate()),oe=new Date(de);oe.setDate(oe.getDate()-7);const ge=new Date(te.getFullYear(),te.getMonth(),1);let ke=0,Ae=0,Ue=0,_e=0,Ye=0,Qe=0,_s=0,Fs=0,lt=0,nt=0;Y.forEach(ds=>{var Xs,Zs;const bt=((Zs=(Xs=ds.createdAt)==null?void 0:Xs.toDate)==null?void 0:Zs.call(Xs))||new Date(ds.createdAt),Js=ds.deliveryFee||0,$s=ds.courierPlatformFee||Rt;ds.status==="out_for_delivery"&&nt++,ds.status==="delivered"&&(_s++,Fs+=Js,lt+=$s,bt>=de&&(ke++,Ae+=Js),bt>=oe&&(Ue++,_e+=Js),bt>=ge&&(Ye++,Qe+=Js))}),o({todayDeliveries:ke,todayEarnings:Ae,weekDeliveries:Ue,weekEarnings:_e,monthDeliveries:Ye,monthEarnings:Qe,totalDeliveries:_s,totalEarnings:Fs,totalPlatformFees:lt,netEarnings:Fs-lt,pendingOrders:r.length,activeOrders:nt})},h=async()=>{if(s!=null&&s.uid){f(!0);try{const Y=await Ce(J(C,"couriers",s.uid));Y.exists()&&F(Y.data());const te=fe(ee(C,"hiringRequests"),je("courierId","==",s.uid),je("status","==","accepted")),oe=(await be(te)).docs.map(ge=>ge.data().restaurantId);$(oe),a.success("ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«")}catch{a.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ«")}finally{f(!1)}}},S=async()=>{if(!(s!=null&&s.uid)||!g)return;const Y=!g.isAvailable;await me(J(C,"couriers",s.uid),{isAvailable:Y,updatedAt:X()}),F({...g,isAvailable:Y}),a.success(Y?"ğŸŸ¢ Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ù…ØªØ§Ø­ Ù„Ù„Ø·Ù„Ø¨Ø§Øª":"ğŸ”´ Ø£Ù†Øª Ø§Ù„Ø¢Ù† ØºÙŠØ± Ù…ØªØ§Ø­")},V=async(Y,te)=>{if(!s)return;if(!(g!=null&&g.isAvailable)){a.error("ÙØ¹Ù‘Ù„ Ø­Ø§Ù„Ø© Ø§Ù„ØªÙˆÙØ± Ø£ÙˆÙ„Ø§Ù‹");return}const de=(g==null?void 0:g.maxActiveOrders)||Gr,oe=D.filter(_e=>_e.status==="out_for_delivery"||_e.status==="accepted").length;if(oe>=de){i.warning(`Ù„Ø¯ÙŠÙƒ ${oe} Ø·Ù„Ø¨ Ù†Ø´Ø· Ø­Ø§Ù„ÙŠØ§Ù‹. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù‡Ùˆ ${de} Ø·Ù„Ø¨Ø§Øª.

Ø£ÙƒÙ…Ù„ Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù‚Ø¨Ù„ Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©.`,{title:"âš ï¸ ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø·Ù„Ø¨Ø§Øª"});return}const ge=E[Y],ke=te.deliveryFeeSetBy?te.deliveryFee||0:parseFloat(ge);if(!te.deliveryFeeSetBy&&(isNaN(ke)||ke<0)){a.error("Ø­Ø¯Ø¯ Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ Ø£ÙˆÙ„Ø§Ù‹");return}if(!(!await i.confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ø³ØªÙ„Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ØŸ

ğŸ“ ${te.address}
ğŸ’° Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„: ${te.deliveryFeeSetBy?te.deliveryFee:ke} Ø±.Ø³`,{title:"ğŸš— ØªØ£ÙƒÙŠØ¯ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨",confirmText:"Ù†Ø¹Ù…ØŒ Ù…ØªØ§Ø¨Ø¹Ø©",cancelText:"Ø¥Ù„ØºØ§Ø¡"})||!await i.confirm(`âš ï¸ ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ:

Ø¨Ø§Ø³ØªÙ„Ø§Ù…Ùƒ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ØŒ Ø£Ù†Øª Ù…Ù„ØªØ²Ù… Ø¨ØªÙˆØµÙŠÙ„Ù‡ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯.

â€¢ Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù†ØµØ©: ${Rt} Ø±.Ø³ Ø³ØªÙØ®ØµÙ… Ù…Ù† Ø£Ø±Ø¨Ø§Ø­Ùƒ
â€¢ Ù„Ø¯ÙŠÙƒ Ø­Ø§Ù„ÙŠØ§Ù‹ ${oe+1} Ù…Ù† ${de} Ø·Ù„Ø¨Ø§Øª Ù†Ø´Ø·Ø©`,{title:"âš¡ Ø§Ù„ØªØ²Ø§Ù… Ù†Ù‡Ø§Ø¦ÙŠ",confirmText:"âœ“ Ø£Ø³ØªÙ„Ù… Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†",cancelText:"ØªØ±Ø§Ø¬Ø¹",dangerous:!1}))){z(Y);try{await zc(C,async Ye=>{const Qe=J(C,"orders",Y),_s=await Ye.get(Qe);if(!_s.exists())throw new Error("Ø§Ù„Ø·Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");const Fs=_s.data();if(Fs.courierId)throw new Error("ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ù‚Ø¨Ù„ Ù…Ù†Ø¯ÙˆØ¨ Ø¢Ø®Ø±");if(Fs.status!=="ready")throw new Error("Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù… ÙŠØ¹Ø¯ Ù…ØªØ§Ø­Ø§Ù‹ Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù…");const nt=(te.total||te.subtotal)+ke,ds={courierId:s.uid,status:"out_for_delivery",courierPlatformFee:Rt,"timestamps.pickedUpAt":X(),updatedAt:X()};te.deliveryFeeSetBy||(ds.deliveryFee=ke,ds.deliveryFeeSetBy="courier",ds.deliveryFeeSetAt=X(),ds.total=nt),Ye.update(Qe,ds)});const _e=v.find(Ye=>Ye.id===Y)||r.find(Ye=>Ye.id===Y);_e&&qi(_e.customerId,Y,(g==null?void 0:g.name)||"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"),a.success(te.deliveryFeeSetBy?"ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨!":`ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨! Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„: ${ke} Ø±.Ø³`)}catch(_e){console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨:",_e),a.error(_e.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨")}finally{z(null)}}},Q=async Y=>{if(!await i.confirm("Ù‡Ù„ ØªÙ… ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­ØŸ",{title:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…",confirmText:"Ù†Ø¹Ù…ØŒ ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…",cancelText:"Ø¥Ù„ØºØ§Ø¡"}))return;const de=D.find(oe=>oe.id===Y);if(await me(J(C,"orders",Y),{status:"delivered",deliveredAt:X(),"timestamps.deliveredAt":X(),updatedAt:X()}),de){zi(de.customerId,Y,de.restaurantName||"Ø§Ù„Ù…Ø·Ø¹Ù…");try{const{notifyAdminSuccessfulOrder:oe}=await qs(async()=>{const{notifyAdminSuccessfulOrder:ge}=await Promise.resolve().then(()=>Ca);return{notifyAdminSuccessfulOrder:ge}},void 0);await oe(Y,de.restaurantName||"Ø§Ù„Ù…Ø·Ø¹Ù…","Ø§Ù„Ø¹Ù…ÙŠÙ„",de.total||0,de.platformFee||0)}catch(oe){console.warn("âš ï¸ ØªØ¹Ø°Ø± Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:",oe)}}a.success("ØªÙ… ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­! âœ…")},ie=Y=>{var te,de;return Y.status!=="delivered"?!1:!((de=(te=Y.ratings)==null?void 0:te.courierToCustomer)!=null&&de.stars)},re=async(Y,te)=>{var de,oe,ge,ke;try{const Ae=J(C,"orders",Y),Ue=await Ce(Ae);if(!Ue.exists())return;const Qe={...Ue.data().ratings||{},courierToCustomer:te},_s=((de=Qe.customerToRestaurant)==null?void 0:de.stars)&&((oe=Qe.customerToCourier)==null?void 0:oe.stars)&&((ge=Qe.restaurantToCustomer)==null?void 0:ge.stars)&&((ke=Qe.courierToCustomer)==null?void 0:ke.stars);await me(Ae,{ratings:Qe,ratingCompleted:_s,updatedAt:X()}),a.success("Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ùƒ! â­"),M({isOpen:!1,orderId:""})}catch{a.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…")}},ye=async Y=>{if(s!=null&&s.uid){P(!0);try{await me(J(C,"couriers",s.uid),{...Y,updatedAt:X()}),F(te=>te?{...te,...Y}:null),a.success("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}catch{a.error("Ø­Ø¯Ø« Ø®Ø·Ø£")}P(!1)}},ue=async(Y,te)=>{if(s!=null&&s.uid){I(Y);try{const de=As(kt,`couriers/${s.uid}/${Y}_${Date.now()}`);await Nt(de,te);const oe=await Is(de),ke={[`${Y}Url`]:oe,documentsStatus:"pending"};await ye(ke),a.success("ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø¨Ù†Ø¬Ø§Ø­")}catch{a.error("ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯")}I(null)}},_=()=>{y({name:(g==null?void 0:g.name)||"",phone:(g==null?void 0:g.phone)||"",city:(g==null?void 0:g.city)||"",bankName:(g==null?void 0:g.bankName)||"",bankAccountName:(g==null?void 0:g.bankAccountName)||"",bankAccountNumber:(g==null?void 0:g.bankAccountNumber)||"",maxActiveOrders:(g==null?void 0:g.maxActiveOrders)||Gr}),x(!0)};if(O)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-sky-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]})});const se=[{id:"dashboard",label:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",icon:xt},{id:"orders",label:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",icon:Me},{id:"history",label:"Ø§Ù„Ø³Ø¬Ù„",icon:$t},{id:"earnings",label:"Ø§Ù„Ø£Ø±Ø¨Ø§Ø­",icon:is},{id:"profile",label:"Ø­Ø³Ø§Ø¨ÙŠ",icon:ms}],pe=Y=>{var te,de;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all border border-gray-100",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 flex items-center justify-between",children:[e.jsxs("span",{className:"text-white font-bold",children:["#",Y.id.slice(-6)]}),e.jsx("span",{className:"text-white/90 text-sm",children:Y.restaurantName||"Ù…Ø·Ø¹Ù…"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(ya,{order:Y,type:"pickup",compact:!0})}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:Y.address})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 mb-3 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),e.jsxs("span",{className:"font-semibold",children:[(te=Y.subtotal)==null?void 0:te.toFixed(2)," Ø±.Ø³"]})]}),Y.deliveryFeeSetBy?e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[(de=Y.deliveryFee)==null?void 0:de.toFixed(2)," Ø±.Ø³"]})]}):e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx("span",{className:"text-amber-600 text-xs",children:"ØªØ­Ø¯Ø¯Ù‡Ø§ Ø£Ù†Øª"})]})]}),!Y.deliveryFeeSetBy&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Rs,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"font-semibold text-amber-800 text-sm",children:"Ø­Ø¯Ø¯ Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"0",step:"0.5",placeholder:"Ù…Ø«Ø§Ù„: 10",value:E[Y.id]||"",onChange:oe=>A(ge=>({...ge,[Y.id]:oe.target.value})),className:"flex-1 px-3 py-2 rounded-lg border border-amber-200 focus:border-amber-400 focus:outline-none text-sm"}),e.jsx("span",{className:"flex items-center text-gray-500 text-sm",children:"Ø±.Ø³"})]}),e.jsxs("p",{className:"text-xs text-amber-700 mt-2",children:["âš ï¸ Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù†ØµØ©: ",Rt," Ø±.Ø³ Ù„ÙƒÙ„ Ø·Ù„Ø¨"]})]}),e.jsx("button",{onClick:()=>V(Y.id,Y),disabled:j===Y.id||!(g!=null&&g.isAvailable),className:`w-full py-3 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 
                     text-white font-bold flex items-center justify-center gap-2
                     hover:from-gray-900 hover:to-black transition-all shadow-lg disabled:opacity-50`,children:j===Y.id?e.jsx("span",{children:"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸..."}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ ğŸš—"})]})})]})]},Y.id)},le=Y=>{var te,de;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden border-2 border-sky-200",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-blue-500 px-4 py-2 flex items-center justify-between",children:[e.jsxs("span",{className:"text-white font-bold",children:["#",Y.id.slice(-6)]}),e.jsxs("div",{className:"flex items-center gap-1 text-white/90 text-sm",children:[e.jsx(Ge,{className:"w-3 h-3"}),e.jsx("span",{children:"ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(ya,{order:Y,type:"delivery"})}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:Y.address})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[e.jsx(Zt,{className:"w-5 h-5"}),e.jsxs("span",{children:[(de=(te=Y.total)==null?void 0:te.toFixed)==null?void 0:de.call(te,2)," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>t(`/chat?orderId=${Y.id}`),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-primary to-accent 
                       text-white font-bold flex items-center justify-center gap-2`,children:[e.jsx(Gs,{className:"w-5 h-5"}),e.jsx("span",{children:"Ù…Ø­Ø§Ø¯Ø«Ø© ğŸ’¬"})]}),e.jsxs("button",{onClick:()=>Q(Y.id),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 
                       text-white font-bold flex items-center justify-center gap-2`,children:[e.jsx(Ie,{className:"w-5 h-5"}),e.jsx("span",{children:"ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ… âœ…"})]})]})]})]},Y.id)},G=()=>{var Y;return e.jsxs("div",{className:"space-y-6",children:[((Y=g==null?void 0:g.points)==null?void 0:Y.isSuspended)&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-300 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center",children:e.jsx(el,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-red-700",children:"â›” Ø­Ø³Ø§Ø¨Ùƒ Ù…ÙˆÙ‚ÙˆÙ!"}),e.jsx("p",{className:"text-sm text-red-600",children:"Ù„Ù† ØªØ³ØªØ·ÙŠØ¹ Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©. ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ."})]})]}),e.jsx("button",{onClick:()=>t("/support"),className:"w-full mt-3 py-2 bg-red-500 text-white rounded-xl font-bold",children:"ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… â†"})]}),(g==null?void 0:g.points)&&!g.points.isSuspended&&e.jsxs("div",{className:`rounded-2xl p-4 border-2 ${g.points.currentPoints<hs.WARNING_THRESHOLD?"bg-amber-50 border-amber-300":"bg-sky-50 border-sky-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(us,{className:`w-6 h-6 ${g.points.currentPoints<hs.WARNING_THRESHOLD?"text-amber-500":"text-sky-500"}`}),e.jsx("span",{className:"font-bold text-gray-700",children:"Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‚Ø§Ø·"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-2xl font-bold ${g.points.currentPoints<hs.WARNING_THRESHOLD?"text-amber-600":"text-sky-600"}`,children:g.points.currentPoints}),e.jsxs("span",{className:"text-gray-400",children:["/ ",hs.STARTING_POINTS]})]})]}),g.points.currentPoints<hs.WARNING_THRESHOLD&&e.jsx("p",{className:"text-sm text-amber-600 mt-2",children:"âš ï¸ Ù†Ù‚Ø§Ø·Ùƒ Ù…Ù†Ø®ÙØ¶Ø©! Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¬ÙˆØ¯Ø© Ø§Ù„Ø®Ø¯Ù…Ø©."})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-sky-50 border border-blue-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Jt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-blue-800",children:"ğŸš— Ø£Ù†Øª Ù…Ù†Ø¯ÙˆØ¨ Ù…Ø³ØªÙ‚Ù„ (Ø¹Ù…Ù„ Ø­Ø±)"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"ØªØ¹Ù…Ù„ Ø¨Ø­Ø±ÙŠØ© ÙƒØ§Ù…Ù„Ø© Ø¨Ø¯ÙˆÙ† Ø¯ÙˆØ§Ù… Ø£Ùˆ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª ÙˆØ¸ÙŠÙÙŠØ©. Ø§Ø³ØªÙ„Ù… Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙŠ ØªÙ†Ø§Ø³Ø¨Ùƒ ÙˆØ§Ø­ØªÙØ¸ Ø¨Ø£Ø±Ø¨Ø§Ø­Ùƒ."})]})]})}),e.jsx("button",{onClick:S,className:`w-full py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 transition-all shadow-lg ${g!=null&&g.isAvailable?"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700":"bg-gradient-to-r from-gray-400 to-gray-500 text-white hover:from-gray-500 hover:to-gray-600"}`,children:g!=null&&g.isAvailable?e.jsxs(e.Fragment,{children:[e.jsx(ro,{className:"w-6 h-6"}),e.jsx("span",{children:"ğŸŸ¢ Ù…ØªØ§Ø­ Ù„Ù„Ø·Ù„Ø¨Ø§Øª"})]}):e.jsxs(e.Fragment,{children:[e.jsx(lo,{className:"w-6 h-6"}),e.jsx("span",{children:"ğŸ”´ ØºÙŠØ± Ù…ØªØ§Ø­"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-blue-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Me,{className:"w-5 h-5 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"Ø·Ù„Ø¨Ø§Øª Ø¬Ø§Ù‡Ø²Ø©"})]}),e.jsx("div",{className:"text-3xl font-bold",children:r.length})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ve,{className:"w-5 h-5 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„"})]}),e.jsx("div",{className:"text-3xl font-bold",children:m.activeOrders})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Zt,{className:"w-5 h-5 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙŠÙˆÙ…"})]}),e.jsxs("div",{className:"text-3xl font-bold",children:[m.todayEarnings.toFixed(0),e.jsx("span",{className:"text-lg",children:" Ø±.Ø³"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ie,{className:"w-5 h-5 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"ØªØ³Ù„ÙŠÙ…Ø§Øª Ø§Ù„ÙŠÙˆÙ…"})]}),e.jsx("div",{className:"text-3xl font-bold",children:m.todayDeliveries})]})]}),(g==null?void 0:g.documentsStatus)!=="approved"&&e.jsx("div",{className:`rounded-2xl p-4 ${(g==null?void 0:g.documentsStatus)==="rejected"?"bg-red-50 border border-red-200":"bg-amber-50 border border-amber-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${(g==null?void 0:g.documentsStatus)==="rejected"?"bg-red-500":"bg-amber-500"}`,children:e.jsx(vs,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:(g==null?void 0:g.documentsStatus)==="rejected"?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-red-700",children:"âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª"}),e.jsx("p",{className:"text-sm text-red-600",children:g.documentsNotes||"ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ù…Ø³ØªÙ†Ø¯Ø§Øª ØµØ§Ù„Ø­Ø©"})]}):(g==null?void 0:g.documentsStatus)==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-amber-700",children:"â³ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"}),e.jsx("p",{className:"text-sm text-amber-600",children:"Ø³ÙŠØªÙ… Ø¥Ø´Ø¹Ø§Ø±Ùƒ Ø¨Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-amber-700",children:"ğŸ“„ Ø§Ø±ÙØ¹ Ù…Ø³ØªÙ†Ø¯Ø§ØªÙƒ"}),e.jsx("p",{className:"text-sm text-amber-600",children:"Ù„ØªÙˆØ«ÙŠÙ‚ Ø­Ø³Ø§Ø¨Ùƒ ÙˆØ²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚ÙŠØ©"})]})}),e.jsx("button",{onClick:()=>u("profile"),className:"text-sm font-bold text-amber-700 underline",children:"Ø±ÙØ¹"})]})}),D.filter(te=>te.status==="out_for_delivery").length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(at,{className:"w-5 h-5 text-sky-500"}),"Ø·Ù„Ø¨Ø§ØªÙŠ Ø§Ù„Ù†Ø´Ø·Ø©"]}),e.jsx("div",{className:"space-y-3",children:D.filter(te=>te.status==="out_for_delivery").map(le)})]}),(g==null?void 0:g.isAvailable)&&r.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-purple-500"}),"Ø·Ù„Ø¨Ø§Øª Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙˆØµÙŠÙ„ (",r.length,")"]}),e.jsxs("div",{className:"space-y-3",children:[r.slice(0,3).map(pe),r.length>3&&e.jsxs("button",{onClick:()=>u("orders"),className:"w-full py-3 bg-gray-100 rounded-xl text-gray-600 font-semibold hover:bg-gray-200 transition",children:["Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ (",r.length,") â†"]})]})]})]})},Z=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(at,{className:"w-5 h-5 text-sky-500"}),"Ø·Ù„Ø¨Ø§ØªÙŠ Ø§Ù„Ù†Ø´Ø·Ø© (",D.filter(Y=>Y.status==="out_for_delivery").length,")"]}),D.filter(Y=>Y.status==="out_for_delivery").length>0?e.jsx("div",{className:"space-y-3",children:D.filter(Y=>Y.status==="out_for_delivery").map(le)}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-2xl",children:[e.jsx(Ve,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù†Ø´Ø·Ø©"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-purple-500"}),"Ø·Ù„Ø¨Ø§Øª Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙˆØµÙŠÙ„ (",r.length,")"]}),r.length>0?e.jsx("div",{className:"space-y-3",children:r.map(pe)}):L.length===0?e.jsxs("div",{className:"text-center py-8 bg-amber-50 rounded-2xl border border-amber-200",children:[e.jsx(Jt,{className:"w-12 h-12 text-amber-400 mx-auto mb-2"}),e.jsx("p",{className:"text-amber-700 font-medium",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø± Ù…Ù†ØªØ¬Ø© Ù‚Ø¨Ù„Øª Ø·Ù„Ø¨ ØªÙˆØ¸ÙŠÙÙƒ"}),e.jsx("p",{className:"text-amber-600 text-sm mt-1",children:'ØªÙ‚Ø¯Ù… Ù„Ø·Ù„Ø¨Ø§Øª ØªÙˆØ¸ÙŠÙ Ù…Ù† ØµÙØ­Ø© "Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØ¸ÙŠÙ"'})]}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-2xl",children:[e.jsx(Me,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¬Ø§Ù‡Ø²Ø© Ø­Ø§Ù„ÙŠØ§Ù‹"})]})]})]}),ne=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx($t,{className:"w-5 h-5 text-gray-500"}),"Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[v.filter(Y=>Y.status==="delivered").length," Ø·Ù„Ø¨"]})]}),v.filter(Y=>Y.status==="delivered").length>0?e.jsx("div",{className:"space-y-3",children:v.filter(Y=>Y.status==="delivered").map(Y=>{var te,de,oe,ge,ke;return e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-bold text-gray-800",children:["#",Y.id.slice(-6)]}),e.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs font-bold",children:"âœ… ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:Y.address})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsx("div",{className:"text-sm text-gray-500",children:((de=(te=Y.createdAt)==null?void 0:te.toDate)==null?void 0:de.call(te).toLocaleDateString("ar-SA"))||""}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-green-600 font-bold",children:[(oe=Y.deliveryFee)==null?void 0:oe.toFixed(2)," Ø±.Ø³"]}),e.jsxs("span",{className:"text-red-500 text-sm",children:["-",Rt," Ø±Ø³ÙˆÙ…"]})]})]}),ie(Y)&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("button",{onClick:()=>M({isOpen:!0,orderId:Y.id}),className:`w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-sky-50 to-blue-50 
                               border-2 border-sky-200 rounded-xl hover:shadow-md transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ms,{className:"w-5 h-5 text-sky-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Ù‚ÙŠÙ‘Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ â­"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(Ae=>e.jsx(ls,{className:"w-4 h-4 text-gray-300 group-hover:text-sky-400 transition"},Ae))})]})}),((ke=(ge=Y.ratings)==null?void 0:ge.courierToCustomer)==null?void 0:ke.stars)&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 bg-green-50 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"ØªÙ‚ÙŠÙŠÙ…Ùƒ Ù„Ù„Ø¹Ù…ÙŠÙ„:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(Ae=>{var Ue,_e;return e.jsx(ls,{className:`w-4 h-4 ${Ae<=(((_e=(Ue=Y.ratings)==null?void 0:Ue.courierToCustomer)==null?void 0:_e.stars)||0)?"text-sky-400 fill-sky-400":"text-gray-300"}`},Ae)})})]})})]},Y.id)})}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx($t,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø³Ø§Ø¨Ù‚Ø©"})]})]}),ce=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-emerald-700 rounded-2xl p-5 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(is,{className:"w-6 h-6"}),e.jsx("h3",{className:"font-bold text-lg",children:"ğŸ’° Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"Ø§Ù„ÙŠÙˆÙ…"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.todayEarnings.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"Ø±.Ø³"})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[m.todayDeliveries," ØªÙˆØµÙŠÙ„"]})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.weekEarnings.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"Ø±.Ø³"})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[m.weekDeliveries," ØªÙˆØµÙŠÙ„"]})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"Ø§Ù„Ø´Ù‡Ø±"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.monthEarnings.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"Ø±.Ø³"})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[m.monthDeliveries," ØªÙˆØµÙŠÙ„"]})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 ring-2 ring-white/30",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.totalEarnings.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"Ø±.Ø³"})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[m.totalDeliveries," ØªÙˆØµÙŠÙ„"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Vs,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-bold text-gray-800",children:"ğŸ“Š ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[m.totalEarnings.toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù†ØµØ©"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["(",m.totalDeliveries," Ø·Ù„Ø¨ Ã— ",Rt," Ø±.Ø³)"]})]}),e.jsxs("span",{className:"font-bold text-red-600",children:["- ",m.totalPlatformFees.toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 bg-green-50 rounded-xl px-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx(is,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-bold text-green-800",children:"ØµØ§ÙÙŠ Ø£Ø±Ø¨Ø§Ø­Ùƒ"})]}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[m.netEarnings.toFixed(2)," Ø±.Ø³"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-sky-50 border border-blue-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ns,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-bold text-blue-800",children:"ğŸ¦ Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¨Ù†ÙƒÙŠ"})]}),g!=null&&g.bankName?e.jsxs("div",{className:"bg-white rounded-xl p-3 space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Ø§Ù„Ø¨Ù†Ùƒ:"})," ",e.jsx("span",{className:"font-semibold",children:g.bankName})]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Ø§Ù„Ø§Ø³Ù…:"})," ",e.jsx("span",{className:"font-semibold",children:g.bankAccountName})]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Ø§Ù„Ø¢ÙŠØ¨Ø§Ù†:"})," ",e.jsx("span",{className:"font-semibold",children:g.bankAccountNumber})]})]}):e.jsx("button",{onClick:()=>u("profile"),className:"w-full py-3 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition",children:"Ø£Ø¶Ù Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¨Ù†ÙƒÙŠ"}),e.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"ğŸ’¡ ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„ Ø£Ø±Ø¨Ø§Ø­Ùƒ Ø£Ø³Ø¨ÙˆØ¹ÙŠØ§Ù‹ Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¨Ù†ÙƒÙŠ"})]}),e.jsxs("button",{onClick:()=>t("/courier/wallet"),className:"w-full py-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-2xl font-bold hover:from-orange-600 hover:to-orange-700 transition flex items-center justify-center gap-2",children:[e.jsx(is,{className:"w-5 h-5"}),"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©"]})]}),Ne=()=>{var Y;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-5 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-sky-500 rounded-full -translate-y-1/2 translate-x-1/2"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-white/20 flex items-center justify-center overflow-hidden",children:g!=null&&g.photoUrl?e.jsx("img",{src:g.photoUrl,alt:"",className:"w-full h-full object-cover"}):e.jsx(ms,{className:"w-10 h-10 text-white/60"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:(g==null?void 0:g.name)||"Ù…Ù†Ø¯ÙˆØ¨"}),e.jsx("p",{className:"text-white/70 text-sm",children:(g==null?void 0:g.phone)||"Ù„Ù… ÙŠÙØ­Ø¯Ø¯"}),e.jsx("p",{className:"text-white/50 text-sm",children:(g==null?void 0:g.city)||"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-4 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:m.totalDeliveries}),e.jsx("p",{className:"text-white/60 text-xs",children:"ØªÙˆØµÙŠÙ„"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold flex items-center justify-center gap-1",children:[e.jsx(ls,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),((Y=g==null?void 0:g.rating)==null?void 0:Y.toFixed(1))||"5.0"]}),e.jsx("p",{className:"text-white/60 text-xs",children:"ØªÙ‚ÙŠÙŠÙ…"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:m.netEarnings.toFixed(0)}),e.jsx("p",{className:"text-white/60 text-xs",children:"Ø±.Ø³ Ø£Ø±Ø¨Ø§Ø­"})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-4 ${(g==null?void 0:g.documentsStatus)==="approved"?"bg-green-50 border border-green-200":(g==null?void 0:g.documentsStatus)==="rejected"?"bg-red-50 border border-red-200":"bg-amber-50 border border-amber-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${(g==null?void 0:g.documentsStatus)==="approved"?"bg-green-500":(g==null?void 0:g.documentsStatus)==="rejected"?"bg-red-500":"bg-amber-500"}`,children:e.jsx(us,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:`font-bold ${(g==null?void 0:g.documentsStatus)==="approved"?"text-green-700":(g==null?void 0:g.documentsStatus)==="rejected"?"text-red-700":"text-amber-700"}`,children:[(g==null?void 0:g.documentsStatus)==="approved"&&"âœ… Ø­Ø³Ø§Ø¨ Ù…ÙˆØ«Ù‚",(g==null?void 0:g.documentsStatus)==="rejected"&&"âŒ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù…Ø±ÙÙˆØ¶Ø©",(!(g!=null&&g.documentsStatus)||(g==null?void 0:g.documentsStatus)==="pending")&&"â³ Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØ«ÙŠÙ‚"]}),(g==null?void 0:g.documentsStatus)==="rejected"&&g.documentsNotes&&e.jsx("p",{className:"text-sm text-red-600",children:g.documentsNotes})]})]})}),q?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-gray-100",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("input",{type:"text",value:b.name||"",onChange:te=>y({...b,name:te.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„"}),e.jsx("input",{type:"tel",value:b.phone||"",onChange:te=>y({...b,phone:te.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400 focus:ring-2 focus:ring-sky-100",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"}),e.jsx("input",{type:"text",value:b.city||"",onChange:te=>y({...b,city:te.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-bold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4 text-orange-500"}),"Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ø³ØªÙŠØ¹Ø§Ø¨ÙŠØ©"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©"}),e.jsxs("select",{value:b.maxActiveOrders||Gr,onChange:te=>y({...b,maxActiveOrders:parseInt(te.target.value)}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400",children:[e.jsx("option",{value:1,children:"Ø·Ù„Ø¨ ÙˆØ§Ø­Ø¯"}),e.jsx("option",{value:2,children:"Ø·Ù„Ø¨Ø§Ù†"}),e.jsx("option",{value:3,children:"3 Ø·Ù„Ø¨Ø§Øª (Ø§ÙØªØ±Ø§Ø¶ÙŠ)"}),e.jsx("option",{value:4,children:"4 Ø·Ù„Ø¨Ø§Øª"}),e.jsx("option",{value:5,children:"5 Ø·Ù„Ø¨Ø§Øª"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ù„Ù† ØªØªÙ…ÙƒÙ† Ù…Ù† Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ø­ØªÙ‰ ØªÙ†Ù‡ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-bold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4 text-green-500"}),"Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("select",{value:b.bankName||"",onChange:te=>y({...b,bankName:te.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400",children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù†Ùƒ"}),e.jsx("option",{value:"Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ",children:"Ø¨Ù†Ùƒ Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ"}),e.jsx("option",{value:"Ø§Ù„Ø£Ù‡Ù„ÙŠ",children:"Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ"}),e.jsx("option",{value:"Ø§Ù„Ø¥Ù†Ù…Ø§Ø¡",children:"Ù…ØµØ±Ù Ø§Ù„Ø¥Ù†Ù…Ø§Ø¡"}),e.jsx("option",{value:"Ø§Ù„Ø±ÙŠØ§Ø¶",children:"Ø¨Ù†Ùƒ Ø§Ù„Ø±ÙŠØ§Ø¶"}),e.jsx("option",{value:"Ø§Ù„Ø¨Ù„Ø§Ø¯",children:"Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯"})]}),e.jsx("input",{type:"text",placeholder:"Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨",value:b.bankAccountName||"",onChange:te=>y({...b,bankAccountName:te.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200"}),e.jsx("input",{type:"text",placeholder:"Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ¨Ø§Ù† (IBAN)",value:b.bankAccountNumber||"",onChange:te=>y({...b,bankAccountNumber:te.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200",dir:"ltr"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{ye(b),x(!1)},disabled:T,className:"flex-1 py-3 bg-sky-500 text-white rounded-xl font-bold hover:bg-sky-600 transition disabled:opacity-50",children:T?"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸"}),e.jsx("button",{onClick:()=>x(!1),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold hover:bg-gray-300 transition",children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]}):e.jsxs("button",{onClick:_,className:"w-full py-3 bg-sky-500 text-white rounded-xl font-bold hover:bg-sky-600 transition flex items-center justify-center gap-2",children:[e.jsx(wa,{className:"w-5 h-5"}),"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5 text-gray-500"}),"Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ks,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"ØµÙˆØ±Ø© Ø§Ù„Ù‡ÙˆÙŠØ©"})]}),g!=null&&g.idCardUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:g.idCardUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 text-sm",children:"Ø¹Ø±Ø¶"}),e.jsx(Ie,{className:"w-5 h-5 text-green-500"})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:te=>{var de;return((de=te.target.files)==null?void 0:de[0])&&ue("idCard",te.target.files[0])}}),e.jsx("span",{className:"text-sky-600 text-sm font-bold",children:R==="idCard"?"Ø¬Ø§Ø±Ù Ø§Ù„Ø±ÙØ¹...":"Ø±ÙØ¹"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(no,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Ø±Ø®ØµØ© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©"})]}),g!=null&&g.driverLicenseUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:g.driverLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 text-sm",children:"Ø¹Ø±Ø¶"}),e.jsx(Ie,{className:"w-5 h-5 text-green-500"})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:te=>{var de;return((de=te.target.files)==null?void 0:de[0])&&ue("driverLicense",te.target.files[0])}}),e.jsx("span",{className:"text-sky-600 text-sm font-bold",children:R==="driverLicense"?"Ø¬Ø§Ø±Ù Ø§Ù„Ø±ÙØ¹...":"Ø±ÙØ¹"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vs,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø©"})]}),g!=null&&g.vehicleRegistrationUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:g.vehicleRegistrationUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 text-sm",children:"Ø¹Ø±Ø¶"}),e.jsx(Ie,{className:"w-5 h-5 text-green-500"})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:te=>{var de;return((de=te.target.files)==null?void 0:de[0])&&ue("vehicleRegistration",te.target.files[0])}}),e.jsx("span",{className:"text-sky-600 text-sm font-bold",children:R==="vehicleRegistration"?"Ø¬Ø§Ø±Ù Ø§Ù„Ø±ÙØ¹...":"Ø±ÙØ¹"})]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-50 border border-gray-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Jr,{className:"w-5 h-5 text-gray-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"ğŸ“‹ Ø¨ÙŠØ§Ù† Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø³ØªÙ‚Ù„:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-500",children:[e.jsx("li",{children:"Ø£Ù†Øª ØªØ¹Ù…Ù„ ÙƒÙ…Ù†Ø¯ÙˆØ¨ Ù…Ø³ØªÙ‚Ù„ (Freelancer) ÙˆÙ„ÙŠØ³ Ù…ÙˆØ¸ÙØ§Ù‹"}),e.jsx("li",{children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¯ÙˆØ§Ù… Ø«Ø§Ø¨Øª Ø£Ùˆ Ø³Ø§Ø¹Ø§Øª Ø¹Ù…Ù„ Ù…Ø­Ø¯Ø¯Ø©"}),e.jsx("li",{children:"Ø­Ø±ÙŠØ© ÙƒØ§Ù…Ù„Ø© ÙÙŠ Ù‚Ø¨ÙˆÙ„ Ø£Ùˆ Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsxs("li",{children:["Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù†ØµØ©: ",Rt," Ø±.Ø³ Ù„ÙƒÙ„ Ø·Ù„Ø¨"]}),e.jsx("li",{children:"Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙŠØªÙ… Ø¹Ø¨Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙ‚Ø·"})]})]})]})})]})};return e.jsxs("div",{className:"space-y-4 pb-24",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-6 h-6 text-sky-500"}),"Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"]}),e.jsx("button",{onClick:h,disabled:p,className:"p-2 bg-gray-100 rounded-xl hover:bg-gray-200 transition",children:e.jsx(ze,{className:`w-5 h-5 text-gray-600 ${p?"animate-spin":""}`})})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-4 px-4",children:se.map(Y=>{const te=Y.icon;return e.jsxs("button",{onClick:()=>u(Y.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold whitespace-nowrap transition ${c===Y.id?"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(te,{className:"w-4 h-4"}),Y.label]},Y.id)})}),c==="dashboard"&&G(),c==="orders"&&Z(),c==="history"&&ne(),c==="earnings"&&ce(),c==="profile"&&Ne(),e.jsx(Dl,{isOpen:d.isOpen,onClose:()=>M({isOpen:!1,orderId:""}),onSubmit:Y=>re(d.orderId,Y),type:"customer",orderId:d.orderId})]})},Pm=()=>{const{user:s}=Ee(),t=Ps(),[a,i]=l.useState([]),[c,u]=l.useState({}),[r,w]=l.useState(!0),[D,U]=l.useState(null);l.useEffect(()=>{if(!s)return;(async()=>{const A=(await be(ee(C,"restaurants"))).docs.map(f=>({id:f.id,...f.data()}));i(A);const j=fe(ee(C,"hiringRequests"),je("courierId","==",s.uid)),z=await be(j),p={};z.docs.forEach(f=>{const L=f.data();p[L.restaurantId]={restaurantId:L.restaurantId,status:L.status}}),u(p),w(!1)})()},[s]);const v=async N=>{if(!s){t.warning("Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹");return}U(N.id),await Pe(ee(C,"hiringRequests"),{courierId:s.uid,courierName:s.displayName||"Ù…Ù†Ø¯ÙˆØ¨",restaurantId:N.id,restaurantName:N.name,status:"pending",createdAt:X()}),u(E=>({...E,[N.id]:{restaurantId:N.id,status:"pending"}})),U(null)};return r?e.jsx("div",{className:"text-center py-10 text-sky-600",children:"â³ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…..."}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 py-8 px-4",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold text-sky-600 text-center mb-8 flex items-center justify-center gap-2",children:[e.jsx(Jt,{className:"w-7 h-7 text-sky-500"}),"Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØ¸ÙŠÙ"]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto",children:a.map(N=>{const E=c[N.id];return e.jsxs("div",{className:"glass-card rounded-2xl p-6 hover:shadow-xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[N.logoUrl?e.jsx("img",{src:N.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-sky-300 shadow"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-sky-100 flex items-center justify-center text-3xl mb-4",children:"ğŸ´"}),e.jsx("h3",{className:"font-bold text-lg mb-2 text-sky-900",children:N.name}),E?e.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${E.status==="pending"?"bg-amber-100 text-amber-700 border border-amber-200":E.status==="accepted"?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:[E.status==="pending"&&e.jsx(Ge,{className:"w-4 h-4"}),E.status==="accepted"&&e.jsx(io,{className:"w-4 h-4"}),E.status==="rejected"&&e.jsx(rt,{className:"w-4 h-4"}),E.status==="pending"?"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©":E.status==="accepted"?"âœ… ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„":"âŒ Ù…Ø±ÙÙˆØ¶"]}):e.jsx("button",{disabled:D===N.id,onClick:()=>v(N),className:"mt-4 w-full px-4 py-2 rounded-xl bg-gradient-to-r from-sky-500 to-sky-600 text-white font-bold shadow-lg shadow-sky-200/50 hover:shadow-xl hover:scale-105 transition disabled:opacity-50",children:D===N.id?"â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"ğŸ“© Ø·Ù„Ø¨ ØªÙˆØ¸ÙŠÙ"})]},N.id)})})]})},_m=[{text:"Ø£ÙŠÙ† ÙˆØµÙ„ØªØŸ ğŸ“",emoji:"ğŸ“"},{text:"Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ğŸ’™",emoji:"ğŸ’™"},{text:"Ø®Ø° Ø±Ø§Ø­ØªÙƒ ğŸ˜Š",emoji:"ğŸ˜Š"},{text:"Ø£Ù†Ø§ Ø¨Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± â³",emoji:"â³"},{text:"ØªÙ…Ø§Ù… ğŸ‘",emoji:"ğŸ‘"},{text:"Ù…Ù…ØªØ§Ø²! â­",emoji:"â­"}],Fm=[{text:"ÙƒÙ… Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©ØŸ â±ï¸",emoji:"â±ï¸"},{text:"Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ…! ğŸ’™",emoji:"ğŸ’™"},{text:"Ù‡Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¬Ø§Ù‡Ø²ØŸ ğŸ“¦",emoji:"ğŸ“¦"},{text:"Ø£Ø­ØªØ§Ø¬ ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨ ğŸ“",emoji:"ğŸ“"},{text:"Ù…Ù…ØªØ§Ø²! â­",emoji:"â­"},{text:"ØªÙ…Ø§Ù… ğŸ‘",emoji:"ğŸ‘"}],$m=[{text:"ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø¥Ù„ÙŠÙƒ! ğŸš—",emoji:"ğŸš—"},{text:"ÙˆØµÙ„Øª! ğŸ“",emoji:"ğŸ“"},{text:"Ø¯Ù‚Ø§Ø¦Ù‚ ÙˆØ£ÙˆØµÙ„ â±ï¸",emoji:"â±ï¸"},{text:"Ø£Ø­ØªØ§Ø¬ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ğŸ“Œ",emoji:"ğŸ“Œ"},{text:"Ø§ØªØµÙ„ Ø¨ÙŠ ğŸ“",emoji:"ğŸ“"},{text:"Ø´ÙƒØ±Ø§Ù‹ Ù„Ø·Ù„Ø¨Ùƒ! ğŸ™",emoji:"ğŸ™"}],Om=[{text:"Ø·Ù„Ø¨Ùƒ Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ± ğŸ‘¨â€ğŸ³",emoji:"ğŸ‘¨â€ğŸ³"},{text:"Ø§Ù„Ø·Ù„Ø¨ Ø¬Ø§Ù‡Ø²! ğŸ“¦",emoji:"ğŸ“¦"},{text:"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ ğŸš—",emoji:"ğŸš—"},{text:"Ø´ÙƒØ±Ø§Ù‹ Ù„Ø·Ù„Ø¨Ùƒ! ğŸ™",emoji:"ğŸ™"},{text:"Ù†Ø¹ØªØ°Ø± Ø¹Ù† Ø§Ù„ØªØ£Ø®ÙŠØ± â³",emoji:"â³"},{text:"ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ âœ…",emoji:"âœ…"}],Lm=["ğŸ˜Š","ğŸ‘","â¤ï¸","ğŸ”¥","â­","ğŸ™","ğŸ’ª","ğŸ‰","â˜•","ğŸ•","ğŸš—","ğŸ“"],Mm=()=>{const[s]=Aa(),t=s.get("orderId"),a=os(),{user:i,role:c}=Ee(),u=He(),[r,w]=l.useState(null),[D,U]=l.useState([]),[v,N]=l.useState(""),[E,A]=l.useState(!1),[j,z]=l.useState(!1),[p,f]=l.useState(""),L=l.useRef(null),$=c==="courier",g=c==="owner",F=c==="customer"||c==="admin",O=r&&!r.courierId&&r.restaurantId,T=$?$m:g?Om:F&&O?Fm:_m;l.useEffect(()=>{if(!t)return;const b=cs(J(C,"orders",t),y=>{if(y.exists()){const d=y.data();w({id:y.id,status:d.status,address:d.address,total:d.total,customerId:d.customerId,courierId:d.courierId,restaurantId:d.restaurantId,restaurantName:d.restaurantName})}});return()=>b()},[t]),l.useEffect(()=>{if(!r)return;let b,y="customer";if($||g?(b=r.customerId,y="customer"):F&&(r.courierId?(b=r.courierId,y="courier"):r.restaurantId&&(b=r.restaurantId,y="restaurant")),!b){f(O?r.restaurantName||"Ø§Ù„Ù…Ø·Ø¹Ù…":"ØºÙŠØ± Ù…Ø­Ø¯Ø¯");return}y==="restaurant"?Ce(J(C,"restaurants",b)).then(d=>{var M;d.exists()?f(((M=d.data())==null?void 0:M.name)||"Ø§Ù„Ù…Ø·Ø¹Ù…"):f(r.restaurantName||"Ø§Ù„Ù…Ø·Ø¹Ù…")}):Ce(J(C,"users",b)).then(d=>{var M;if(d.exists()){const k=y==="courier"?"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨":"Ø§Ù„Ø¹Ù…ÙŠÙ„";f(((M=d.data())==null?void 0:M.name)||k)}})},[r,$,g,F,O]),l.useEffect(()=>{if(!t)return;const b=fe(ee(C,"orders",t,"messages"),es("createdAt","asc")),y=cs(b,d=>{U(d.docs.map(M=>({id:M.id,...M.data()})))});return()=>y()},[t]),l.useEffect(()=>{var b;(b=L.current)==null||b.scrollIntoView({behavior:"smooth"})},[D]);const P=async b=>{if(!(!b.trim()||!i||!t)){A(!0);try{let y="customer";$?y="courier":g&&(y="owner"),await Pe(ee(C,"orders",t,"messages"),{text:b.trim(),senderId:i.uid,senderRole:y,createdAt:X()});try{const{notifyNewMessage:d}=await qs(async()=>{const{notifyNewMessage:h}=await Promise.resolve().then(()=>Ca);return{notifyNewMessage:h}},void 0);let M,k="customer";$||g?(M=r==null?void 0:r.customerId,k="customer"):F&&r&&(r.courierId?(M=r.courierId,k="courier"):r.restaurantId&&(M=r.restaurantId,k="owner")),M&&await d(M,k,g?"Ø§Ù„Ù…Ø·Ø¹Ù…":$?"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨":"Ø§Ù„Ø¹Ù…ÙŠÙ„",t,b.trim())}catch(d){console.warn("âš ï¸ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø±Ø³Ø§Ù„Ø©:",d)}N(""),z(!1)}catch{u.error("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©")}A(!1)}},m=b=>{N(y=>y+b)},o=b=>b?b.toDate().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"",R=b=>({pending:{text:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",color:"bg-yellow-500",emoji:"â³"},accepted:{text:"ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„",color:"bg-blue-500",emoji:"âœ…"},preparing:{text:"Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±",color:"bg-orange-500",emoji:"ğŸ‘¨â€ğŸ³"},ready:{text:"Ø¬Ø§Ù‡Ø²",color:"bg-purple-500",emoji:"ğŸ“¦"},out_for_delivery:{text:"ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚",color:"bg-sky-500",emoji:"ğŸš—"},delivered:{text:"ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…",color:"bg-green-500",emoji:"âœ…"}})[b]||{text:b,color:"bg-gray-500",emoji:"ğŸ“¦"},I=()=>$||g?"ğŸ‘¤":O?"ğŸ½ï¸":"ğŸš—";if(!t)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Gs,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨"})]})});if(!r)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]})});if(!((i==null?void 0:i.uid)===r.customerId||(i==null?void 0:i.uid)===r.courierId||(i==null?void 0:i.uid)===r.restaurantId))return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ğŸ”’"}),e.jsx("p",{className:"text-gray-500",children:"Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©"})]})});const x=R(r.status);return e.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] max-w-2xl mx-auto",children:[e.jsxs("div",{className:`bg-gradient-to-r ${O?"from-orange-500 via-amber-500 to-yellow-500":"from-primary via-sky-500 to-accent"} rounded-t-3xl p-4 shadow-luxury`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>a(-1),className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur flex items-center justify-center hover:bg-white/30 transition-all",children:e.jsx(Es,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:I()})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-white text-lg",children:p||(O?"Ø§Ù„Ù…Ø·Ø¹Ù…":$||g?"Ø§Ù„Ø¹Ù…ÙŠÙ„":"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨")}),e.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-sm",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${r.status==="delivered"?"bg-green-400":"bg-yellow-400 animate-pulse"}`}),e.jsxs("span",{children:[x.emoji," ",x.text]})]})]})]})}),O?e.jsx(Le,{className:"w-6 h-6 text-white animate-pulse"}):e.jsx(ps,{className:"w-6 h-6 text-yellow-300 animate-pulse"})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-white/90 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsxs("span",{children:["#",r.id.slice(-6)]})]}),r.restaurantName&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{children:r.restaurantName})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate max-w-[150px]",children:r.address})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto bg-gradient-to-b from-sky-50 to-white p-4 space-y-3",children:[D.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ğŸ’¬"}),e.jsx("p",{className:"text-gray-500",children:"Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø¢Ù†!"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù„ØªÙˆØ§ØµÙ„"})]}),D.map((b,y)=>{const d=b.senderId===(i==null?void 0:i.uid);return e.jsx("div",{className:`flex ${d?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`
                  max-w-[80%] rounded-2xl px-4 py-3 shadow-md
                  ${d?"bg-gradient-to-br from-primary to-sky-600 text-white rounded-bl-sm":"bg-white text-gray-800 rounded-br-sm border border-gray-100"}
                  transform transition-all duration-300 hover:scale-[1.02]
                `,children:[e.jsx("p",{className:"text-base leading-relaxed",children:b.text}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs ${d?"text-white/70":"text-gray-400"}`,children:[e.jsx(Ge,{className:"w-3 h-3"}),e.jsx("span",{children:o(b.createdAt)}),d&&e.jsx(on,{className:"w-3 h-3 mr-1"})]})]})},b.id)}),e.jsx("div",{ref:L})]}),e.jsx("div",{className:"bg-white border-t border-gray-100 px-3 py-2",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:T.map((b,y)=>e.jsx("button",{onClick:()=>P(b.text),className:`flex-shrink-0 px-4 py-2 bg-gradient-to-r from-sky-50 to-blue-50 
                         rounded-full text-sm text-primary font-medium border border-sky-100
                         hover:from-sky-100 hover:to-blue-100 hover:shadow-md 
                         transition-all duration-200 active:scale-95`,children:b.text},y))})}),j&&e.jsx("div",{className:"bg-white border-t border-gray-100 px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:Lm.map((b,y)=>e.jsx("button",{onClick:()=>m(b),className:`w-10 h-10 text-2xl hover:bg-gray-100 rounded-full 
                           transition-all duration-200 hover:scale-125 active:scale-95`,children:b},y))})}),e.jsx("div",{className:"bg-white border-t border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>z(!j),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all
                       ${j?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(co,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 relative",children:e.jsx("input",{type:"text",value:v,onChange:b=>N(b.target.value),onKeyPress:b=>b.key==="Enter"&&P(v),placeholder:"Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...",className:`w-full px-5 py-3 bg-gray-100 rounded-full text-gray-800 
                         placeholder-gray-400 focus:outline-none focus:ring-2 
                         focus:ring-primary/50 focus:bg-white transition-all`})}),e.jsx("button",{onClick:()=>P(v),disabled:!v.trim()||E,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all
                       ${v.trim()?"bg-gradient-to-r from-primary to-accent text-white shadow-lg hover:shadow-xl hover:scale-105":"bg-gray-200 text-gray-400"}
                       disabled:opacity-50 active:scale-95`,children:e.jsx(ra,{className:"w-5 h-5"})})]})}),r.status==="delivered"&&e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-white",children:[e.jsx(on,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold",children:"ØªÙ… ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰"}),e.jsx(ht,{className:"w-5 h-5 text-red-300 animate-pulse"})]}),e.jsx("p",{className:"text-white/80 text-sm mt-1",children:"Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ ØªØ·Ø¨ÙŠÙ‚Ù†Ø§ â­"})]})]})},Fn={order_ready:{icon:e.jsx(Me,{className:"w-5 h-5"}),bgColor:"bg-green-100",textColor:"text-green-600"},order_delivered:{icon:e.jsx(Ie,{className:"w-5 h-5"}),bgColor:"bg-emerald-100",textColor:"text-emerald-600"},order_accepted:{icon:e.jsx(bs,{className:"w-5 h-5"}),bgColor:"bg-blue-100",textColor:"text-blue-600"},courier_assigned:{icon:e.jsx(Ve,{className:"w-5 h-5"}),bgColor:"bg-sky-100",textColor:"text-sky-600"},nearby_offer:{icon:e.jsx(Ze,{className:"w-5 h-5"}),bgColor:"bg-purple-100",textColor:"text-purple-600"},discount:{icon:e.jsx(aa,{className:"w-5 h-5"}),bgColor:"bg-rose-100",textColor:"text-rose-600"},new_menu_item:{icon:e.jsx(ps,{className:"w-5 h-5"}),bgColor:"bg-amber-100",textColor:"text-amber-600"},default:{icon:e.jsx(yt,{className:"w-5 h-5"}),bgColor:"bg-gray-100",textColor:"text-gray-600"}},Um=()=>{const{user:s}=Ee(),t=He(),a=os(),[i,c]=l.useState([]),[u,r]=l.useState(!0);l.useEffect(()=>{if(!s)return;const E=fe(ee(C,"notifications"),je("recipientId","==",s.uid),es("createdAt","desc")),A=cs(E,j=>{const z=j.docs.map(p=>({id:p.id,...p.data()}));c(z),r(!1)},j=>{console.error("Error fetching notifications:",j),r(!1)});return()=>A()},[s]);const w=async E=>{try{await me(J(C,"notifications",E),{read:!0})}catch(A){console.error("Error marking as read:",A)}},D=async()=>{const E=i.filter(A=>!A.read);try{await Promise.all(E.map(A=>me(J(C,"notifications",A.id),{read:!0}))),t.success("ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡")}catch{t.error("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª")}},U=async E=>{try{await Ds(J(C,"notifications",E)),t.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±")}catch{t.error("ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±")}},v=E=>{if(!E)return"";const A=E.toDate(),z=new Date().getTime()-A.getTime(),p=Math.floor(z/6e4),f=Math.floor(z/36e5),L=Math.floor(z/864e5);return p<1?"Ø§Ù„Ø¢Ù†":p<60?`Ù…Ù†Ø° ${p} Ø¯Ù‚ÙŠÙ‚Ø©`:f<24?`Ù…Ù†Ø° ${f} Ø³Ø§Ø¹Ø©`:L<7?`Ù…Ù†Ø° ${L} ÙŠÙˆÙ…`:A.toLocaleDateString("ar-SA")},N=i.filter(E=>!E.read).length;return u?e.jsx("div",{className:"min-h-screen bg-slate-200 flex items-center justify-center",children:e.jsx(ze,{className:"w-8 h-8 animate-spin text-sky-500"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-200 to-slate-100",children:[e.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>a(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[e.jsx(Es,{className:"w-5 h-5"}),"Ø±Ø¬ÙˆØ¹"]}),e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(yt,{className:"w-6 h-6 text-sky-500"}),"Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª",N>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:N})]}),N>0&&e.jsx("button",{onClick:D,className:"text-sm text-sky-600 hover:text-sky-800",children:"Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙƒÙ„"})]})})}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:i.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(yt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"})]}):e.jsx("div",{className:"space-y-3",children:i.map(E=>{const A=Fn[E.type]||Fn.default;return e.jsx("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition hover:shadow-md cursor-pointer ${E.read?"border-gray-100":"border-sky-200 bg-sky-50/50"}`,onClick:()=>{E.read||w(E.id),E.actionUrl&&a(E.actionUrl)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${A.bgColor} ${A.textColor}`,children:A.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:E.message}),!E.read&&e.jsx("span",{className:"text-xs bg-sky-100 text-sky-700 px-2 py-0.5 rounded-full",children:"Ø¬Ø¯ÙŠØ¯"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:v(E.createdAt)})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[!E.read&&e.jsx("button",{onClick:j=>{j.stopPropagation(),w(E.id)},className:"p-1.5 text-gray-400 hover:text-green-500 transition",title:"ØªØ­Ø¯ÙŠØ¯ ÙƒÙ…Ù‚Ø±ÙˆØ¡",children:e.jsx(bs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:j=>{j.stopPropagation(),U(E.id)},className:"p-1.5 text-gray-400 hover:text-red-500 transition",title:"Ø­Ø°Ù",children:e.jsx(ys,{className:"w-4 h-4"})})]})]})},E.id)})})})]})},Bm=[{keywords:["Ù…Ø±Ø­Ø¨Ø§","Ø§Ù„Ø³Ù„Ø§Ù…","Ù‡Ù„Ø§","Ø§Ù‡Ù„Ø§"],reply:"Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹! ğŸ‘‹ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ"},{keywords:["Ø·Ù„Ø¨","Ù…ØªØ£Ø®Ø±","ØªØ£Ø®Ø±","ÙˆÙŠÙ† Ø§Ù„Ø·Ù„Ø¨"],reply:"Ù†Ø¹ØªØ°Ø± Ø¹Ù† Ø§Ù„ØªØ£Ø®ÙŠØ±! Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø®Ø¨Ø§Ø±ÙŠ Ø¨Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ Ù„Ù…ØªØ§Ø¨Ø¹ØªÙ‡ØŸ"},{keywords:["Ø§Ù„ØºØ§Ø¡","Ø§Ù„ØºÙŠ","Ø£Ù„ØºÙŠ","Ø±Ø¬Ø¹ ÙÙ„ÙˆØ³ÙŠ"],reply:"Ø³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨. Ù…Ø§ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ØŸ ÙˆÙ…Ø§ Ø³Ø¨Ø¨ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ØŸ"},{keywords:["Ø´ÙƒØ±Ø§","Ù…Ø´ÙƒÙˆØ±","ØªØ³Ù„Ù…"],reply:"Ø§Ù„Ø¹ÙÙˆ! Ø³Ø¹ÙŠØ¯ÙŠÙ† Ø¨Ø®Ø¯Ù…ØªÙƒ ğŸŒŸ Ù‡Ù„ ØªØ­ØªØ§Ø¬ Ø£ÙŠ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø£Ø®Ø±Ù‰ØŸ"}],Vm=[{q:"ÙƒÙŠÙ Ø£Ù„ØºÙŠ Ø·Ù„Ø¨ÙŠØŸ",icon:"âŒ"},{q:"Ø£ÙŠÙ† Ø·Ù„Ø¨ÙŠ Ø§Ù„Ø¢Ù†ØŸ",icon:"ğŸ“"},{q:"Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¯ÙØ¹",icon:"ğŸ’³"},{q:"Ø´ÙƒÙˆÙ‰ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø±Ø©",icon:"ğŸ "},{q:"Ø´ÙƒÙˆÙ‰ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨",icon:"ğŸš—"},{q:"Ø£Ø®Ø±Ù‰",icon:"ğŸ’¬"}],qm=()=>{os();const{user:s,role:t}=Ee(),a=He(),i=l.useRef(null),c=l.useRef(null),[u,r]=l.useState(null),[w,D]=l.useState([]),[U,v]=l.useState(!0),[N,E]=l.useState(!1),[A,j]=l.useState(""),[z,p]=l.useState(!0),[f,L]=l.useState(!1);l.useEffect(()=>{if(!(s!=null&&s.uid))return;(async()=>{const B=fe(ee(C,"supportChats"),je("userId","==",s.uid),je("status","in",["active","waiting"]),js(1)),T=await be(B);if(!T.empty){const P={id:T.docs[0].id,...T.docs[0].data()};r(P),p(!1)}v(!1)})()},[s==null?void 0:s.uid]),l.useEffect(()=>{if(!(u!=null&&u.id))return;const O=fe(ee(C,"supportChats",u.id,"messages"),es("createdAt","asc")),B=cs(O,T=>{const P=T.docs.map(m=>({id:m.id,...m.data()}));D(P),P.some(m=>!m.read&&m.senderRole==="support")&&me(J(C,"supportChats",u.id),{unreadByUser:0})});return()=>B()},[u==null?void 0:u.id]),l.useEffect(()=>{var O;(O=i.current)==null||O.scrollIntoView({behavior:"smooth"})},[w,f]);const $=async O=>{if(s!=null&&s.uid)try{const B={userId:s.uid,userName:s.displayName||"Ù…Ø³ØªØ®Ø¯Ù…",userRole:t||"customer",status:"waiting",subject:O||"Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ø§Ù…",priority:"medium",createdAt:X(),updatedAt:X(),unreadByUser:0,unreadBySupport:1},T=await Pe(ee(C,"supportChats"),B),P={id:T.id,...B};r(P),p(!1),await Pe(ee(C,"supportChats",T.id,"messages"),{chatId:T.id,senderId:"bot",senderName:"Ù…Ø³Ø§Ø¹Ø¯ Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª",senderRole:"bot",message:`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${s.displayName||"Ø¹Ø²ÙŠØ²ÙŠ Ø§Ù„Ø¹Ù…ÙŠÙ„"}! ğŸ‘‹

Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø¢Ù„ÙŠ. Ø£Ø®Ø¨Ø±Ù†ÙŠ Ø¨Ù…Ø´ÙƒÙ„ØªÙƒ ÙˆØ³Ø£Ø­Ø§ÙˆÙ„ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŒ Ø£Ùˆ Ø³ÙŠØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚.

${O?`Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±: ${O}`:""}`,type:"bot",createdAt:X(),read:!1}),setTimeout(()=>{var m;return(m=c.current)==null?void 0:m.focus()},100)}catch(B){console.error("Error starting chat:",B),a.error("Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}},g=async O=>{const B=O||A.trim();if(!(!B||!(u!=null&&u.id)||N)){E(!0),j("");try{await Pe(ee(C,"supportChats",u.id,"messages"),{chatId:u.id,senderId:s==null?void 0:s.uid,senderName:(s==null?void 0:s.displayName)||"Ù…Ø³ØªØ®Ø¯Ù…",senderRole:"user",message:B,type:"user",createdAt:X(),read:!1}),await me(J(C,"supportChats",u.id),{lastMessage:B,lastMessageAt:X(),updatedAt:X(),unreadBySupport:Ke(1)}),setTimeout(async()=>{L(!0);const T=Bm.find(P=>P.keywords.some(m=>B.toLowerCase().includes(m)));await new Promise(P=>setTimeout(P,1500)),T&&await Pe(ee(C,"supportChats",u.id,"messages"),{chatId:u.id,senderId:"bot",senderName:"Ù…Ø³Ø§Ø¹Ø¯ Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª",senderRole:"bot",message:T.reply,type:"bot",createdAt:X(),read:!1}),L(!1)},500)}catch(T){console.error("Error sending message:",T),a.error("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©")}finally{E(!1)}}},F=async()=>{u!=null&&u.id&&(await me(J(C,"supportChats",u.id),{status:"closed",updatedAt:X()}),r(null),D([]),p(!0),a.success("ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©"))};return U?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(as,{className:"w-10 h-10 animate-spin text-sky-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]})}):e.jsxs("div",{className:"max-w-2xl mx-auto h-[calc(100vh-120px)] flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-blue-500 rounded-t-2xl p-4 text-white flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Kt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:"Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ"}),e.jsx("p",{className:"text-sky-100 text-sm flex items-center gap-1",children:(u==null?void 0:u.status)==="active"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†"]}):(u==null?void 0:u.status)==="waiting"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse"}),"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¯Ø¹Ù…"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Ù…ØªØ§Ø­ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©"]})})]})]}),u&&e.jsx("button",{onClick:F,className:"p-2 hover:bg-white/20 rounded-full transition",title:"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©",children:e.jsx(Oe,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"flex-1 bg-gradient-to-b from-gray-50 to-white overflow-y-auto p-4 space-y-4",children:[z&&!u&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-400 to-blue-500 rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg",children:e.jsx(ps,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Ø§Ø®ØªØ± Ù…ÙˆØ¶ÙˆØ¹Ø§Ù‹ Ø£Ùˆ Ø§Ø¨Ø¯Ø£ Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¨Ø§Ø´Ø±Ø©"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Vm.map((O,B)=>e.jsxs("button",{onClick:()=>$(O.q),className:`flex items-center gap-3 p-4 bg-white rounded-xl border-2 border-gray-100 
                             hover:border-sky-300 hover:shadow-md transition-all text-right`,children:[e.jsx("span",{className:"text-2xl",children:O.icon}),e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:O.q})]},B))}),e.jsxs("button",{onClick:()=>$(),className:`w-full flex items-center justify-center gap-3 py-4 px-6 
                         bg-gradient-to-r from-sky-500 to-blue-600 hover:from-sky-600 hover:to-blue-700
                         text-white rounded-2xl font-bold shadow-lg transition-all`,children:[e.jsx(Gs,{className:"w-6 h-6"}),e.jsx("span",{children:"Ø§Ø¨Ø¯Ø£ Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù…"})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-amber-800 text-sm",children:"â° ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ù…ØªØ§Ø­ Ø¹Ù„Ù‰ Ù…Ø¯Ø§Ø± Ø§Ù„Ø³Ø§Ø¹Ø©"}),e.jsx("p",{className:"text-amber-600 text-xs mt-1",children:"Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø±Ø¯: Ø£Ù‚Ù„ Ù…Ù† 5 Ø¯Ù‚Ø§Ø¦Ù‚"})]})]}),w.map(O=>{var B,T;return e.jsx("div",{className:`flex ${O.senderRole==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] ${O.senderRole==="user"?"order-1":"order-2"}`,children:[O.senderRole!=="user"&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${O.senderRole==="bot"?"bg-purple-100":"bg-sky-100"}`,children:O.senderRole==="bot"?e.jsx(sl,{className:"w-4 h-4 text-purple-600"}):e.jsx(Kt,{className:"w-4 h-4 text-sky-600"})}),e.jsx("span",{className:"text-xs text-gray-500",children:O.senderName})]}),e.jsx("div",{className:`rounded-2xl px-4 py-3 ${O.senderRole==="user"?"bg-gradient-to-r from-sky-500 to-blue-500 text-white rounded-br-md":O.senderRole==="bot"?"bg-purple-50 text-gray-800 border border-purple-100 rounded-bl-md":"bg-white text-gray-800 border border-gray-200 shadow-sm rounded-bl-md"}`,children:e.jsx("p",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:O.message})}),e.jsx("p",{className:`text-xs text-gray-400 mt-1 ${O.senderRole==="user"?"text-left":"text-right"}`,children:((T=(B=O.createdAt)==null?void 0:B.toDate)==null?void 0:T.call(B).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}))||""})]})},O.id)}),f&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(sl,{className:"w-4 h-4 text-purple-600"})}),e.jsx("div",{className:"bg-gray-100 rounded-2xl px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),e.jsx("div",{ref:i})]}),u&&e.jsxs("div",{className:"bg-white border-t border-gray-200 p-4 rounded-b-2xl flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{ref:c,type:"text",value:A,onChange:O=>j(O.target.value),onKeyPress:O=>O.key==="Enter"&&g(),placeholder:"Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§...",className:`flex-1 px-4 py-3 bg-gray-100 rounded-xl border-2 border-transparent 
                       focus:border-sky-300 focus:bg-white focus:outline-none transition`,disabled:N}),e.jsx("button",{onClick:()=>g(),disabled:!A.trim()||N,className:`w-12 h-12 bg-gradient-to-r from-sky-500 to-blue-500 hover:from-sky-600 hover:to-blue-700
                       text-white rounded-xl flex items-center justify-center transition-all
                       disabled:opacity-50 disabled:cursor-not-allowed`,children:N?e.jsx(as,{className:"w-5 h-5 animate-spin"}):e.jsx(ra,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex gap-2 mt-3 overflow-x-auto pb-1",children:["Ø£ÙŠÙ† Ø·Ù„Ø¨ÙŠØŸ","Ø£Ø±ÙŠØ¯ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨","ØªØ­Ø¯Ø« Ù…Ø¹ Ù…ÙˆØ¸Ù"].map((O,B)=>e.jsx("button",{onClick:()=>g(O),disabled:N,className:`flex-shrink-0 px-3 py-1.5 bg-gray-100 hover:bg-sky-100 
                         text-gray-600 hover:text-sky-700 rounded-full text-sm transition`,children:O},B))})]})]})},zm=()=>{var O,B;const{user:s,role:t}=Ee(),a=He(),[i,c]=l.useState("dashboard"),[u,r]=l.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[w,D]=l.useState(0),[U,v]=l.useState(!0),[N,E]=l.useState(null),[A,j]=l.useState([]),[z,p]=l.useState("all"),[f,L]=l.useState([]),[$,g]=l.useState(null);l.useEffect(()=>{s&&(async()=>{try{const T=fe(ee(C,"restaurants"),je("referredBy","==",s.uid)),m=(await be(T)).docs.map(b=>({id:b.id,...b.data()}));L(m);const o=m.length,R=m.map(b=>b.id);let I=0,q=0,x=0;if(R.length>0){const b=fe(ee(C,"orders"),je("status","==","pending"),js(100));I=(await be(b)).docs.filter(k=>R.includes(k.data().restaurantId)).length;const M=(await be(ee(C,"orders"))).docs.filter(k=>R.includes(k.data().restaurantId));q=M.length,x=M.reduce((k,h)=>k+(h.data().deliveryFee||0),0)}try{const y=(await Ce(J(C,"wallets",s.uid))).data();D((y==null?void 0:y.balance)||0)}catch{D(0)}try{const b=fe(ee(C,"tasks"),je("assignedTo","==",s.uid)),d=(await be(b)).docs.map(M=>({id:M.id,...M.data()}));j(d.sort((M,k)=>{var h,S;return(((h=k.createdAt)==null?void 0:h.seconds)||0)-(((S=M.createdAt)==null?void 0:S.seconds)||0)}))}catch(b){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…:",b)}r({totalRestaurants:o,totalOrders:q,totalEarnings:x,pendingOrders:I})}catch(T){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:",T)}finally{v(!1)}})()},[s]);const F=async(T,P)=>{try{const m={status:P,updatedAt:X()};P==="completed"&&(m.completedAt=X()),await me(J(C,"tasks",T),m),j(o=>o.map(R=>R.id===T?{...R,status:P}:R)),a.success(P==="in_progress"?"ØªÙ… Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©":P==="completed"?"ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰":"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‡Ù…Ø©")}catch{a.error("ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‡Ù…Ø©")}};return l.useEffect(()=>{s&&(async()=>{try{const T=await Ce(J(C,"users",s.uid));T.exists()&&E({uid:T.id,...T.data()})}catch(T){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±Ù:",T)}})()},[s]),U?e.jsx($e,{allow:["admin"],children:e.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})}):e.jsx($e,{allow:["admin"],children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ù…Ø´Ø±Ù! ğŸ‘‹"})]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-6 flex-wrap",children:[e.jsxs("button",{onClick:()=>c("dashboard"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${i==="dashboard"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Vs,{className:"w-5 h-5"}),"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"]}),e.jsxs("button",{onClick:()=>c("myRestaurants"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${i==="myRestaurants"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Le,{className:"w-5 h-5"}),"Ù…Ø·Ø§Ø¹Ù…ÙŠ",e.jsx("span",{className:"bg-white/20 text-xs px-2 py-0.5 rounded-full",children:f.length})]}),e.jsxs("button",{onClick:()=>c("profile"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${i==="profile"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(ms,{className:"w-5 h-5"}),"Ø¨ÙŠØ§Ù†Ø§ØªÙŠ"]}),e.jsxs("button",{onClick:()=>c("tasks"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${i==="tasks"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(ir,{className:"w-5 h-5"}),"Ù…Ù‡Ø§Ù…ÙŠ",A.filter(T=>T.status==="pending"||T.status==="in_progress").length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:A.filter(T=>T.status==="pending"||T.status==="in_progress").length})]})]}),i==="myRestaurants"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø·Ø§Ø¹Ù…ÙŠ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©"}),e.jsx("h2",{className:"text-4xl font-bold",children:f.length}),e.jsx("p",{className:"text-sm opacity-75 mt-2",children:"ğŸ’° Ø³ØªØ­ØµÙ„ÙŠÙ† Ø¹Ù„Ù‰ Ø¹Ù…ÙˆÙ„Ø© Ù…Ù† ÙƒÙ„ Ø·Ù„Ø¨ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…"})]}),e.jsx(Le,{className:"w-16 h-16 opacity-80"})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[e.jsx(Le,{className:"w-6 h-6"}),"Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ø¨ÙˆØ§Ø³Ø·ØªÙŠ"]}),f.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-5xl mb-4",children:"ğŸª"}),e.jsx("p",{className:"text-lg font-semibold",children:"Ù„Ù… ØªÙ‚ÙˆÙ…ÙŠ Ø¨ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ù…Ø·Ø¹Ù… Ø¨Ø¹Ø¯"}),e.jsx("p",{className:"text-sm mt-2",children:'Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ "Ø¥Ø¶Ø§ÙØ© Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯" Ù„Ø¨Ø¯Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…'}),e.jsx(ae,{to:"/admin/add-restaurant",className:"inline-block mt-4 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:"â• Ø¥Ø¶Ø§ÙØ© Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯"})]}):e.jsx("div",{className:"space-y-4",children:f.map(T=>{var P,m,o;return e.jsxs("div",{className:"border-2 rounded-2xl overflow-hidden hover:border-primary transition",children:[e.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50 flex items-center justify-between",onClick:()=>g($===T.id?null:T.id),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:T.logoUrl?e.jsx("img",{src:T.logoUrl,alt:T.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:"ğŸ½ï¸"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:T.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[T.city||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"," â€¢ ",T.phone||"Ø¨Ø¯ÙˆÙ† Ø±Ù‚Ù…"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[T.isVerified?e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-semibold rounded-full",children:"âœ… Ù…ÙˆØ«Ù‚"}):e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-semibold rounded-full",children:"â³ ØºÙŠØ± Ù…ÙˆØ«Ù‚"}),T.packageType==="premium"&&e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 text-xs font-semibold rounded-full",children:"â­ Ù…Ù…ÙŠØ²"})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:$===T.id?e.jsx(Ta,{className:"w-5 h-5 text-gray-400"}):e.jsx(la,{className:"w-5 h-5 text-gray-400"})})]}),$===T.id&&e.jsx("div",{className:"border-t bg-gray-50 p-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ø§Ù„Ù…Ø¹Ø±Ù‘Ù"}),e.jsx("p",{className:"font-mono text-xs text-gray-700 truncate",children:T.id})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯"}),e.jsx("p",{className:"text-sm text-gray-700 truncate",children:T.email||"-"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹"}),e.jsx("p",{className:"text-sm text-gray-700 truncate",children:T.location||"-"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„"}),e.jsx("p",{className:"text-sm text-gray-700",children:((o=(m=(P=T.createdAt)==null?void 0:P.toDate)==null?void 0:m.call(P))==null?void 0:o.toLocaleDateString("ar-SA"))||(T.createdAt instanceof Date?T.createdAt.toLocaleDateString("ar-SA"):"-")})]})]})})]},T.id)})}),f.length>0&&e.jsx(ae,{to:"/admin/add-restaurant",className:"block mt-6 w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"â• Ø¥Ø¶Ø§ÙØ© Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯"})]})]}),i==="profile"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[e.jsx(ms,{className:"w-6 h-6"}),"Ø¨ÙŠØ§Ù†Ø§ØªÙŠ"]}),N?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((O=N.name)==null?void 0:O.charAt(0))||((B=N.email)==null?void 0:B.charAt(0))||"ØŸ"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:N.name||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-sky-100 text-sky-800 mt-2",children:"ğŸ‘” Ù…Ø´Ø±Ù"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsx("p",{className:"font-semibold text-gray-900 font-mono",children:N.email})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Ø§Ù„Ø¯ÙˆØ±"}),e.jsx("p",{className:"font-semibold text-gray-900",children:t==="admin"?"Ù…Ø´Ø±Ù":t})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Ù…Ø¹Ø±Ù‘Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("p",{className:"font-semibold text-gray-600 text-xs font-mono break-all",children:N.uid})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø­ÙØ¸Ø©"}),e.jsxs("p",{className:"font-bold text-green-600 text-xl",children:[w.toFixed(2)," Ø±.Ø³"]})]})]})]}),e.jsx(ae,{to:"/profile",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-4 text-center font-semibold transition",children:"âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ"})]}):e.jsx("div",{className:"text-center py-8 text-gray-600",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]}),i==="tasks"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[e.jsx(ir,{className:"w-6 h-6"}),"Ù…Ù‡Ø§Ù…ÙŠ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©"]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","pending","in_progress","completed"].map(T=>e.jsxs("button",{onClick:()=>p(T),className:`px-4 py-2 rounded-xl font-semibold transition ${z===T?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[T==="all"&&"ğŸ“‹ Ø§Ù„ÙƒÙ„",T==="pending"&&"â³ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",T==="in_progress"&&"ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°",T==="completed"&&"âœ… Ù…ÙƒØªÙ…Ù„Ø©"]},T))}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:A.filter(T=>T.status==="pending").length}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:A.filter(T=>T.status==="in_progress").length}),e.jsx("p",{className:"text-sm text-blue-700",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:A.filter(T=>T.status==="completed").length}),e.jsx("p",{className:"text-sm text-green-700",children:"Ù…ÙƒØªÙ…Ù„Ø©"})]})]}),A.filter(T=>z==="all"||T.status===z).length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-5xl mb-4",children:"ğŸ“‹"}),e.jsxs("p",{className:"text-lg",children:["Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… ",z!=="all"&&"ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø©"]}),e.jsx("p",{className:"text-sm mt-2",children:"Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙŠ ÙŠØ³Ù†Ø¯Ù‡Ø§ Ù„Ùƒ Ø§Ù„Ù…Ø·ÙˆØ±"})]}):e.jsx("div",{className:"space-y-4",children:A.filter(T=>z==="all"||T.status===z).map(T=>{var P,m,o;return e.jsx("div",{className:`border-2 rounded-2xl p-4 transition ${T.status==="completed"?"bg-green-50 border-green-200":T.status==="in_progress"?"bg-blue-50 border-blue-200":T.priority==="high"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${T.priority==="high"?"bg-red-100 text-red-700":T.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:T.priority==="high"?"ğŸ”´ Ø¹Ø§Ù„ÙŠØ©":T.priority==="medium"?"ğŸŸ¡ Ù…ØªÙˆØ³Ø·Ø©":"âšª Ù…Ù†Ø®ÙØ¶Ø©"}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${T.status==="pending"?"bg-yellow-100 text-yellow-700":T.status==="in_progress"?"bg-blue-100 text-blue-700":T.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[T.status==="pending"&&"â³ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",T.status==="in_progress"&&"ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°",T.status==="completed"&&"âœ… Ù…ÙƒØªÙ…Ù„Ø©",T.status==="cancelled"&&"âŒ Ù…Ù„ØºØ§Ø©"]})]}),e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:T.title}),T.description&&e.jsx("p",{className:"text-gray-600 mt-1",children:T.description}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-sm text-gray-500",children:[T.dueDate&&e.jsxs("span",{className:new Date(T.dueDate)<new Date&&T.status!=="completed"?"text-red-600 font-semibold":"",children:["ğŸ“… ",new Date(T.dueDate).toLocaleDateString("ar-SA"),new Date(T.dueDate)<new Date&&T.status!=="completed"&&" (Ù…ØªØ£Ø®Ø±Ø©!)"]}),e.jsxs("span",{children:["ğŸ• ",((o=(m=(P=T.createdAt)==null?void 0:P.toDate)==null?void 0:m.call(P))==null?void 0:o.toLocaleDateString("ar-SA"))||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"]})]}),T.notes&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-100 p-2 rounded",children:["ğŸ’¬ ",T.notes]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[T.status==="pending"&&e.jsx("button",{onClick:()=>F(T.id,"in_progress"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:"â–¶ï¸ Ø¨Ø¯Ø¡"}),T.status==="in_progress"&&e.jsxs("button",{onClick:()=>F(T.id,"completed"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Ø¥ÙƒÙ…Ø§Ù„"]}),T.status==="completed"&&e.jsx("span",{className:"text-green-600 font-semibold text-center",children:"âœ… ØªÙ… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²"})]})]})},T.id)})})]})}),i==="dashboard"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø­ÙØ¸Ø©"}),e.jsxs("h2",{className:"text-3xl font-bold",children:[w.toFixed(2)," Ø±.Ø³"]}),e.jsx("p",{className:"text-sm opacity-75 mt-2",children:"ğŸ’° ØªØ­ØµÙ„ Ø¹Ù„Ù‰ 50 Ù‡Ù„Ù„Ø© Ù…Ù† ÙƒÙ„ Ø·Ù„Ø¨ Ù„Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„ØªÙŠ Ø£Ø¶ÙØªÙ‡Ø§"})]}),e.jsx(is,{className:"w-16 h-16 opacity-80"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§ÙØ©"}),e.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:u.totalRestaurants})]}),e.jsx(Ns,{className:"w-12 h-12 text-primary opacity-30"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:u.totalOrders})]}),e.jsx(Hn,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ø·Ù„Ø¨Ø§Øª Ù…Ø¹Ù„Ù‚Ø©"}),e.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:u.pendingOrders})]}),e.jsx(Vs,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"}),e.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:u.totalEarnings.toFixed(2)})]}),e.jsx(Vs,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø·Ø§Ø¹Ù…"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Ø£Ø¶Ù Ù…Ø·Ø§Ø¹Ù… Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ£Ø¯Ø± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ù…Ø³Ø¬Ù„Ø©"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"â• Ø¥Ø¶Ø§ÙØ© Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯"}),e.jsx(ae,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"ğŸ“‹ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù„Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§ÙØ© ÙˆØªØ§Ø¨Ø¹ Ø­Ø§Ù„ØªÙ‡Ø§"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"ğŸ“Š Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx(ae,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"â³ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"ÙƒØ¹Ù…ÙŠÙ„"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Ø§Ø³ØªØ¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙˆØ£Ù†Ø´Ø¦ Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø«Ù„ Ø£ÙŠ Ø¹Ù…ÙŠÙ„"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"ğŸ— Ø§Ø³ØªØ¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"}),e.jsx(ae,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"ğŸ“¦ Ø·Ù„Ø¨Ø§ØªÙŠ"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"Ø§Ù„Ù…Ø­ÙØ¸Ø© ÙˆØ§Ù„Ù…ÙƒØ§ÙØ¢Øª"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Ø§Ø¹Ø±Ø¶ Ø±ØµÙŠØ¯Ùƒ ÙˆØ§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ­ØµÙ„Ø© Ù…Ù† Ø·Ù„Ø¨Ø§Øª Ù…Ø·Ø§Ø¹Ù…Ùƒ"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:["ğŸ’° Ø±ØµÙŠØ¯Ùƒ: ",w.toFixed(2)," Ø±.Ø³"]}),e.jsx(ae,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­ÙØ¸Ø©"})]})]})]})]})]})})},Hm=()=>{const{user:s,role:t}=Ee(),a=He(),i=Ps(),[c,u]=l.useState([]),[r,w]=l.useState(!0),[D,U]=l.useState(!1),[v,N]=l.useState(!1),[E,A]=l.useState(0),j=l.useRef(null),z=l.useRef(null),p=Ia(ks),[f,L]=l.useState(null),[$,g]=l.useState({name:"",phone:"",city:"",location:"",isOpen:!0,allowDelivery:!0,allowPickup:!1,logoFile:null,logoPreview:""}),[F,O]=l.useState({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""});l.useEffect(()=>{s&&B()},[s]);const B=async()=>{if(s)try{let b=[];if(t==="developer")b=(await be(ee(C,"restaurants"))).docs.map(d=>({id:d.id,...d.data()}));else{const y=fe(ee(C,"restaurants"),je("referredBy","==",s.uid));b=(await be(y)).docs.map(M=>({id:M.id,...M.data()}))}u(b)}catch(b){a.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…"),console.error(b)}finally{w(!1)}},T=async b=>{if(b.preventDefault(),!F.name.trim()){a.warning("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…");return}try{N(!0);let y="";if(F.logoFile){const k=F.logoFile.name.replace(/\s+/g,"_").slice(-60),h=`uploads/restaurant_${Date.now()}_${k}`,S=As(p,h),V=Ot(S,F.logoFile,{contentType:F.logoFile.type||"image/jpeg"});await new Promise((Q,ie)=>{V.on("state_changed",re=>{const ye=Math.round(re.bytesTransferred/re.totalBytes*100);A(ye)},ie,async()=>{y=await Is(V.snapshot.ref),Q()})})}const d=t==="admin",M=t==="developer";await Pe(ee(C,"restaurants"),{name:F.name,phone:F.phone,city:F.city,location:F.location,ownerId:"admin_"+Date.now(),email:(s==null?void 0:s.email)||"",logoUrl:y,createdAt:new Date,referredBy:d?s==null?void 0:s.uid:null,referrerType:d?"admin":M?"developer":null}),a.success("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø·Ø¹Ù… Ø¨Ù†Ø¬Ø§Ø­ âœ…"),d&&a.info("ğŸ’° Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ 75 Ù‡Ù„Ù„Ø© Ù…Ù† ÙƒÙ„ Ù…Ù†ØªØ¬ ÙŠÙØ·Ù„Ø¨ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…Ø·Ø¹Ù…"),O({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""}),U(!1),A(0),B()}catch(y){a.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø·Ø¹Ù…"),console.error(y)}finally{N(!1)}},P=b=>{L(b),g({name:b.name||"",phone:b.phone||"",city:b.city||"",location:b.location||"",isOpen:b.isOpen!==!1,allowDelivery:b.allowDelivery!==!1,allowPickup:b.allowPickup===!0,logoFile:null,logoPreview:b.logoUrl||""})},m=()=>{L(null),g({name:"",phone:"",city:"",location:"",isOpen:!0,allowDelivery:!0,allowPickup:!1,logoFile:null,logoPreview:""})},o=async b=>{if(b.preventDefault(),!!f){if(!$.name.trim()){a.warning("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…");return}try{N(!0);let y=$.logoPreview;if($.logoFile){const d=$.logoFile.name.replace(/\s+/g,"_").slice(-60),M=`uploads/restaurant_${Date.now()}_${d}`,k=As(p,M),h=Ot(k,$.logoFile,{contentType:$.logoFile.type||"image/jpeg"});await new Promise((S,V)=>{h.on("state_changed",Q=>{const ie=Math.round(Q.bytesTransferred/Q.totalBytes*100);A(ie)},V,async()=>{y=await Is(h.snapshot.ref),S()})})}await me(J(C,"restaurants",f.id),{name:$.name,phone:$.phone,city:$.city,location:$.location,isOpen:$.isOpen,allowDelivery:$.allowDelivery,allowPickup:$.allowPickup,logoUrl:y,updatedAt:X()}),a.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø·Ø¹Ù… Ø¨Ù†Ø¬Ø§Ø­ âœ…"),m(),A(0),B()}catch(y){a.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø·Ø¹Ù…"),console.error(y)}finally{N(!1)}}},R=async b=>{if(await i.confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø·Ø¹Ù…ØŸ",{dangerous:!0,title:"Ø­Ø°Ù Ø§Ù„Ù…Ø·Ø¹Ù…"}))try{await Ds(J(C,"restaurants",b)),a.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø·Ø¹Ù… Ø¨Ù†Ø¬Ø§Ø­"),B()}catch(d){a.error("Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø·Ø¹Ù…"),console.error(d)}},I=async b=>{const y=!b.isVerified;if(await i.confirm(y?`Ù‡Ù„ ØªØ±ÙŠØ¯ ØªÙˆØ«ÙŠÙ‚ Ø£Ø³Ø±Ø© "${b.name}"ØŸ`:`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù„ØºØ§Ø¡ ØªÙˆØ«ÙŠÙ‚ Ø£Ø³Ø±Ø© "${b.name}"ØŸ`,{title:y?"âœ… ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø±Ø©":"âŒ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙˆØ«ÙŠÙ‚",confirmText:y?"Ù†Ø¹Ù…ØŒ ÙˆØ«Ù‘Ù‚":"Ù†Ø¹Ù…ØŒ Ø£Ù„ØºÙ Ø§Ù„ØªÙˆØ«ÙŠÙ‚"}))try{await me(J(C,"restaurants",b.id),{isVerified:y,verifiedAt:y?X():null,updatedAt:X()}),a.success(y?"ØªÙ… ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø±Ø© âœ…":"ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙˆØ«ÙŠÙ‚"),B()}catch(M){a.error("Ø­Ø¯Ø« Ø®Ø·Ø£"),console.error(M)}},q=async(b,y)=>{try{await me(J(C,"restaurants",b.id),{sellerTier:y,tierUpdatedAt:X(),updatedAt:X()});const d={bronze:"Ø¨Ø±ÙˆÙ†Ø²ÙŠ",silver:"ÙØ¶ÙŠ",gold:"Ø°Ù‡Ø¨ÙŠ"};a.success(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØµÙ†ÙŠÙ Ø¥Ù„Ù‰ ${d[y]} ğŸ†`),B()}catch(d){a.error("Ø­Ø¯Ø« Ø®Ø·Ø£"),console.error(d)}},x=({tier:b})=>{switch(b){case"gold":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold rounded-full shadow",children:[e.jsx(ts,{className:"w-3 h-3"})," Gold"]});case"silver":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-bold rounded-full shadow",children:[e.jsx(Zr,{className:"w-3 h-3"})," Silver"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-600 to-orange-600 text-white text-xs font-bold rounded-full shadow",children:[e.jsx(Na,{className:"w-3 h-3"})," Bronze"]})}};return r?e.jsx($e,{allow:["admin","developer"],children:e.jsx("div",{className:"flex items-center justify-center h-96",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})}):e.jsx($e,{allow:["admin","developer"],children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§ÙØ©"}),e.jsxs("button",{onClick:()=>U(!D),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[e.jsx(Cs,{className:"w-5 h-5"})," Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯"]})]}),D&&e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Ø¥Ø¶Ø§ÙØ© Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯"}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsxs("div",{className:"flex items-center gap-4",children:[F.logoPreview?e.jsx("img",{src:F.logoPreview,alt:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø´Ø¹Ø§Ø±",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):e.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:e.jsx(Xt,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{ref:j,type:"file",accept:"image/*",className:"hidden",onChange:b=>{var d;const y=(d=b.target.files)==null?void 0:d[0];y&&O({...F,logoFile:y,logoPreview:URL.createObjectURL(y)})}}),e.jsxs("button",{type:"button",onClick:()=>{var b;return(b=j.current)==null?void 0:b.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[e.jsx(va,{className:"w-4 h-4"}),F.logoFile?"ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø©":"Ø±ÙØ¹ Ø´Ø¹Ø§Ø±"]}),F.logoFile&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:F.logoFile.name})]})]}),v&&E>0&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${E}%`}})})]}),e.jsx("input",{type:"text",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…",value:F.name,onChange:b=>O({...F,name:b.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),e.jsx("input",{type:"text",placeholder:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ",value:F.phone,onChange:b=>O({...F,phone:b.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),e.jsx("input",{type:"text",placeholder:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©",value:F.city,onChange:b=>O({...F,city:b.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),e.jsx("textarea",{placeholder:"Ø§Ù„Ù…ÙˆÙ‚Ø¹ / Ø§Ù„Ø¹Ù†ÙˆØ§Ù†",value:F.location,onChange:b=>O({...F,location:b.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:v,className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:v?`Ø¬Ø§Ø±Ù Ø§Ù„Ø±ÙØ¹... ${E}%`:"âœ… Ø­ÙØ¸"}),e.jsx("button",{type:"button",onClick:()=>U(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:"âŒ Ø¥Ù„ØºØ§Ø¡"})]})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-bold text-primary",children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-gray-100 rounded-xl transition",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsxs("div",{className:"flex items-center gap-4",children:[$.logoPreview?e.jsx("img",{src:$.logoPreview,alt:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø´Ø¹Ø§Ø±",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):e.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:e.jsx(Xt,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{ref:z,type:"file",accept:"image/*",className:"hidden",onChange:b=>{var d;const y=(d=b.target.files)==null?void 0:d[0];y&&g({...$,logoFile:y,logoPreview:URL.createObjectURL(y)})}}),e.jsxs("button",{type:"button",onClick:()=>{var b;return(b=z.current)==null?void 0:b.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[e.jsx(va,{className:"w-4 h-4"}),$.logoFile?"ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø©":"Ø±ÙØ¹ Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯"]})]})]}),v&&E>0&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${E}%`}})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Le,{className:"w-4 h-4 inline ml-1"}),"Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…"]}),e.jsx("input",{type:"text",value:$.name,onChange:b=>g({...$,name:b.target.value}),className:"w-full border rounded-xl p-3 text-gray-900",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(fl,{className:"w-4 h-4 inline ml-1"}),"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"]}),e.jsx("input",{type:"text",value:$.phone,onChange:b=>g({...$,phone:b.target.value}),className:"w-full border rounded-xl p-3 text-gray-900",placeholder:"05xxxxxxxx"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Ns,{className:"w-4 h-4 inline ml-1"}),"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"]}),e.jsx("input",{type:"text",value:$.city,onChange:b=>g({...$,city:b.target.value}),className:"w-full border rounded-xl p-3 text-gray-900",placeholder:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Ze,{className:"w-4 h-4 inline ml-1"}),"Ø§Ù„Ù…ÙˆÙ‚Ø¹ / Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"]}),e.jsx("textarea",{value:$.location,onChange:b=>g({...$,location:b.target.value}),className:"w-full border rounded-xl p-3 text-gray-900",placeholder:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ",rows:2})]}),e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$.isOpen,onChange:b=>g({...$,isOpen:b.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),e.jsx("span",{className:"text-gray-700",children:"Ø§Ù„Ù…ØªØ¬Ø± Ù…ÙØªÙˆØ­ ÙˆÙŠØ³ØªÙ‚Ø¨Ù„ Ø·Ù„Ø¨Ø§Øª"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$.allowDelivery,onChange:b=>g({...$,allowDelivery:b.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),e.jsx("span",{className:"text-gray-700",children:"ÙŠØ¯Ø¹Ù… Ø§Ù„ØªÙˆØµÙŠÙ„"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$.allowPickup,onChange:b=>g({...$,allowPickup:b.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),e.jsx("span",{className:"text-gray-700",children:"ÙŠØ¯Ø¹Ù… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø·Ø¹Ù…"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"submit",disabled:v,className:"flex-1 bg-sky-600 hover:bg-sky-700 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:v?`Ø¬Ø§Ø±Ù Ø§Ù„Ø±ÙØ¹... ${E}%`:"âœ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª"}),e.jsx("button",{type:"button",onClick:m,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:"âŒ Ø¥Ù„ØºØ§Ø¡"})]})]})]})}),e.jsx("div",{className:"grid gap-4",children:c.length===0?e.jsx("div",{className:"text-center text-gray-500 py-12",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø·Ø§Ø¹Ù… Ù…Ø³Ø¬Ù„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹"}):c.map(b=>e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex gap-4",children:[b.logoUrl?e.jsx("img",{src:b.logoUrl,alt:b.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-sky-100"}):e.jsx("div",{className:"w-16 h-16 rounded-xl bg-sky-100 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"ğŸ½ï¸"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"text-xl font-bold text-primary",children:b.name}),b.isVerified&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:[e.jsx(Ie,{className:"w-3 h-3"})," Ù…ÙˆØ«Ù‚Ø©"]}),e.jsx(x,{tier:b.sellerTier})]}),b.city&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["ğŸ“ ",b.city]}),b.phone&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["ğŸ“ ",b.phone]}),b.location&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["ğŸ¢ ",b.location]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>I(b),className:`p-2.5 rounded-xl transition flex items-center gap-1 text-sm font-semibold ${b.isVerified?"bg-green-100 hover:bg-green-200 text-green-700":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,title:b.isVerified?"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙˆØ«ÙŠÙ‚":"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø±Ø©",children:[e.jsx(us,{className:"w-4 h-4"}),b.isVerified?"Ù…ÙˆØ«Ù‚Ø©":"ØªÙˆØ«ÙŠÙ‚"]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"p-2.5 rounded-xl bg-amber-100 hover:bg-amber-200 text-amber-700 transition flex items-center gap-1 text-sm font-semibold",children:[e.jsx(Na,{className:"w-4 h-4"}),"Ø§Ù„ØªØµÙ†ÙŠÙ",e.jsx(la,{className:"w-3 h-3"})]}),e.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white rounded-xl shadow-xl border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-20 min-w-[140px]",children:[e.jsxs("button",{onClick:()=>q(b,"bronze"),className:`w-full px-4 py-2.5 text-right hover:bg-amber-50 transition flex items-center gap-2 first:rounded-t-xl ${b.sellerTier==="bronze"||!b.sellerTier?"bg-amber-50":""}`,children:[e.jsx(Na,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"font-semibold",children:"Bronze"})]}),e.jsxs("button",{onClick:()=>q(b,"silver"),className:`w-full px-4 py-2.5 text-right hover:bg-gray-50 transition flex items-center gap-2 ${b.sellerTier==="silver"?"bg-gray-100":""}`,children:[e.jsx(Zr,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-semibold",children:"Silver"})]}),e.jsxs("button",{onClick:()=>q(b,"gold"),className:`w-full px-4 py-2.5 text-right hover:bg-yellow-50 transition flex items-center gap-2 last:rounded-b-xl ${b.sellerTier==="gold"?"bg-yellow-50":""}`,children:[e.jsx(ts,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"font-semibold",children:"Gold"})]})]})]}),e.jsx("button",{onClick:()=>P(b),className:"p-2.5 bg-sky-100 hover:bg-sky-200 text-sky-600 rounded-xl transition",title:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø·Ø¹Ù…",children:e.jsx(Xn,{className:"w-4 h-4"})}),t==="developer"&&e.jsx("button",{onClick:()=>R(b.id),className:"p-2.5 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:"Ø­Ø°Ù Ø§Ù„Ù…Ø·Ø¹Ù…",children:e.jsx(ys,{className:"w-4 h-4"})})]})]})},b.id))})]})})},Kr={pending:"â³ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",accepted:"âœ… Ù…Ù‚Ø¨ÙˆÙ„",preparing:"ğŸ‘¨â€ğŸ³ Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±",ready:"ğŸ“¦ Ø¬Ø§Ù‡Ø²",out_for_delivery:"ğŸš— ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚",delivered:"âœ”ï¸ ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…",cancelled:"âŒ Ù…Ù„ØºÙŠ"},Wm=()=>{const{user:s,role:t}=Ee(),a=He(),[i,c]=l.useState([]),[u,r]=l.useState([]),[w,D]=l.useState(!0),[U,v]=l.useState("all"),[N,E]=l.useState([]);l.useEffect(()=>{if(!s)return;(async()=>{if(t==="developer")E([]);else{const z=fe(ee(C,"restaurants"),je("referredBy","==",s.uid)),f=(await be(z)).docs.map(L=>L.id);E(f)}})()},[s,t]),l.useEffect(()=>{s&&A()},[U,s,t,N]);const A=async()=>{try{let j;U==="all"?j=fe(ee(C,"orders"),es("createdAt","desc")):j=fe(ee(C,"orders"),je("status","==",U),es("createdAt","desc"));let p=(await be(j)).docs.map(f=>({id:f.id,...f.data()}));t!=="developer"&&N.length>0?p=p.filter(f=>N.includes(f.restaurantId||"")):t!=="developer"&&N.length===0&&(p=[]),r(p),c(p)}catch(j){a.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"),console.error(j)}finally{D(!1)}};return w?e.jsx($e,{allow:["admin","developer"],children:e.jsx("div",{className:"flex items-center justify-center h-96",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})}):e.jsx($e,{allow:["admin","developer"],children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[e.jsxs("button",{onClick:()=>v("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${U==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:["Ø§Ù„ÙƒÙ„ (",i.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(j=>{const z=i.filter(p=>p.status===j).length;return e.jsxs("button",{onClick:()=>v(j),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${U===j?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[Kr[j]," (",z,")"]},j)})]}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-12",children:["Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ",U!=="all"&&`Ø¨Ø­Ø§Ù„Ø© "${Kr[U]}"`]}):i.map(j=>{var z,p;return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold",children:["Ø·Ù„Ø¨ #",j.id.slice(-8)]}),e.jsx("p",{className:"text-gray-600 text-sm",children:j.createdAt?new Date(j.createdAt).toLocaleDateString("ar-SA"):"â€”"})]}),e.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${j.status==="pending"?"bg-yellow-500":j.status==="delivered"?"bg-green-600":j.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:Kr[j.status]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ø§Ù„Ø¹Ù…ÙŠÙ„ ID"}),e.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[j.customerId.slice(0,12),"..."]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsx("p",{className:"font-semibold text-gray-800",children:j.restaurantName||"â€”"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx("p",{className:"text-sm text-gray-800",children:j.address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹"}),e.jsxs("p",{className:"text-lg font-bold text-primary",children:[((z=j.total)==null?void 0:z.toFixed(2))||0," Ø±.Ø³"]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Ø§Ù„Ø£ØµÙ†Ø§Ù:"}),e.jsx("div",{className:"space-y-1",children:(p=j.items)==null?void 0:p.map((f,L)=>e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsxs("span",{children:[f.name," Ã— ",f.qty]}),e.jsxs("span",{children:[(f.price*f.qty).toFixed(2)," Ø±.Ø³"]})]},L))})]})]},j.id)})})]})})},Ls={projectId:ks.options.projectId,authDomain:ks.options.authDomain,storageBucket:ks.options.storageBucket,messagingSenderId:ks.options.messagingSenderId,appId:ks.options.appId},Qm=()=>{var Yl,Jl,Xl,Zl;const{user:s}=Ee(),t=He(),a=Ps(),i=Ia(ks),[c,u]=l.useState("overview"),[r,w]=l.useState(!0),[D,U]=l.useState(!1),[v,N]=l.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[E,A]=l.useState({}),[j,z]=l.useState([]),[p,f]=l.useState([]),[L,$]=l.useState([]),[g,F]=l.useState([]),[O,B]=l.useState(!1),[T,P]=l.useState({}),[m,o]=l.useState(null),[R,I]=l.useState({}),[q,x]=l.useState(!1),[b,y]=l.useState(null),[d,M]=l.useState({}),[k,h]=l.useState(null),[S,V]=l.useState(!1),[Q,ie]=l.useState(""),[re,ye]=l.useState(""),[ue,_]=l.useState(""),[se,pe]=l.useState(""),[le,G]=l.useState(!1),[Z,ne]=l.useState(!1),[ce,Ne]=l.useState(""),[Y,te]=l.useState(""),[de,oe]=l.useState(""),[ge,ke]=l.useState(""),[Ae,Ue]=l.useState(!1),[_e,Ye]=l.useState(!1),[Qe,_s]=l.useState(""),[Fs,lt]=l.useState(""),[nt,ds]=l.useState(""),[bt,Js]=l.useState(""),[$s,Xs]=l.useState(""),[Zs,na]=l.useState(""),[St,ia]=l.useState(""),[Bt,ve]=l.useState(!1),[Fe,ss]=l.useState([]),[Je,et]=l.useState(!1),[it,zs]=l.useState(""),[ca,jr]=l.useState(""),[Pa,Nr]=l.useState(""),[Tl,yr]=l.useState("medium"),[Rl,wr]=l.useState(""),[El,Pl]=l.useState(!1),[Vt,Hi]=l.useState("all"),[Ct,Wi]=l.useState([]),[y0,w0]=l.useState("all"),[v0,k0]=l.useState(null),[S0,C0]=l.useState(null),[A0,I0]=l.useState(99),[D0,T0]=l.useState(30),[vr,Qi]=l.useState([]),[kr,_l]=l.useState(!1),[Sr,Gi]=l.useState("all"),[oa,Cr]=l.useState([]),[Ar,Fl]=l.useState(!1),[At,$l]=l.useState(""),[_a,Ol]=l.useState(""),[da,Ll]=l.useState(""),[Ml,Ul]=l.useState(""),[xa,Bl]=l.useState("support"),[Vl,ql]=l.useState(!1),[Ki,Ir]=l.useState(null),[Fa,zl]=l.useState("support"),[ma,Yi]=l.useState("all"),[Os,ct]=l.useState(""),[ha,Hl]=l.useState("all"),[$a,Wl]=l.useState("all"),[Dr,Ql]=l.useState("all"),[Hs,Tr]=l.useState("newest"),[ua,Gl]=l.useState("all");s!=null&&s.email;const Rr=()=>{let n=[...p];if(Os){const H=Os.toLowerCase();n=n.filter(K=>{var W,xe,he,we;return((W=K.name)==null?void 0:W.toLowerCase().includes(H))||((xe=K.email)==null?void 0:xe.toLowerCase().includes(H))||((he=K.phone)==null?void 0:he.includes(H))||((we=K.city)==null?void 0:we.toLowerCase().includes(H))})}return ha==="premium"?n=n.filter(H=>H.packageType==="premium"):ha==="free"?n=n.filter(H=>!H.packageType||H.packageType==="free"):ha==="verified"?n=n.filter(H=>H.isVerified):ha==="unverified"&&(n=n.filter(H=>!H.isVerified)),Hs==="newest"?n.sort((H,K)=>{var W,xe,he,we,Re,Se;return(((he=(xe=(W=K.createdAt)==null?void 0:W.toDate)==null?void 0:xe.call(W))==null?void 0:he.getTime())||0)-(((Se=(Re=(we=H.createdAt)==null?void 0:we.toDate)==null?void 0:Re.call(we))==null?void 0:Se.getTime())||0)}):Hs==="oldest"?n.sort((H,K)=>{var W,xe,he,we,Re,Se;return(((he=(xe=(W=H.createdAt)==null?void 0:W.toDate)==null?void 0:xe.call(W))==null?void 0:he.getTime())||0)-(((Se=(Re=(we=K.createdAt)==null?void 0:we.toDate)==null?void 0:Re.call(we))==null?void 0:Se.getTime())||0)}):Hs==="name"&&n.sort((H,K)=>(H.name||"").localeCompare(K.name||"","ar")),n},Er=()=>{let n=[...L];if(Os){const H=Os.toLowerCase();n=n.filter(K=>{var W,xe,he;return((W=K.id)==null?void 0:W.toLowerCase().includes(H))||((xe=K.restaurantName)==null?void 0:xe.toLowerCase().includes(H))||((he=K.address)==null?void 0:he.toLowerCase().includes(H))})}if($a==="pending"?n=n.filter(H=>["pending","accepted","preparing","ready"].includes(H.status)):$a==="delivered"?n=n.filter(H=>H.status==="delivered"):$a==="cancelled"&&(n=n.filter(H=>H.status==="cancelled")),ua!=="all"){const H=new Date,K=new Date;ua==="today"?K.setHours(0,0,0,0):ua==="week"?K.setDate(H.getDate()-7):ua==="month"&&K.setMonth(H.getMonth()-1),n=n.filter(W=>{var he,we;return(((we=(he=W.createdAt)==null?void 0:he.toDate)==null?void 0:we.call(he))||new Date(W.createdAt))>=K})}return Hs==="newest"?n.sort((H,K)=>{var W,xe,he,we,Re,Se;return(((he=(xe=(W=K.createdAt)==null?void 0:W.toDate)==null?void 0:xe.call(W))==null?void 0:he.getTime())||0)-(((Se=(Re=(we=H.createdAt)==null?void 0:we.toDate)==null?void 0:Re.call(we))==null?void 0:Se.getTime())||0)}):Hs==="oldest"&&n.sort((H,K)=>{var W,xe,he,we,Re,Se;return(((he=(xe=(W=H.createdAt)==null?void 0:W.toDate)==null?void 0:xe.call(W))==null?void 0:he.getTime())||0)-(((Se=(Re=(we=K.createdAt)==null?void 0:we.toDate)==null?void 0:Re.call(we))==null?void 0:Se.getTime())||0)}),n},Pr=()=>{let n=[...j];if(Os){const H=Os.toLowerCase();n=n.filter(K=>{var W,xe,he;return((W=K.name)==null?void 0:W.toLowerCase().includes(H))||((xe=K.email)==null?void 0:xe.toLowerCase().includes(H))||((he=K.phone)==null?void 0:he.includes(H))})}return Dr!=="all"&&(n=n.filter(H=>H.role===Dr)),Hs==="newest"?n.sort((H,K)=>{var W,xe,he,we,Re,Se;return(((he=(xe=(W=K.createdAt)==null?void 0:W.toDate)==null?void 0:xe.call(W))==null?void 0:he.getTime())||0)-(((Se=(Re=(we=H.createdAt)==null?void 0:we.toDate)==null?void 0:Re.call(we))==null?void 0:Se.getTime())||0)}):Hs==="oldest"?n.sort((H,K)=>{var W,xe,he,we,Re,Se;return(((he=(xe=(W=H.createdAt)==null?void 0:W.toDate)==null?void 0:xe.call(W))==null?void 0:he.getTime())||0)-(((Se=(Re=(we=K.createdAt)==null?void 0:we.toDate)==null?void 0:Re.call(we))==null?void 0:Se.getTime())||0)}):Hs==="name"&&n.sort((H,K)=>(H.name||"").localeCompare(K.name||"","ar")),n},Oa=async(n,H,K,W,xe,he,we)=>{try{await Pe(ee(C,"activityLogs"),{action:n,targetType:H,targetId:K,targetName:W,performedBy:(s==null?void 0:s.uid)||"",performedByName:(s==null?void 0:s.email)||"Ù…Ø·ÙˆØ±",details:xe,oldValue:he,newValue:we,createdAt:X()})}catch(Re){console.warn("ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:",Re)}},Ji=async(n,H)=>{const K=H?"ØªØ¹Ù„ÙŠÙ‚":"ØªÙØ¹ÙŠÙ„";if(await a.confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ${K} Ø­Ø³Ø§Ø¨ "${n.name||n.email}"ØŸ`,{title:`${K} Ø§Ù„Ø­Ø³Ø§Ø¨`,dangerous:!H}))try{await me(J(C,"users",n.uid),{isActive:!H,updatedAt:X()}),await Oa(H?"deactivate":"activate","user",n.uid,n.name||n.email,`ØªÙ… ${K} Ø§Ù„Ø­Ø³Ø§Ø¨`),t.success(`ØªÙ… ${K} Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­ âœ…`),rs()}catch(xe){console.error("Ø®Ø·Ø£:",xe),t.error(`ÙØ´Ù„ ${K} Ø§Ù„Ø­Ø³Ø§Ø¨`)}},Xi=async n=>{if(await a.confirm(`Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¥Ù„Ù‰: ${n.email}`,{title:"ğŸ”‘ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}))try{await zn(fs,n.email),await Li({action:"password_reset_requested",performedBy:(s==null?void 0:s.uid)||"",performedByName:(s==null?void 0:s.email)||"Ù…Ø·ÙˆØ±",targetUserId:n.uid,targetUserName:n.name||n.email,details:"ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ±"}),await Oa("update","user",n.uid,n.name||n.email,"ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"),t.success("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­ ğŸ“§")}catch(K){console.error("Ø®Ø·Ø£:",K),K.code==="auth/user-not-found"?t.error("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"):t.error("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†")}},[pa,La]=l.useState({isOpen:!1,userId:"",userName:"",history:[],loading:!1}),Zi=async n=>{La({isOpen:!0,userId:n.uid,userName:n.name||n.email,history:[],loading:!0});try{const H=await Ox(n.uid,20);La(K=>({...K,history:H,loading:!1}))}catch(H){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„:",H),La(K=>({...K,loading:!1})),t.error("ÙØ´Ù„ Ø¬Ù„Ø¨ Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„")}},ec=async(n,H=30)=>{if(await a.confirm(`Ø³ÙŠØªÙ… ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² Ù„Ù€ "${n.name}" Ù„Ù…Ø¯Ø© ${H} ÙŠÙˆÙ…`,{title:"âœ¨ ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²"}))try{const W=new Date;W.setDate(W.getDate()+H),await me(J(C,"restaurants",n.id),{packageType:"premium",packageSubscribedAt:X(),packageExpiresAt:W,packageRequest:null,updatedAt:X()}),await Oa("package_activate","restaurant",n.id,n.name,`ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² Ù„Ù…Ø¯Ø© ${H} ÙŠÙˆÙ…`),t.success(`ØªÙ… ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² Ù„Ù€ ${n.name} âœ¨`),rs()}catch(W){console.error("Ø®Ø·Ø£:",W),t.error("ÙØ´Ù„ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø©")}},sc=async n=>{if(await a.confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² Ù„Ù€ "${n.name}"ØŸ`,{title:"âš ï¸ Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²",dangerous:!0}))try{await me(J(C,"restaurants",n.id),{packageType:"free",packageExpiresAt:null,updatedAt:X()}),await Oa("package_cancel","restaurant",n.id,n.name,"Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²"),t.success(`ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² Ù„Ù€ ${n.name}`),rs()}catch(K){console.error("Ø®Ø·Ø£:",K),t.error("ÙØ´Ù„ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¨Ø§Ù‚Ø©")}},Kl=async()=>{_l(!0);try{const n=fe(ee(C,"activityLogs"),es("createdAt","desc"),js(100)),K=(await be(n)).docs.map(W=>{var xe,he;return{id:W.id,...W.data(),createdAt:((he=(xe=W.data().createdAt)==null?void 0:xe.toDate)==null?void 0:he.call(xe))||null}});Qi(K)}catch(n){console.warn("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:",n)}finally{_l(!1)}},tc=async()=>{var n;try{const H=["supervisor","support","social_media","admin","accountant"],K=[];for(const W of j)H.includes(W.role)&&K.push({uid:W.uid,email:W.email,name:W.name,phone:W.phone,role:W.role,isActive:W.isActive!==!1&&!((n=W.security)!=null&&n.isDeactivated),createdAt:W.createdAt});Cr(K)}catch(H){console.warn("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†:",H)}};l.useEffect(()=>{j.length>0&&tc()},[j]);const ac=async()=>{if(!At.trim()||!da.trim()){t.warning("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±");return}if(da.length<6){t.warning("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");return}const n={supervisor:"Ù…Ø´Ø±Ù",support:"Ø¯Ø¹Ù… ÙÙ†ÙŠ",social_media:"Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§",admin:"Ø¥Ø¯Ø§Ø±Ø©",accountant:"Ù…Ø­Ø§Ø³Ø¨"};if(await a.confirm(`Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯:

ğŸ“§ ${At}
ğŸ‘¤ ${_a||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"}
ğŸ­ ${n[xa]}

Ù…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬Ùƒ Ù…Ø¤Ù‚ØªØ§Ù‹.`,{title:"Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯"})){ql(!0);try{const W=(await Pt(fs,At.trim(),da)).user.uid;await Be(J(C,"users",W),{email:At.trim(),name:_a.trim()||"Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯",phone:Ml.trim()||"",role:xa,isActive:!0,createdAt:X(),createdBy:s==null?void 0:s.uid}),["supervisor","admin","accountant"].includes(xa)&&await Be(J(C,"wallets",W),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:X()}),await Pe(ee(C,"activityLogs"),{action:"create",targetType:"user",targetId:W,targetName:_a.trim()||At,performedBy:s==null?void 0:s.uid,performedByName:s==null?void 0:s.email,details:`Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯ - ${n[xa]}`,createdAt:X()}),t.success("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆØ¸Ù Ø¨Ù†Ø¬Ø§Ø­ âœ…"),t.info("âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ÙƒØŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰"),$l(""),Ol(""),Ll(""),Ul(""),Bl("support"),Fl(!1)}catch(K){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…ÙˆØ¸Ù:",K),K.code==="auth/email-already-in-use"?t.error("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¨Ù‚Ø§Ù‹"):K.code==="auth/invalid-email"?t.error("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­"):t.error("ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…ÙˆØ¸Ù")}finally{ql(!1)}}},rc=async(n,H)=>{const K=oa.find(xe=>xe.uid===n);if(!K)return;const W={supervisor:"Ù…Ø´Ø±Ù",support:"Ø¯Ø¹Ù… ÙÙ†ÙŠ",social_media:"Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§",admin:"Ø¥Ø¯Ø§Ø±Ø©",accountant:"Ù…Ø­Ø§Ø³Ø¨"};try{await me(J(C,"users",n),{role:H,updatedAt:X()}),await Pe(ee(C,"activityLogs"),{action:"role_change",targetType:"user",targetId:n,targetName:K.name||K.email,performedBy:s==null?void 0:s.uid,performedByName:s==null?void 0:s.email,oldValue:K.role,newValue:H,details:`ØªØºÙŠÙŠØ± Ø§Ù„Ø¯ÙˆØ± Ù…Ù† ${W[K.role]} Ø¥Ù„Ù‰ ${W[H]}`,createdAt:X()}),Cr(xe=>xe.map(he=>he.uid===n?{...he,role:H}:he)),Ir(null),t.success("ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø¯ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­ âœ…")}catch(xe){console.error("Ø®Ø·Ø£:",xe),t.error("ÙØ´Ù„ ØªØºÙŠÙŠØ± Ø§Ù„Ø¯ÙˆØ±")}},lc=async n=>{const H=oa.find(he=>he.uid===n);if(!H)return;const K=!H.isActive,W=K?"ØªÙØ¹ÙŠÙ„":"Ø¥ÙŠÙ‚Ø§Ù";if(await a.confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ ${W} Ø­Ø³Ø§Ø¨ ${H.name||H.email}ØŸ`,{title:`${W} Ø§Ù„Ø­Ø³Ø§Ø¨`}))try{await me(J(C,"users",n),{isActive:K,"security.isDeactivated":!K,updatedAt:X()}),await Pe(ee(C,"activityLogs"),{action:K?"activate":"deactivate",targetType:"user",targetId:n,targetName:H.name||H.email,performedBy:s==null?void 0:s.uid,performedByName:s==null?void 0:s.email,details:`${W} Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆØ¸Ù`,createdAt:X()}),Cr(he=>he.map(we=>we.uid===n?{...we,isActive:K}:we)),t.success(`ØªÙ… ${W} Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­ âœ…`)}catch(he){console.error("Ø®Ø·Ø£:",he),t.error(`ÙØ´Ù„ ${W} Ø§Ù„Ø­Ø³Ø§Ø¨`)}},nc=async()=>{if(!Q.trim()||!ue.trim()){t.warning("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±");return}if(ue.length<6){t.warning("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");return}if(await a.confirm(`Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø´Ø±Ù Ø¬Ø¯ÙŠØ¯:

ğŸ“§ ${Q}
ğŸ‘¤ ${re||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"}

Ù…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬Ùƒ Ù…Ø¤Ù‚ØªØ§Ù‹ØŒ Ù‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.`,{title:"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±Ù Ø¬Ø¯ÙŠØ¯"})){G(!0);try{const K=(await Pt(fs,Q.trim(),ue)).user.uid;await Be(J(C,"users",K),{email:Q.trim(),name:re.trim()||"Ù…Ø´Ø±Ù Ø¬Ø¯ÙŠØ¯",phone:se.trim()||"",role:"admin",createdAt:X()}),await Be(J(C,"wallets",K),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:X()}),t.success("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø´Ø±Ù Ø¨Ù†Ø¬Ø§Ø­ âœ…"),t.info("âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ÙƒØŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰"),ie(""),ye(""),_(""),pe(""),V(!1)}catch(H){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±Ù:",H),H.code==="auth/email-already-in-use"?t.error("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¨Ù‚Ø§Ù‹"):H.code==="auth/invalid-email"?t.error("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­"):H.code==="auth/weak-password"?t.error("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ© Ø¬Ø¯Ø§Ù‹"):t.error("ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±Ù: "+(H.message||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"))}finally{G(!1)}}},ic=async()=>{if(!ce.trim()||!de.trim()){t.warning("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±");return}if(de.length<6){t.warning("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");return}if(await a.confirm(`Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ù†Ø¯ÙˆØ¨ Ø¬Ø¯ÙŠØ¯:

ğŸ“§ ${ce}
ğŸ‘¤ ${Y||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"}
ğŸ“± ${ge||"Ø¨Ø¯ÙˆÙ† Ø±Ù‚Ù…"}`,{title:"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù†Ø¯ÙˆØ¨ Ø¬Ø¯ÙŠØ¯"})){Ue(!0);try{const K=(await Pt(fs,ce.trim(),de)).user.uid;await Be(J(C,"users",K),{email:ce.trim(),name:Y.trim()||"Ù…Ù†Ø¯ÙˆØ¨ Ø¬Ø¯ÙŠØ¯",phone:ge.trim()||"",role:"courier",createdAt:X()}),t.success("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ Ø¨Ù†Ø¬Ø§Ø­ âœ…"),t.info("âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ÙƒØŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰"),Ne(""),te(""),oe(""),ke(""),ne(!1)}catch(H){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨:",H),H.code==="auth/email-already-in-use"?t.error("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¨Ù‚Ø§Ù‹"):t.error("ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨: "+(H.message||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"))}finally{Ue(!1)}}},cc=async()=>{if(!Qe.trim()){t.warning("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…");return}if(!$s.trim()||!Zs.trim()){t.warning("Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ø·Ø¹Ù…");return}if(await a.confirm(`Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯:

ğŸª ${Qe}
ğŸ“ ${Fs||"Ø¨Ø¯ÙˆÙ† Ù…Ø¯ÙŠÙ†Ø©"}
ğŸ‘¤ ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ø·Ø¹Ù…: ${$s}`,{title:"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯"})){ve(!0);try{const K=(await Pt(fs,$s.trim(),Zs)).user.uid;await Be(J(C,"users",K),{email:$s.trim(),name:Qe.trim()+" - Ù…Ø§Ù„Ùƒ",role:"owner",createdAt:X()}),await Be(J(C,"restaurants",K),{name:Qe.trim(),ownerId:K,email:bt.trim()||$s.trim(),phone:nt.trim()||"",city:Fs.trim()||"",referredBy:s==null?void 0:s.uid,referrerType:"developer",...St?{supervisorId:St}:{},createdAt:X()}),t.success("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø·Ø¹Ù… ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø¨Ù†Ø¬Ø§Ø­ âœ…"),t.info("âš ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ÙƒØŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰"),_s(""),lt(""),ds(""),Js(""),Xs(""),na(""),ia(""),Ye(!1)}catch(H){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø·Ø¹Ù…:",H),H.code==="auth/email-already-in-use"?t.error("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¨Ù‚Ø§Ù‹"):t.error("ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø·Ø¹Ù…: "+(H.message||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"))}finally{ve(!1)}}},oc=()=>{const n=new Date,H=new Date(n.getFullYear(),n.getMonth(),n.getDate()),K=new Date(H.getTime()-7*24*60*60*1e3),W=new Date(H.getTime()-30*24*60*60*1e3),xe=L.filter(Se=>{var xs,st;return(((st=(xs=Se.createdAt)==null?void 0:xs.toDate)==null?void 0:st.call(xs))||new Date(0))>=H&&Se.status!=="cancelled"}),he=L.filter(Se=>{var xs,st;return(((st=(xs=Se.createdAt)==null?void 0:xs.toDate)==null?void 0:st.call(xs))||new Date(0))>=K&&Se.status!=="cancelled"}),we=L.filter(Se=>{var xs,st;return(((st=(xs=Se.createdAt)==null?void 0:xs.toDate)==null?void 0:st.call(xs))||new Date(0))>=W&&Se.status!=="cancelled"}),Re=L.filter(Se=>Se.status==="delivered");return{todayRevenue:xe.reduce((Se,qe)=>Se+(qe.total||0),0),todayOrders:xe.length,todayPlatformFee:xe.reduce((Se,qe)=>Se+(qe.platformFee||0),0),weekRevenue:he.reduce((Se,qe)=>Se+(qe.total||0),0),weekOrders:he.length,weekPlatformFee:he.reduce((Se,qe)=>Se+(qe.platformFee||0),0),monthRevenue:we.reduce((Se,qe)=>Se+(qe.total||0),0),monthOrders:we.length,monthPlatformFee:we.reduce((Se,qe)=>Se+(qe.platformFee||0),0),totalRevenue:Re.reduce((Se,qe)=>Se+(qe.total||0),0),totalPlatformFee:Re.reduce((Se,qe)=>Se+(qe.platformFee||0),0),totalAdminCommission:Re.reduce((Se,qe)=>Se+(qe.adminCommission||0),0)}},rs=async()=>{try{const[n,H,K,W,xe]=await Promise.all([be(ee(C,"users")),be(ee(C,"restaurants")),be(ee(C,"menuItems")),be(ee(C,"orders")),be(ee(C,"wallets"))]);let he={docs:[]};try{he=await be(ee(C,"tasks"))}catch{}let we={docs:[]};try{we=await be(ee(C,"packageRequests"))}catch{}const Re=n.docs.map(De=>({uid:De.id,...De.data()}));z(Re);const Se=H.docs.map(De=>({id:De.id,...De.data()}));f(Se);const qe=W.docs.map(De=>({id:De.id,...De.data()}));$(qe);const xs=he.docs.map(De=>({id:De.id,...De.data()}));ss(xs.sort((De,qt)=>{var ft,It;return(((ft=qt.createdAt)==null?void 0:ft.seconds)||0)-(((It=De.createdAt)==null?void 0:It.seconds)||0)}));const st=we.docs.map(De=>({id:De.id,...De.data()}));Wi(st.sort((De,qt)=>{var ft,It;return(((ft=qt.createdAt)==null?void 0:ft.seconds)||0)-(((It=De.createdAt)==null?void 0:It.seconds)||0)}));const Fr={};xe.docs.forEach(De=>{Fr[De.id]=De.data()});const jc=Fr.app_earnings||{balance:0,totalEarnings:0},en=Re.filter(De=>De.role==="admin"),Nc=Re.filter(De=>De.role==="courier"),yc=Re.filter(De=>De.role==="customer"),wc=Re.filter(De=>De.role==="owner"),vc=en.map(De=>{const qt=Se.filter(It=>It.referredBy===De.uid),ft=Fr[De.uid]||{balance:0,totalEarnings:0};return{uid:De.uid,email:De.email,name:De.name,walletBalance:ft.balance||0,totalEarnings:ft.totalEarnings||0,restaurantsCount:qt.length,restaurants:qt}});F(vc),N({users:Re.length,restaurants:Se.length,menuItems:K.size,orders:qe.length,pendingOrders:qe.filter(De=>De.status==="pending").length,deliveredOrders:qe.filter(De=>De.status==="delivered").length,admins:en.length,couriers:Nc.length,customers:yc.length,owners:wc.length,totalAppEarnings:jc.totalEarnings||0});const sn=await Ce(J(C,"settings","general"));if(sn.exists()){const De=sn.data();A(De),P(De)}else{const De={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1,adminCommissionRate:.75};A(De),P(De)}}catch(n){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:",n),t.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{w(!1),U(!1)}};l.useEffect(()=>{rs()},[]);const _r=()=>{U(!0),rs(),t.info("Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...")},dc=async()=>{try{await Be(J(C,"settings","general"),T,{merge:!0}),A(T),B(!1),t.success("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ âœ…")}catch(n){console.error("Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:",n),t.error("ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª")}},xc=async n=>{try{await me(J(C,"restaurants",n),{...R,updatedAt:X()}),o(null),t.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø·Ø¹Ù… Ø¨Ù†Ø¬Ø§Ø­ âœ…"),rs()}catch(H){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø·Ø¹Ù…:",H),t.error("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø·Ø¹Ù…")}},mc=async(n,H)=>{try{if(!H.type.startsWith("image/")){t.warning("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ÙÙ‚Ø·");return}if(H.size>5*1024*1024){t.warning("Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ±ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£Ù‚Ù„ Ù…Ù† 5MB");return}x(!0);const K=H.name.replace(/\s+/g,"_"),W=`restaurants/${n}/logo_${Date.now()}_${K}`,xe=As(i,W),he={contentType:H.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await Nt(xe,H,he);const we=await Is(xe);await me(J(C,"restaurants",n),{logoUrl:we,updatedAt:X()}),t.success("ØªÙ… Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­ âœ…"),rs()}catch(K){console.error("Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø±:",K),t.error("ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø±")}finally{x(!1)}},hc=async n=>{if(await a.confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø·Ø¹Ù…ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹!",{title:"Ø­Ø°Ù Ø§Ù„Ù…Ø·Ø¹Ù…",dangerous:!0}))try{await Ds(J(C,"restaurants",n)),t.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø·Ø¹Ù… Ø¨Ù†Ø¬Ø§Ø­"),rs()}catch(K){console.error("Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø·Ø¹Ù…:",K),t.error("ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ø·Ø¹Ù…")}},uc=async n=>{try{await me(J(C,"users",n),{...d,updatedAt:X()}),y(null),t.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­ âœ…"),rs()}catch(H){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:",H),t.error("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")}},pc=async n=>{if(await a.confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹!",{title:"Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",dangerous:!0}))try{await Ds(J(C,"users",n)),t.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"),t.warning("Ù…Ù„Ø§Ø­Ø¸Ø©: ÙŠØ¬Ø¨ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù…Ù† Firebase Auth"),rs()}catch(K){console.error("Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:",K),t.error("ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")}},gc=async(n,H)=>{try{await me(J(C,"orders",n),{status:H,updatedAt:X()}),t.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ âœ…"),rs()}catch(K){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø·Ù„Ø¨:",K),t.error("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø·Ù„Ø¨")}},bc=n=>{switch(n){case"customer":return"ğŸ‘¤ Ø¹Ù…ÙŠÙ„";case"owner":return"ğŸª ØµØ§Ø­Ø¨ Ù…Ø·Ø¹Ù…";case"courier":return"ğŸš— Ù…Ù†Ø¯ÙˆØ¨";case"admin":return"ğŸ‘‘ Ù…Ø´Ø±Ù";case"developer":return"ğŸ‘¨â€ğŸ’» Ù…Ø·ÙˆØ±";case"supervisor":return"ğŸ‘©â€ğŸ’¼ Ù…Ø´Ø±ÙØ© Ù…Ø·Ø§Ø¹Ù…";case"social_media":return"ğŸ“± Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§";case"support":return"ğŸ§ Ø¯Ø¹Ù… ÙÙ†ÙŠ";case"accountant":return"ğŸ’° Ù…Ø­Ø§Ø³Ø¨";default:return n}},fc=n=>{switch(n){case"pending":return"â³ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©";case"accepted":return"âœ… Ù…Ù‚Ø¨ÙˆÙ„";case"preparing":return"ğŸ‘¨â€ğŸ³ Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±";case"ready":return"ğŸ“¦ Ø¬Ø§Ù‡Ø²";case"out_for_delivery":return"ğŸš— ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚";case"delivered":return"âœ”ï¸ ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…";case"cancelled":return"âŒ Ù…Ù„ØºÙŠ";default:return n}};return r?e.jsx($e,{allow:["developer"],children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ze,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ±..."})]})})}):e.jsx($e,{allow:["developer"],children:e.jsxs("div",{className:"space-y-6 pb-8",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-3xl p-8 text-white shadow-2xl",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-sky-500/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-sky-400 to-sky-600 rounded-2xl flex items-center justify-center shadow-lg shadow-sky-500/30",children:e.jsx(tl,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black tracking-tight",children:"Ù…Ø±ÙƒØ² Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsx("p",{className:"text-sky-300/80 text-sm",children:"Developer Console â€¢ Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"})]})]}),e.jsx("p",{className:"text-slate-400 mt-3 max-w-xl",children:"Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŒ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…ØŒ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ù„Ù…Ø§Ù„ÙŠØ©"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("button",{onClick:_r,disabled:D,className:"flex items-center gap-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm px-5 py-3 rounded-xl font-semibold transition border border-white/10 disabled:opacity-50",children:[e.jsx(ze,{className:`w-5 h-5 ${D?"animate-spin":""}`}),"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"]}),e.jsxs("a",{href:"/accounting",className:"flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 px-5 py-3 rounded-xl font-semibold transition shadow-lg shadow-emerald-500/30",children:[e.jsx(Vs,{className:"w-5 h-5"}),"Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©"]})]})]}),e.jsxs("div",{className:"relative z-10 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mt-8",children:[e.jsx(Ht,{icon:e.jsx(Ws,{className:"w-5 h-5"}),value:v.users,label:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",color:"sky"}),e.jsx(Ht,{icon:e.jsx(Ns,{className:"w-5 h-5"}),value:v.restaurants,label:"Ø§Ù„Ù…Ø·Ø§Ø¹Ù…",color:"emerald"}),e.jsx(Ht,{icon:e.jsx(Me,{className:"w-5 h-5"}),value:v.orders,label:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",color:"purple"}),e.jsx(Ht,{icon:e.jsx(Ve,{className:"w-5 h-5"}),value:v.couriers,label:"Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨",color:"orange"}),e.jsx(Ht,{icon:e.jsx(ts,{className:"w-5 h-5"}),value:v.admins,label:"Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†",color:"amber"}),e.jsx(Ht,{icon:e.jsx(is,{className:"w-5 h-5"}),value:`${v.totalAppEarnings.toFixed(0)} Ø±.Ø³`,label:"Ø§Ù„Ø£Ø±Ø¨Ø§Ø­",color:"green"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-100 p-2",children:e.jsx("div",{className:"flex flex-wrap gap-1.5",children:[{id:"overview",label:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©",icon:e.jsx(oo,{className:"w-4 h-4"})},{id:"finance",label:"Ø§Ù„Ù…Ø§Ù„ÙŠØ©",icon:e.jsx(is,{className:"w-4 h-4"})},{id:"restaurants",label:"Ø§Ù„Ù…Ø·Ø§Ø¹Ù…",icon:e.jsx(Ns,{className:"w-4 h-4"})},{id:"storeAnalytics",label:"ØªØ­Ù„ÙŠÙ„Ø§Øª",icon:e.jsx(Zn,{className:"w-4 h-4"})},{id:"packages",label:"Ø§Ù„Ø¨Ø§Ù‚Ø§Øª",icon:e.jsx(ts,{className:"w-4 h-4"}),badge:Ct.filter(n=>["pending","payment_sent"].includes(n.status)).length},{id:"packageSettings",label:"Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø§Øª",icon:e.jsx(ps,{className:"w-4 h-4"})},{id:"licenses",label:"Ø§Ù„ØªØ±Ø§Ø®ÙŠØµ",icon:e.jsx(al,{className:"w-4 h-4"})},{id:"orders",label:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",icon:e.jsx(Me,{className:"w-4 h-4"})},{id:"users",label:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",icon:e.jsx(Ws,{className:"w-4 h-4"})},{id:"couriers",label:"Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨",icon:e.jsx(Ve,{className:"w-4 h-4"})},{id:"admins",label:"Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†",icon:e.jsx(ts,{className:"w-4 h-4"})},{id:"employees",label:"Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†",icon:e.jsx(ot,{className:"w-4 h-4"})},{id:"tasks",label:"Ø§Ù„Ù…Ù‡Ø§Ù…",icon:e.jsx(xt,{className:"w-4 h-4"})},{id:"activityLog",label:"Ø§Ù„Ø³Ø¬Ù„",icon:e.jsx(Ge,{className:"w-4 h-4"})},{id:"settings",label:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",icon:e.jsx(wa,{className:"w-4 h-4"})},{id:"tools",label:"Ø§Ù„Ø£Ø¯ÙˆØ§Øª",icon:e.jsx(tl,{className:"w-4 h-4"})}].map(n=>e.jsxs("button",{onClick:()=>{u(n.id),n.id==="activityLog"&&Kl()},className:`relative flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 ${c===n.id?"bg-gradient-to-r from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-500/30":"text-slate-600 hover:bg-slate-100"}`,children:[n.icon,e.jsx("span",{className:"hidden sm:inline",children:n.label}),n.badge&&n.badge>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center animate-pulse",children:n.badge})]},n.id))})}),c==="overview"&&e.jsxs("div",{className:"space-y-6",children:[Ct.filter(n=>["pending","payment_sent"].includes(n.status)).length>0&&e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:e.jsx(yt,{className:"w-7 h-7 animate-bounce"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"Ø·Ù„Ø¨Ø§Øª ØªØ­ØªØ§Ø¬ Ø§Ù†ØªØ¨Ø§Ù‡Ùƒ!"}),e.jsxs("p",{className:"text-white/80",children:[Ct.filter(n=>n.status==="pending").length>0&&e.jsxs("span",{className:"mr-3",children:["â³ ",Ct.filter(n=>n.status==="pending").length," Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯"]}),Ct.filter(n=>n.status==="payment_sent").length>0&&e.jsxs("span",{children:["ğŸ’³ ",Ct.filter(n=>n.status==="payment_sent").length," Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯"]})]})]})]}),e.jsx("button",{onClick:()=>u("packages"),className:"bg-white text-orange-600 px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transition transform hover:scale-105",children:"Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª â†"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Ha,{title:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…",value:`${L.filter(n=>{var W,xe;const H=((xe=(W=n.createdAt)==null?void 0:W.toDate)==null?void 0:xe.call(W))||new Date(n.createdAt),K=new Date;return H.toDateString()===K.toDateString()&&n.status==="delivered"}).reduce((n,H)=>n+(H.total||0),0).toFixed(0)} Ø±.Ø³`,change:12.5,icon:e.jsx(Bs,{className:"w-5 h-5"}),color:"emerald"}),e.jsx(Ha,{title:"Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…",value:L.filter(n=>{var W,xe;const H=((xe=(W=n.createdAt)==null?void 0:W.toDate)==null?void 0:xe.call(W))||new Date(n.createdAt),K=new Date;return H.toDateString()===K.toDateString()}).length.toString(),change:8.3,icon:e.jsx(Me,{className:"w-5 h-5"}),color:"sky"}),e.jsx(Ha,{title:"Ù…Ø´ØªØ±ÙƒÙŠÙ† Ø§Ù„ØªÙ…ÙŠØ²",value:p.filter(n=>n.packageType==="premium").length.toString(),subtitle:`Ù…Ù† ${p.length} Ù…Ø·Ø¹Ù…`,icon:e.jsx(ts,{className:"w-5 h-5"}),color:"amber"}),e.jsx(Ha,{title:"Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªÙˆØµÙŠÙ„",value:`${v.orders>0?(v.deliveredOrders/v.orders*100).toFixed(0):0}%`,subtitle:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥ØªÙ…Ø§Ù…",icon:e.jsx(xt,{className:"w-5 h-5"}),color:"purple"})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(Wa,{icon:e.jsx(Ie,{className:"w-5 h-5 text-emerald-500"}),value:j.filter(n=>n.isActive!==!1).length,label:"Ø­Ø³Ø§Ø¨Ø§Øª Ù†Ø´Ø·Ø©",bgColor:"bg-emerald-50"}),e.jsx(Wa,{icon:e.jsx(Rs,{className:"w-5 h-5 text-red-500"}),value:j.filter(n=>n.isActive===!1).length,label:"Ø­Ø³Ø§Ø¨Ø§Øª Ù…ÙˆÙ‚ÙˆÙØ©",bgColor:"bg-red-50"}),e.jsx(Wa,{icon:e.jsx(ps,{className:"w-5 h-5 text-amber-500"}),value:p.filter(n=>n.packageType==="premium").length,label:"Ø¨Ø§Ù‚Ø© ØªÙ…ÙŠØ²",bgColor:"bg-amber-50"}),e.jsx(Wa,{icon:e.jsx(Me,{className:"w-5 h-5 text-slate-500"}),value:p.filter(n=>!n.packageType||n.packageType==="free").length,label:"Ø¨Ø§Ù‚Ø© Ù…Ø¬Ø§Ù†ÙŠØ©",bgColor:"bg-slate-50"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(xo,{className:"w-6 h-6 text-orange-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),e.jsx("p",{className:"font-mono text-sm",children:Ls.projectId})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),e.jsx("p",{className:"font-mono text-sm",children:Ls.storageBucket})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("a",{href:`https://console.firebase.google.com/project/${Ls.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:"ğŸ”¥ Console"}),e.jsx("a",{href:`https://console.firebase.google.com/project/${Ls.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:"ğŸ“Š Firestore"}),e.jsx("a",{href:`https://console.firebase.google.com/project/${Ls.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:"ğŸ” Auth"}),e.jsx("a",{href:`https://console.firebase.google.com/project/${Ls.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:"ğŸ“ Storage"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"ğŸ“Š ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.customers}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ø¹Ù…Ù„Ø§Ø¡"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.owners}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ø£ØµØ­Ø§Ø¨ Ù…Ø·Ø§Ø¹Ù…"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.couriers}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ù…Ù†Ø§Ø¯ÙŠØ¨"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:v.admins}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ù…Ø´Ø±ÙÙŠÙ†"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ù…Ø·ÙˆØ±"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"ğŸ”— Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(ae,{to:"/reports-admin",className:"flex items-center gap-3 bg-amber-50 hover:bg-amber-100 text-amber-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"âš ï¸"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª"}),e.jsx("p",{className:"text-xs opacity-75",children:"Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"})]})]}),e.jsxs(ae,{to:"/accounting",className:"flex items-center gap-3 bg-emerald-50 hover:bg-emerald-100 text-emerald-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ’°"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©"}),e.jsx("p",{className:"text-xs opacity-75",children:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©"})]})]}),e.jsxs(ae,{to:"/support-admin",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ§"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø¹Ù…"}),e.jsx("p",{className:"text-xs opacity-75",children:"ØªØ°Ø§ÙƒØ± Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ"})]})]}),e.jsxs(ae,{to:"/problems-admin",className:"flex items-center gap-3 bg-red-50 hover:bg-red-100 text-red-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"ğŸš¨"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø´Ø§ÙƒÙ„"}),e.jsx("p",{className:"text-xs opacity-75",children:"Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-orange-500"}),"Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø°Ø±ÙˆØ©"]}),e.jsx("div",{className:"grid grid-cols-6 md:grid-cols-12 gap-2",children:Array.from({length:24},(n,H)=>{const K=L.filter(he=>{var Re,Se;return(((Se=(Re=he.createdAt)==null?void 0:Re.toDate)==null?void 0:Se.call(Re))||new Date(he.createdAt)).getHours()===H}).length,W=Math.max(...Array.from({length:24},(he,we)=>L.filter(Re=>{var qe,xs;return(((xs=(qe=Re.createdAt)==null?void 0:qe.toDate)==null?void 0:xs.call(qe))||new Date(Re.createdAt)).getHours()===we}).length),1),xe=K/W;return e.jsxs("div",{className:"text-center",title:`${H}:00 - ${K} Ø·Ù„Ø¨`,children:[e.jsx("div",{className:`h-16 rounded-lg mb-1 ${xe>.8?"bg-red-500":xe>.6?"bg-orange-500":xe>.4?"bg-yellow-500":xe>.2?"bg-green-400":xe>0?"bg-green-200":"bg-gray-100"}`,style:{opacity:Math.max(.3,xe)}}),e.jsx("span",{className:"text-xs text-gray-500",children:H})]},H)})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"})," Ø°Ø±ÙˆØ© Ø¹Ø§Ù„ÙŠØ©"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"})," Ù†Ø´Ø§Ø· Ù…Ø±ØªÙØ¹"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"})," Ù…ØªÙˆØ³Ø·"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-green-400 rounded"})," Ù…Ù†Ø®ÙØ¶"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Na,{className:"w-5 h-5 text-amber-500"}),"Ø£ÙØ¶Ù„ 5 Ù…Ø·Ø§Ø¹Ù… (Ø­Ø³Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª)"]}),e.jsxs("div",{className:"space-y-3",children:[p.map(n=>({...n,orderCount:L.filter(H=>H.restaurantId===n.id&&H.status==="delivered").length,revenue:L.filter(H=>H.restaurantId===n.id&&H.status==="delivered").reduce((H,K)=>H+(K.subtotal||0),0)})).sort((n,H)=>H.orderCount-n.orderCount).slice(0,5).map((n,H)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${H===0?"bg-amber-500":H===1?"bg-gray-400":H===2?"bg-amber-700":"bg-gray-300"}`,children:H+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold",children:n.name}),e.jsx("p",{className:"text-sm text-gray-500",children:n.city||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-emerald-600",children:[n.orderCount," Ø·Ù„Ø¨"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n.revenue.toFixed(0)," Ø±.Ø³"]})]})]},n.id)),p.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§ÙÙŠØ©"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-cyan-500"}),"Ø£ÙØ¶Ù„ 5 Ù…Ù†Ø§Ø¯ÙŠØ¨ (Ø­Ø³Ø¨ Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª)"]}),e.jsx("div",{className:"space-y-3",children:(()=>{const n=L.filter(K=>K.courierId&&K.status==="delivered").reduce((K,W)=>(K[W.courierId]||(K[W.courierId]={deliveries:0,earnings:0}),K[W.courierId].deliveries++,K[W.courierId].earnings+=(W.deliveryFee||0)-(W.courierPlatformFee||0),K),{}),H=j.filter(K=>K.role==="courier"&&n[K.uid]).map(K=>({...K,...n[K.uid]})).sort((K,W)=>W.deliveries-K.deliveries).slice(0,5);return H.length===0?e.jsx("p",{className:"text-center text-gray-500 py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§ÙÙŠØ©"}):H.map((K,W)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${W===0?"bg-cyan-500":W===1?"bg-gray-400":W===2?"bg-cyan-700":"bg-gray-300"}`,children:W+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold",children:K.name||"Ù…Ù†Ø¯ÙˆØ¨"}),e.jsx("p",{className:"text-sm text-gray-500",children:K.phone||K.email})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-cyan-600",children:[K.deliveries," ØªÙˆØµÙŠÙ„Ø©"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[K.earnings.toFixed(0)," Ø±.Ø³"]})]})]},K.uid))})()})]})]}),c==="finance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl p-6 text-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:"ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø¹Ø±Ø¶ ØªÙ‚Ø§Ø±ÙŠØ± Ù…ÙØµÙ„Ø©ØŒ Ù…Ø­Ø§ÙØ¸ Ø§Ù„Ø£Ø³Ø± ÙˆØ§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨ØŒ ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©"})]}),e.jsxs("a",{href:"/accounting",className:"bg-white text-emerald-600 px-6 py-3 rounded-xl font-bold hover:bg-emerald-50 transition flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5"}),"ÙØªØ­ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©"]})]}),(()=>{const n=oc();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 rounded-2xl shadow-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"ğŸ’° Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:n.totalRevenue.toFixed(0)}),e.jsx("p",{className:"text-sm opacity-90",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ø±.Ø³)"})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:n.totalPlatformFee.toFixed(2)}),e.jsx("p",{className:"text-sm opacity-90",children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Ø±.Ø³)"})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:n.totalAdminCommission.toFixed(2)}),e.jsx("p",{className:"text-sm opacity-90",children:"Ø¹Ù…ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ† (Ø±.Ø³)"})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:(n.totalPlatformFee+n.totalAdminCommission).toFixed(2)}),e.jsx("p",{className:"text-sm opacity-90",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ (Ø±.Ø³)"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4",children:"ğŸ“… Ø§Ù„ÙŠÙˆÙ…"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª:"}),e.jsx("span",{className:"font-bold",children:n.todayOrders})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª:"}),e.jsxs("span",{className:"font-bold",children:[n.todayRevenue.toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[n.todayPlatformFee.toFixed(2)," Ø±.Ø³"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-600 mb-4",children:"ğŸ“… Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª:"}),e.jsx("span",{className:"font-bold",children:n.weekOrders})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª:"}),e.jsxs("span",{className:"font-bold",children:[n.weekRevenue.toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[n.weekPlatformFee.toFixed(2)," Ø±.Ø³"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-600 mb-4",children:"ğŸ“… Ø¢Ø®Ø± 30 ÙŠÙˆÙ…"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª:"}),e.jsx("span",{className:"font-bold",children:n.monthOrders})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª:"}),e.jsxs("span",{className:"font-bold",children:[n.monthRevenue.toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[n.monthPlatformFee.toFixed(2)," Ø±.Ø³"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"ğŸ† Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø£Ø¯Ø§Ø¡Ù‹"}),e.jsx("div",{className:"space-y-3",children:p.map(H=>({...H,ordersCount:L.filter(K=>K.restaurantId===H.id&&K.status==="delivered").length,revenue:L.filter(K=>K.restaurantId===H.id&&K.status==="delivered").reduce((K,W)=>K+(W.total||0),0)})).sort((H,K)=>K.revenue-H.revenue).slice(0,5).map((H,K)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:K===0?"ğŸ¥‡":K===1?"ğŸ¥ˆ":K===2?"ğŸ¥‰":`#${K+1}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:H.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[H.ordersCount," Ø·Ù„Ø¨"]})]})]}),e.jsxs("p",{className:"font-bold text-green-600",children:[H.revenue.toFixed(2)," Ø±.Ø³"]})]},H.id))})]})]})})()]}),c==="restaurants"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white via-sky-50/30 to-emerald-50/30 rounded-3xl p-6 border border-sky-100 shadow-lg shadow-sky-100/50",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-200",children:e.jsx(Le,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø·Ø§Ø¹Ù…"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Rr().length," Ù…Ù† ",p.length," Ù…Ø·Ø¹Ù…"]})]})]}),e.jsx("button",{onClick:()=>Ye(!_e),className:"group flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white px-5 py-3 rounded-2xl font-bold shadow-lg shadow-emerald-200 transition-all duration-300 hover:scale-105",children:_e?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-5 h-5"}),"Ø¥Ù„ØºØ§Ø¡"]}):e.jsxs(e.Fragment,{children:[e.jsx(Cs,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"}),"Ø¥Ø¶Ø§ÙØ© Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯"]})})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Qs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ØŒ Ø§Ù„Ù‡Ø§ØªÙØŒ Ø£Ùˆ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©...",value:Os,onChange:n=>ct(n.target.value),className:"w-full pr-12 pl-4 py-4 border-2 border-sky-100 rounded-2xl focus:border-emerald-400 focus:ring-4 focus:ring-emerald-100 transition-all bg-white/80 backdrop-blur text-lg"}),Os&&e.jsx("button",{onClick:()=>ct(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ja,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"ÙÙ„ØªØ±:"})]}),[{value:"all",label:"Ø§Ù„ÙƒÙ„",icon:"ğŸª"},{value:"premium",label:"Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…",icon:"ğŸ‘‘"},{value:"free",label:"Ù…Ø¬Ø§Ù†ÙŠ",icon:"ğŸ†“"},{value:"verified",label:"Ù…ÙˆØ«Ù‚",icon:"âœ…"},{value:"unverified",label:"ØºÙŠØ± Ù…ÙˆØ«Ù‚",icon:"â³"}].map(n=>e.jsxs("button",{onClick:()=>Hl(n.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${ha===n.value?"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg shadow-emerald-200":"bg-white border border-gray-200 text-gray-600 hover:border-emerald-300 hover:bg-emerald-50"}`,children:[n.icon," ",n.label]},n.value)),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(mo,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"ØªØ±ØªÙŠØ¨:"})]}),e.jsxs("select",{value:Hs,onChange:n=>Tr(n.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-medium focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",children:[e.jsx("option",{value:"newest",children:"Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹"}),e.jsx("option",{value:"oldest",children:"Ø§Ù„Ø£Ù‚Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹"}),e.jsx("option",{value:"name",children:"Ø§Ù„Ø§Ø³Ù… (Ø£-ÙŠ)"})]})]})]}),_e&&e.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border-2 border-green-200",children:[e.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"ğŸª Ø¥Ø¶Ø§ÙØ© Ù…Ø·Ø¹Ù… Ø¬Ø¯ÙŠØ¯"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù… *"}),e.jsx("input",{type:"text",placeholder:"Ù…Ø«Ø§Ù„: Ù…Ø·Ø¹Ù… Ø§Ù„Ø´Ø§Ù…",value:Qe,onChange:n=>_s(n.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"}),e.jsx("input",{type:"text",placeholder:"Ù…Ø«Ø§Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶",value:Fs,onChange:n=>lt(n.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:nt,onChange:n=>ds(n.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsx("input",{type:"email",placeholder:"restaurant@example.com",value:bt,onChange:n=>Js(n.target.value),className:"w-full border rounded-xl p-3"})]})]}),e.jsxs("div",{className:"border-t mt-4 pt-4",children:[e.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"ï¿½â€ğŸ’¼ ØªØ¹ÙŠÙŠÙ† Ù…Ø´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsxs("select",{value:St,onChange:n=>ia(n.target.value),className:"w-full border rounded-xl p-3",children:[e.jsx("option",{value:"",children:"-- Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø±Ù --"}),j.filter(n=>n.role==="supervisor").map(n=>e.jsxs("option",{value:n.uid,children:["ğŸ‘©â€ğŸ’¼ ",n.name||n.email]},n.uid))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ø§Ù„Ù…Ø´Ø±Ù ÙŠØªØ§Ø¨Ø¹ Ø§Ù„Ù…Ø·Ø¹Ù… ÙˆÙŠØ¯ÙŠØ±Ù‡ Ù…Ù† Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†"})]}),e.jsxs("div",{className:"border-t mt-4 pt-4",children:[e.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"ï¿½ğŸ‘¤ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ø·Ø¹Ù… (Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„)"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ø¥ÙŠÙ…ÙŠÙ„ ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ø·Ø¹Ù… *"}),e.jsx("input",{type:"email",placeholder:"owner@example.com",value:$s,onChange:n=>Xs(n.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± *"}),e.jsx("input",{type:"password",placeholder:"6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„",value:Zs,onChange:n=>na(n.target.value),className:"w-full border rounded-xl p-3"})]})]})]}),e.jsx("button",{onClick:cc,disabled:Bt||!Qe.trim()||!$s.trim()||!Zs.trim(),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Bt?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡..."]}):"ğŸª Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø·Ø¹Ù…"})]}),e.jsx("div",{className:"space-y-4",children:Rr().length===0?e.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Qs,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø±Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„ÙÙ„Ø§ØªØ± Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ø¨Ø­Ø«"}),e.jsx("button",{onClick:()=>{ct(""),Hl("all")},className:"mt-4 px-6 py-2 bg-sky-100 text-sky-600 rounded-xl font-medium hover:bg-sky-200 transition-colors",children:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙÙ„Ø§ØªØ±"})]}):Rr().map(n=>{var H,K;return e.jsx("div",{className:"bg-white rounded-2xl shadow-lg shadow-gray-100 border border-gray-100 p-5 hover:shadow-xl transition-all duration-300",children:m===n.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsx("input",{type:"text",value:R.name||"",onChange:W=>I({...R,name:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("input",{type:"text",value:R.phone||"",onChange:W=>I({...R,phone:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsx("input",{type:"email",value:R.email||"",onChange:W=>I({...R,email:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"}),e.jsx("input",{type:"text",value:R.city||"",onChange:W=>I({...R,city:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx("input",{type:"text",value:R.location||"",onChange:W=>I({...R,location:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Ø±Ø¨Ø· Ø¨Ù…Ø´Ø±Ù Ø¹Ù…ÙˆÙ„Ø© (admin)"}),e.jsxs("select",{value:R.referredBy||"",onChange:W=>I({...R,referredBy:W.target.value}),className:"w-full border rounded-xl p-2 mt-1",children:[e.jsx("option",{value:"",children:"-- Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø±Ù Ø¹Ù…ÙˆÙ„Ø© --"}),j.filter(W=>W.role==="admin").map(W=>e.jsxs("option",{value:W.uid,children:["ğŸ‘‘ ",W.name||W.email]},W.uid))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ù…Ø±ØªØ¨Ø· ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ Ø¹Ù…ÙˆÙ„Ø© Ù…Ù† Ø·Ù„Ø¨Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ù…Ø·Ø¹Ù…"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ğŸ‘©â€ğŸ’¼ ØªØ¹ÙŠÙŠÙ† Ù…Ø´Ø±Ù (supervisor)"}),e.jsxs("select",{value:R.supervisorId||"",onChange:W=>I({...R,supervisorId:W.target.value||void 0}),className:"w-full border rounded-xl p-2 mt-1",children:[e.jsx("option",{value:"",children:"-- Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø±Ù --"}),j.filter(W=>W.role==="supervisor").map(W=>e.jsxs("option",{value:W.uid,children:["ğŸ‘©â€ğŸ’¼ ",W.name||W.email]},W.uid))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ø§Ù„Ù…Ø´Ø±Ù ÙŠØªØ§Ø¨Ø¹ Ø§Ù„Ù…Ø·Ø¹Ù… ÙˆÙŠØ¯ÙŠØ±Ù‡ Ù…Ù† Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsx("input",{type:"file",accept:"image/*",onChange:W=>{var he;const xe=(he=W.target.files)==null?void 0:he[0];xe&&mc(n.id,xe)},className:"w-full border rounded-xl p-2 mt-1",disabled:q}),q&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>xc(n.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[e.jsx(jl,{className:"w-4 h-4"})," Ø­ÙØ¸"]}),e.jsxs("button",{onClick:()=>o(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[e.jsx(Oe,{className:"w-4 h-4"})," Ø¥Ù„ØºØ§Ø¡"]})]})]}):e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:n.logoUrl?e.jsx("img",{src:n.logoUrl,alt:n.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:"ğŸª"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-lg",children:n.name}),n.isVerified&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:[e.jsx(Ie,{className:"w-3 h-3"})," Ù…ÙˆØ«Ù‚Ø©"]})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[n.phone&&e.jsxs("p",{children:["ğŸ“± ",n.phone]}),n.email&&e.jsxs("p",{children:["ğŸ“§ ",n.email]}),n.city&&e.jsxs("p",{children:["ğŸ“ ",n.city]}),n.referredBy&&e.jsxs("p",{className:"text-purple-600",children:["ğŸ‘‘ Ù…Ø¶Ø§Ù Ù…Ù†: ",((H=g.find(W=>W.uid===n.referredBy))==null?void 0:H.name)||n.referredBy.slice(0,8)]}),n.supervisorId&&e.jsxs("p",{className:"text-indigo-600",children:["ğŸ‘©â€ğŸ’¼ Ø§Ù„Ù…Ø´Ø±Ù: ",((K=j.find(W=>W.uid===n.supervisorId))==null?void 0:K.name)||n.supervisorId.slice(0,8)]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{const W=!n.isVerified;if(await a.confirm(W?`Ù‡Ù„ ØªØ±ÙŠØ¯ ØªÙˆØ«ÙŠÙ‚ Ø£Ø³Ø±Ø© "${n.name}"ØŸ Ø³ØªØ¸Ù‡Ø± Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡.`:`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù„ØºØ§Ø¡ ØªÙˆØ«ÙŠÙ‚ Ø£Ø³Ø±Ø© "${n.name}"ØŸ`,{title:W?"âœ… ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø±Ø©":"âŒ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙˆØ«ÙŠÙ‚",confirmText:W?"Ù†Ø¹Ù…ØŒ ÙˆØ«Ù‘Ù‚":"Ù†Ø¹Ù…ØŒ Ø£Ù„ØºÙ Ø§Ù„ØªÙˆØ«ÙŠÙ‚"}))try{await me(J(C,"restaurants",n.id),{isVerified:W,verifiedAt:W?X():null,updatedAt:X()}),t.success(W?"ØªÙ… ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø±Ø© âœ…":"ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙˆØ«ÙŠÙ‚"),rs()}catch(he){t.error("Ø­Ø¯Ø« Ø®Ø·Ø£"),console.error(he)}},className:`p-2 rounded-xl ${n.isVerified?"bg-green-100 hover:bg-green-200 text-green-600":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,title:n.isVerified?"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙˆØ«ÙŠÙ‚":"ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø±Ø©",children:e.jsx(Ie,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{o(n.id),I(n)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",title:"ØªØ­Ø±ÙŠØ±",children:e.jsx(Qt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>hc(n.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",title:"Ø­Ø°Ù",children:e.jsx(ys,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex gap-2 items-center",children:n.packageType==="premium"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded-full flex items-center gap-1",children:"âœ¨ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²"}),e.jsx("button",{onClick:()=>sc(n),className:"text-xs bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1 rounded-lg",children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¨Ø§Ù‚Ø©"})]}):e.jsx("button",{onClick:()=>ec(n),className:"text-xs bg-amber-50 hover:bg-amber-100 text-amber-700 px-3 py-1 rounded-lg flex items-center gap-1",children:"âœ¨ ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²"})}),e.jsxs("select",{value:n.referredBy||"",onChange:async W=>{const xe=W.target.value;try{await me(J(C,"restaurants",n.id),{referredBy:xe||null,updatedAt:X()}),t.success(xe?"ØªÙ… Ø±Ø¨Ø· Ø§Ù„Ù…Ø·Ø¹Ù… Ø¨Ù…Ø´Ø±Ù Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©":"ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø±Ø¨Ø· Ù…Ø´Ø±Ù Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©"),rs()}catch{t.error("ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø¨Ø·")}},className:"text-xs border rounded-lg p-1",title:"Ø±Ø¨Ø· Ø¨Ù…Ø´Ø±Ù Ø¹Ù…ÙˆÙ„Ø©",children:[e.jsx("option",{value:"",children:"ğŸ‘‘ Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø±Ù Ø¹Ù…ÙˆÙ„Ø©"}),j.filter(W=>W.role==="admin").map(W=>e.jsxs("option",{value:W.uid,children:["ğŸ‘‘ ",W.name||W.email]},W.uid))]}),e.jsxs("select",{value:n.supervisorId||"",onChange:async W=>{const xe=W.target.value;try{await me(J(C,"restaurants",n.id),{supervisorId:xe||null,updatedAt:X()}),t.success(xe?"ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø´Ø±Ù Ù„Ù„Ù…Ø·Ø¹Ù… âœ…":"ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø´Ø±Ù"),rs()}catch{t.error("ÙØ´Ù„ ÙÙŠ ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø´Ø±Ù")}},className:"text-xs border rounded-lg p-1",title:"ØªØ¹ÙŠÙŠÙ† Ù…Ø´Ø±Ù",children:[e.jsx("option",{value:"",children:"ğŸ‘©â€ğŸ’¼ Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø±Ù"}),j.filter(W=>W.role==="supervisor").map(W=>e.jsxs("option",{value:W.uid,children:["ğŸ‘©â€ğŸ’¼ ",W.name||W.email]},W.uid))]})]})]})},n.id)})})]}),c==="orders"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white via-amber-50/30 to-orange-50/30 rounded-3xl p-6 border border-amber-100 shadow-lg shadow-amber-100/50",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center shadow-lg shadow-amber-200",children:e.jsx(Me,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Er().length," Ù…Ù† ",L.length," Ø·Ù„Ø¨"]})]})]})}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Qs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ø§Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ØŒ Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…ØŒ Ø£Ùˆ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†...",value:Os,onChange:n=>ct(n.target.value),className:"w-full pr-12 pl-4 py-4 border-2 border-amber-100 rounded-2xl focus:border-amber-400 focus:ring-4 focus:ring-amber-100 transition-all bg-white/80 backdrop-blur text-lg"}),Os&&e.jsx("button",{onClick:()=>ct(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ja,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Ø§Ù„Ø­Ø§Ù„Ø©:"})]}),[{value:"all",label:"Ø§Ù„ÙƒÙ„",icon:"ğŸ“¦"},{value:"pending",label:"Ø¬Ø§Ø±ÙŠ",icon:"â³"},{value:"delivered",label:"Ù…ÙƒØªÙ…Ù„",icon:"âœ…"},{value:"cancelled",label:"Ù…Ù„ØºÙŠ",icon:"âŒ"}].map(n=>e.jsxs("button",{onClick:()=>Wl(n.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${$a===n.value?"bg-gradient-to-r from-amber-500 to-orange-600 text-white shadow-lg shadow-amber-200":"bg-white border border-gray-200 text-gray-600 hover:border-amber-300 hover:bg-amber-50"}`,children:[n.icon," ",n.label]},n.value)),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(gt,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Ø§Ù„ÙØªØ±Ø©:"})]}),[{value:"all",label:"Ø§Ù„ÙƒÙ„"},{value:"today",label:"Ø§Ù„ÙŠÙˆÙ…"},{value:"week",label:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹"},{value:"month",label:"Ø§Ù„Ø´Ù‡Ø±"}].map(n=>e.jsx("button",{onClick:()=>Gl(n.value),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${ua===n.value?"bg-amber-100 text-amber-700":"text-gray-500 hover:bg-gray-100"}`,children:n.label},n.value)),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),e.jsxs("select",{value:Hs,onChange:n=>Tr(n.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-medium focus:border-amber-400 focus:ring-2 focus:ring-amber-100",children:[e.jsx("option",{value:"newest",children:"Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹"}),e.jsx("option",{value:"oldest",children:"Ø§Ù„Ø£Ù‚Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹"})]})]})]}),e.jsx("div",{className:"space-y-4",children:Er().length===0?e.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Me,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø±Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„ÙÙ„Ø§ØªØ± Ø£Ùˆ Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©"}),e.jsx("button",{onClick:()=>{ct(""),Wl("all"),Gl("all")},className:"mt-4 px-6 py-2 bg-amber-100 text-amber-600 rounded-xl font-medium hover:bg-amber-200 transition-colors",children:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙÙ„Ø§ØªØ±"})]}):Er().map(n=>{var H,K;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg shadow-gray-100 border border-gray-100 p-5 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg",children:["Ø·Ù„Ø¨ #",n.id.slice(-8)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ğŸª ",n.restaurantName||"Ù…Ø·Ø¹Ù…"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ğŸ“ ",n.address]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ğŸ’° ",(H=n.total)==null?void 0:H.toFixed(2)," Ø±.Ø³"]}),n.platformFee&&e.jsxs("p",{className:"text-xs text-green-600",children:["Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: ",n.platformFee," Ø±.Ø³",n.adminCommission?` | Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ø´Ø±Ù: ${n.adminCommission} Ø±.Ø³`:""]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:`inline-block px-3 py-1.5 rounded-xl text-sm font-bold ${n.status==="delivered"?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700":n.status==="cancelled"?"bg-gradient-to-r from-red-100 to-pink-100 text-red-700":n.status==="pending"?"bg-gradient-to-r from-yellow-100 to-amber-100 text-yellow-700":"bg-gradient-to-r from-blue-100 to-sky-100 text-blue-700"}`,children:fc(n.status)}),e.jsxs("select",{value:n.status,onChange:W=>gc(n.id,W.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[e.jsx("option",{value:"pending",children:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"}),e.jsx("option",{value:"accepted",children:"Ù…Ù‚Ø¨ÙˆÙ„"}),e.jsx("option",{value:"preparing",children:"Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±"}),e.jsx("option",{value:"ready",children:"Ø¬Ø§Ù‡Ø²"}),e.jsx("option",{value:"out_for_delivery",children:"ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚"}),e.jsx("option",{value:"delivered",children:"ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…"}),e.jsx("option",{value:"cancelled",children:"Ù…Ù„ØºÙŠ"})]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Ø§Ù„Ø£ØµÙ†Ø§Ù:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(K=n.items)==null?void 0:K.map((W,xe)=>e.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-lg",children:[W.name," Ã— ",W.qty]},xe))})]})]},n.id)})})]}),c==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white via-violet-50/30 to-purple-50/30 rounded-3xl p-6 border border-violet-100 shadow-lg shadow-violet-100/50",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-violet-200",children:e.jsx(Ws,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Pr().length," Ù…Ù† ",j.length," Ù…Ø³ØªØ®Ø¯Ù…"]})]})]})}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Qs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ØŒ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ...",value:Os,onChange:n=>ct(n.target.value),className:"w-full pr-12 pl-4 py-4 border-2 border-violet-100 rounded-2xl focus:border-violet-400 focus:ring-4 focus:ring-violet-100 transition-all bg-white/80 backdrop-blur text-lg"}),Os&&e.jsx("button",{onClick:()=>ct(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ja,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Ø§Ù„Ø¯ÙˆØ±:"})]}),[{value:"all",label:"Ø§Ù„ÙƒÙ„",icon:"ğŸ‘¥",color:"violet"},{value:"customer",label:"Ø¹Ù…ÙŠÙ„",icon:"ğŸ›’"},{value:"owner",label:"Ù…Ø·Ø¹Ù…",icon:"ğŸª"},{value:"courier",label:"Ù…Ù†Ø¯ÙˆØ¨",icon:"ğŸš—"},{value:"admin",label:"Ù…Ø´Ø±Ù",icon:"ğŸ‘‘"},{value:"supervisor",label:"Ù…Ø´Ø±ÙØ© Ù…Ø·Ø§Ø¹Ù…",icon:"ğŸ‘©â€ğŸ’¼"},{value:"social_media",label:"Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§",icon:"ğŸ“±"},{value:"support",label:"Ø¯Ø¹Ù… ÙÙ†ÙŠ",icon:"ğŸ§"},{value:"accountant",label:"Ù…Ø­Ø§Ø³Ø¨",icon:"ğŸ’°"}].map(n=>e.jsxs("button",{onClick:()=>Ql(n.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${Dr===n.value?"bg-gradient-to-r from-violet-500 to-purple-600 text-white shadow-lg shadow-violet-200":"bg-white border border-gray-200 text-gray-600 hover:border-violet-300 hover:bg-violet-50"}`,children:[n.icon," ",n.label]},n.value)),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),e.jsxs("select",{value:Hs,onChange:n=>Tr(n.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-medium focus:border-violet-400 focus:ring-2 focus:ring-violet-100",children:[e.jsx("option",{value:"newest",children:"Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹"}),e.jsx("option",{value:"oldest",children:"Ø§Ù„Ø£Ù‚Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹"}),e.jsx("option",{value:"name",children:"Ø§Ù„Ø§Ø³Ù… (Ø£-ÙŠ)"})]})]})]}),Pr().length===0?e.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Ws,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø±Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„ÙÙ„Ø§ØªØ± Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ø¨Ø­Ø«"}),e.jsx("button",{onClick:()=>{ct(""),Ql("all")},className:"mt-4 px-6 py-2 bg-violet-100 text-violet-600 rounded-xl font-medium hover:bg-violet-200 transition-colors",children:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙÙ„Ø§ØªØ±"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:Pr().map(n=>{var H,K,W,xe,he,we,Re;return e.jsx("div",{className:"bg-white rounded-2xl shadow-lg shadow-gray-100 border border-gray-100 p-5 hover:shadow-xl transition-all duration-300",children:b===n.uid?e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Ø§Ù„Ø§Ø³Ù…",value:d.name||"",onChange:Se=>M({...d,name:Se.target.value}),className:"w-full border rounded-xl p-2"}),e.jsx("input",{type:"text",placeholder:"Ø§Ù„Ù‡Ø§ØªÙ",value:d.phone||"",onChange:Se=>M({...d,phone:Se.target.value}),className:"w-full border rounded-xl p-2"}),e.jsxs("select",{value:d.role||"customer",onChange:Se=>M({...d,role:Se.target.value}),className:"w-full border rounded-xl p-2",children:[e.jsx("option",{value:"customer",children:"Ø¹Ù…ÙŠÙ„"}),e.jsx("option",{value:"owner",children:"ØµØ§Ø­Ø¨ Ù…Ø·Ø¹Ù…"}),e.jsx("option",{value:"courier",children:"Ù…Ù†Ø¯ÙˆØ¨"}),e.jsx("option",{value:"admin",children:"Ù…Ø´Ø±Ù"}),e.jsx("option",{value:"supervisor",children:"Ù…Ø´Ø±ÙØ© Ù…Ø·Ø§Ø¹Ù…"}),e.jsx("option",{value:"social_media",children:"Ù…Ø³Ø¤ÙˆÙ„Ø© Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§"}),e.jsx("option",{value:"support",children:"Ø¯Ø¹Ù… ÙÙ†ÙŠ"}),e.jsx("option",{value:"accountant",children:"Ù…Ø­Ø§Ø³Ø¨"}),e.jsx("option",{value:"developer",children:"Ù…Ø·ÙˆØ±"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>uc(n.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:"Ø­ÙØ¸"}),e.jsx("button",{onClick:()=>y(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:"Ø¥Ù„ØºØ§Ø¡"})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-bold",children:n.name||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"}),n.isActive===!1&&e.jsx("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full",children:"Ù…ÙˆÙ‚ÙˆÙ"}),((H=n.security)==null?void 0:H.isDeactivated)&&e.jsx("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full",children:"ğŸ”’ Ù…Ø­Ø¸ÙˆØ±"}),((K=n.security)==null?void 0:K.lockedUntil)&&new Date(((xe=(W=n.security.lockedUntil).toDate)==null?void 0:xe.call(W))||n.security.lockedUntil)>new Date&&e.jsx("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full",children:"â±ï¸ Ù…Ù‚ÙÙ„ Ù…Ø¤Ù‚ØªØ§Ù‹"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:n.email}),n.phone&&e.jsxs("p",{className:"text-xs text-gray-500",children:["ğŸ“± ",n.phone]}),e.jsx("p",{className:"text-xs mt-1",children:bc(n.role)}),((he=n.security)==null?void 0:he.lastLogin)&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["ğŸ• Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„: ",new Date(((Re=(we=n.security.lastLogin).toDate)==null?void 0:Re.call(we))||n.security.lastLogin).toLocaleString("ar-SA")]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>Ji(n,n.isActive!==!1),className:`p-1.5 rounded-lg ${n.isActive===!1?"bg-green-100 text-green-600":"bg-orange-100 text-orange-600"}`,title:n.isActive===!1?"ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨":"ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø­Ø³Ø§Ø¨",children:n.isActive===!1?e.jsx(Ie,{className:"w-4 h-4"}):e.jsx(Rs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{y(n.uid),M(n)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",title:"ØªØ¹Ø¯ÙŠÙ„",children:e.jsx(Qt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>pc(n.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"Ø­Ø°Ù",children:e.jsx(ys,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>Xi(n),className:"p-1.5 bg-amber-100 text-amber-600 rounded-lg hover:bg-amber-200 transition-colors",title:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",children:e.jsx(bl,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Zi(n),className:"p-1.5 bg-violet-100 text-violet-600 rounded-lg hover:bg-violet-200 transition-colors",title:"Ø³Ø¬Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",children:e.jsx($t,{className:"w-4 h-4"})})]})]})]})})},n.uid)})}),pa.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 bg-gradient-to-r from-violet-500 to-purple-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($t,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ø³Ø¬Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"}),e.jsx("p",{className:"text-sm text-violet-100",children:pa.userName})]})]}),e.jsx("button",{onClick:()=>La(n=>({...n,isOpen:!1})),className:"p-2 hover:bg-white/20 rounded-xl transition",children:e.jsx(Oe,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:pa.loading?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ze,{className:"w-8 h-8 animate-spin mx-auto text-violet-500 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]}):pa.history.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx($t,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ø¯Ø®ÙˆÙ„"})]}):e.jsx("div",{className:"space-y-3",children:pa.history.map((n,H)=>e.jsxs("div",{className:`p-4 rounded-2xl border ${n.status==="success"?"bg-green-50 border-green-200":n.status==="blocked"?"bg-red-50 border-red-200":"bg-orange-50 border-orange-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[n.status==="success"?e.jsx(Ie,{className:"w-5 h-5 text-green-600"}):n.status==="blocked"?e.jsx(us,{className:"w-5 h-5 text-red-600"}):e.jsx(Rs,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:`font-medium ${n.status==="success"?"text-green-700":n.status==="blocked"?"text-red-700":"text-orange-700"}`,children:n.status==="success"?"Ø¯Ø®ÙˆÙ„ Ù†Ø§Ø¬Ø­":n.status==="blocked"?"Ù…Ø­Ø¸ÙˆØ±":"Ù…Ø­Ø§ÙˆÙ„Ø© ÙØ§Ø´Ù„Ø©"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:n.timestamp?new Date(n.timestamp).toLocaleString("ar-SA"):"-"})]}),n.errorMessage&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:n.errorMessage})]},n.id||H))})})]})})]}),c==="couriers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-white via-cyan-50/30 to-teal-50/30 rounded-3xl p-6 border border-cyan-100 shadow-lg shadow-cyan-100/50",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-teal-600 rounded-2xl flex items-center justify-center shadow-lg shadow-cyan-200",children:e.jsx(Ve,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-600 to-teal-600 bg-clip-text text-transparent",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[v.couriers," Ù…Ù†Ø¯ÙˆØ¨ Ù…Ø³Ø¬Ù„"]})]})]}),e.jsx("button",{onClick:()=>ne(!Z),className:"group flex items-center gap-2 bg-gradient-to-r from-cyan-500 to-teal-600 hover:from-cyan-600 hover:to-teal-700 text-white px-5 py-3 rounded-2xl font-bold shadow-lg shadow-cyan-200 transition-all duration-300 hover:scale-105",children:Z?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-5 h-5"}),"Ø¥Ù„ØºØ§Ø¡"]}):e.jsxs(e.Fragment,{children:[e.jsx(Cs,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"}),"Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø¯ÙˆØ¨ Ø¬Ø¯ÙŠØ¯"]})})]})}),Z&&e.jsxs("div",{className:"bg-cyan-50 rounded-2xl p-6 border-2 border-cyan-200",children:[e.jsx("h3",{className:"text-lg font-bold text-cyan-800 mb-4",children:"ğŸš— Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø¯ÙˆØ¨ Ø¬Ø¯ÙŠØ¯"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *"}),e.jsx("input",{type:"email",placeholder:"courier@example.com",value:ce,onChange:n=>Ne(n.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± *"}),e.jsx("input",{type:"password",placeholder:"6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„",value:de,onChange:n=>oe(n.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("input",{type:"text",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨",value:Y,onChange:n=>te(n.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:ge,onChange:n=>ke(n.target.value),className:"w-full border rounded-xl p-3"})]})]}),e.jsx("button",{onClick:ic,disabled:Ae||!ce.trim()||!de.trim(),className:"mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Ae?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡..."]}):"ğŸš— Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[j.filter(n=>n.role==="courier").map(n=>e.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:"ğŸš—"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:n.name||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"}),e.jsx("p",{className:"text-sm text-gray-600",children:n.email}),n.phone&&e.jsxs("p",{className:"text-sm text-gray-600",children:["ğŸ“± ",n.phone]})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[e.jsx("p",{className:"text-lg font-bold text-green-600",children:L.filter(H=>H.courierId===n.uid&&H.status==="delivered").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Ø·Ù„Ø¨Ø§Øª Ù…Ø³Ù„Ù…Ø©"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[e.jsx("p",{className:"text-lg font-bold text-blue-600",children:L.filter(H=>H.courierId===n.uid&&H.status==="out_for_delivery").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚"})]})]})})]},n.uid)),v.couriers===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù†Ø§Ø¯ÙŠØ¨ Ù…Ø³Ø¬Ù„ÙŠÙ†"})]})]}),c==="admins"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["ğŸ‘‘ Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ† ÙˆØ¹Ù…ÙˆÙ„Ø§ØªÙ‡Ù… (",g.length,")"]}),e.jsxs("button",{onClick:()=>V(!S),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[e.jsx(ot,{className:"w-5 h-5"}),S?"Ø¥Ù„ØºØ§Ø¡":"Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±Ù"]})]}),S&&e.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border-2 border-purple-200",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"ğŸ‘‘ ØªØ±Ù‚ÙŠØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ Ù…Ø´Ø±Ù"}),e.jsx("p",{className:"text-sm text-purple-600 mb-4",children:"Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ù„ØªØ±Ù‚ÙŠØªÙ‡ Ø¥Ù„Ù‰ Ø¯ÙˆØ± Ø§Ù„Ù…Ø´Ø±ÙØŒ Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"ØªØ±Ù‚ÙŠØ© Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯:"}),e.jsxs("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:[j.filter(n=>n.role==="customer").slice(0,10).map(n=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:n.name||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"}),e.jsx("p",{className:"text-sm text-gray-500",children:n.email})]}),e.jsx("button",{onClick:async()=>{if(await a.confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ±Ù‚ÙŠØ© ${n.name||n.email} Ø¥Ù„Ù‰ Ù…Ø´Ø±ÙØŸ`,{title:"ØªØ±Ù‚ÙŠØ© Ø¥Ù„Ù‰ Ù…Ø´Ø±Ù"}))try{await me(J(C,"users",n.uid),{role:"admin"}),t.success("ØªÙ… ØªØ±Ù‚ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ Ù…Ø´Ø±Ù âœ…"),V(!1),rs()}catch{t.error("ÙØ´Ù„ ØªØ±Ù‚ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm",children:"ØªØ±Ù‚ÙŠØ© ğŸ‘‘"})]},n.uid)),j.filter(n=>n.role==="customer").length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„Ø§Ø¡ ÙŠÙ…ÙƒÙ† ØªØ±Ù‚ÙŠØªÙ‡Ù…"})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h4",{className:"text-md font-bold text-purple-800 mb-3",children:"âœ¨ Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø´Ø±Ù Ø¬Ø¯ÙŠØ¯:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *"}),e.jsx("input",{type:"email",placeholder:"admin@example.com",value:Q,onChange:n=>ie(n.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± *"}),e.jsx("input",{type:"password",placeholder:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)",value:ue,onChange:n=>_(n.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("input",{type:"text",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±Ù",value:re,onChange:n=>ye(n.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:se,onChange:n=>pe(n.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]})]}),e.jsx("button",{onClick:nc,disabled:le||!Q.trim()||!ue.trim(),className:"mt-4 w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:le?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"w-5 h-5"}),"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø´Ø±Ù"]})}),e.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯ØŒ Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹. ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰."})]}),e.jsx("div",{className:"border-t pt-4 mt-4",children:e.jsx("p",{className:"text-xs text-gray-500",children:'ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ø§Ù‹ ØªØºÙŠÙŠØ± Ø¯ÙˆØ± Ø£ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† ØªØ¨ÙˆÙŠØ¨ "Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"'})})]}),e.jsxs("div",{className:"space-y-4",children:[g.map(n=>e.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>h(k===n.uid?null:n.uid),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:"ğŸ‘‘"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:n.name||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"}),e.jsx("p",{className:"text-sm text-gray-600",children:n.email})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"font-bold text-green-600",children:[n.walletBalance.toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ",n.totalEarnings.toFixed(2)," Ø±.Ø³ | ",n.restaurantsCount," Ù…Ø·Ø¹Ù…"]})]}),k===n.uid?e.jsx(Ta,{className:"w-5 h-5 text-gray-400"}):e.jsx(la,{className:"w-5 h-5 text-gray-400"})]})]})}),k===n.uid&&e.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[e.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["ğŸª Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§ÙØ© Ø¨ÙˆØ§Ø³Ø·Ø© Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±Ù (",n.restaurants.length,"):"]}),n.restaurants.length>0?e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:n.restaurants.map(H=>e.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:H.logoUrl?e.jsx("img",{src:H.logoUrl,alt:H.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"ğŸª"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:H.name}),e.jsx("p",{className:"text-xs text-gray-500",children:H.city||"Ø¨Ø¯ÙˆÙ† Ù…Ø¯ÙŠÙ†Ø©"})]})]},H.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Ù„Ù… ÙŠØ¶Ù Ø£ÙŠ Ù…Ø·Ø§Ø¹Ù… Ø¨Ø¹Ø¯"}),e.jsx("div",{className:"mt-4 pt-3 border-t",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-green-700",children:n.walletBalance.toFixed(2)}),e.jsx("p",{className:"text-xs text-gray-600",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ"})]}),e.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-blue-700",children:n.totalEarnings.toFixed(2)}),e.jsx("p",{className:"text-xs text-gray-600",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"})]}),e.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-purple-700",children:L.filter(H=>H.referredBy===n.uid).length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Ø·Ù„Ø¨Ø§Øª Ù…Ù† Ù…Ø·Ø§Ø¹Ù…Ù‡"})]})]})})]})]},n.uid)),g.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø´Ø±ÙÙŠÙ† Ù…Ø³Ø¬Ù„ÙŠÙ†"})]})]}),c==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"}),O?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{B(!1),P(E)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{onClick:dc,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:"ğŸ’¾ Ø­ÙØ¸"})]}):e.jsx("button",{onClick:()=>B(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:"âœï¸ ØªØ¹Ø¯ÙŠÙ„"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ğŸ’° Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ (Ø±.Ø³)"}),O?e.jsx("input",{type:"number",value:T.deliveryFee||0,onChange:n=>P({...T,deliveryFee:Number(n.target.value)}),className:"w-full border rounded-xl p-3"}):e.jsxs("p",{className:"text-2xl font-bold",children:[E.deliveryFee||7," Ø±.Ø³"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ğŸ’µ Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ / Ù…Ù†ØªØ¬ (Ø±.Ø³)"}),O?e.jsx("input",{type:"number",step:"0.1",value:T.platformFee||1,onChange:n=>P({...T,platformFee:Number(n.target.value)}),className:"w-full border rounded-xl p-3"}):e.jsxs("p",{className:"text-2xl font-bold",children:[E.platformFee||1," Ø±.Ø³/Ù…Ù†ØªØ¬"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ğŸ‘‘ Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ø´Ø±Ù / Ù…Ù†ØªØ¬ (Ø±.Ø³)"}),O?e.jsx("input",{type:"number",step:"0.05",value:T.adminCommissionRate||.75,onChange:n=>P({...T,adminCommissionRate:Number(n.target.value)}),className:"w-full border rounded-xl p-3"}):e.jsxs("p",{className:"text-2xl font-bold",children:[E.adminCommissionRate||.75," Ø±.Ø³/Ù…Ù†ØªØ¬"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ğŸ›’ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø·Ù„Ø¨"}),O?e.jsx("input",{type:"number",value:T.minOrderAmount||0,onChange:n=>P({...T,minOrderAmount:Number(n.target.value)}),className:"w-full border rounded-xl p-3"}):e.jsxs("p",{className:"text-2xl font-bold",children:[E.minOrderAmount||20," Ø±.Ø³"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ğŸ• Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„"}),O?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"time",value:((Yl=T.workingHours)==null?void 0:Yl.open)||"09:00",onChange:n=>P({...T,workingHours:{...T.workingHours,open:n.target.value}}),className:"flex-1 border rounded-xl p-3"}),e.jsx("input",{type:"time",value:((Jl=T.workingHours)==null?void 0:Jl.close)||"23:00",onChange:n=>P({...T,workingHours:{...T.workingHours,close:n.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):e.jsxs("p",{className:"text-2xl font-bold",children:[((Xl=E.workingHours)==null?void 0:Xl.open)||"09:00"," - ",((Zl=E.workingHours)==null?void 0:Zl.close)||"23:00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ğŸ”§ ÙˆØ¶Ø¹ Ø§Ù„ØµÙŠØ§Ù†Ø©"}),O?e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:T.maintenanceMode||!1,onChange:n=>P({...T,maintenanceMode:n.target.checked}),className:"w-6 h-6"}),e.jsx("span",{className:"text-lg",children:T.maintenanceMode?"Ù…ÙØ¹Ù‘Ù„":"Ù…Ø¹Ø·Ù‘Ù„"})]}):e.jsx("p",{className:`text-2xl font-bold ${E.maintenanceMode?"text-red-600":"text-green-600"}`,children:E.maintenanceMode?"ğŸ”´ Ù…ÙØ¹Ù‘Ù„":"ğŸŸ¢ Ù…Ø¹Ø·Ù‘Ù„"})]})]})}),e.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[e.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"ğŸ’° Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª (Ù„ÙƒÙ„ Ù…Ù†ØªØ¬ = 1.75 Ø±.Ø³):"}),e.jsxs("div",{className:"text-sky-800 space-y-2",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:"})," ",E.platformFee||1," Ø±.Ø³ Ã— Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ø´Ø±Ù:"})," ",E.adminCommissionRate||.75," Ø±.Ø³ Ã— Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 mt-3",children:[e.jsx("p",{className:"font-bold mb-2",children:"ğŸ“ Ù…Ø«Ø§Ù„: Ø·Ù„Ø¨ ÙÙŠÙ‡ 5 Ù…Ù†ØªØ¬Ø§Øª"}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Ø¥Ø°Ø§ Ø§Ù„Ù…Ø·Ø¹Ù… Ù…Ø¶Ø§Ù Ù…Ù† Ù…Ø´Ø±Ù:"})]}),e.jsxs("ul",{className:"mr-6 list-disc text-sm",children:[e.jsxs("li",{children:["Ø§Ù„Ù…Ø´Ø±Ù ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰: 5 Ã— ",E.adminCommissionRate||.75," = ",e.jsxs("strong",{children:[(5*(E.adminCommissionRate||.75)).toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("li",{children:["Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰: 5 Ã— ",E.platformFee||1," = ",e.jsxs("strong",{children:[(5*(E.platformFee||1)).toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("li",{className:"text-green-700",children:["Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ",e.jsxs("strong",{children:[(5*1.75).toFixed(2)," Ø±.Ø³"]})]})]}),e.jsxs("p",{className:"mt-2",children:["â€¢ ",e.jsx("strong",{children:"Ø¥Ø°Ø§ Ø§Ù„Ù…Ø·Ø¹Ù… Ù…Ø¶Ø§Ù Ù…Ù† Ø§Ù„Ù…Ø·ÙˆØ±:"})]}),e.jsx("ul",{className:"mr-6 list-disc text-sm",children:e.jsxs("li",{children:["Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ ÙƒÙ„ Ø´ÙŠØ¡: 5 Ã— 1.75 = ",e.jsxs("strong",{children:[(5*1.75).toFixed(2)," Ø±.Ø³"]})]})})]})]})]})]}),c==="employees"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† (",oa.length,")"]}),e.jsxs("button",{onClick:()=>Fl(!Ar),className:"flex items-center gap-2 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white px-5 py-2.5 rounded-xl font-semibold transition shadow-lg",children:[e.jsx(ot,{className:"w-5 h-5"}),Ar?"Ø¥Ù„ØºØ§Ø¡":"Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù"]})]}),Ar&&e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-6 border-2 border-indigo-200 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-bold text-indigo-800 mb-4 flex items-center gap-2",children:[e.jsx(ot,{className:"w-6 h-6"}),"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯"]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-1",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *"}),e.jsx("input",{type:"email",placeholder:"employee@example.com",value:At,onChange:n=>$l(n.target.value),className:"w-full border-2 border-indigo-200 rounded-xl p-3 text-gray-900 focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-1",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± *"}),e.jsx("input",{type:"password",placeholder:"6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„",value:da,onChange:n=>Ll(n.target.value),className:"w-full border-2 border-indigo-200 rounded-xl p-3 text-gray-900 focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-1",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("input",{type:"text",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù",value:_a,onChange:n=>Ol(n.target.value),className:"w-full border-2 border-indigo-200 rounded-xl p-3 text-gray-900 focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Ml,onChange:n=>Ul(n.target.value),className:"w-full border-2 border-indigo-200 rounded-xl p-3 text-gray-900 focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"Ø§Ù„Ø¯ÙˆØ± Ø§Ù„ÙˆØ¸ÙŠÙÙŠ *"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2",children:[{id:"supervisor",label:"ğŸ‘¤ Ù…Ø´Ø±Ù",color:"amber"},{id:"support",label:"ğŸ§ Ø¯Ø¹Ù… ÙÙ†ÙŠ",color:"blue"},{id:"social_media",label:"ğŸ“± Ø³ÙˆØ´ÙŠØ§Ù„",color:"pink"},{id:"admin",label:"ğŸ”§ Ø¥Ø¯Ø§Ø±Ø©",color:"purple"},{id:"accountant",label:"ğŸ’° Ù…Ø­Ø§Ø³Ø¨",color:"green"}].map(n=>e.jsx("button",{onClick:()=>Bl(n.id),className:`px-4 py-2.5 rounded-xl font-medium transition-all ${xa===n.id?`bg-${n.color}-500 text-white shadow-lg`:"bg-white text-gray-700 border-2 border-gray-200 hover:border-indigo-300"}`,children:n.label},n.id))})]})]}),e.jsx("button",{onClick:ac,disabled:Vl||!At.trim()||!da.trim(),className:"mt-6 w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white py-3.5 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg",children:Vl?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"w-5 h-5"}),"Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨"]})}),e.jsx("p",{className:"text-xs text-orange-600 mt-3 bg-orange-50 p-2 rounded-lg",children:"âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…ÙˆØ¸ÙØŒ Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬Ùƒ Ù…Ø¤Ù‚ØªØ§Ù‹. ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰."})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"all",label:"Ø§Ù„ÙƒÙ„"},{id:"supervisor",label:"ğŸ‘¤ Ù…Ø´Ø±ÙÙŠÙ†"},{id:"support",label:"ğŸ§ Ø¯Ø¹Ù… ÙÙ†ÙŠ"},{id:"social_media",label:"ğŸ“± Ø³ÙˆØ´ÙŠØ§Ù„"},{id:"admin",label:"ğŸ”§ Ø¥Ø¯Ø§Ø±Ø©"},{id:"accountant",label:"ğŸ’° Ù…Ø­Ø§Ø³Ø¨ÙŠÙ†"},{id:"active",label:"âœ… Ù†Ø´Ø·"},{id:"inactive",label:"â›” Ù…ØªÙˆÙ‚Ù"}].map(n=>e.jsx("button",{onClick:()=>Yi(n.id),className:`px-4 py-2 rounded-xl font-medium transition ${ma===n.id?"bg-indigo-500 text-white shadow":"bg-white text-gray-600 border border-gray-200 hover:border-indigo-300"}`,children:n.label},n.id))}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:oa.filter(n=>ma==="all"?!0:ma==="active"?n.isActive:ma==="inactive"?!n.isActive:n.role===ma).map(n=>{const K={supervisor:{label:"Ù…Ø´Ø±Ù",emoji:"ğŸ‘¤",color:"amber"},support:{label:"Ø¯Ø¹Ù… ÙÙ†ÙŠ",emoji:"ğŸ§",color:"blue"},social_media:{label:"Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§",emoji:"ğŸ“±",color:"pink"},admin:{label:"Ø¥Ø¯Ø§Ø±Ø©",emoji:"ğŸ”§",color:"purple"},accountant:{label:"Ù…Ø­Ø§Ø³Ø¨",emoji:"ğŸ’°",color:"green"}}[n.role]||{label:n.role,emoji:"ğŸ‘¤",color:"gray"};return e.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden border-2 transition-all ${n.isActive?"border-gray-100 hover:border-indigo-200":"border-red-200 bg-red-50/50"}`,children:[e.jsx("div",{className:`bg-gradient-to-r from-${K.color}-500 to-${K.color}-600 px-4 py-3 text-white`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:K.emoji}),e.jsx("span",{className:"font-bold",children:K.label})]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${n.isActive?"bg-white/20":"bg-red-100 text-red-700"}`,children:n.isActive?"âœ… Ù†Ø´Ø·":"â›” Ù…ØªÙˆÙ‚Ù"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:n.name||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"}),e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(Ft,{className:"w-3.5 h-3.5"}),n.email]}),n.phone&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["ğŸ“± ",n.phone]}),Ki===n.uid?e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-600",children:"ØªØºÙŠÙŠØ± Ø§Ù„Ø¯ÙˆØ±:"}),e.jsxs("select",{value:Fa,onChange:W=>zl(W.target.value),className:"w-full border-2 border-indigo-200 rounded-xl p-2.5 text-gray-900 focus:border-indigo-400",children:[e.jsx("option",{value:"supervisor",children:"ğŸ‘¤ Ù…Ø´Ø±Ù"}),e.jsx("option",{value:"support",children:"ğŸ§ Ø¯Ø¹Ù… ÙÙ†ÙŠ"}),e.jsx("option",{value:"social_media",children:"ğŸ“± Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§"}),e.jsx("option",{value:"admin",children:"ğŸ”§ Ø¥Ø¯Ø§Ø±Ø©"}),e.jsx("option",{value:"accountant",children:"ğŸ’° Ù…Ø­Ø§Ø³Ø¨"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>rc(n.uid,Fa),disabled:Fa===n.role,className:`flex-1 py-2 rounded-xl text-sm font-bold transition ${Fa===n.role?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white"}`,children:"âœ… Ø­ÙØ¸"}),e.jsx("button",{onClick:()=>Ir(null),className:"flex-1 py-2 rounded-xl text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-600 transition",children:"âŒ Ø¥Ù„ØºØ§Ø¡"})]})]}):e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>{Ir(n.uid),zl(n.role)},className:"flex-1 flex items-center justify-center gap-1 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 py-2 rounded-xl text-sm font-medium transition",children:[e.jsx(Qt,{className:"w-4 h-4"}),"ØªØºÙŠÙŠØ± Ø§Ù„Ø¯ÙˆØ±"]}),e.jsx("button",{onClick:()=>lc(n.uid),className:`flex-1 flex items-center justify-center gap-1 py-2 rounded-xl text-sm font-medium transition ${n.isActive?"bg-red-50 hover:bg-red-100 text-red-600":"bg-green-50 hover:bg-green-100 text-green-600"}`,children:n.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4"}),"Ø¥ÙŠÙ‚Ø§Ù"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4"}),"ØªÙØ¹ÙŠÙ„"]})})]})]})]},n.uid)})}),oa.length===0&&e.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow",children:[e.jsx(ot,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆØ¸ÙÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl p-6 border border-indigo-100",children:[e.jsxs("h3",{className:"font-bold text-indigo-900 mb-4 flex items-center gap-2",children:[e.jsx(us,{className:"w-5 h-5"}),"ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒÙ„ Ø¯ÙˆØ±"]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"ğŸ‘¤"}),e.jsx("span",{className:"font-bold text-amber-700",children:"Ù…Ø´Ø±Ù"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"âœ“ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„ØªØ§Ø¨Ø¹Ø©"}),e.jsx("li",{children:"âœ“ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("li",{children:"âœ“ Ø¹Ù…ÙˆÙ„Ø§Øª Ø¹Ù„Ù‰ ÙƒÙ„ Ø·Ù„Ø¨"}),e.jsx("li",{children:"âœ“ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"ğŸ§"}),e.jsx("span",{className:"font-bold text-blue-700",children:"Ø¯Ø¹Ù… ÙÙ†ÙŠ"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"âœ“ Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰"}),e.jsx("li",{children:"âœ“ Ø¯Ø¹Ù… Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"}),e.jsx("li",{children:"âœ“ Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„"}),e.jsx("li",{children:"âœ— Ù„Ø§ ÙŠØ±Ù‰ Ø§Ù„Ù…Ø§Ù„ÙŠØ©"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"ğŸ“±"}),e.jsx("span",{className:"font-bold text-pink-700",children:"Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"âœ“ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰"}),e.jsx("li",{children:"âœ“ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªÙØ§Ø¹Ù„"}),e.jsx("li",{children:"âœ“ Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©"}),e.jsx("li",{children:"âœ— Ù„Ø§ ÙŠØ±Ù‰ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"ğŸ”§"}),e.jsx("span",{className:"font-bold text-purple-700",children:"Ø¥Ø¯Ø§Ø±Ø©"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"âœ“ Ø¬Ù…ÙŠØ¹ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø´Ø±Ù"}),e.jsx("li",{children:"âœ“ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsx("li",{children:"âœ“ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„Ø©"}),e.jsx("li",{children:"âœ— Ù„Ø§ ÙŠØºÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"ğŸ’°"}),e.jsx("span",{className:"font-bold text-green-700",children:"Ù…Ø­Ø§Ø³Ø¨"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"âœ“ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©"}),e.jsx("li",{children:"âœ“ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª ÙˆØ§Ù„Ø£Ø±Ø¨Ø§Ø­"}),e.jsx("li",{children:"âœ“ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨"}),e.jsx("li",{children:"âœ— Ù„Ø§ ÙŠØ¯ÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"})]})]})]})]})]}),c==="tasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ğŸ“‹ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ©"}),e.jsxs("button",{onClick:()=>et(!0),className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition",children:[e.jsx(Cs,{className:"w-5 h-5"}),"Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed","cancelled"].map(n=>e.jsxs("button",{onClick:()=>Hi(n),className:`px-4 py-2 rounded-xl font-semibold transition ${Vt===n?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n==="all"&&"ğŸ“‹ Ø§Ù„ÙƒÙ„",n==="pending"&&"â³ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",n==="in_progress"&&"ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°",n==="completed"&&"âœ… Ù…ÙƒØªÙ…Ù„Ø©",n==="cancelled"&&"âŒ Ù…Ù„ØºØ§Ø©"]},n))}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Fe.filter(n=>n.status==="pending").length}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Fe.filter(n=>n.status==="in_progress").length}),e.jsx("p",{className:"text-sm text-blue-700",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Fe.filter(n=>n.status==="completed").length}),e.jsx("p",{className:"text-sm text-green-700",children:"Ù…ÙƒØªÙ…Ù„Ø©"})]}),e.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:Fe.filter(n=>n.status==="cancelled").length}),e.jsx("p",{className:"text-sm text-red-700",children:"Ù…Ù„ØºØ§Ø©"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:Fe.filter(n=>Vt==="all"||n.status===Vt).length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{className:"text-4xl mb-2",children:"ğŸ“‹"}),e.jsxs("p",{children:["Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… ",Vt!=="all"&&"ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø©"]})]}):e.jsx("div",{className:"divide-y",children:Fe.filter(n=>Vt==="all"||n.status===Vt).map(n=>{var K,W,xe;const H=j.find(he=>he.uid===n.assignedTo);return e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${n.priority==="high"?"bg-red-100 text-red-700":n.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:n.priority==="high"?"ğŸ”´ Ø¹Ø§Ù„ÙŠØ©":n.priority==="medium"?"ğŸŸ¡ Ù…ØªÙˆØ³Ø·Ø©":"âšª Ù…Ù†Ø®ÙØ¶Ø©"}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${n.status==="pending"?"bg-yellow-100 text-yellow-700":n.status==="in_progress"?"bg-blue-100 text-blue-700":n.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[n.status==="pending"&&"â³ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",n.status==="in_progress"&&"ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°",n.status==="completed"&&"âœ… Ù…ÙƒØªÙ…Ù„Ø©",n.status==="cancelled"&&"âŒ Ù…Ù„ØºØ§Ø©"]})]}),e.jsx("h3",{className:"font-bold text-gray-800",children:n.title}),n.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.description}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["ğŸ‘¤ ",(H==null?void 0:H.name)||n.assignedToName||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"]}),n.dueDate&&e.jsxs("span",{children:["ğŸ“… ",new Date(n.dueDate).toLocaleDateString("ar-SA")]}),e.jsxs("span",{children:["ğŸ• ",((xe=(W=(K=n.createdAt)==null?void 0:K.toDate)==null?void 0:W.call(K))==null?void 0:xe.toLocaleDateString("ar-SA"))||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"]})]}),n.notes&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-50 p-2 rounded",children:["ğŸ’¬ ",n.notes]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[n.status==="pending"&&e.jsx("button",{onClick:async()=>{try{await me(J(C,"tasks",n.id),{status:"in_progress",updatedAt:X()}),t.success("ØªÙ… Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©"),rs()}catch{t.error("ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‡Ù…Ø©")}},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition",title:"Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©",children:"â–¶ï¸"}),(n.status==="pending"||n.status==="in_progress")&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:async()=>{try{await me(J(C,"tasks",n.id),{status:"completed",completedAt:X(),updatedAt:X()}),t.success("ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø©"),rs()}catch{t.error("ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‡Ù…Ø©")}},className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition",title:"Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø©",children:"âœ…"}),e.jsx("button",{onClick:async()=>{if(await a.confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù„ØºØ§Ø¡ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ",{dangerous:!0}))try{await me(J(C,"tasks",n.id),{status:"cancelled",updatedAt:X()}),t.success("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©"),rs()}catch{t.error("ÙØ´Ù„ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©")}},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©",children:"âŒ"})]}),e.jsx("button",{onClick:async()=>{if(await a.confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ",{dangerous:!0}))try{await Ds(J(C,"tasks",n.id)),t.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©"),rs()}catch{t.error("ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©")}},className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:"Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©",children:"ğŸ—‘ï¸"})]})]})},n.id)})})}),Je&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"ğŸ“‹ Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø© *"}),e.jsx("input",{type:"text",value:it,onChange:n=>zs(n.target.value),className:"w-full border rounded-xl px-4 py-2",placeholder:"Ù…Ø«Ø§Ù„: Ù…ØªØ§Ø¨Ø¹Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx("textarea",{value:ca,onChange:n=>jr(n.target.value),className:"w-full border rounded-xl px-4 py-2 h-24",placeholder:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø©..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ØªØ¹ÙŠÙŠÙ† Ø¥Ù„Ù‰ *"}),e.jsxs("select",{value:Pa,onChange:n=>Nr(n.target.value),className:"w-full border rounded-xl px-4 py-2",children:[e.jsx("option",{value:"",children:"-- Ø§Ø®ØªØ± Ù…Ø´Ø±Ù --"}),j.filter(n=>n.role==="admin").map(n=>e.jsx("option",{value:n.uid,children:n.name||n.email},n.uid))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©"}),e.jsxs("select",{value:Tl,onChange:n=>yr(n.target.value),className:"w-full border rounded-xl px-4 py-2",children:[e.jsx("option",{value:"low",children:"âšª Ù…Ù†Ø®ÙØ¶Ø©"}),e.jsx("option",{value:"medium",children:"ğŸŸ¡ Ù…ØªÙˆØ³Ø·Ø©"}),e.jsx("option",{value:"high",children:"ğŸ”´ Ø¹Ø§Ù„ÙŠØ©"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚"}),e.jsx("input",{type:"date",value:Rl,onChange:n=>wr(n.target.value),className:"w-full border rounded-xl px-4 py-2"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{et(!1),zs(""),jr(""),Nr(""),yr("medium"),wr("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-xl font-semibold transition",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{onClick:async()=>{if(!it.trim()||!Pa){t.error("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");return}Pl(!0);try{const n=j.find(H=>H.uid===Pa);await Pe(ee(C,"tasks"),{title:it.trim(),description:ca.trim(),assignedTo:Pa,assignedToName:(n==null?void 0:n.name)||(n==null?void 0:n.email)||"",status:"pending",priority:Tl,dueDate:Rl||null,createdBy:s==null?void 0:s.uid,createdAt:X(),updatedAt:X(),completedAt:null,notes:""}),t.success("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­"),et(!1),zs(""),jr(""),Nr(""),yr("medium"),wr(""),rs()}catch(n){console.error(n),t.error("ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©")}finally{Pl(!1)}},disabled:El,className:"flex-1 bg-primary hover:bg-sky-600 text-white py-2 rounded-xl font-semibold transition disabled:opacity-50",children:El?"Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...":"Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©"})]})]})})]}),c==="tools"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ğŸ› ï¸ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…"}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"ğŸ“Š Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>{const n={exportDate:new Date().toISOString(),users:j.length,restaurants:p.length,orders:L.length,admins:g.length,stats:v,settings:E},H=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),K=URL.createObjectURL(H),W=document.createElement("a");W.href=K,W.download=`app-data-${new Date().toISOString().split("T")[0]}.json`,W.click(),t.success("ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­")},className:"flex items-center gap-3 bg-blue-100 hover:bg-blue-200 text-blue-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ“¥"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"}),e.jsx("p",{className:"text-xs opacity-75",children:"ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ø®Øµ JSON"})]})]}),e.jsxs("button",{onClick:()=>{const n=[["Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨","Ø§Ù„Ù…Ø·Ø¹Ù…","Ø§Ù„Ù…Ø¨Ù„Øº","Ø§Ù„Ø­Ø§Ù„Ø©","Ø§Ù„ØªØ§Ø±ÙŠØ®"].join(","),...L.map(xe=>{var he,we,Re;return[xe.id.slice(-8),xe.restaurantName||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",xe.total,xe.status,((Re=(we=(he=xe.createdAt)==null?void 0:he.toDate)==null?void 0:we.call(he))==null?void 0:Re.toLocaleDateString("ar-SA"))||""].join(",")})].join(`
`),H=new Blob(["\uFEFF"+n],{type:"text/csv;charset=utf-8"}),K=URL.createObjectURL(H),W=document.createElement("a");W.href=K,W.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,W.click(),t.success("ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¨Ù†Ø¬Ø§Ø­")},className:"flex items-center gap-3 bg-green-100 hover:bg-green-200 text-green-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ“‹"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ØªØµØ¯ÙŠØ± Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("p",{className:"text-xs opacity-75",children:"Ù…Ù„Ù CSV Ù„Ù„Ø¥ÙƒØ³Ù„"})]})]}),e.jsxs("button",{onClick:()=>{const n=[["Ø§Ù„Ø§Ø³Ù…","Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„","Ø§Ù„Ø¯ÙˆØ±","Ø§Ù„Ù‡Ø§ØªÙ"].join(","),...j.map(xe=>[xe.name||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…",xe.email,xe.role,xe.phone||""].join(","))].join(`
`),H=new Blob(["\uFEFF"+n],{type:"text/csv;charset=utf-8"}),K=URL.createObjectURL(H),W=document.createElement("a");W.href=K,W.download=`users-${new Date().toISOString().split("T")[0]}.csv`,W.click(),t.success("ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­")},className:"flex items-center gap-3 bg-purple-100 hover:bg-purple-200 text-purple-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ‘¥"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsx("p",{className:"text-xs opacity-75",children:"Ù…Ù„Ù CSV Ù„Ù„Ø¥ÙƒØ³Ù„"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"ğŸ”§ Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:async()=>{const n=L.filter(K=>K.status==="pending");if(n.length===0){t.info("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…Ø¹Ù„Ù‚Ø©");return}if(await a.confirm(`Ø³ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ ${n.length} Ø·Ù„Ø¨ Ù…Ø¹Ù„Ù‚. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ`,{title:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©",dangerous:!0}))try{await Promise.all(n.map(K=>me(J(C,"orders",K.id),{status:"cancelled",updatedAt:X()}))),t.success(`ØªÙ… Ø¥Ù„ØºØ§Ø¡ ${n.length} Ø·Ù„Ø¨`),rs()}catch{t.error("ÙØ´Ù„ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª")}},className:"flex items-center gap-3 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"â³"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©"}),e.jsxs("p",{className:"text-xs opacity-75",children:[L.filter(n=>n.status==="pending").length," Ø·Ù„Ø¨ Ù…Ø¹Ù„Ù‚"]})]})]}),e.jsxs("button",{onClick:async()=>{const n=new Date;n.setMonth(n.getMonth()-3);const H=L.filter(W=>{var he,we;return(((we=(he=W.createdAt)==null?void 0:he.toDate)==null?void 0:we.call(he))||new Date)<n&&(W.status==="delivered"||W.status==="cancelled")});if(H.length===0){t.info("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù‚Ø¯ÙŠÙ…Ø©");return}if(await a.confirm(`Ø³ÙŠØªÙ… Ø­Ø°Ù ${H.length} Ø·Ù„Ø¨ Ù‚Ø¯ÙŠÙ… (Ø£ÙƒØ«Ø± Ù…Ù† 3 Ø£Ø´Ù‡Ø±). Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ`,{title:"Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©",dangerous:!0}))try{await Promise.all(H.map(W=>Ds(J(C,"orders",W.id)))),t.success(`ØªÙ… Ø­Ø°Ù ${H.length} Ø·Ù„Ø¨ Ù‚Ø¯ÙŠÙ…`),rs()}catch{t.error("ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨Ø§Øª")}},className:"flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ—‘ï¸"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©"}),e.jsx("p",{className:"text-xs opacity-75",children:"Ø­Ø°Ù Ø£Ù‚Ø¯Ù… Ù…Ù† 3 Ø£Ø´Ù‡Ø±"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"ğŸ”— Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©"}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("a",{href:`https://console.firebase.google.com/project/${Ls.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ“Š"}),e.jsx("span",{className:"font-semibold",children:"Firestore"})]}),e.jsxs("a",{href:`https://console.firebase.google.com/project/${Ls.projectId}/authentication/users`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-green-50 hover:bg-green-100 text-green-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ”"}),e.jsx("span",{className:"font-semibold",children:"Authentication"})]}),e.jsxs("a",{href:`https://console.firebase.google.com/project/${Ls.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-purple-50 hover:bg-purple-100 text-purple-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ“"}),e.jsx("span",{className:"font-semibold",children:"Storage"})]}),e.jsxs("a",{href:`https://console.firebase.google.com/project/${Ls.projectId}/hosting`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-orange-50 hover:bg-orange-100 text-orange-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"ğŸŒ"}),e.jsx("span",{className:"font-semibold",children:"Hosting"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Project ID"}),e.jsx("p",{className:"font-mono",children:Ls.projectId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Storage Bucket"}),e.jsx("p",{className:"font-mono",children:Ls.storageBucket})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"}),e.jsx("p",{className:"font-bold",children:E.appVersion||"1.0.0"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"ÙˆØ¶Ø¹ Ø§Ù„ØµÙŠØ§Ù†Ø©"}),e.jsx("p",{className:`font-bold ${E.maintenanceMode?"text-red-600":"text-green-600"}`,children:E.maintenanceMode?"ğŸ”´ Ù…ÙØ¹Ù‘Ù„":"ğŸŸ¢ Ù…Ø¹Ø·Ù‘Ù„"})]})]})]})]}),c==="licenses"&&e.jsx(Gm,{restaurants:p,onUpdate:_r,toast:t,dialog:a}),c==="packages"&&e.jsx(Ym,{packageRequests:Ct,onUpdate:_r,toast:t,dialog:a,storage:i}),c==="packageSettings"&&e.jsx(Jm,{toast:t,dialog:a}),c==="storeAnalytics"&&e.jsx(Km,{restaurants:p,orders:L,toast:t}),c==="activityLog"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:["ğŸ“œ Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª",e.jsxs("span",{className:"text-sm bg-gray-200 px-3 py-1 rounded-full",children:[vr.length," Ø¹Ù…Ù„ÙŠØ©"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:Sr,onChange:n=>Gi(n.target.value),className:"border rounded-xl px-4 py-2",children:[e.jsx("option",{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª"}),e.jsx("option",{value:"activate",children:"ØªÙØ¹ÙŠÙ„"}),e.jsx("option",{value:"deactivate",children:"Ø¥ÙŠÙ‚Ø§Ù"}),e.jsx("option",{value:"create",children:"Ø¥Ù†Ø´Ø§Ø¡"}),e.jsx("option",{value:"update",children:"ØªØ­Ø¯ÙŠØ«"}),e.jsx("option",{value:"delete",children:"Ø­Ø°Ù"}),e.jsx("option",{value:"package_activate",children:"ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø©"}),e.jsx("option",{value:"package_cancel",children:"Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù‚Ø©"}),e.jsx("option",{value:"role_change",children:"ØªØºÙŠÙŠØ± Ø¯ÙˆØ±"})]}),e.jsxs("button",{onClick:Kl,disabled:kr,className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:[kr?"â³":"ğŸ”„"," ØªØ­Ø¯ÙŠØ«"]})]})]}),kr?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-sky-200 border-t-sky-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„..."})]}):vr.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"ğŸ“­ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ù…Ø³Ø¬Ù„Ø© Ø¨Ø¹Ø¯"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªÙØ¹ÙŠÙ„ ÙˆØ§Ù„Ø¥ÙŠÙ‚Ø§Ù ÙˆØ§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§"})]}):e.jsx("div",{className:"space-y-3",children:vr.filter(n=>Sr==="all"||n.action===Sr).map(n=>e.jsx("div",{className:`bg-white rounded-xl shadow p-4 border-r-4 ${n.action==="activate"||n.action==="package_activate"?"border-green-500":n.action==="deactivate"||n.action==="package_cancel"||n.action==="delete"?"border-red-500":n.action==="create"?"border-blue-500":"border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${n.action==="activate"?"bg-green-100 text-green-700":n.action==="deactivate"?"bg-red-100 text-red-700":n.action==="create"?"bg-blue-100 text-blue-700":n.action==="update"?"bg-yellow-100 text-yellow-700":n.action==="delete"?"bg-red-100 text-red-700":n.action==="package_activate"?"bg-amber-100 text-amber-700":n.action==="package_cancel"?"bg-orange-100 text-orange-700":n.action==="role_change"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:[n.action==="activate"&&"âœ… ØªÙØ¹ÙŠÙ„",n.action==="deactivate"&&"â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù",n.action==="create"&&"â• Ø¥Ù†Ø´Ø§Ø¡",n.action==="update"&&"âœï¸ ØªØ­Ø¯ÙŠØ«",n.action==="delete"&&"ğŸ—‘ï¸ Ø­Ø°Ù",n.action==="package_activate"&&"âœ¨ ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø©",n.action==="package_cancel"&&"ğŸ“¦ Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù‚Ø©",n.action==="role_change"&&"ğŸ”„ ØªØºÙŠÙŠØ± Ø¯ÙˆØ±"]}),e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:[n.targetType==="user"&&"ğŸ‘¤ Ù…Ø³ØªØ®Ø¯Ù…",n.targetType==="restaurant"&&"ğŸª Ù…Ø·Ø¹Ù…",n.targetType==="order"&&"ğŸ“¦ Ø·Ù„Ø¨",n.targetType==="package"&&"ğŸ’ Ø¨Ø§Ù‚Ø©",n.targetType==="settings"&&"âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"]})]}),e.jsx("p",{className:"font-bold text-gray-800",children:n.targetName||n.targetId}),n.details&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.details}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Ø¨ÙˆØ§Ø³Ø·Ø©: ",n.performedByName||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"]})]}),e.jsx("div",{className:"text-left text-xs text-gray-400 whitespace-nowrap",children:n.createdAt?new Date(n.createdAt).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]})},n.id))})]}),e.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[e.jsxs("span",{children:["ğŸ“§ ",s==null?void 0:s.email]}),e.jsxs("span",{children:["ğŸ†” ",s==null?void 0:s.uid.slice(0,12),"..."]}),e.jsxs("span",{children:["ğŸ“… ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},Gm=({restaurants:s,onUpdate:t,toast:a,dialog:i})=>{const[c,u]=l.useState("pending"),[r,w]=l.useState({}),[D,U]=l.useState(null),[v,N]=l.useState(""),[E,A]=l.useState(null),[j,z]=l.useState(new Set),[p,f]=l.useState(""),[L,$]=l.useState([]),[g,F]=l.useState(!1),[O,B]=l.useState(!1);l.useEffect(()=>{c==="sent_messages"&&L.length===0&&T()},[c]);const T=async()=>{F(!0);try{const k=fe(ee(C,"notifications"),je("type","==","license_reminder"),es("createdAt","desc"),js(100)),S=(await be(k)).docs.map(V=>{var Q,ie;return{id:V.id,...V.data(),createdAt:((ie=(Q=V.data().createdAt)==null?void 0:Q.toDate)==null?void 0:ie.call(Q))||null}});$(S)}catch(k){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„:",k),a.warning("ØªØ­ØªØ§Ø¬ Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙÙ‡Ø±Ø³ Ù…Ø±ÙƒØ¨ Ù„Ù€ notifications (type + createdAt)")}finally{F(!1)}},P=s.filter(k=>k.commercialLicenseUrl),m=s.filter(k=>!k.commercialLicenseUrl),o=P.filter(k=>c==="all"?!0:c==="missing"||c==="sent_messages"?!1:k.licenseStatus===c||!k.licenseStatus&&c==="pending"),R={all:P.length,pending:P.filter(k=>!k.licenseStatus||k.licenseStatus==="pending").length,approved:P.filter(k=>k.licenseStatus==="approved").length,rejected:P.filter(k=>k.licenseStatus==="rejected").length,missing:m.length,sent_messages:L.length},I=async(k,h)=>{if(!h.trim()){a.warning("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©");return}A(k.id);try{await Pe(ee(C,"notifications"),{type:"license_reminder",recipientId:k.ownerId,recipientType:"owner",restaurantId:k.id,restaurantName:k.name,title:"âš ï¸ ØªØ°ÙƒÙŠØ±: Ø±ÙØ¹ Ø§Ù„ØªØ±Ø®ÙŠØµ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ",message:h,read:!1,createdAt:X()}),a.success(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù€ ${k.name}`),N("")}catch(S){a.error("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©: "+(S.message||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"))}finally{A(null)}},q=async()=>{if(!p.trim()){a.warning("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©");return}const k=j.size>0?m.filter(S=>j.has(S.id)):m;if(k.length===0){a.warning("Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø·Ø§Ø¹Ù… Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©");return}if(await i.confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù€ ${k.length} Ù…Ø·Ø¹Ù…ØŸ`,{title:"Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¬Ù…Ø§Ø¹ÙŠØ©"})){B(!0);try{const S=k.map(V=>Pe(ee(C,"notifications"),{type:"license_reminder",recipientId:V.ownerId,recipientType:"owner",restaurantId:V.id,restaurantName:V.name,title:"âš ï¸ ØªØ°ÙƒÙŠØ±: Ø±ÙØ¹ Ø§Ù„ØªØ±Ø®ÙŠØµ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ",message:p,read:!1,createdAt:X()}));await Promise.all(S),a.success(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù€ ${k.length} Ù…Ø·Ø¹Ù… Ø¨Ù†Ø¬Ø§Ø­ âœ“`),f(""),z(new Set)}catch(S){a.error("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø¹Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„: "+(S.message||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"))}finally{B(!1)}}},x=()=>{j.size===m.length?z(new Set):z(new Set(m.map(k=>k.id)))},b=k=>{const h=new Set(j);h.has(k)?h.delete(k):h.add(k),z(h)},y=async(k,h)=>{const S=r[k]||"";if(h==="rejected"&&!S.trim()){a.warning("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶");return}const V=h==="approved"?"Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰":"Ø±ÙØ¶";if(await i.confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ${V} ØªØ±Ø§Ø®ÙŠØµ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø·Ø¹Ù…ØŸ`,{title:`${V} Ø§Ù„ØªØ±Ø§Ø®ÙŠØµ`})){U(k);try{await me(J(C,"restaurants",k),{licenseStatus:h,licenseNotes:h==="rejected"?S:"",updatedAt:X()}),a.success(h==="approved"?"ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ±Ø§Ø®ÙŠØµ âœ“":"ØªÙ… Ø±ÙØ¶ Ø§Ù„ØªØ±Ø§Ø®ÙŠØµ"),w(ie=>({...ie,[k]:""})),t()}catch(ie){a.error("ÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«: "+(ie.message||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"))}finally{U(null)}}},d=async(k,h)=>{const S="Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ";if(await i.confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù ${S} Ù„Ù€ "${k.name}"ØŸ
Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø·Ø¹Ù… Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø±ÙØ¹ Ø§Ù„ØªØ±Ø®ÙŠØµ.`,{title:`ğŸ—‘ï¸ Ø­Ø°Ù ${S}`})){U(k.id);try{const Q={licenseStatus:null,licenseNotes:"",updatedAt:X(),commercialLicenseUrl:null};await me(J(C,"restaurants",k.id),Q),await Pe(ee(C,"notifications"),{type:"license_deleted",recipientId:k.ownerId,recipientType:"owner",restaurantId:k.id,restaurantName:k.name,title:`âš ï¸ ØªÙ… Ø­Ø°Ù ${S}`,message:`ØªÙ… Ø­Ø°Ù ${S} Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù…Ø·Ø¹Ù…Ùƒ. ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© Ø±ÙØ¹ Ø§Ù„ØªØ±Ø®ÙŠØµ Ø§Ù„ØµØ­ÙŠØ­ Ù…Ù† ØµÙØ­Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù….`,read:!1,createdAt:X()}),a.success(`ØªÙ… Ø­Ø°Ù ${S} ÙˆØ¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø·Ø¹Ù… âœ“`),t()}catch(Q){a.error("ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„ØªØ±Ø®ÙŠØµ: "+(Q.message||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"))}finally{U(null)}}},M=k=>{switch(k){case"approved":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:[e.jsx(Ie,{className:"w-3 h-3"})," Ù…ÙˆØ§ÙÙ‚"]});case"rejected":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-700 text-xs font-semibold",children:[e.jsx(Rs,{className:"w-3 h-3"})," Ù…Ø±ÙÙˆØ¶"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold",children:[e.jsx(Ge,{className:"w-3 h-3"})," Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"]})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(al,{className:"w-6 h-6 text-sky-500"}),"Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªØ±Ø§Ø®ÙŠØµ"]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["pending","approved","rejected","all","missing","sent_messages"].map(k=>e.jsxs("button",{onClick:()=>u(k),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${c===k?k==="missing"?"bg-orange-500 text-white":k==="sent_messages"?"bg-purple-500 text-white":"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[k==="all"&&`Ø§Ù„ÙƒÙ„ (${R.all})`,k==="pending"&&`Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© (${R.pending})`,k==="approved"&&`Ù…ÙˆØ§ÙÙ‚ (${R.approved})`,k==="rejected"&&`Ù…Ø±ÙÙˆØ¶ (${R.rejected})`,k==="missing"&&`âš ï¸ Ù„Ù… ÙŠØ±ÙØ¹ (${R.missing})`,k==="sent_messages"&&"ğŸ“¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø©"]},k))})]}),c==="sent_messages"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-purple-700 flex items-center gap-2",children:"ğŸ“¨ Ø³Ø¬Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø© Ù„Ù„Ù…Ø·Ø§Ø¹Ù…"}),e.jsx("button",{onClick:T,disabled:g,className:"px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-xl font-medium transition disabled:opacity-50",children:g?"â³ Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...":"ğŸ”„ ØªØ­Ø¯ÙŠØ«"})]}),g?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-purple-200 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„..."})]}):L.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ù…Ø±Ø³Ù„Ø© Ø¨Ø¹Ø¯"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙŠ ØªØ±Ø³Ù„Ù‡Ø§ Ù„Ù„Ù…Ø·Ø§Ø¹Ù… Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§"})]}):e.jsx("div",{className:"space-y-3",children:L.map(k=>e.jsx("div",{className:"bg-white rounded-xl shadow p-4 border-r-4 border-purple-500",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold text-gray-800",children:k.restaurantName||"Ù…Ø·Ø¹Ù…"}),k.read?e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"âœ“ Ù…Ù‚Ø±ÙˆØ¡Ø©"}):e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full",children:"â³ Ù„Ù… ØªÙÙ‚Ø±Ø£"})]}),e.jsx("p",{className:"text-sm text-gray-600 font-semibold mb-1",children:k.title}),e.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 p-3 rounded-lg",children:k.message})]}),e.jsx("div",{className:"text-left text-xs text-gray-400 whitespace-nowrap",children:k.createdAt?new Date(k.createdAt).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]})},k.id))})]}),c==="missing"&&e.jsx("div",{className:"space-y-4",children:m.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Ie,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),e.jsx("p",{className:"text-green-600 font-semibold",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø±ÙØ¹Øª ØªØ±Ø§Ø®ÙŠØµÙ‡Ø§ âœ“"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-2xl p-5",children:[e.jsx("h3",{className:"font-bold text-orange-800 mb-3 flex items-center gap-2",children:"ğŸ“¢ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¬Ù…Ø§Ø¹ÙŠØ©"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.size===m.length,onChange:x,className:"w-5 h-5 rounded border-orange-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("span",{className:"text-sm text-orange-700",children:["ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„ (",m.length,")"]})]}),j.size>0&&e.jsxs("span",{className:"text-sm bg-orange-200 text-orange-800 px-2 py-1 rounded-full",children:["Ù…Ø­Ø¯Ø¯: ",j.size]})]}),e.jsx("textarea",{placeholder:"Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙŠ Ø³ØªØ±Ø³Ù„ Ù„Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© (Ø£Ùˆ Ø¬Ù…ÙŠØ¹Ù‡Ø§ Ø¥Ø°Ø§ Ù„Ù… ØªØ­Ø¯Ø¯)...",value:p,onChange:k=>f(k.target.value),className:"w-full border border-orange-200 rounded-xl p-3 text-sm resize-none h-24 focus:ring-2 focus:ring-orange-400 focus:border-transparent"}),e.jsx("button",{onClick:q,disabled:O||!p.trim(),className:"mt-3 w-full flex items-center justify-center gap-2 bg-orange-500 hover:bg-orange-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:O?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„..."]}):e.jsxs(e.Fragment,{children:["ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ù„Ù€ ",j.size>0?j.size:m.length," Ù…Ø·Ø¹Ù…"]})})]}),e.jsx("div",{className:"grid gap-3",children:m.map(k=>e.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow-sm hover:shadow-md transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:j.has(k.id),onChange:()=>b(k.id),className:"w-5 h-5 mt-1 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:k.name}),e.jsx("p",{className:"text-sm text-gray-500",children:k.city||"Ø¨Ø¯ÙˆÙ† Ù…Ø¯ÙŠÙ†Ø©"})]}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-orange-100 text-orange-700 text-xs font-semibold",children:[e.jsx(Rs,{className:"w-3 h-3"}),"Ù„Ù… ÙŠØ±ÙØ¹ Ø§Ù„ØªØ±Ø®ÙŠØµ"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[k.email&&e.jsxs("span",{children:["ğŸ“§ ",k.email]}),k.phone&&e.jsxs("span",{children:["ğŸ“± ",k.phone]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Ø±Ø³Ø§Ù„Ø© Ø³Ø±ÙŠØ¹Ø©...",value:E===k.id?v:"",onChange:h=>{A(k.id),N(h.target.value)},onFocus:()=>A(k.id),className:"flex-1 border rounded-lg px-3 py-2 text-sm"}),e.jsx("button",{onClick:()=>I(k,v),disabled:E===k.id&&!v.trim(),className:"px-4 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg text-sm font-medium transition disabled:opacity-50",children:"Ø¥Ø±Ø³Ø§Ù„"})]})]})]})},k.id))})]})}),c!=="missing"&&o.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(al,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsxs("p",{children:["Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ±Ø§Ø®ÙŠØµ ",c==="pending"?"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©":c==="approved"?"Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§":c==="rejected"?"Ù…Ø±ÙÙˆØ¶Ø©":""]})]}):c!=="missing"&&e.jsx("div",{className:"grid gap-4",children:o.map(k=>e.jsxs("div",{className:"bg-white border rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:k.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[k.city||"Ø¨Ø¯ÙˆÙ† Ù…Ø¯ÙŠÙ†Ø©"," â€¢ ",k.email||"Ø¨Ø¯ÙˆÙ† Ø¨Ø±ÙŠØ¯"]})]}),M(k.licenseStatus)]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:k.commercialLicenseUrl&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"ğŸ“œ Ø§Ù„Ø±Ø®ØµØ© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©"}),e.jsx("button",{onClick:()=>d(k),disabled:D===k.id,className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Ø­Ø°Ù Ø§Ù„Ø±Ø®ØµØ© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©",children:e.jsx(ys,{className:"w-4 h-4"})})]}),e.jsxs("a",{href:k.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sky-600 hover:text-sky-800 text-sm",children:[e.jsx(rl,{className:"w-4 h-4"}),"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù"]})]})}),k.commercialLicenseUrl&&e.jsxs("button",{onClick:()=>d(k),disabled:D===k.id,className:"w-full flex items-center justify-center gap-2 mb-4 py-2 px-4 border-2 border-dashed border-red-200 text-red-500 hover:bg-red-50 hover:border-red-300 rounded-xl text-sm font-medium transition",children:[e.jsx(ys,{className:"w-4 h-4"}),"Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø·Ù„Ø¨"]}),k.licenseStatus==="rejected"&&k.licenseNotes&&e.jsxs("div",{className:"bg-red-50 text-red-700 rounded-xl p-3 mb-4 text-sm",children:[e.jsx("strong",{children:"Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶:"})," ",k.licenseNotes]}),k.licenseStatus!=="approved"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{placeholder:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ø±ÙØ¶)...",value:r[k.id]||"",onChange:h=>w(S=>({...S,[k.id]:h.target.value})),className:"w-full border rounded-xl p-3 text-sm resize-none h-20"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>y(k.id,"approved"),disabled:D===k.id,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[e.jsx(Ie,{className:"w-5 h-5"}),"Ù…ÙˆØ§ÙÙ‚Ø©"]}),e.jsxs("button",{onClick:()=>y(k.id,"rejected"),disabled:D===k.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[e.jsx(Rs,{className:"w-5 h-5"}),"Ø±ÙØ¶"]})]})]}),k.licenseStatus==="approved"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{placeholder:"Ø³Ø¨Ø¨ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©...",value:r[k.id]||"",onChange:h=>w(S=>({...S,[k.id]:h.target.value})),className:"w-full border border-yellow-200 rounded-xl p-3 text-sm resize-none h-20 focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>y(k.id,"rejected"),disabled:D===k.id,className:"flex-1 flex items-center justify-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[e.jsx(Rs,{className:"w-5 h-5"}),"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©"]}),e.jsxs("button",{onClick:()=>d(k),disabled:D===k.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[e.jsx(ys,{className:"w-5 h-5"}),"Ø­Ø°Ù ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø·Ù„Ø¨"]})]})]})]},k.id))})]})},Km=({restaurants:s,orders:t,toast:a})=>{var N,E,A,j;const[i,c]=l.useState(null),[u,r]=l.useState({}),[w,D]=l.useState(!1),U=async z=>{var p;D(!0);try{const f=await Ce(J(C,"restaurantStats",z)),L=f.exists()?f.data():null,$=t.filter(o=>o.restaurantId===z),g=$.filter(o=>o.status==="delivered"),F=fe(ee(C,"menuItems"),je("ownerId","==",z)),O=await be(F);let B=0;try{const o=fe(ee(C,"customerRegistrations"),je("restaurantId","==",z));B=(await be(o)).size}catch{}const T=g.reduce((o,R)=>o+(R.total||0),0),P=new Date().toISOString().split("T")[0],m=((p=L==null?void 0:L.dailyViews)==null?void 0:p[P])||0;r(o=>({...o,[z]:{totalOrders:$.length,deliveredOrders:g.length,totalRevenue:T,menuItemsCount:O.size,profileViews:(L==null?void 0:L.totalProfileViews)||0,menuViews:(L==null?void 0:L.totalMenuViews)||0,itemViews:(L==null?void 0:L.totalItemViews)||0,shareClicks:(L==null?void 0:L.totalShareClicks)||0,whatsappShares:(L==null?void 0:L.whatsappShareCount)||0,registeredCustomers:B,todayViews:m,dailyViews:(L==null?void 0:L.dailyViews)||{}}}))}catch(f){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ØªØ¬Ø±:",f),a.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{D(!1)}},v=z=>{c(z),u[z]||U(z)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ğŸ“ˆ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ØªØ§Ø¬Ø±"}),e.jsxs("span",{className:"text-gray-500",children:[s.length," Ù…ØªØ¬Ø±"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(z=>{const p=u[z.id];return e.jsxs("div",{onClick:()=>v(z.id),className:`bg-white rounded-2xl shadow p-4 cursor-pointer transition hover:shadow-lg ${i===z.id?"ring-2 ring-sky-500":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[z.logoUrl?e.jsx("img",{src:z.logoUrl,alt:z.name,className:"w-12 h-12 rounded-xl object-cover"}):e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center",children:"ğŸª"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:z.name}),e.jsx("p",{className:"text-xs text-gray-500",children:z.city||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]})]}),p&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-blue-700",children:p.profileViews}),e.jsx("p",{className:"text-blue-600",children:"Ø²ÙŠØ§Ø±Ø©"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-green-700",children:p.deliveredOrders}),e.jsx("p",{className:"text-green-600",children:"Ø·Ù„Ø¨"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-purple-700",children:p.whatsappShares}),e.jsx("p",{className:"text-purple-600",children:"Ù…Ø´Ø§Ø±ÙƒØ©"})]})]})]},z.id)})}),i&&e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:w?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ze,{className:"w-8 h-8 animate-spin mx-auto text-sky-500"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."})]}):u[i]?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[(N=s.find(z=>z.id===i))!=null&&N.logoUrl?e.jsx("img",{src:(E=s.find(z=>z.id===i))==null?void 0:E.logoUrl,alt:"",className:"w-16 h-16 rounded-xl object-cover"}):e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-xl flex items-center justify-center text-2xl",children:"ğŸª"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:(A=s.find(z=>z.id===i))==null?void 0:A.name}),e.jsx("p",{className:"text-gray-500",children:(j=s.find(z=>z.id===i))==null?void 0:j.city})]})]}),e.jsx("button",{onClick:()=>U(i),className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-xl",children:e.jsx(ze,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-700",children:u[i].profileViews}),e.jsx("p",{className:"text-sm text-blue-600",children:"Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ØµÙØ­Ø©"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-green-700",children:u[i].todayViews}),e.jsx("p",{className:"text-sm text-green-600",children:"Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-700",children:u[i].whatsappShares}),e.jsx("p",{className:"text-sm text-purple-600",children:"Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§ØªØ³Ø§Ø¨"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-amber-700",children:u[i].shareClicks}),e.jsx("p",{className:"text-sm text-amber-600",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ§Øª"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:u[i].totalOrders}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:u[i].deliveredOrders}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ø·Ù„Ø¨Ø§Øª Ù…ÙƒØªÙ…Ù„Ø©"})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u[i].totalRevenue.toFixed(0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø±.Ø³)"})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:u[i].menuItemsCount}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµÙ†Ø§Ù"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-indigo-800 mb-2",children:"ğŸ‘¥ Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª Ø¹Ø¨Ø± Ø±Ø§Ø¨Ø· Ø§Ù„Ø£Ø³Ø±Ø©"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:u[i].registeredCustomers}),e.jsx("p",{className:"text-xs text-indigo-500",children:"Ø¹Ù…ÙŠÙ„ Ø³Ø¬Ù„ Ø¹Ø¨Ø± Ø§Ù„Ø±Ø§Ø¨Ø·"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:u[i].itemViews}),e.jsx("p",{className:"text-xs text-purple-500",children:"Ù…Ø´Ø§Ù‡Ø¯Ø§Øª Ø§Ù„Ø£ØµÙ†Ø§Ù"})]})]})]}),Object.keys(u[i].dailyViews||{}).length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"ğŸ“Š Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…)"}),e.jsx("div",{className:"flex items-end gap-2 h-32",children:(()=>{const z=u[i].dailyViews||{},p=[];for(let L=6;L>=0;L--){const $=new Date;$.setDate($.getDate()-L);const g=$.toISOString().split("T")[0];p.push({date:g,views:z[g]||0})}const f=Math.max(...p.map(L=>L.views),1);return p.map((L,$)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full bg-sky-500 rounded-t",style:{height:`${L.views/f*100}%`,minHeight:L.views>0?"4px":"0"}}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(L.date).toLocaleDateString("ar-SA",{weekday:"short"})}),e.jsx("span",{className:"text-xs font-bold",children:L.views})]},L.date))})()})]})]}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ù…ØªØ¬Ø± Ù„Ø¹Ø±Ø¶ Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙ‡"})})]})},Ym=({packageRequests:s,onUpdate:t,toast:a,dialog:i,storage:c})=>{const[u,r]=l.useState("all"),[w,D]=l.useState(null),[U,v]=l.useState(null),[N,E]=l.useState(99),[A,j]=l.useState(null),[z,p]=l.useState(null),[f,L]=l.useState(""),[$,g]=l.useState(null),F=async(x,b)=>{if(!b.trim()){a.warning("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©");return}p(x.id);try{await Pe(ee(C,"notifications"),{recipientId:x.restaurantId,title:"ğŸ“¬ Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©",message:b.trim(),type:"admin_message",read:!1,data:{requestId:x.id},createdAt:X()}),a.success("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­! ğŸ“¬"),g(null),L("")}catch(y){a.error(`ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ${y.message}`)}finally{p(null)}},O=s.filter(x=>u==="all"?!0:x.status===u),B=s.filter(x=>x.status==="pending").length,T=s.filter(x=>x.status==="bank_sent").length,P=s.filter(x=>x.status==="payment_sent").length,m=s.filter(x=>x.status==="approved").length,o=x=>{switch(x){case"pending":return{label:"Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯",color:"bg-yellow-100 text-yellow-700",icon:"â³"};case"bank_sent":return{label:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„",color:"bg-blue-100 text-blue-700",icon:"ğŸ¦"};case"payment_sent":return{label:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯",color:"bg-purple-100 text-purple-700",icon:"ğŸ’³"};case"approved":return{label:"Ù…ÙØ¹Ù‘Ù„",color:"bg-green-100 text-green-700",icon:"âœ…"};case"rejected":return{label:"Ù…Ø±ÙÙˆØ¶",color:"bg-red-100 text-red-700",icon:"âŒ"};case"expired":return{label:"Ù…Ù†ØªÙ‡ÙŠ",color:"bg-gray-100 text-gray-700",icon:"â°"};default:return{label:x,color:"bg-gray-100",icon:"ğŸ“¦"}}},R=async x=>{if(!U){a.warning("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ");return}D(x);try{const b=`bankAccounts/${Date.now()}_${U.name}`,y=As(c,b);await Nt(y,U);const d=await Is(y);await me(J(C,"packageRequests",x),{status:"bank_sent",bankAccountImageUrl:d,subscriptionAmount:N,bankSentAt:X(),updatedAt:X()});const M=s.find(k=>k.id===x);M&&await Pe(ee(C,"notifications"),{recipientId:M.restaurantId,title:"ğŸ¦ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ",message:`ÙŠØ±Ø¬Ù‰ ØªØ­ÙˆÙŠÙ„ Ù…Ø¨Ù„Øº ${N} Ø±ÙŠØ§Ù„ Ø«Ù… Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¥Ø«Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„`,type:"package_bank_sent",read:!1,data:{requestId:x,amount:N},createdAt:X()}),a.success("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ Ø¨Ù†Ø¬Ø§Ø­"),v(null),j(null),t()}catch(b){a.error(`ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ${b.message}`)}finally{D(null)}},I=async x=>{if(await i.confirm(`Ù‡Ù„ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªÙ„Ø§Ù… Ù…Ø¨Ù„Øº ${x.subscriptionAmount} Ø±ÙŠØ§Ù„ ÙˆØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² Ù„Ù€ "${x.restaurantName}"ØŸ`,{title:"âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹ ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø©",confirmText:"Ù†Ø¹Ù…ØŒ ÙØ¹Ù‘Ù„ Ø§Ù„Ø¨Ø§Ù‚Ø©"})){D(x.id);try{const y=new Date;y.setDate(y.getDate()+(x.subscriptionDuration||30)),await me(J(C,"packageRequests",x.id),{status:"approved",approvedAt:X(),expiresAt:y,updatedAt:X()}),await me(J(C,"restaurants",x.restaurantId),{packageType:"premium",packageSubscribedAt:X(),packageExpiresAt:y,packageRequest:null,updatedAt:X()}),await Pe(ee(C,"notifications"),{recipientId:x.restaurantId,title:"ğŸ‰ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²!",message:`Ù…Ø¨Ø±ÙˆÙƒ! ØªÙ… ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² Ø­ØªÙ‰ ${y.toLocaleDateString("ar-SA")}`,type:"package_approved",read:!1,data:{requestId:x.id},createdAt:X()}),a.success("ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰"),t()}catch(y){a.error(`ÙØ´Ù„ Ø§Ù„ØªÙØ¹ÙŠÙ„: ${y.message}`)}finally{D(null)}}},q=async x=>{if(await i.confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø±ÙØ¶ Ø·Ù„Ø¨ "${x.restaurantName}"ØŸ`,{title:"âŒ Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨",confirmText:"Ù†Ø¹Ù…ØŒ Ø§Ø±ÙØ¶",dangerous:!0})){D(x.id);try{await me(J(C,"packageRequests",x.id),{status:"rejected",rejectedAt:X(),updatedAt:X()}),await Pe(ee(C,"notifications"),{recipientId:x.restaurantId,title:"âŒ ØªÙ… Ø±ÙØ¶ Ø·Ù„Ø¨ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ",message:"Ù„Ù„Ø£Ø³Ù ØªÙ… Ø±ÙØ¶ Ø·Ù„Ø¨ Ø§Ø´ØªØ±Ø§ÙƒÙƒ ÙÙŠ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ². ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø³Ø¨Ø¨.",type:"package_rejected",read:!1,createdAt:X()}),a.success("ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨"),t()}catch(y){a.error(`ÙØ´Ù„ Ø§Ù„Ø±ÙØ¶: ${y.message}`)}finally{D(null)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"w-8 h-8 text-amber-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª"}),e.jsx("p",{className:"text-gray-600",children:"Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø© Ù„Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center border border-yellow-200",children:[e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:B}),e.jsx("p",{className:"text-sm text-yellow-700",children:"â³ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center border border-blue-200",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:T}),e.jsx("p",{className:"text-sm text-blue-700",children:"ğŸ¦ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 text-center border border-purple-200",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:P}),e.jsx("p",{className:"text-sm text-purple-700",children:"ğŸ’³ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center border border-green-200",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:m}),e.jsx("p",{className:"text-sm text-green-700",children:"âœ… Ù…ÙØ¹Ù‘Ù„"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"all",label:"Ø§Ù„ÙƒÙ„"},{id:"pending",label:"â³ Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©"},{id:"bank_sent",label:"ğŸ¦ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„"},{id:"payment_sent",label:"ğŸ’³ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯"},{id:"approved",label:"âœ… Ù…ÙØ¹Ù‘Ù„Ø©"},{id:"rejected",label:"âŒ Ù…Ø±ÙÙˆØ¶Ø©"}].map(x=>e.jsx("button",{onClick:()=>r(x.id),className:`px-4 py-2 rounded-xl font-semibold transition ${u===x.id?"bg-amber-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:x.label},x.id))}),O.length===0?e.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-2xl",children:[e.jsx(Me,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-500 text-lg",children:["Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ",u!=="all"&&"Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø©"]})]}):e.jsx("div",{className:"space-y-4",children:O.map(x=>{var y,d,M,k,h,S,V,Q,ie,re,ye,ue;const b=o(x.status);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center text-2xl",children:"ğŸ‘¨â€ğŸ³"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:x.restaurantName}),e.jsxs("p",{className:"text-white/80 text-sm",children:[x.ownerName||"ØµØ§Ø­Ø¨ Ø§Ù„Ø£Ø³Ø±Ø©"," â€¢ ",x.ownerPhone||"Ø¨Ø¯ÙˆÙ† Ø±Ù‚Ù…"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x.ownerPhone&&e.jsx("a",{href:`https://wa.me/${x.ownerPhone.replace(/[^0-9]/g,"").replace(/^0/,"966")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-xl text-sm font-semibold transition",children:"ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨"}),e.jsxs("div",{className:`px-4 py-2 rounded-full text-sm font-bold ${b.color}`,children:[b.icon," ",b.label]})]})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨"}),e.jsx("p",{className:"font-semibold",children:((M=(d=(y=x.requestedAt)==null?void 0:y.toDate)==null?void 0:d.call(y))==null?void 0:M.toLocaleDateString("ar-SA"))||((S=(h=(k=x.createdAt)==null?void 0:k.toDate)==null?void 0:h.call(k))==null?void 0:S.toLocaleDateString("ar-SA"))||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsxs("p",{className:"font-semibold text-green-600",children:[x.subscriptionAmount||99," Ø±.Ø³"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Ø§Ù„Ù…Ø¯Ø©"}),e.jsxs("p",{className:"font-semibold",children:[x.subscriptionDuration||30," ÙŠÙˆÙ…"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Ù…Ø¹Ø±Ù Ø§Ù„Ø£Ø³Ø±Ø©"}),e.jsxs("p",{className:"font-mono text-xs",children:[x.restaurantId.slice(0,12),"..."]})]})]}),e.jsx("div",{className:"border-t pt-4",children:$===x.id?e.jsxs("div",{className:"space-y-3 bg-sky-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-sky-600",children:"ğŸ“¬ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø£Ø³Ø±Ø©"}),e.jsx("textarea",{value:f,onChange:_=>L(_.target.value),placeholder:"Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§...",className:"w-full border rounded-lg p-3 resize-none",rows:3}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(x,f),disabled:z===x.id||!f.trim(),className:"flex-1 bg-sky-500 hover:bg-sky-600 text-white py-2 rounded-xl font-semibold disabled:opacity-50",children:z===x.id?"Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"ğŸ“¬ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©"}),e.jsx("button",{onClick:()=>{g(null),L("")},className:"px-4 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Ø¥Ù„ØºØ§Ø¡"})]})]}):e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>g(x.id),className:"flex items-center gap-2 bg-sky-100 hover:bg-sky-200 text-sky-700 px-4 py-2 rounded-xl font-semibold transition",children:"ğŸ“¬ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©"}),x.ownerPhone&&e.jsx("a",{href:`https://wa.me/${x.ownerPhone.replace(/[^0-9]/g,"").replace(/^0/,"966")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-green-100 hover:bg-green-200 text-green-700 px-4 py-2 rounded-xl font-semibold transition",children:"ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨"}),!x.ownerPhone&&e.jsx("span",{className:"text-gray-400 text-sm self-center",children:"âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ù‡Ø§ØªÙ"})]})}),x.status==="pending"&&e.jsxs("div",{className:"border-t pt-4 space-y-3",children:[e.jsx("h4",{className:"font-bold text-amber-600",children:"ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ"}),A===x.id?e.jsxs("div",{className:"space-y-3 bg-amber-50 p-4 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ØµÙˆØ±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ (IBAN)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:_=>{var se;return v(((se=_.target.files)==null?void 0:se[0])||null)},className:"w-full border rounded-lg p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Ù…Ø¨Ù„Øº Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (Ø±ÙŠØ§Ù„)"}),e.jsx("input",{type:"number",value:N,onChange:_=>E(Number(_.target.value)),className:"w-full border rounded-lg p-2",min:1})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>R(x.id),disabled:w===x.id||!U,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white py-2 rounded-xl font-semibold disabled:opacity-50",children:w===x.id?"Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø£Ø³Ø±Ø©"}),e.jsx("button",{onClick:()=>{j(null),v(null)},className:"px-4 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Ø¥Ù„ØºØ§Ø¡"})]})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(x.id),className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white py-3 rounded-xl font-semibold",children:"ğŸ¦ Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù†Ùƒ"}),e.jsx("button",{onClick:()=>q(x),disabled:w===x.id,className:"px-6 bg-red-100 hover:bg-red-200 text-red-700 rounded-xl font-semibold",children:"âŒ Ø±ÙØ¶"})]})]}),x.status==="bank_sent"&&e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-blue-700 font-semibold mb-2",children:"ğŸ¦ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ"}),e.jsxs("p",{className:"text-blue-600 text-sm",children:["Ø¨Ø§Ù†ØªØ¸Ø§Ø± ØªØ­ÙˆÙŠÙ„ Ù…Ø¨Ù„Øº ",x.subscriptionAmount," Ø±ÙŠØ§Ù„ Ù…Ù† Ø§Ù„Ø£Ø³Ø±Ø©"]}),x.bankAccountImageUrl&&e.jsxs("a",{href:x.bankAccountImageUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline mt-2 text-sm",children:[e.jsx(rl,{className:"w-4 h-4"}),"Ø¹Ø±Ø¶ ØµÙˆØ±Ø© Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ù…Ø±Ø³Ù„Ø©"]})]})}),x.status==="payment_sent"&&e.jsxs("div",{className:"border-t pt-4 space-y-3",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-purple-700 font-semibold mb-2",children:"ğŸ’³ Ø§Ù„Ø£Ø³Ø±Ø© Ø£Ø±Ø³Ù„Øª Ø¥Ø«Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„"}),x.paymentProofImageUrl&&e.jsxs("a",{href:x.paymentProofImageUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-lg text-purple-600 hover:bg-purple-100 transition",children:[e.jsx(rl,{className:"w-5 h-5"}),"Ø¹Ø±Ø¶ ØµÙˆØ±Ø© Ø¥Ø«Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I(x),disabled:w===x.id,className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl font-bold disabled:opacity-50",children:w===x.id?"Ø¬Ø§Ø±Ù Ø§Ù„ØªÙØ¹ÙŠÙ„...":"âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹ ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø©"}),e.jsx("button",{onClick:()=>q(x),disabled:w===x.id,className:"px-6 bg-red-100 hover:bg-red-200 text-red-700 rounded-xl font-semibold",children:"âŒ Ø±ÙØ¶"})]})]}),x.status==="approved"&&e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl flex items-center gap-3",children:[e.jsx(Ie,{className:"w-8 h-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 font-semibold",children:"âœ… Ø§Ù„Ø¨Ø§Ù‚Ø© Ù…ÙØ¹Ù‘Ù„Ø©"}),e.jsxs("p",{className:"text-green-600 text-sm",children:["ØªÙ†ØªÙ‡ÙŠ ÙÙŠ: ",((ie=(Q=(V=x.expiresAt)==null?void 0:V.toDate)==null?void 0:Q.call(V))==null?void 0:ie.toLocaleDateString("ar-SA"))||"-"]})]})]})}),x.status==="rejected"&&e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-red-700 font-semibold",children:"âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨"}),e.jsxs("p",{className:"text-red-600 text-sm",children:["Ø¨ØªØ§Ø±ÙŠØ®: ",((ue=(ye=(re=x.rejectedAt)==null?void 0:re.toDate)==null?void 0:ye.call(re))==null?void 0:ue.toLocaleDateString("ar-SA"))||"-"]})]})})]})]},x.id)})})]})},za={premium:{displayName:"Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²",description:"Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…Ø²Ø§ÙŠØ§ Ø­ØµØ±ÙŠØ© ÙˆØ¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø©",isEnabled:!0,originalPrice:99,currentPrice:99,durationDays:30,discount:{isActive:!1,type:"percentage",value:0}},free:{displayName:"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©",description:"Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù…Ø¬Ø§Ù†Ø§Ù‹",isEnabled:!0,originalPrice:0,currentPrice:0,durationDays:0,discount:{isActive:!1,type:"percentage",value:0}},defaultPackage:"free"},Jm=({toast:s,dialog:t})=>{var f,L,$,g,F,O,B,T,P,m,o,R,I,q,x,b,y;const[a,i]=l.useState(!0),[c,u]=l.useState(!1),[r,w]=l.useState(za),[D,U]=l.useState(null);l.useEffect(()=>{v()},[]);const v=async()=>{i(!0);try{const d=await Ce(J(C,"settings","packages"));if(d.exists()){const M=d.data();w({...za,...M,premium:{...za.premium,...M.premium},free:{...za.free,...M.free}})}}catch(d){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ø§Ù‚Ø§Øª:",d),s.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ø§Ù‚Ø§Øª")}finally{i(!1)}},N=async()=>{var d;u(!0);try{const M={...r};if((d=M.premium.discount)!=null&&d.isActive&&M.premium.discount.value>0){const k=M.premium.discount;k.type==="percentage"?M.premium.currentPrice=M.premium.originalPrice-M.premium.originalPrice*k.value/100:M.premium.currentPrice=Math.max(0,M.premium.originalPrice-k.value)}else M.premium.currentPrice=M.premium.originalPrice;await Be(J(C,"settings","packages"),{...M,updatedAt:X()}),w(M),s.success("ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ âœ…")}catch(M){console.error("Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:",M),s.error(`ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: ${M.message}`)}finally{u(!1)}},E=(d,M,k)=>{w(h=>({...h,[d]:{...h[d],[M]:k}}))},A=(d,M,k)=>{w(h=>({...h,[d]:{...h[d],discount:{...h[d].discount,[M]:k}}}))},j=async()=>{await t.confirm("Ø³ÙŠØªÙ… Ø¬Ø¹Ù„ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² Ù…Ø¬Ø§Ù†ÙŠØ© (0 Ø±ÙŠØ§Ù„). Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ",{title:"ğŸ Ø¬Ø¹Ù„ Ø§Ù„Ø¨Ø§Ù‚Ø© Ù…Ø¬Ø§Ù†ÙŠØ©"})&&(w(M=>({...M,premium:{...M.premium,originalPrice:0,currentPrice:0,discount:{isActive:!1,type:"percentage",value:0}}})),s.success("ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø³Ø¹Ø± Ø¹Ù„Ù‰ 0 Ø±ÙŠØ§Ù„. Ø§Ø¶ØºØ· Ø­ÙØ¸ Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª."))},z=d=>{var S,V,Q,ie;if(!(d!=null&&d.isActive))return!1;const M=new Date,k=((V=(S=d.startDate)==null?void 0:S.toDate)==null?void 0:V.call(S))||(d.startDate?new Date(d.startDate):null),h=((ie=(Q=d.endDate)==null?void 0:Q.toDate)==null?void 0:ie.call(Q))||(d.endDate?new Date(d.endDate):null);return!(k&&M<k||h&&M>h)},p=d=>{if(!z(d.discount))return d.originalPrice;const M=d.discount;return M.type==="percentage"?d.originalPrice-d.originalPrice*M.value/100:Math.max(0,d.originalPrice-M.value)};return a?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ø§Ù‚Ø§Øª..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-500 rounded-2xl flex items-center justify-center",children:e.jsx(wa,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø§Øª"}),e.jsx("p",{className:"text-gray-600",children:"ØªØ­ÙƒÙ… ÙÙŠ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ø®ØµÙˆÙ…Ø§Øª Ù…Ù† Ù‡Ù†Ø§"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:j,className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-5 py-3 rounded-xl font-bold shadow-lg transition flex items-center gap-2",children:"ğŸ Ø¬Ø¹Ù„Ù‡Ø§ Ù…Ø¬Ø§Ù†ÙŠØ©"}),e.jsx("button",{onClick:N,disabled:c,className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg transition disabled:opacity-50 flex items-center gap-2",children:c?"â³ Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸...":"ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 via-orange-500 to-amber-500 p-5 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"ğŸ‘‘ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ² (Premium)"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø© Ù…Ø¹ Ù…Ø²Ø§ÙŠØ§ Ø­ØµØ±ÙŠØ©"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-xl cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.premium.isEnabled,onChange:d=>E("premium","isEnabled",d.target.checked),className:"w-5 h-5 rounded"}),e.jsx("span",{className:"font-semibold",children:r.premium.isEnabled?"âœ… Ù…ÙØ¹Ù‘Ù„Ø©":"âŒ Ù…ÙˆÙ‚ÙˆÙØ©"})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ğŸ’° Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ (Ø±ÙŠØ§Ù„)"}),e.jsx("input",{type:"number",min:"0",step:"1",value:r.premium.originalPrice,onChange:d=>E("premium","originalPrice",Number(d.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-xl font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ğŸ“… Ù…Ø¯Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (ÙŠÙˆÙ…)"}),e.jsx("input",{type:"number",min:"1",value:r.premium.durationDays,onChange:d=>E("premium","durationDays",Number(d.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-xl font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ğŸ’µ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsxs("div",{className:"w-full px-4 py-3 bg-green-50 border-2 border-green-300 rounded-xl text-xl font-bold text-center text-green-700",children:[p(r.premium).toFixed(0)," Ø±ÙŠØ§Ù„",z(r.premium.discount)&&e.jsx("span",{className:"text-sm text-green-600 block",children:"Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ğŸ“ ÙˆØµÙ Ø§Ù„Ø¨Ø§Ù‚Ø©"}),e.jsx("textarea",{value:r.premium.description||"",onChange:d=>E("premium","description",d.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200",rows:2,placeholder:"ÙˆØµÙ Ù‚ØµÙŠØ± Ù„Ù„Ø¨Ø§Ù‚Ø©..."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ·ï¸"}),e.jsx("h4",{className:"text-lg font-bold text-red-700",children:"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®ØµÙ…"})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-xl cursor-pointer shadow",children:[e.jsx("input",{type:"checkbox",checked:((f=r.premium.discount)==null?void 0:f.isActive)||!1,onChange:d=>A("premium","isActive",d.target.checked),className:"w-5 h-5 rounded accent-red-500"}),e.jsx("span",{className:"font-semibold text-red-700",children:(L=r.premium.discount)!=null&&L.isActive?"âœ… Ø§Ù„Ø®ØµÙ… Ù…ÙØ¹Ù‘Ù„":"â¸ï¸ Ø§Ù„Ø®ØµÙ… Ù…ÙˆÙ‚ÙˆÙ"})]})]}),(($=r.premium.discount)==null?void 0:$.isActive)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…"}),e.jsxs("select",{value:((g=r.premium.discount)==null?void 0:g.type)||"percentage",onChange:d=>A("premium","type",d.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500",children:[e.jsx("option",{value:"percentage",children:"Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ© (%)"}),e.jsx("option",{value:"fixed",children:"Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª (Ø±ÙŠØ§Ù„)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:["Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ… ",((F=r.premium.discount)==null?void 0:F.type)==="percentage"?"(%)":"(Ø±ÙŠØ§Ù„)"]}),e.jsx("input",{type:"number",min:"0",max:((O=r.premium.discount)==null?void 0:O.type)==="percentage"?100:r.premium.originalPrice,value:((B=r.premium.discount)==null?void 0:B.value)||0,onChange:d=>A("premium","value",Number(d.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 text-lg font-bold text-center"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ğŸ“… ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø®ØµÙ…"}),e.jsx("input",{type:"date",value:(T=r.premium.discount)!=null&&T.startDate?typeof r.premium.discount.startDate=="string"?r.premium.discount.startDate:((o=(m=(P=r.premium.discount.startDate).toDate)==null?void 0:m.call(P))==null?void 0:o.toISOString().split("T")[0])||"":"",onChange:d=>A("premium","startDate",d.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ğŸ“… ØªØ§Ø±ÙŠØ® Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø®ØµÙ…"}),e.jsx("input",{type:"date",value:(R=r.premium.discount)!=null&&R.endDate?typeof r.premium.discount.endDate=="string"?r.premium.discount.endDate:((x=(q=(I=r.premium.discount.endDate).toDate)==null?void 0:q.call(I))==null?void 0:x.toISOString().split("T")[0])||"":"",onChange:d=>A("premium","endDate",d.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ğŸ·ï¸ ÙˆØ³Ù…/Ø³Ø¨Ø¨ Ø§Ù„Ø®ØµÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"text",value:((b=r.premium.discount)==null?void 0:b.label)||"",onChange:d=>A("premium","label",d.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500",placeholder:"Ù…Ø«Ø§Ù„: Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ØŒ Ø®ØµÙ… Ø±Ù…Ø¶Ø§Ù†..."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2 border-dashed border-red-300",children:[e.jsxs("p",{className:"text-center text-lg",children:[e.jsxs("span",{className:"text-gray-500 line-through",children:[r.premium.originalPrice," Ø±ÙŠØ§Ù„"]}),e.jsx("span",{className:"mx-3",children:"â†’"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[p(r.premium).toFixed(0)," Ø±ÙŠØ§Ù„"]}),((y=r.premium.discount)==null?void 0:y.label)&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full mr-2",children:r.premium.discount.label})]}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-2",children:z(r.premium.discount)?"âœ… Ø§Ù„Ø®ØµÙ… Ù†Ø´Ø· Ø­Ø§Ù„ÙŠØ§Ù‹":"â¸ï¸ Ø§Ù„Ø®ØµÙ… ØºÙŠØ± Ù†Ø´Ø· (ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®)"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-600 to-gray-700 p-5 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"ğŸ“¦ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© (Free)"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø¨Ø¯ÙˆÙ† Ø±Ø³ÙˆÙ…"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-xl cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.free.isEnabled,onChange:d=>E("free","isEnabled",d.target.checked),className:"w-5 h-5 rounded"}),e.jsx("span",{className:"font-semibold",children:r.free.isEnabled?"âœ… Ù…ÙØ¹Ù‘Ù„Ø©":"âŒ Ù…ÙˆÙ‚ÙˆÙØ©"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-green-700 font-bold text-lg",children:"âœ… Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø§Ù‚Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¯Ø§Ø¦Ù…Ø§Ù‹"}),e.jsx("p",{className:"text-green-600 text-sm",children:"Ù„Ø§ ÙŠØªØ·Ù„Ø¨ Ø¯ÙØ¹ Ø£ÙŠ Ø±Ø³ÙˆÙ…"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6 border-2 border-sky-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-sky-800 mb-4 flex items-center gap-2",children:[e.jsx(us,{className:"w-5 h-5"}),"Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠØ©"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"ğŸ‘‘ Ø¨Ø§Ù‚Ø© Ø§Ù„ØªÙ…ÙŠØ²"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${r.premium.isEnabled?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r.premium.isEnabled?"Ù…ÙØ¹Ù‘Ù„Ø©":"Ù…ÙˆÙ‚ÙˆÙØ©"})]}),e.jsxs("p",{className:"text-3xl font-bold text-amber-600 mt-2",children:[p(r.premium).toFixed(0)," Ø±ÙŠØ§Ù„",z(r.premium.discount)&&e.jsx("span",{className:"text-sm text-red-500 mr-2 bg-red-50 px-2 py-1 rounded-full",children:"Ø®ØµÙ…!"})]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Ù„Ù…Ø¯Ø© ",r.premium.durationDays," ÙŠÙˆÙ…"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"ğŸ“¦ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${r.free.isEnabled?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r.free.isEnabled?"Ù…ÙØ¹Ù‘Ù„Ø©":"Ù…ÙˆÙ‚ÙˆÙØ©"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:"Ù…Ø¬Ø§Ù†Ø§Ù‹"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Ø¨Ø¯ÙˆÙ† Ø±Ø³ÙˆÙ…"})]})]})]})]})},Ht=({icon:s,value:t,label:a,color:i})=>{const c={sky:"bg-sky-500/20 text-sky-300",emerald:"bg-emerald-500/20 text-emerald-300",purple:"bg-purple-500/20 text-purple-300",orange:"bg-orange-500/20 text-orange-300",amber:"bg-amber-500/20 text-amber-300",green:"bg-green-500/20 text-green-300"};return e.jsxs("div",{className:`${c[i]} rounded-xl p-3 backdrop-blur-sm`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s,e.jsx("span",{className:"text-xl font-bold text-white",children:t})]}),e.jsx("p",{className:"text-xs text-white/60 mt-1",children:a})]})},Ha=({title:s,value:t,change:a,subtitle:i,icon:c,color:u})=>{const r={emerald:"from-emerald-500 to-teal-600",sky:"from-sky-500 to-blue-600",amber:"from-amber-500 to-orange-600",purple:"from-purple-500 to-indigo-600",red:"from-red-500 to-rose-600"};return e.jsxs("div",{className:`relative overflow-hidden bg-gradient-to-br ${r[u]} rounded-2xl p-5 text-white shadow-lg`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:c}),a!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${a>=0?"text-green-200":"text-red-200"}`,children:[a>=0?e.jsx(Nl,{className:"w-4 h-4"}):e.jsx(ei,{className:"w-4 h-4"}),Math.abs(a),"%"]})]}),e.jsx("p",{className:"text-2xl font-bold",children:t}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:i||s})]})]})},Wa=({icon:s,value:t,label:a,bgColor:i})=>e.jsxs("div",{className:`${i} rounded-xl p-4 flex items-center gap-3`,children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:s}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t}),e.jsx("p",{className:"text-sm text-slate-500",children:a})]})]}),Xm="afrtalbyt2026@gmail.com",Zm=()=>{const s=os(),[t,a]=l.useState(""),[i,c]=l.useState(""),[u,r]=l.useState(!1),[w,D]=l.useState(""),[U,v]=l.useState(!1),N=async E=>{if(E.preventDefault(),D(""),t.trim().toLowerCase()!==Xm){D("âŒ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­ Ù„Ù‡ Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø·ÙˆØ±");return}if(i.length<6){D("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");return}r(!0);try{const j=(await Pt(fs,t.trim(),i)).user.uid;await Be(J(C,"users",j),{email:t.trim(),name:"Ø§Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ",role:"developer",createdAt:X()}),v(!0),setTimeout(()=>{s("/developer")},2e3)}catch(A){console.error("Setup error:",A),A.code==="auth/email-already-in-use"?D("Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŒ Ø¬Ø±Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"):A.code==="auth/invalid-email"?D("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­"):A.code==="auth/weak-password"?D("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ© Ø¬Ø¯Ø§Ù‹"):D("Ø­Ø¯Ø« Ø®Ø·Ø£: "+(A.message||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"))}finally{r(!1)}};return U?e.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:e.jsxs("div",{className:"text-center bg-gradient-to-br from-green-500 to-emerald-600 text-white p-10 rounded-3xl shadow-2xl",children:[e.jsx(Ie,{className:"w-20 h-20 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"ğŸ‰ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!"}),e.jsx("p",{children:"Ø¬Ø§Ø±ÙŠ ØªØ­ÙˆÙŠÙ„Ùƒ Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ±..."})]})}):e.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 p-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(us,{className:"w-10 h-10 text-white"})}),e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2",children:[e.jsx(ps,{className:"w-6 h-6"}),"Ø¥Ø¹Ø¯Ø§Ø¯ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø·ÙˆØ±",e.jsx(ps,{className:"w-6 h-6"})]}),e.jsx("p",{className:"text-white/80 text-sm mt-2",children:"ğŸ” Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø­Ø¯ÙˆØ¯ ÙÙ‚Ø·"})]}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-5",children:[w&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 rounded-xl p-3 text-sm text-center",children:w}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[e.jsx(Ft,{className:"w-4 h-4"}),"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"]}),e.jsx("input",{type:"email",value:t,onChange:E=>a(E.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø®ØµØµ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[e.jsx(ho,{className:"w-4 h-4"}),"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"]}),e.jsx("input",{type:"password",value:i,onChange:E=>c(E.target.value),placeholder:"Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full py-4 bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white font-bold rounded-xl hover:opacity-90 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"w-5 h-5"}),"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø·ÙˆØ±"]})}),e.jsx("p",{className:"text-gray-500 text-xs text-center",children:"âš ï¸ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù…Ø­Ø¯ÙˆØ¯Ø© Ù„Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙÙ‚Ø·"})]})]})})})};async function e0(s,t,a,i,c){var $,g,F,O;const r=J(C,t==="restaurant"?"restaurants":"couriers",s),w=await Ce(r);if(!w.exists())return{success:!1,newPoints:0,isSuspended:!1,isWarning:!1,message:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"};const D=w.data(),U=(($=D.points)==null?void 0:$.currentPoints)??hs.STARTING_POINTS,v=((g=D.points)==null?void 0:g.totalDeductions)??0,N=((F=D.points)==null?void 0:F.warningCount)??0,E=((O=D.points)==null?void 0:O.pointsHistory)??[],A=Math.max(0,U-a),j={id:`deduct_${Date.now()}`,type:"deduction",amount:-a,reason:i,orderId:c==null?void 0:c.orderId,ticketId:c==null?void 0:c.ticketId,adminId:c==null?void 0:c.adminId,createdAt:new Date},z=A<hs.SUSPENSION_THRESHOLD,p=!z&&A<hs.WARNING_THRESHOLD,f={"points.currentPoints":A,"points.totalDeductions":v+a,"points.pointsHistory":[...E,j],updatedAt:X()};z&&(f["points.isSuspended"]=!0,f["points.suspendedAt"]=X(),f["points.suspendedReason"]=`Ø¥ÙŠÙ‚Ø§Ù ØªÙ„Ù‚Ø§Ø¦ÙŠ - Ø§Ù„Ù†Ù‚Ø§Ø· Ø£Ù‚Ù„ Ù…Ù† ${hs.SUSPENSION_THRESHOLD}`,f.isOpen=!1,f.isAvailable=!1),p&&(f["points.warningCount"]=N+1,f["points.lastWarningAt"]=X()),await me(r,f);let L=`ØªÙ… Ø®ØµÙ… ${a} Ù†Ù‚Ø·Ø©. Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${A}`;return z?L=`â›” ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹! Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØµÙ„Øª Ø¥Ù„Ù‰ ${A}`:p&&(L=`âš ï¸ ØªÙ†Ø¨ÙŠÙ‡! Ø§Ù„Ù†Ù‚Ø§Ø· Ù…Ù†Ø®ÙØ¶Ø©: ${A}. Ù‚Ø¯ ÙŠØªÙ… Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù Ø¹Ù†Ø¯ ${hs.SUSPENSION_THRESHOLD}`),{success:!0,newPoints:A,isSuspended:z,isWarning:p,message:L}}const s0={waiting:{label:"Ø¬Ø¯ÙŠØ¯Ø©",color:"amber",icon:Ge},active:{label:"Ù†Ø´Ø·Ø©",color:"green",icon:Gs},resolved:{label:"Ù…Ø­Ù„ÙˆÙ„Ø©",color:"blue",icon:Ie},closed:{label:"Ù…ØºÙ„Ù‚Ø©",color:"gray",icon:rt}},t0=()=>{const{user:s}=Ee(),t=He(),a=l.useRef(null),i=l.useRef(null),[c,u]=l.useState([]),[r,w]=l.useState(null),[D,U]=l.useState([]),[v,N]=l.useState(!0),[E,A]=l.useState(!1),[j,z]=l.useState(""),[p,f]=l.useState("all"),[L,$]=l.useState("");l.useEffect(()=>{const S=fe(ee(C,"supportChats"),es("lastMessageAt","desc")),V=cs(S,Q=>{const ie=Q.docs.map(re=>({id:re.id,...re.data()}));u(ie),N(!1)});return()=>V()},[]),l.useEffect(()=>{if(!(r!=null&&r.id))return;const S=fe(ee(C,"supportChats",r.id,"messages"),es("createdAt","asc")),V=cs(S,Q=>{const ie=Q.docs.map(re=>({id:re.id,...re.data()}));U(ie),r.unreadBySupport&&r.unreadBySupport>0&&me(J(C,"supportChats",r.id),{unreadBySupport:0})});return setTimeout(()=>{var Q;return(Q=i.current)==null?void 0:Q.focus()},100),()=>V()},[r==null?void 0:r.id]),l.useEffect(()=>{var S;(S=a.current)==null||S.scrollIntoView({behavior:"smooth"})},[D]);const g=async()=>{if(!(!j.trim()||!(r!=null&&r.id)||E)){A(!0);try{await Pe(ee(C,"supportChats",r.id,"messages"),{chatId:r.id,senderId:s==null?void 0:s.uid,senderName:"ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù…",senderRole:"support",message:j.trim(),createdAt:X()}),await me(J(C,"supportChats",r.id),{status:"active",lastMessage:j.trim(),lastMessageAt:X(),updatedAt:X(),unreadByUser:Ke(1)}),z(""),t.success("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯")}catch{t.error("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯")}finally{A(!1)}}},F=async S=>{r!=null&&r.id&&(await me(J(C,"supportChats",r.id),{status:S,updatedAt:X()}),w({...r,status:S}),t.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©"))},[O,B]=l.useState(!1),[T,P]=l.useState("restaurant"),[m,o]=l.useState(""),[R,I]=l.useState(""),[q,x]=l.useState(10),[b,y]=l.useState(""),[d,M]=l.useState(!1),k=async()=>{if(!m||!b||q<=0){t.error("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");return}M(!0);try{const S=await e0(m,T,q,b,{ticketId:r==null?void 0:r.id,adminId:s==null?void 0:s.uid});S.success?(r!=null&&r.id&&await Pe(ee(C,"supportChats",r.id,"messages"),{chatId:r.id,senderId:"system",senderName:"Ø§Ù„Ù†Ø¸Ø§Ù…",senderRole:"bot",message:`âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø´ÙƒÙˆÙ‰ ÙˆØ®ØµÙ… ${q} Ù†Ù‚Ø·Ø© Ù…Ù† ${T==="restaurant"?"Ø§Ù„Ø£Ø³Ø±Ø©":"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"}.

${S.isSuspended?"â›” ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹!":S.isWarning?"âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„Ù†Ù‚Ø§Ø· Ù…Ù†Ø®ÙØ¶Ø©!":""}`,createdAt:X()}),t.success(S.message),S.isSuspended&&t.error("â›” ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹!"),B(!1),y(""),x(10)):t.error(S.message)}catch{t.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø·")}finally{M(!1)}},h=c.filter(S=>{var V;return!(p==="waiting"&&S.status!=="waiting"||p==="active"&&S.status!=="active"||L&&!S.userName.includes(L)&&!((V=S.subject)!=null&&V.includes(L)))});return v?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(as,{className:"w-8 h-8 animate-spin text-sky-500"})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[e.jsx(Kt,{className:"w-8 h-8 text-sky-500"}),"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",value:L,onChange:S=>$(S.target.value),placeholder:"Ø¨Ø­Ø«...",className:"w-full pr-10 pl-4 py-2 bg-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-300"})]}),e.jsx("div",{className:"flex gap-2",children:["all","waiting","active"].map(S=>e.jsxs("button",{onClick:()=>f(S),className:`px-3 py-1 rounded-lg text-sm font-medium transition ${p===S?"bg-sky-100 text-sky-700":"text-gray-500 hover:bg-gray-100"}`,children:[S==="all"?"Ø§Ù„ÙƒÙ„":S==="waiting"?"Ø¬Ø¯ÙŠØ¯Ø©":"Ù†Ø´Ø·Ø©",S==="waiting"&&e.jsx("span",{className:"mr-1 px-1.5 py-0.5 bg-amber-500 text-white rounded-full text-xs",children:c.filter(V=>V.status==="waiting").length})]},S))})]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto divide-y divide-gray-100",children:h.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Gs,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø§Ø¯Ø«Ø§Øª"})]}):h.map(S=>{var ie,re;const V=s0[S.status],Q=V.icon;return e.jsxs("button",{onClick:()=>w(S),className:`w-full p-4 text-right hover:bg-gray-50 transition ${(r==null?void 0:r.id)===S.id?"bg-sky-50":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"font-bold text-gray-800",children:S.userName})]}),S.unreadBySupport?e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:S.unreadBySupport}):null]}),e.jsx("p",{className:"text-sm text-gray-500 truncate mb-2",children:S.lastMessage||S.subject}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full
                        ${V.color==="amber"?"bg-amber-100 text-amber-700":""}
                        ${V.color==="green"?"bg-green-100 text-green-700":""}
                        ${V.color==="blue"?"bg-blue-100 text-blue-700":""}
                        ${V.color==="gray"?"bg-gray-100 text-gray-700":""}
                      `,children:[e.jsx(Q,{className:"w-3 h-3"}),V.label]}),e.jsx("span",{className:"text-gray-400",children:((re=(ie=S.lastMessageAt)==null?void 0:ie.toDate)==null?void 0:re.call(ie).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}))||""})]})]},S.id)})})]}),e.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col",style:{minHeight:"600px"},children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ms,{className:"w-5 h-5"}),r.userName]}),e.jsx("p",{className:"text-sm text-gray-500",children:r.subject})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F("resolved"),className:"px-3 py-1.5 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition",children:"âœ… ØªÙ… Ø§Ù„Ø­Ù„"}),e.jsx("button",{onClick:()=>F("closed"),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition",children:"Ø¥ØºÙ„Ø§Ù‚"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>{P("restaurant"),I("Ø§Ù„Ø£Ø³Ø±Ø©"),B(!0)},className:"flex items-center gap-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition",children:[e.jsx(Le,{className:"w-4 h-4"}),"Ø®ØµÙ… Ù…Ù† Ø§Ù„Ø£Ø³Ø±Ø© â›”"]}),e.jsxs("button",{onClick:()=>{P("courier"),I("Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"),B(!0)},className:"flex items-center gap-2 px-3 py-2 bg-orange-100 text-orange-700 rounded-lg text-sm font-medium hover:bg-orange-200 transition",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Ø®ØµÙ… Ù…Ù† Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ â›”"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[D.map(S=>{var V,Q;return e.jsx("div",{className:`flex ${S.senderRole==="support"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:"max-w-[80%]",children:[S.senderRole!=="support"&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${S.senderRole==="bot"?"bg-purple-100":"bg-gray-200"}`,children:S.senderRole==="bot"?e.jsx(sl,{className:"w-4 h-4 text-purple-600"}):e.jsx(ms,{className:"w-4 h-4 text-gray-600"})}),e.jsx("span",{className:"text-xs text-gray-500",children:S.senderName})]}),e.jsx("div",{className:`rounded-2xl px-4 py-3 ${S.senderRole==="support"?"bg-sky-500 text-white rounded-bl-md":S.senderRole==="bot"?"bg-purple-50 text-gray-800 border border-purple-100 rounded-br-md":"bg-white text-gray-800 border border-gray-200 rounded-br-md"}`,children:e.jsx("p",{className:"whitespace-pre-wrap text-sm",children:S.message})}),e.jsx("p",{className:`text-xs text-gray-400 mt-1 ${S.senderRole==="support"?"text-left":"text-right"}`,children:((Q=(V=S.createdAt)==null?void 0:V.toDate)==null?void 0:Q.call(V).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}))||""})]})},S.id)}),e.jsx("div",{ref:a})]}),e.jsxs("div",{className:"p-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{ref:i,type:"text",value:j,onChange:S=>z(S.target.value),onKeyPress:S=>S.key==="Enter"&&g(),placeholder:"Ø§ÙƒØªØ¨ Ø±Ø¯Ùƒ Ù‡Ù†Ø§...",className:"flex-1 px-4 py-3 bg-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-300",disabled:E}),e.jsx("button",{onClick:g,disabled:!j.trim()||E,className:"px-6 py-3 bg-sky-500 hover:bg-sky-600 text-white rounded-xl font-medium transition disabled:opacity-50",children:E?e.jsx(as,{className:"w-5 h-5 animate-spin"}):e.jsx(ra,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:["Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙˆØ§ØµÙ„Ùƒ Ù…Ø¹Ù†Ø§","Ø³Ù†ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹","ØªÙ… Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©","ÙŠØ±Ø¬Ù‰ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„"].map((S,V)=>e.jsx("button",{onClick:()=>z(S),className:"px-3 py-1.5 bg-gray-100 hover:bg-sky-100 text-gray-600 hover:text-sky-700 rounded-full text-sm transition",children:S},V))})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Gs,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),e.jsx("p",{children:"Ø§Ø®ØªØ± Ù…Ø­Ø§Ø¯Ø«Ø© Ù„Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§"})]})})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-amber-600",children:c.filter(S=>S.status==="waiting").length}),e.jsx("p",{className:"text-sm text-amber-700",children:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:c.filter(S=>S.status==="active").length}),e.jsx("p",{className:"text-sm text-green-700",children:"Ù†Ø´Ø·Ø©"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:c.filter(S=>S.status==="resolved").length}),e.jsx("p",{className:"text-sm text-blue-700",children:"Ù…Ø­Ù„ÙˆÙ„Ø©"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-600",children:c.length}),e.jsx("p",{className:"text-sm text-gray-700",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ"})]})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(el,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø´ÙƒÙˆÙ‰ ÙˆØ®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø·"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Ø®ØµÙ… Ù†Ù‚Ø§Ø· Ù…Ù† ",R]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ù…Ø¹Ø±Ù ",R," (UID)"]}),e.jsx("input",{type:"text",value:m,onChange:S=>o(S.target.value),placeholder:"Ø£Ø¯Ø®Ù„ UID...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-400 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø®ØµÙˆÙ…Ø©"}),e.jsx("div",{className:"flex gap-2",children:[5,10,15,20].map(S=>e.jsxs("button",{onClick:()=>x(S),className:`flex-1 py-2 rounded-lg font-bold transition ${q===S?"bg-red-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["-",S]},S))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø³Ø¨Ø¨ Ø§Ù„Ø®ØµÙ…"}),e.jsxs("select",{value:b,onChange:S=>y(S.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-400 focus:outline-none",children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ø³Ø¨Ø¨..."}),e.jsx("option",{value:"Ø¬ÙˆØ¯Ø© Ø§Ù„Ø·Ø¹Ø§Ù… Ø³ÙŠØ¦Ø©",children:"Ø¬ÙˆØ¯Ø© Ø§Ù„Ø·Ø¹Ø§Ù… Ø³ÙŠØ¦Ø©"}),e.jsx("option",{value:"ØªØ£Ø®ÙŠØ± ÙÙŠ Ø§Ù„ØªØ³Ù„ÙŠÙ…",children:"ØªØ£Ø®ÙŠØ± ÙÙŠ Ø§Ù„ØªØ³Ù„ÙŠÙ…"}),e.jsx("option",{value:"Ø³ÙˆØ¡ Ø§Ù„Ø®Ø¯Ù…Ø©",children:"Ø³ÙˆØ¡ Ø§Ù„Ø®Ø¯Ù…Ø©"}),e.jsx("option",{value:"Ø·Ù„Ø¨ Ø®Ø§Ø·Ø¦",children:"Ø·Ù„Ø¨ Ø®Ø§Ø·Ø¦"}),e.jsx("option",{value:"Ø³ÙˆØ¡ Ø§Ù„ØªØºÙ„ÙŠÙ",children:"Ø³ÙˆØ¡ Ø§Ù„ØªØºÙ„ÙŠÙ"}),e.jsx("option",{value:"Ù…Ø´ÙƒÙ„Ø© Ù†Ø¸Ø§ÙØ©",children:"Ù…Ø´ÙƒÙ„Ø© Ù†Ø¸Ø§ÙØ©"}),e.jsx("option",{value:"Ø¹Ø¯Ù… Ø§Ù„Ø­Ø¶ÙˆØ±",children:"Ø¹Ø¯Ù… Ø§Ù„Ø­Ø¶ÙˆØ±"}),e.jsx("option",{value:"Ø³ÙˆØ¡ Ø§Ù„ØªØ¹Ø§Ù…Ù„",children:"Ø³ÙˆØ¡ Ø§Ù„ØªØ¹Ø§Ù…Ù„"}),e.jsx("option",{value:"Ø´ÙƒÙˆÙ‰ Ø£Ø®Ø±Ù‰",children:"Ø´ÙƒÙˆÙ‰ Ø£Ø®Ø±Ù‰"})]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:e.jsxs("p",{className:"text-sm text-amber-800",children:["âš ï¸ ",e.jsx("strong",{children:"ØªÙ†Ø¨ÙŠÙ‡:"})," Ø¥Ø°Ø§ ÙˆØµÙ„Øª Ø§Ù„Ù†Ù‚Ø§Ø· Ø£Ù‚Ù„ Ù…Ù† ",hs.SUSPENSION_THRESHOLD," Ø³ÙŠØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹!"]})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:k,disabled:d||!m||!b,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:d?e.jsx(as,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(el,{className:"w-5 h-5"}),"ØªØ£ÙƒÙŠØ¯ ÙˆØ®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø·"]})}),e.jsx("button",{onClick:()=>B(!1),className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-medium transition",children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]})})]})},a0=()=>{const[s,t]=l.useState(!0),[a,i]=l.useState([]),[c,u]=l.useState([]),[r,w]=l.useState([]),[D,U]=l.useState("restaurants"),[v,N]=l.useState("month");l.useEffect(()=>{E()},[v]);const E=async()=>{t(!0);try{const j=(await be(ee(C,"orders"))).docs.map(P=>({id:P.id,...P.data()})),z=new Date,p=j.filter(P=>{var R,I;if(v==="all")return!0;const m=((I=(R=P.createdAt)==null?void 0:R.toDate)==null?void 0:I.call(R))||new Date(0),o=(z.getTime()-m.getTime())/(1e3*60*60*24);return v==="week"?o<=7:v==="month"?o<=30:!0}),f=new Map;p.forEach(P=>{var I,q;const m=P.restaurantId;if(!m)return;f.has(m)||f.set(m,{id:m,name:P.restaurantName||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ",totalOrders:0,complaintsCount:0,avgRating:0,lowRatings:0});const o=f.get(m);o.totalOrders++;const R=(q=(I=P.ratings)==null?void 0:I.customerToRestaurant)==null?void 0:q.stars;R&&R<=2&&o.lowRatings++});const $=(await be(ee(C,"supportChats"))).docs.map(P=>P.data());$.forEach(P=>{});const g=Array.from(f.values()).sort((P,m)=>m.lowRatings-P.lowRatings);i(g);const F=new Map;p.forEach(P=>{var I,q;const m=P.courierId;if(!m)return;F.has(m)||F.set(m,{id:m,name:P.courierName||"Ù…Ù†Ø¯ÙˆØ¨",totalDeliveries:0,complaintsCount:0,avgRating:0,lowRatings:0});const o=F.get(m);o.totalDeliveries++;const R=(q=(I=P.ratings)==null?void 0:I.customerToCourier)==null?void 0:q.stars;R&&R<=2&&o.lowRatings++});const O=Array.from(F.values()).sort((P,m)=>m.lowRatings-P.lowRatings);u(O);const B=new Map;p.forEach(P=>{const m=P.customerId;if(!m)return;B.has(m)||B.set(m,{id:m,name:P.customerName||"Ø¹Ù…ÙŠÙ„",totalOrders:0,complaintsFiledCount:0,avgRatingGiven:0});const o=B.get(m);o.totalOrders++}),$.forEach(P=>{const m=P.userId;B.has(m)&&B.get(m).complaintsFiledCount++});const T=Array.from(B.values()).sort((P,m)=>m.complaintsFiledCount-P.complaintsFiledCount);w(T)}catch(A){console.error("Error loading stats:",A)}finally{t(!1)}};return s?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(as,{className:"w-8 h-8 animate-spin text-sky-500"})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx(Vs,{className:"w-8 h-8 text-red-500"}),"Ù…Ø±ÙƒØ² Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø´Ø§ÙƒÙ„"]}),e.jsx("button",{onClick:E,className:"p-2 bg-gray-100 rounded-xl hover:bg-gray-200 transition",children:e.jsx(ze,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-orange-500 rounded-2xl p-5 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Le,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold",children:"Ø£Ø³Ø± Ø¨Ù…Ø´Ø§ÙƒÙ„"})]}),e.jsx("p",{className:"text-3xl font-bold",children:a.filter(A=>A.lowRatings>0).length}),e.jsxs("p",{className:"text-white/70 text-sm",children:["Ù…Ù† Ø£ØµÙ„ ",a.length," Ø£Ø³Ø±Ø©"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-yellow-500 rounded-2xl p-5 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Ve,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold",children:"Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ† Ø¨Ù…Ø´Ø§ÙƒÙ„"})]}),e.jsx("p",{className:"text-3xl font-bold",children:c.filter(A=>A.lowRatings>0).length}),e.jsxs("p",{className:"text-white/70 text-sm",children:["Ù…Ù† Ø£ØµÙ„ ",c.length," Ù…Ù†Ø¯ÙˆØ¨"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl p-5 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ms,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold",children:"Ø¹Ù…Ù„Ø§Ø¡ ÙƒØ«ÙŠØ±ÙŠ Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰"})]}),e.jsx("p",{className:"text-3xl font-bold",children:r.filter(A=>A.complaintsFiledCount>2).length}),e.jsx("p",{className:"text-white/70 text-sm",children:"Ø£ÙƒØ«Ø± Ù…Ù† Ø´ÙƒÙˆÙŠØªÙŠÙ†"})]})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:["week","month","all"].map(A=>e.jsx("button",{onClick:()=>N(A),className:`px-4 py-2 rounded-xl font-medium transition ${v===A?"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:A==="week"?"Ø¢Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹":A==="month"?"Ø¢Ø®Ø± Ø´Ù‡Ø±":"Ø§Ù„ÙƒÙ„"},A))}),e.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>U("restaurants"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition ${D==="restaurants"?"bg-red-500 text-white":"bg-gray-100 text-gray-600"}`,children:[e.jsx(Le,{className:"w-4 h-4"}),"Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø©"]}),e.jsxs("button",{onClick:()=>U("couriers"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition ${D==="couriers"?"bg-amber-500 text-white":"bg-gray-100 text-gray-600"}`,children:[e.jsx(Ve,{className:"w-4 h-4"}),"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†"]}),e.jsxs("button",{onClick:()=>U("customers"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition ${D==="customers"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600"}`,children:[e.jsx(ms,{className:"w-4 h-4"}),"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"]})]}),D==="restaurants"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-red-50 border-b border-red-100",children:e.jsxs("h2",{className:"font-bold text-red-800 flex items-center gap-2",children:[e.jsx(Ts,{className:"w-5 h-5"}),"Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø´Ø§ÙƒÙ„ (ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù…Ù†Ø®ÙØ¶Ø©)"]})}),a.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª"}):e.jsx("div",{className:"divide-y divide-gray-100",children:a.slice(0,20).map((A,j)=>e.jsxs("div",{className:`p-4 flex items-center justify-between ${A.lowRatings>0?"bg-red-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${A.lowRatings>2?"bg-red-500 text-white":A.lowRatings>0?"bg-amber-500 text-white":"bg-gray-200 text-gray-600"}`,children:j+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:A.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[A.totalOrders," Ø·Ù„Ø¨"]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:A.lowRatings>0&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[e.jsx(dn,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold",children:A.lowRatings}),e.jsx("span",{className:"text-xs",children:"ØªÙ‚ÙŠÙŠÙ… Ø³ÙŠØ¡"})]})})]},A.id))})]}),D==="couriers"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-amber-50 border-b border-amber-100",children:e.jsxs("h2",{className:"font-bold text-amber-800 flex items-center gap-2",children:[e.jsx(Ts,{className:"w-5 h-5"}),"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ† Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø´Ø§ÙƒÙ„"]})}),c.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª"}):e.jsx("div",{className:"divide-y divide-gray-100",children:c.slice(0,20).map((A,j)=>e.jsxs("div",{className:`p-4 flex items-center justify-between ${A.lowRatings>0?"bg-amber-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${A.lowRatings>2?"bg-red-500 text-white":A.lowRatings>0?"bg-amber-500 text-white":"bg-gray-200 text-gray-600"}`,children:j+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:A.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[A.totalDeliveries," ØªÙˆØµÙŠÙ„"]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:A.lowRatings>0&&e.jsxs("div",{className:"flex items-center gap-1 text-amber-600",children:[e.jsx(dn,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold",children:A.lowRatings}),e.jsx("span",{className:"text-xs",children:"ØªÙ‚ÙŠÙŠÙ… Ø³ÙŠØ¡"})]})})]},A.id))})]}),D==="customers"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-purple-50 border-b border-purple-100",children:e.jsxs("h2",{className:"font-bold text-purple-800 flex items-center gap-2",children:[e.jsx(Ts,{className:"w-5 h-5"}),"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙƒØ«ÙŠØ±ÙŠ Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰"]})}),r.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª"}):e.jsx("div",{className:"divide-y divide-gray-100",children:r.filter(A=>A.complaintsFiledCount>0).slice(0,20).map((A,j)=>e.jsxs("div",{className:`p-4 flex items-center justify-between ${A.complaintsFiledCount>2?"bg-purple-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${A.complaintsFiledCount>3?"bg-red-500 text-white":A.complaintsFiledCount>1?"bg-amber-500 text-white":"bg-gray-200 text-gray-600"}`,children:j+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:A.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[A.totalOrders," Ø·Ù„Ø¨"]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-1 text-purple-600",children:[e.jsx(Ts,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold",children:A.complaintsFiledCount}),e.jsx("span",{className:"text-xs",children:"Ø´ÙƒÙˆÙ‰"})]})})]},A.id))})]}),e.jsx("div",{className:"mt-6 bg-amber-50 border border-amber-200 rounded-xl p-4 text-center",children:e.jsxs("p",{className:"text-amber-800",children:["ğŸ’¡ ",e.jsx("strong",{children:"Ù†ØµÙŠØ­Ø©:"})," Ø±Ø§Ù‚Ø¨ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ù…Ø¨ÙƒØ±Ø§Ù‹"]})})]})},r0=[{value:"orders",label:"Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª",icon:Me,color:"blue"},{value:"delivery",label:"Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„ØªÙˆØµÙŠÙ„",icon:Ve,color:"orange"},{value:"payment",label:"Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¯ÙØ¹",icon:Ks,color:"green"},{value:"account",label:"Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨",icon:ms,color:"purple"},{value:"suggestion",label:"Ø§Ù‚ØªØ±Ø§Ø­ Ù„Ù„ØªØ­Ø³ÙŠÙ†",icon:si,color:"amber"}],l0=()=>{const s=os(),{user:t,role:a}=Ee(),i=He(),[c,u]=l.useState(null),[r,w]=l.useState(""),[D,U]=l.useState(!1),[v,N]=l.useState(!1),E=async A=>{if(A.preventDefault(),!c){i.error("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©");return}if(!r.trim()){i.error("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© ÙˆØµÙ Ù„Ù„Ù…Ø´ÙƒÙ„Ø©");return}if(r.trim().length<10){i.error("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© ÙˆØµÙ Ø£ÙƒØ«Ø± ØªÙØµÙŠÙ„Ø§Ù‹ (10 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)");return}if(!(t!=null&&t.uid)){i.error("ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹");return}U(!0);try{await Pe(ee(C,"problemReports"),{userId:t.uid,userName:t.displayName||"",userEmail:t.email||"",userRole:a,problemType:c,description:r.trim(),status:"pending",createdAt:X()}),N(!0),i.success("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ù„Ø§Øº Ø¨Ù†Ø¬Ø§Ø­"),u(null),w("")}catch(j){console.error("Error submitting report:",j),i.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ù„Ø§Øº")}finally{U(!1)}};return v?e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Ie,{className:"w-10 h-10 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-sky-900 mb-3",children:"ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ù„Ø§Øº"}),e.jsx("p",{className:"text-sky-600 mb-6",children:"Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¨Ù„Ø§ØºÙƒ Ù…Ù† Ù‚Ø¨Ù„ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù…"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-6 py-3 bg-sky-100 text-sky-700 rounded-xl font-medium hover:bg-sky-200 transition-colors",children:"Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù„Ø§Øº Ø¢Ø®Ø±"}),e.jsx("button",{onClick:()=>s("/"),className:"px-6 py-3 bg-sky-600 text-white rounded-xl font-medium hover:bg-sky-700 transition-colors",children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})]})}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-sky-100 rounded-2xl flex items-center justify-center",children:e.jsx(Ts,{className:"w-8 h-8 text-sky-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-sky-900 mb-2",children:"Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ù…Ø´ÙƒÙ„Ø©"}),e.jsx("p",{className:"text-sky-600",children:"Ø£Ø®Ø¨Ø±Ù†Ø§ Ø¹Ù† Ø£ÙŠ Ù…Ø´ÙƒÙ„Ø© ØªÙˆØ§Ø¬Ù‡Ùƒ Ø£Ùˆ Ø´Ø§Ø±ÙƒÙ†Ø§ Ø§Ù‚ØªØ±Ø§Ø­Ø§ØªÙƒ Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"})]}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-sky-600 text-white rounded-full flex items-center justify-center text-sm",children:"1"}),"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:r0.map(A=>{const j=A.icon,z=c===A.value;return e.jsxs("button",{type:"button",onClick:()=>u(A.value),className:`p-4 rounded-xl border-2 transition-all text-right flex items-center gap-3 ${z?"border-sky-500 bg-sky-50":"border-gray-200 hover:border-sky-300 hover:bg-sky-50/50"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${z?"bg-sky-500 text-white":"bg-gray-100 text-gray-500"}`,children:e.jsx(j,{className:"w-5 h-5"})}),e.jsx("span",{className:`font-medium ${z?"text-sky-700":"text-gray-700"}`,children:A.label})]},A.value)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-sky-600 text-white rounded-full flex items-center justify-center text-sm",children:"2"}),"Ø§Ø´Ø±Ø­ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©"]}),e.jsx("textarea",{value:r,onChange:A=>w(A.target.value),placeholder:"Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø£Ùˆ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­ Ù‡Ù†Ø§...",rows:5,maxLength:500,className:"w-full p-4 border-2 border-gray-200 rounded-xl resize-none focus:outline-none focus:border-sky-500 transition-colors",disabled:D}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[r.length,"/500 Ø­Ø±Ù"]})]}),e.jsx("button",{type:"submit",disabled:D||!c||!r.trim(),className:`w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all ${D||!c||!r.trim()?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-sky-600 text-white hover:bg-sky-700 shadow-lg hover:shadow-xl"}`,children:D?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ra,{className:"w-5 h-5"}),"Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ù„Ø§Øº"]})}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¨Ù„Ø§ØºÙƒ Ù…Ù† Ù‚Ø¨Ù„ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ù„ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨ØªÙƒ"})]})]})},$n={orders:{label:"Ø·Ù„Ø¨Ø§Øª",icon:Me,color:"blue",bgClass:"bg-blue-100",textClass:"text-blue-600"},delivery:{label:"ØªÙˆØµÙŠÙ„",icon:Ve,color:"orange",bgClass:"bg-orange-100",textClass:"text-orange-600"},payment:{label:"Ø¯ÙØ¹",icon:Ks,color:"green",bgClass:"bg-green-100",textClass:"text-green-600"},account:{label:"Ø­Ø³Ø§Ø¨",icon:ms,color:"purple",bgClass:"bg-purple-100",textClass:"text-purple-600"},suggestion:{label:"Ø§Ù‚ØªØ±Ø§Ø­",icon:si,color:"amber",bgClass:"bg-amber-100",textClass:"text-amber-600"}},On={customer:{label:"Ø¹Ù…ÙŠÙ„",color:"blue",bgClass:"bg-blue-50",textClass:"text-blue-700"},owner:{label:"Ø£Ø³Ø±Ø© Ù…Ù†ØªØ¬Ø©",color:"green",bgClass:"bg-green-50",textClass:"text-green-700"},courier:{label:"Ù…Ù†Ø¯ÙˆØ¨",color:"orange",bgClass:"bg-orange-50",textClass:"text-orange-700"}},Yr={pending:{label:"Ø¬Ø¯ÙŠØ¯",color:"yellow",icon:Ge,bgClass:"bg-yellow-100",textClass:"text-yellow-700"},reviewed:{label:"ØªÙ…Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",color:"blue",icon:Ss,bgClass:"bg-blue-100",textClass:"text-blue-700"},resolved:{label:"ØªÙ… Ø§Ù„Ø­Ù„",color:"green",icon:Ie,bgClass:"bg-green-100",textClass:"text-green-700"}},n0=()=>{const{user:s}=Ee(),t=He(),[a,i]=l.useState([]),[c,u]=l.useState(!0),[r,w]=l.useState(null),[D,U]=l.useState("all"),[v,N]=l.useState("all"),[E,A]=l.useState("all"),[j,z]=l.useState("");l.useEffect(()=>{const g=fe(ee(C,"problemReports"),es("createdAt","desc")),F=cs(g,O=>{const B=O.docs.map(T=>{var P,m;return{id:T.id,...T.data(),createdAt:((m=(P=T.data().createdAt)==null?void 0:P.toDate)==null?void 0:m.call(P))||new Date}});i(B),u(!1)},O=>{console.error("Error fetching reports:",O),t.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª"),u(!1)});return()=>F()},[]);const p=async(g,F)=>{try{await me(J(C,"problemReports",g),{status:F,adminId:s==null?void 0:s.uid,reviewedAt:X()}),t.success(`ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ù„Ù‰: ${Yr[F].label}`)}catch(O){console.error("Error updating status:",O),t.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©")}},f=a.filter(g=>{var F,O;if(D!=="all"&&g.problemType!==D||v!=="all"&&g.status!==v||E!=="all"&&g.userRole!==E)return!1;if(j){const B=j.toLowerCase();return g.description.toLowerCase().includes(B)||((F=g.userName)==null?void 0:F.toLowerCase().includes(B))||((O=g.userEmail)==null?void 0:O.toLowerCase().includes(B))}return!0}),L={total:a.length,pending:a.filter(g=>g.status==="pending").length,reviewed:a.filter(g=>g.status==="reviewed").length,resolved:a.filter(g=>g.status==="resolved").length},$=g=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(g);return c?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(as,{className:"w-8 h-8 text-sky-600 animate-spin"})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-sky-900 flex items-center gap-3",children:[e.jsx(Ts,{className:"w-8 h-8 text-sky-600"}),"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª"]}),e.jsx("p",{className:"text-sky-600 mt-1",children:"Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆÙ…ØªØ§Ø¨Ø¹Ø© Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"text-3xl font-bold text-sky-900",children:L.total}),e.jsx("div",{className:"text-sm text-gray-500",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª"})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 shadow-sm border border-yellow-100",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-700",children:L.pending}),e.jsx("div",{className:"text-sm text-yellow-600",children:"Ø¬Ø¯ÙŠØ¯"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 shadow-sm border border-blue-100",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-700",children:L.reviewed}),e.jsx("div",{className:"text-sm text-blue-600",children:"ØªÙ…Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 shadow-sm border border-green-100",children:[e.jsx("div",{className:"text-3xl font-bold text-green-700",children:L.resolved}),e.jsx("div",{className:"text-sm text-green-600",children:"ØªÙ… Ø§Ù„Ø­Ù„"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sky-700",children:[e.jsx(ja,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"ØªØµÙÙŠØ© Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"w-4 h-4 absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ø¨Ø­Ø«...",value:j,onChange:g=>z(g.target.value),className:"w-full pr-10 pl-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("select",{value:D,onChange:g=>U(g.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹"}),Object.entries($n).map(([g,{label:F}])=>e.jsx("option",{value:g,children:F},g))]}),e.jsxs("select",{value:v,onChange:g=>N(g.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª"}),Object.entries(Yr).map(([g,{label:F}])=>e.jsx("option",{value:g,children:F},g))]}),e.jsxs("select",{value:E,onChange:g=>A(g.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),Object.entries(On).map(([g,{label:F}])=>e.jsx("option",{value:g,children:F},g))]})]})]}),f.length===0?e.jsxs("div",{className:"bg-white rounded-xl p-12 text-center shadow-sm",children:[e.jsx(Ts,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ù„Ø§ØºØ§Øª"})]}):e.jsx("div",{className:"space-y-4",children:f.map(g=>{const F=$n[g.problemType],O=On[g.userRole],B=Yr[g.status],T=F.icon;B.icon;const P=r===g.id;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>w(P?null:g.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${F.bgClass}`,children:e.jsx(T,{className:`w-5 h-5 ${F.textClass}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sky-900",children:F.label}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${B.bgClass} ${B.textClass}`,children:B.label})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[e.jsx("span",{className:`px-2 py-0.5 rounded ${O.bgClass} ${O.textClass}`,children:O.label}),g.userName&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(uo,{className:"w-4 h-4"}),g.userName]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"w-4 h-4"}),$(g.createdAt)]})]})]})]}),e.jsx("div",{className:"text-gray-400",children:P?e.jsx(Ta,{className:"w-5 h-5"}):e.jsx(la,{className:"w-5 h-5"})})]})}),P&&e.jsxs("div",{className:"border-t border-gray-100 p-4 bg-gray-50",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-medium text-sky-900 mb-2",children:"ÙˆØµÙ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:g.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[g.userEmail&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯:"}),e.jsx("span",{className:"mr-2 text-sky-700",children:g.userEmail})]}),g.userPhone&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Ø§Ù„Ù‡Ø§ØªÙ:"}),e.jsx("span",{className:"mr-2 text-sky-700",children:g.userPhone})]})]}),g.status!=="resolved"&&e.jsxs("div",{className:"flex gap-2",children:[g.status==="pending"&&e.jsxs("button",{onClick:()=>p(g.id,"reviewed"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Ss,{className:"w-4 h-4"}),"ØªÙ…Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"]}),e.jsxs("button",{onClick:()=>p(g.id,"resolved"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"ØªÙ… Ø§Ù„Ø­Ù„"]})]})]})]},g.id)})})]})},Ln=3.75,i0=()=>{const{role:s}=Ee(),t=He(),[a,i]=l.useState(new Date().getFullYear()),[c,u]=l.useState(new Date().getMonth()+1),[r,w]=l.useState(!0),[D,U]=l.useState({totalOrders:0,totalOrdersValue:0,totalDeliveries:0,totalDeliveryFees:0,platformFees:0,adminCommissions:0,subscriptions:0,promotions:0,grossRevenue:0,netRevenue:0}),[v,N]=l.useState([]),[E,A]=l.useState({restaurants:{count:0,totalBalance:0,totalSales:0},couriers:{count:0,totalBalance:0,totalEarnings:0,totalFees:0},admins:{count:0,totalBalance:0,totalCommissions:0},app:{balance:0,totalEarnings:0}}),[j,z]=l.useState([]);if(l.useEffect(()=>{s==="developer"&&p()},[a,c,s]),s!=="developer")return e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-500",children:"Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©"})});const p=async()=>{w(!0);try{const O=`${a}-${String(c).padStart(2,"0")}`,B=new Date(a,c-1,1),T=new Date(a,c,0,23,59,59),P=fe(ee(C,"orders"),je("createdAt",">=",B),je("createdAt","<=",T),es("createdAt","desc")),o=(await be(P)).docs.map(Q=>({id:Q.id,...Q.data()}));let R=0,I=0,q=0,x=0,b=0,y=0;const d={};o.forEach(Q=>{var ye,ue;R++,I+=Q.total||0,Q.status==="delivered"&&(q++,x+=Q.deliveryFee||0,b+=Q.courierPlatformFee??Ln,Q.adminCommission&&(y+=Q.adminCommission));const re=(((ue=(ye=Q.createdAt)==null?void 0:ye.toDate)==null?void 0:ue.call(ye))||new Date(Q.createdAt)).toISOString().split("T")[0];d[re]||(d[re]={date:re,orders:0,ordersValue:0,deliveries:0,deliveryFees:0,platformFees:0,adminCommissions:0}),d[re].orders++,d[re].ordersValue+=Q.total||0,Q.status==="delivered"&&(d[re].deliveries++,d[re].deliveryFees+=Q.deliveryFee||0,d[re].platformFees+=Q.courierPlatformFee||Ln,d[re].adminCommissions+=Q.adminCommission||0)});const M=0,k=0,h=b+y+M+k;U({totalOrders:R,totalOrdersValue:I,totalDeliveries:q,totalDeliveryFees:x,platformFees:b,adminCommissions:y,subscriptions:M,promotions:k,grossRevenue:h,netRevenue:h});const V=Object.values(d).sort((Q,ie)=>new Date(ie.date).getTime()-new Date(Q.date).getTime());N(V),await f(),await L()}catch(O){console.error("Error loading accounting data:",O),t.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{w(!1)}},f=async()=>{try{const O=await be(ee(C,"wallets"));let B={count:0,totalBalance:0,totalSales:0},T={count:0,totalBalance:0,totalEarnings:0,totalFees:0},P={count:0,totalBalance:0,totalCommissions:0},m={balance:0,totalEarnings:0};O.docs.forEach(o=>{const R=o.data();o.id==="app_earnings"?m={balance:R.balance||0,totalEarnings:R.totalEarnings||0}:R.ownerType==="restaurant"?(B.count++,B.totalBalance+=R.balance||0,B.totalSales+=R.totalSales||0):R.ownerType==="courier"?(T.count++,T.totalBalance+=R.balance||0,T.totalEarnings+=R.totalEarnings||0,T.totalFees+=R.totalPlatformFees||0):(P.count++,P.totalBalance+=R.balance||0,P.totalCommissions+=R.totalEarnings||0)}),A({restaurants:B,couriers:T,admins:P,app:m})}catch(O){console.error("Error loading wallet summary:",O)}},L=async()=>{try{const O=fe(ee(C,"transactions"),es("createdAt","desc"),js(20)),B=await be(O);z(B.docs.map(T=>({id:T.id,...T.data()})))}catch{z([])}},$=O=>{let B=c+O,T=a;B>12?(B=1,T++):B<1&&(B=12,T--),u(B),i(T)},g=O=>["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"][O-1],F=O=>`${O.toFixed(2)} Ø±.Ø³`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-sky-900 flex items-center gap-2",children:[e.jsx(Vs,{className:"w-7 h-7"}),"Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©"]}),e.jsx("p",{className:"text-sky-600 mt-1",children:"Ø¥Ø¯Ø§Ø±Ø© ÙˆÙ…Ø±Ø§Ù‚Ø¨Ø© Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-xl p-2 shadow-sm border border-sky-100",children:[e.jsx("button",{onClick:()=>$(-1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(ta,{className:"w-5 h-5 text-sky-600"})}),e.jsxs("div",{className:"px-4 py-2 font-semibold text-sky-900 min-w-[140px] text-center",children:[g(c)," ",a]}),e.jsx("button",{onClick:()=>$(1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(pt,{className:"w-5 h-5 text-sky-600"})}),e.jsx("button",{onClick:p,className:"p-2 hover:bg-sky-50 rounded-lg transition mr-2",title:"ØªØ­Ø¯ÙŠØ«",children:e.jsx(ze,{className:`w-5 h-5 text-sky-600 ${r?"animate-spin":""}`})})]})]}),r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ze,{className:"w-8 h-8 animate-spin text-sky-500 mx-auto mb-3"}),e.jsx("p",{className:"text-sky-600",children:"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(Qa,{title:"ØµØ§ÙÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª",value:F(D.netRevenue),icon:e.jsx(is,{className:"w-6 h-6"}),color:"emerald",subtitle:"Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±"}),e.jsx(Qa,{title:"Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù†ØµØ©",value:F(D.platformFees),icon:e.jsx(po,{className:"w-6 h-6"}),color:"sky",subtitle:`Ù…Ù† ${D.totalDeliveries} ØªÙˆØµÙŠÙ„Ø©`}),e.jsx(Qa,{title:"Ø¹Ù…ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†",value:F(D.adminCommissions),icon:e.jsx(Ws,{className:"w-6 h-6"}),color:"purple",subtitle:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª"}),e.jsx(Qa,{title:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª",value:D.totalOrders.toString(),icon:e.jsx(Me,{className:"w-6 h-6"}),color:"amber",subtitle:F(D.totalOrdersValue)})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(yl,{className:"w-5 h-5"}),"Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø­Ø§ÙØ¸"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(Ga,{title:"Ù…Ø­ÙØ¸Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",balance:E.app.balance,total:E.app.totalEarnings,icon:e.jsx(Zt,{className:"w-5 h-5"}),color:"emerald"}),e.jsx(Ga,{title:"Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø©",balance:E.restaurants.totalBalance,total:E.restaurants.totalSales,count:E.restaurants.count,icon:e.jsx(Ns,{className:"w-5 h-5"}),color:"sky"}),e.jsx(Ga,{title:"Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨",balance:E.couriers.totalBalance,total:E.couriers.totalEarnings,count:E.couriers.count,icon:e.jsx(Ve,{className:"w-5 h-5"}),color:"orange"}),e.jsx(Ga,{title:"Ø§Ù„Ù…Ø´Ø±ÙÙˆÙ†",balance:E.admins.totalBalance,total:E.admins.totalCommissions,count:E.admins.count,icon:e.jsx(Ws,{className:"w-5 h-5"}),color:"purple"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(gt,{className:"w-5 h-5"}),"Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©"]}),v.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-sky-100",children:[e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù†ØµØ©"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"Ø¹Ù…ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†"})]})}),e.jsx("tbody",{children:v.map(O=>e.jsxs("tr",{className:"border-b border-sky-50 hover:bg-sky-25",children:[e.jsx("td",{className:"py-3 px-2 font-medium",children:O.date}),e.jsx("td",{className:"py-3 px-2",children:O.orders}),e.jsx("td",{className:"py-3 px-2",children:F(O.ordersValue)}),e.jsx("td",{className:"py-3 px-2",children:O.deliveries}),e.jsx("td",{className:"py-3 px-2 text-emerald-600",children:F(O.platformFees)}),e.jsx("td",{className:"py-3 px-2 text-purple-600",children:F(O.adminCommissions)})]},O.date))})]})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Bs,{className:"w-5 h-5"}),"Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ka,{label:"Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù†ØµØ© (Ù…Ù† Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨)",value:D.platformFees,percentage:D.platformFees/(D.grossRevenue||1)*100,color:"sky"}),e.jsx(Ka,{label:"Ø¹Ù…ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†",value:D.adminCommissions,percentage:D.adminCommissions/(D.grossRevenue||1)*100,color:"purple"}),e.jsx(Ka,{label:"Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ø¨Ø§Ù‚Ø§Øª",value:D.subscriptions,percentage:D.subscriptions/(D.grossRevenue||1)*100,color:"amber"}),e.jsx(Ka,{label:"Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ù…ÙˆÙ„Ø©",value:D.promotions,percentage:D.promotions/(D.grossRevenue||1)*100,color:"emerald"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Zn,{className:"w-5 h-5"}),"Ù…Ù„Ø®Øµ Ø§Ù„Ø´Ù‡Ø±"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Wt,{label:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª",value:D.totalOrders.toString()}),e.jsx(Wt,{label:"Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª",value:F(D.totalOrdersValue)}),e.jsx(Wt,{label:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©",value:D.totalDeliveries.toString()}),e.jsx(Wt,{label:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„",value:F(D.totalDeliveryFees)}),e.jsxs("div",{className:"border-t border-sky-100 pt-4 mt-4",children:[e.jsx(Wt,{label:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª",value:F(D.grossRevenue),highlight:!0}),e.jsx(Wt,{label:"ØµØ§ÙÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª",value:F(D.netRevenue),highlight:!0,color:"emerald"})]})]})]})]})]})]})},Qa=({title:s,value:t,icon:a,color:i,subtitle:c})=>{const u={sky:"bg-sky-50 text-sky-600",emerald:"bg-emerald-50 text-emerald-600",purple:"bg-purple-50 text-purple-600",amber:"bg-amber-50 text-amber-600",orange:"bg-orange-50 text-orange-600"};return e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-sky-100",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl ${u[i]} flex items-center justify-center mb-3`,children:a}),e.jsx("p",{className:"text-sm text-sky-600 mb-1",children:s}),e.jsx("p",{className:"text-xl font-bold text-sky-900",children:t}),c&&e.jsx("p",{className:"text-xs text-sky-500 mt-1",children:c})]})},Ga=({title:s,balance:t,total:a,count:i,icon:c,color:u})=>{const r={sky:"border-sky-200 bg-sky-50",emerald:"border-emerald-200 bg-emerald-50",purple:"border-purple-200 bg-purple-50",orange:"border-orange-200 bg-orange-50"},w={sky:"text-sky-600",emerald:"text-emerald-600",purple:"text-purple-600",orange:"text-orange-600"};return e.jsxs("div",{className:`rounded-xl p-4 border ${r[u]}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:w[u],children:c}),e.jsx("span",{className:"font-semibold text-sky-900 text-sm",children:s}),i!==void 0&&e.jsx("span",{className:"text-xs bg-white px-2 py-0.5 rounded-full text-sky-600",children:i})]}),e.jsxs("p",{className:`text-lg font-bold ${w[u]}`,children:[t.toFixed(2)," Ø±.Ø³"]}),e.jsxs("p",{className:"text-xs text-sky-500 mt-1",children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ",a.toFixed(2)," Ø±.Ø³"]})]})},Ka=({label:s,value:t,percentage:a,color:i})=>{const c={sky:"bg-sky-500",emerald:"bg-emerald-500",purple:"bg-purple-500",amber:"bg-amber-500"};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-sky-700",children:s}),e.jsxs("span",{className:"font-semibold text-sky-900",children:[t.toFixed(2)," Ø±.Ø³"]})]}),e.jsx("div",{className:"h-2 bg-sky-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${c[i]} rounded-full transition-all duration-500`,style:{width:`${Math.min(a,100)}%`}})})]})},Wt=({label:s,value:t,highlight:a,color:i="sky"})=>e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:a?"font-semibold text-sky-900":"text-sky-600",children:s}),e.jsx("span",{className:`font-bold ${i==="emerald"?"text-emerald-600":"text-sky-900"}`,children:t})]}),c0=()=>{const{user:s,role:t}=Ee(),a=He(),[i,c]=l.useState(new Date().getFullYear()),[u,r]=l.useState(new Date().getMonth()+1),[w,D]=l.useState(!0),[U,v]=l.useState(null),[N,E]=l.useState({todaySales:0,todayOrders:0,weekSales:0,weekOrders:0,monthSales:0,monthOrders:0,totalSales:0,totalOrders:0,pendingAmount:0,availableBalance:0}),[A,j]=l.useState([]),[z,p]=l.useState([]),[f,L]=l.useState("");if(l.useEffect(()=>{s!=null&&s.uid&&(t==="owner"||t==="developer")&&$()},[s==null?void 0:s.uid,i,u,t]),t!=="owner"&&t!=="developer")return e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-500",children:"Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©"})});const $=async()=>{if(s!=null&&s.uid){D(!0);try{const m=await Ce(J(C,"restaurants",s.uid));m.exists()&&L(m.data().name||"Ø£Ø³Ø±ØªÙŠ");const o=await Ce(J(C,"wallets",s.uid));if(o.exists()){const se=o.data();v(se)}else v({id:s.uid,ownerType:"restaurant",balance:0,totalSales:0,totalWithdrawn:0,pendingBalance:0});const R=fe(ee(C,"orders"),je("restaurantId","==",s.uid),es("createdAt","desc"),js(200)),q=(await be(R)).docs.map(se=>({id:se.id,...se.data()})),x=new Date,b=new Date(x.getFullYear(),x.getMonth(),x.getDate()),y=new Date(b);y.setDate(y.getDate()-7);const d=new Date(i,u-1,1),M=new Date(i,u,0,23,59,59);let k=0,h=0,S=0,V=0,Q=0,ie=0,re=0,ye=0,ue=0;const _=[];q.forEach(se=>{var G,Z;const pe=((Z=(G=se.createdAt)==null?void 0:G.toDate)==null?void 0:Z.call(G))||new Date(se.createdAt),le=se.restaurantEarnings||se.subtotal||0;_.length<20&&_.push({id:se.id,total:se.total,subtotal:se.subtotal,status:se.status,createdAt:se.createdAt}),["delivered","cancelled"].includes(se.status)||(ue+=le),se.status==="delivered"&&(ye++,re+=le,pe>=b&&(h++,k+=le),pe>=y&&(V++,S+=le),pe>=d&&pe<=M&&(ie++,Q+=le))}),E({todaySales:k,todayOrders:h,weekSales:S,weekOrders:V,monthSales:Q,monthOrders:ie,totalSales:re,totalOrders:ye,pendingAmount:ue,availableBalance:(U==null?void 0:U.balance)||0}),j(_),await g()}catch(m){console.error("Error loading wallet data:",m),a.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{D(!1)}}},g=async()=>{if(s!=null&&s.uid)try{const m=fe(ee(C,"wallets",s.uid,"transactions"),es("createdAt","desc"),js(50)),o=await be(m);p(o.docs.map(R=>({id:R.id,...R.data()})))}catch{p([])}},F=m=>{let o=u+m,R=i;o>12?(o=1,R++):o<1&&(o=12,R--),r(o),c(R)},O=m=>["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"][m-1],B=m=>`${m.toFixed(2)} Ø±.Ø³`,T=m=>({pending:{text:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù‚Ø¨ÙˆÙ„",color:"text-amber-600 bg-amber-50"},accepted:{text:"Ù…Ù‚Ø¨ÙˆÙ„",color:"text-blue-600 bg-blue-50"},preparing:{text:"Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±",color:"text-purple-600 bg-purple-50"},ready:{text:"Ø¬Ø§Ù‡Ø²",color:"text-sky-600 bg-sky-50"},out_for_delivery:{text:"ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚",color:"text-orange-600 bg-orange-50"},delivered:{text:"ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…",color:"text-emerald-600 bg-emerald-50"},cancelled:{text:"Ù…Ù„ØºÙŠ",color:"text-red-600 bg-red-50"}})[m]||{text:m,color:"text-gray-600 bg-gray-50"},P=m=>{var R;return m?(((R=m==null?void 0:m.toDate)==null?void 0:R.call(m))||new Date(m)).toLocaleDateString("ar-SA",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"-"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-sky-900 flex items-center gap-2",children:[e.jsx(is,{className:"w-7 h-7"}),"Ù…Ø­ÙØ¸ØªÙŠ"]}),e.jsx("p",{className:"text-sky-600 mt-1",children:f})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-xl p-2 shadow-sm border border-sky-100",children:[e.jsx("button",{onClick:()=>F(-1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(ta,{className:"w-5 h-5 text-sky-600"})}),e.jsxs("div",{className:"px-4 py-2 font-semibold text-sky-900 min-w-[140px] text-center",children:[O(u)," ",i]}),e.jsx("button",{onClick:()=>F(1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(pt,{className:"w-5 h-5 text-sky-600"})}),e.jsx("button",{onClick:$,className:"p-2 hover:bg-sky-50 rounded-lg transition mr-2",title:"ØªØ­Ø¯ÙŠØ«",children:e.jsx(ze,{className:`w-5 h-5 text-sky-600 ${w?"animate-spin":""}`})})]})]}),w?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ze,{className:"w-8 h-8 animate-spin text-sky-500 mx-auto mb-3"}),e.jsx("p",{className:"text-sky-600",children:"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sky-100 flex items-center gap-2",children:[e.jsx(yl,{className:"w-5 h-5"}),"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­"]}),e.jsx("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm",children:"Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø£Ø³Ø±Ø©"})]}),e.jsx("p",{className:"text-4xl font-bold mb-2",children:B(N.availableBalance)}),e.jsxs("div",{className:"flex gap-6 mt-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sky-200",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"}),e.jsx("p",{className:"font-semibold",children:B(N.totalSales)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sky-200",children:"Ù…Ø¹Ù„Ù‚"}),e.jsx("p",{className:"font-semibold",children:B(N.pendingAmount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sky-200",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("p",{className:"font-semibold",children:N.totalOrders})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(Ya,{title:"Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…",value:B(N.todaySales),subtitle:`${N.todayOrders} Ø·Ù„Ø¨`,icon:e.jsx(ns,{className:"w-5 h-5"}),color:"emerald"}),e.jsx(Ya,{title:"Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹",value:B(N.weekSales),subtitle:`${N.weekOrders} Ø·Ù„Ø¨`,icon:e.jsx(Bs,{className:"w-5 h-5"}),color:"sky"}),e.jsx(Ya,{title:"Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø´Ù‡Ø±",value:B(N.monthSales),subtitle:`${N.monthOrders} Ø·Ù„Ø¨`,icon:e.jsx(gt,{className:"w-5 h-5"}),color:"purple"}),e.jsx(Ya,{title:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª",value:B(N.totalSales),subtitle:`${N.totalOrders} Ø·Ù„Ø¨`,icon:e.jsx(Zt,{className:"w-5 h-5"}),color:"amber"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5"}),"Ø¢Ø®Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª"]}),A.length>0?e.jsx("div",{className:"space-y-3",children:A.slice(0,10).map(m=>{const o=T(m.status);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-sky-50/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-sky-100 rounded-full flex items-center justify-center",children:e.jsx(Me,{className:"w-5 h-5 text-sky-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sky-900 text-sm",children:["Ø·Ù„Ø¨ #",m.id.slice(-6)]}),e.jsx("p",{className:"text-xs text-sky-500",children:P(m.createdAt)})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-sky-900",children:B(m.subtotal)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${o.color}`,children:o.text})]})]},m.id)})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ø¹Ø¯"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Ks,{className:"w-5 h-5"}),"Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª"]}),z.length>0?e.jsx("div",{className:"space-y-3",children:z.map(m=>{var o,R,I;return e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-sky-50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${m.type==="credit"?"bg-emerald-100":"bg-red-100"}`,children:m.type==="credit"?e.jsx(Nl,{className:"w-5 h-5 text-emerald-600"}):e.jsx(go,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sky-900 text-sm",children:m.description}),e.jsx("p",{className:"text-xs text-sky-500",children:((I=(R=(o=m.createdAt)==null?void 0:o.toDate)==null?void 0:R.call(o))==null?void 0:I.toLocaleDateString("ar-SA"))||(m.createdAt instanceof Date?m.createdAt.toLocaleDateString("ar-SA"):"-")})]})]}),e.jsxs("span",{className:`font-bold ${m.type==="credit"?"text-emerald-600":"text-red-600"}`,children:[m.type==="credit"?"+":"-",B(m.amount)]})]},m.id)})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¨Ø¹Ø¯"})]}),e.jsx("div",{className:"bg-sky-50 rounded-xl p-4 border border-sky-100",children:e.jsx("p",{className:"text-sm text-sky-700 text-center",children:"ğŸ’¡ ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø© Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¨Ù†ÙƒÙŠ Ø®Ù„Ø§Ù„ 3-5 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„ Ø¨Ø¹Ø¯ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨"})})]})]})},Ya=({title:s,value:t,subtitle:a,icon:i,color:c})=>{const u={sky:"bg-sky-50 text-sky-600",emerald:"bg-emerald-50 text-emerald-600",purple:"bg-purple-50 text-purple-600",amber:"bg-amber-50 text-amber-600"};return e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-sky-100",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${u[c]} flex items-center justify-center mb-3`,children:i}),e.jsx("p",{className:"text-sm text-sky-600 mb-1",children:s}),e.jsx("p",{className:"text-xl font-bold text-sky-900",children:t}),e.jsx("p",{className:"text-xs text-sky-500 mt-1",children:a})]})},Mn=3.75,o0=()=>{const{user:s,role:t}=Ee(),a=He(),[i,c]=l.useState(new Date().getFullYear()),[u,r]=l.useState(new Date().getMonth()+1),[w,D]=l.useState(!0),[U,v]=l.useState(null),[N,E]=l.useState({todayDeliveries:0,todayEarnings:0,todayFees:0,weekDeliveries:0,weekEarnings:0,weekFees:0,monthDeliveries:0,monthEarnings:0,monthFees:0,totalDeliveries:0,totalEarnings:0,totalFees:0,netEarnings:0,availableBalance:0}),[A,j]=l.useState([]),[z,p]=l.useState([]),[f,L]=l.useState("");if(l.useEffect(()=>{s!=null&&s.uid&&(t==="courier"||t==="developer")&&$()},[s==null?void 0:s.uid,i,u,t]),t!=="courier"&&t!=="developer")return e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-500",children:"Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©"})});const $=async()=>{if(s!=null&&s.uid){D(!0);try{const m=await Ce(J(C,"couriers",s.uid));m.exists()&&L(m.data().name||"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨");const o=await Ce(J(C,"wallets",s.uid));if(o.exists()){const Z=o.data();v(Z)}else v({id:s.uid,ownerType:"courier",balance:0,totalEarnings:0,totalPlatformFees:0,netEarnings:0,totalWithdrawn:0});const R=fe(ee(C,"orders"),je("courierId","==",s.uid),es("createdAt","desc"),js(200)),q=(await be(R)).docs.map(Z=>({id:Z.id,...Z.data()})),x=new Date,b=new Date(x.getFullYear(),x.getMonth(),x.getDate()),y=new Date(b);y.setDate(y.getDate()-7);const d=new Date(i,u-1,1),M=new Date(i,u,0,23,59,59);let k=0,h=0,S=0,V=0,Q=0,ie=0,re=0,ye=0,ue=0,_=0,se=0,pe=0;const le=[];q.forEach(Z=>{var Y,te;const ne=((te=(Y=Z.createdAt)==null?void 0:Y.toDate)==null?void 0:te.call(Y))||new Date(Z.createdAt),ce=Z.deliveryFee||0,Ne=Z.courierPlatformFee||Mn;le.length<20&&le.push({id:Z.id,deliveryFee:ce,platformFee:Ne,status:Z.status,createdAt:Z.createdAt,restaurantName:Z.restaurantName}),Z.status==="delivered"&&(_++,se+=ce,pe+=Ne,ne>=b&&(k++,h+=ce,S+=Ne),ne>=y&&(V++,Q+=ce,ie+=Ne),ne>=d&&ne<=M&&(re++,ye+=ce,ue+=Ne))});const G=se-pe;E({todayDeliveries:k,todayEarnings:h,todayFees:S,weekDeliveries:V,weekEarnings:Q,weekFees:ie,monthDeliveries:re,monthEarnings:ye,monthFees:ue,totalDeliveries:_,totalEarnings:se,totalFees:pe,netEarnings:G,availableBalance:(U==null?void 0:U.balance)||G}),j(le),await g()}catch(m){console.error("Error loading wallet data:",m),a.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{D(!1)}}},g=async()=>{if(s!=null&&s.uid)try{const m=fe(ee(C,"wallets",s.uid,"transactions"),es("createdAt","desc"),js(50)),o=await be(m);p(o.docs.map(R=>({id:R.id,...R.data()})))}catch{p([])}},F=m=>{let o=u+m,R=i;o>12?(o=1,R++):o<1&&(o=12,R--),r(o),c(R)},O=m=>["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"][m-1],B=m=>`${m.toFixed(2)} Ø±.Ø³`,T=m=>({ready:{text:"Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù…",color:"text-sky-600 bg-sky-50"},out_for_delivery:{text:"ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚",color:"text-orange-600 bg-orange-50"},delivered:{text:"ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…",color:"text-emerald-600 bg-emerald-50"},cancelled:{text:"Ù…Ù„ØºÙŠ",color:"text-red-600 bg-red-50"}})[m]||{text:m,color:"text-gray-600 bg-gray-50"},P=m=>{var R;return m?(((R=m==null?void 0:m.toDate)==null?void 0:R.call(m))||new Date(m)).toLocaleDateString("ar-SA",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"-"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-sky-900 flex items-center gap-2",children:[e.jsx(is,{className:"w-7 h-7"}),"Ù…Ø­ÙØ¸ØªÙŠ"]}),e.jsx("p",{className:"text-sky-600 mt-1",children:f})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-xl p-2 shadow-sm border border-sky-100",children:[e.jsx("button",{onClick:()=>F(-1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(ta,{className:"w-5 h-5 text-sky-600"})}),e.jsxs("div",{className:"px-4 py-2 font-semibold text-sky-900 min-w-[140px] text-center",children:[O(u)," ",i]}),e.jsx("button",{onClick:()=>F(1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(pt,{className:"w-5 h-5 text-sky-600"})}),e.jsx("button",{onClick:$,className:"p-2 hover:bg-sky-50 rounded-lg transition mr-2",title:"ØªØ­Ø¯ÙŠØ«",children:e.jsx(ze,{className:`w-5 h-5 text-sky-600 ${w?"animate-spin":""}`})})]})]}),w?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ze,{className:"w-8 h-8 animate-spin text-sky-500 mx-auto mb-3"}),e.jsx("p",{className:"text-sky-600",children:"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-orange-100 flex items-center gap-2",children:[e.jsx(yl,{className:"w-5 h-5"}),"ØµØ§ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"]}),e.jsx("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm",children:"Ù…Ø­ÙØ¸Ø© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"})]}),e.jsx("p",{className:"text-4xl font-bold mb-2",children:B(N.netEarnings)}),e.jsxs("div",{className:"flex gap-6 mt-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-200",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"}),e.jsx("p",{className:"font-semibold",children:B(N.totalEarnings)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-200",children:"Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù†ØµØ©"}),e.jsxs("p",{className:"font-semibold text-orange-200",children:["-",B(N.totalFees)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-200",children:"Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª"}),e.jsx("p",{className:"font-semibold",children:N.totalDeliveries})]})]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200 flex items-start gap-3",children:[e.jsx(Rs,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ù†ØµØ©"}),e.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:["ÙŠØªÙ… Ø®ØµÙ… ",B(Mn)," Ù…Ù† ÙƒÙ„ Ø·Ù„Ø¨ ØªÙˆØµÙŠÙ„ ÙƒØ±Ø³ÙˆÙ… Ù„Ù„Ù…Ù†ØµØ©"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(Ja,{title:"Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙŠÙˆÙ…",value:B(N.todayEarnings-N.todayFees),subtitle:`${N.todayDeliveries} ØªÙˆØµÙŠÙ„Ø©`,icon:e.jsx(Ve,{className:"w-5 h-5"}),color:"emerald"}),e.jsx(Ja,{title:"Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹",value:B(N.weekEarnings-N.weekFees),subtitle:`${N.weekDeliveries} ØªÙˆØµÙŠÙ„Ø©`,icon:e.jsx(Bs,{className:"w-5 h-5"}),color:"sky"}),e.jsx(Ja,{title:"Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø´Ù‡Ø±",value:B(N.monthEarnings-N.monthFees),subtitle:`${N.monthDeliveries} ØªÙˆØµÙŠÙ„Ø©`,icon:e.jsx(gt,{className:"w-5 h-5"}),color:"purple"}),e.jsx(Ja,{title:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­",value:B(N.totalEarnings),subtitle:`${N.totalDeliveries} ØªÙˆØµÙŠÙ„Ø©`,icon:e.jsx(Zt,{className:"w-5 h-5"}),color:"amber"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(gt,{className:"w-5 h-5"}),"ØªÙØ§ØµÙŠÙ„ ",O(u)]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-sky-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-sky-900",children:N.monthDeliveries}),e.jsx("p",{className:"text-sm text-sky-600",children:"ØªÙˆØµÙŠÙ„Ø©"})]}),e.jsxs("div",{className:"text-center p-4 bg-emerald-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:B(N.monthEarnings)}),e.jsx("p",{className:"text-sm text-emerald-600",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["-",B(N.monthFees)]}),e.jsx("p",{className:"text-sm text-red-600",children:"Ø±Ø³ÙˆÙ…"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),"Ø¢Ø®Ø± Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª"]}),A.length>0?e.jsx("div",{className:"space-y-3",children:A.slice(0,10).map(m=>{const o=T(m.status);return m.deliveryFee-(m.status==="delivered"?m.platformFee:0),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-sky-50/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Ze,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sky-900 text-sm",children:m.restaurantName||`Ø·Ù„Ø¨ #${m.id.slice(-6)}`}),e.jsx("p",{className:"text-xs text-sky-500",children:P(m.createdAt)})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-sky-900",children:[B(m.deliveryFee),m.status==="delivered"&&e.jsxs("span",{className:"text-xs text-red-500 mr-1",children:["(-",B(m.platformFee),")"]})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${o.color}`,children:o.text})]})]},m.id)})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙˆØµÙŠÙ„Ø§Øª Ø¨Ø¹Ø¯"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Ks,{className:"w-5 h-5"}),"Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª"]}),z.length>0?e.jsx("div",{className:"space-y-3",children:z.map(m=>{var o,R,I;return e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-sky-50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${m.type==="credit"?"bg-emerald-100":"bg-red-100"}`,children:m.type==="credit"?e.jsx(Nl,{className:"w-5 h-5 text-emerald-600"}):e.jsx(ei,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sky-900 text-sm",children:m.description}),e.jsx("p",{className:"text-xs text-sky-500",children:((I=(R=(o=m.createdAt)==null?void 0:o.toDate)==null?void 0:R.call(o))==null?void 0:I.toLocaleDateString("ar-SA"))||(m.createdAt instanceof Date?m.createdAt.toLocaleDateString("ar-SA"):"-")})]})]}),e.jsxs("span",{className:`font-bold ${m.type==="credit"?"text-emerald-600":"text-red-600"}`,children:[m.type==="credit"?"+":"-",B(m.amount)]})]},m.id)})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¨Ø¹Ø¯"})]}),e.jsx("div",{className:"bg-sky-50 rounded-xl p-4 border border-sky-100",children:e.jsx("p",{className:"text-sm text-sky-700 text-center",children:"ğŸ’¡ ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø© Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¨Ù†ÙƒÙŠ Ø®Ù„Ø§Ù„ 3-5 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„"})})]})]})},Ja=({title:s,value:t,subtitle:a,icon:i,color:c})=>{const u={sky:"bg-sky-50 text-sky-600",emerald:"bg-emerald-50 text-emerald-600",purple:"bg-purple-50 text-purple-600",amber:"bg-amber-50 text-amber-600"};return e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-sky-100",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${u[c]} flex items-center justify-center mb-3`,children:i}),e.jsx("p",{className:"text-sm text-sky-600 mb-1",children:s}),e.jsx("p",{className:"text-xl font-bold text-sky-900",children:t}),e.jsx("p",{className:"text-xs text-sky-500 mt-1",children:a})]})},tt=1,d0=()=>{const{user:s}=Ee(),t=He(),[a,i]=l.useState("dashboard"),[c,u]=l.useState([]),[r,w]=l.useState([]),[D,U]=l.useState({balance:0,totalEarnings:0,withdrawals:[]}),[v,N]=l.useState(!0),[E,A]=l.useState("all"),[j,z]=l.useState("all"),[p,f]=l.useState(""),[L,$]=l.useState(null),[g,F]=l.useState(null);l.useEffect(()=>{if(!(s!=null&&s.uid))return;N(!0);const o=fe(ee(C,"restaurants"),je("supervisorId","==",s.uid)),R=cs(o,x=>{const b=x.docs.map(y=>{var d,M;return{id:y.id,...y.data(),createdAt:((M=(d=y.data().createdAt)==null?void 0:d.toDate)==null?void 0:M.call(d))||new Date}});u(b)}),I=J(C,"supervisorWallets",s.uid),q=cs(I,x=>{if(x.exists()){const b=x.data();U({balance:b.balance||0,totalEarnings:b.totalEarnings||0,withdrawals:(b.withdrawals||[]).map(y=>{var d,M,k,h;return{...y,requestedAt:((M=(d=y.requestedAt)==null?void 0:d.toDate)==null?void 0:M.call(d))||new Date,processedAt:(h=(k=y.processedAt)==null?void 0:k.toDate)==null?void 0:h.call(k)}})})}});return N(!1),()=>{R(),q()}},[s==null?void 0:s.uid]),l.useEffect(()=>{if(c.length===0){w([]);return}const o=c.map(I=>I.id),R=[];return o.forEach(I=>{const q=fe(ee(C,"orders"),je("restaurantId","==",I),es("createdAt","desc"),js(100)),x=cs(q,b=>{const y=b.docs.map(d=>{var M,k,h,S;return{id:d.id,...d.data(),createdAt:((k=(M=d.data().createdAt)==null?void 0:M.toDate)==null?void 0:k.call(M))||new Date,updatedAt:(S=(h=d.data().updatedAt)==null?void 0:h.toDate)==null?void 0:S.call(h)}});w(d=>[...d.filter(k=>k.restaurantId!==I),...y].sort((k,h)=>new Date(h.createdAt).getTime()-new Date(k.createdAt).getTime()))});R.push(x)}),()=>{R.forEach(I=>I())}},[c]);const O=l.useMemo(()=>{const o=new Date,R=new Date(o.getFullYear(),o.getMonth(),o.getDate()),I=new Date(R.getTime()-7*24*60*60*1e3),q=new Date(R.getTime()-30*24*60*60*1e3),x=r.filter(V=>V.status==="delivered"),b=r.filter(V=>!["delivered","cancelled"].includes(V.status)),y=r.filter(V=>new Date(V.createdAt)>=R),d=r.filter(V=>new Date(V.createdAt)>=I),M=r.filter(V=>new Date(V.createdAt)>=q),k=y.filter(V=>V.status==="delivered").length,h=d.filter(V=>V.status==="delivered").length,S=M.filter(V=>V.status==="delivered").length;return{totalRestaurants:c.length,totalOrders:r.length,completedOrders:x.length,activeOrders:b.length,cancelledOrders:r.filter(V=>V.status==="cancelled").length,todayOrders:y.length,todayCompleted:k,todayEarnings:k*tt,weekCompleted:h,weekEarnings:h*tt,monthCompleted:S,monthEarnings:S*tt,totalRevenue:x.reduce((V,Q)=>V+(Q.total||0),0),totalEarnings:x.length*tt}},[r,c]),B=l.useMemo(()=>{let o=[...r];E!=="all"&&(o=o.filter(q=>q.status===E));const R=new Date,I=new Date(R.getFullYear(),R.getMonth(),R.getDate());if(j==="today")o=o.filter(q=>new Date(q.createdAt)>=I);else if(j==="week"){const q=new Date(I.getTime()-6048e5);o=o.filter(x=>new Date(x.createdAt)>=q)}else if(j==="month"){const q=new Date(I.getTime()-2592e6);o=o.filter(x=>new Date(x.createdAt)>=q)}if(p){const q=p.toLowerCase();o=o.filter(x=>{var b,y;return x.id.toLowerCase().includes(q)||((b=x.restaurantName)==null?void 0:b.toLowerCase().includes(q))||((y=x.customerName)==null?void 0:y.toLowerCase().includes(q))})}return o},[r,E,j,p]),T=async(o,R)=>{try{if(await me(J(C,"orders",o),{status:R,updatedAt:new Date}),R==="delivered"&&(s!=null&&s.uid)){const I=J(C,"supervisorWallets",s.uid),q=await Ce(I),x=q.exists()&&q.data().balance||0,b=q.exists()&&q.data().totalEarnings||0;await me(I,{balance:x+tt,totalEarnings:b+tt,lastUpdated:new Date})}t.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨")}catch{t.error("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨")}},P=o=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(o),m=o=>{const R={pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",accepted:"bg-blue-500/20 text-blue-400 border-blue-500/30",preparing:"bg-purple-500/20 text-purple-400 border-purple-500/30",ready:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30",out_for_delivery:"bg-orange-500/20 text-orange-400 border-orange-500/30",delivered:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",cancelled:"bg-red-500/20 text-red-400 border-red-500/30"},I={pending:"Ù…Ø¹Ù„Ù‚",accepted:"Ù…Ù‚Ø¨ÙˆÙ„",preparing:"Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±",ready:"Ø¬Ø§Ù‡Ø²",out_for_delivery:"Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„",delivered:"Ù…ÙƒØªÙ…Ù„",cancelled:"Ù…Ù„ØºÙ‰"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${R[o]||R.pending}`,children:I[o]||o})};return v?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:e.jsx("div",{className:"text-amber-400 text-xl",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white",dir:"rtl",children:[e.jsx("header",{className:"bg-slate-800/50 backdrop-blur-xl border-b border-amber-500/20 sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-amber-400 to-amber-600 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg shadow-amber-500/20",children:e.jsx(ll,{className:"w-5 h-5 sm:w-6 sm:h-6 text-slate-900"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-base sm:text-xl font-bold bg-gradient-to-r from-amber-400 to-amber-200 bg-clip-text text-transparent",children:"Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±ÙØ©"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-slate-400 hidden sm:block",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø·Ø§Ø¹Ù… ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª"})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-amber-500/10 to-amber-600/10 border border-amber-500/30 rounded-xl sm:rounded-2xl px-2 sm:px-4 py-1.5 sm:py-2",children:e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx(is,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-400"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[9px] sm:text-xs text-amber-300/70 hidden sm:block",children:"Ø±ØµÙŠØ¯Ùƒ"}),e.jsxs("div",{className:"text-sm sm:text-lg font-bold text-amber-400",children:[D.balance.toFixed(0)," ",e.jsx("span",{className:"text-[10px] sm:text-sm",children:"Ø±.Ø³"})]})]})]})})]})})}),e.jsx("nav",{className:"bg-slate-800/30 border-b border-slate-700/50 sticky top-[52px] sm:top-[68px] z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4",children:e.jsx("div",{className:"flex gap-1 overflow-x-auto py-2 scrollbar-hide",style:{WebkitOverflowScrolling:"touch"},children:[{id:"dashboard",label:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",icon:e.jsx(ll,{className:"w-4 h-4"})},{id:"restaurants",label:"Ø§Ù„Ù…Ø·Ø§Ø¹Ù…",icon:e.jsx(Le,{className:"w-4 h-4"})},{id:"orders",label:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",icon:e.jsx(ns,{className:"w-4 h-4"})},{id:"reports",label:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±",icon:e.jsx(Vs,{className:"w-4 h-4"})}].map(o=>e.jsxs("button",{onClick:()=>i(o.id),className:`flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg sm:rounded-xl text-xs sm:text-sm font-medium transition-all whitespace-nowrap flex-shrink-0 ${a===o.id?"bg-gradient-to-r from-amber-500 to-amber-600 text-slate-900 shadow-lg shadow-amber-500/20":"text-slate-400 hover:text-amber-400 hover:bg-slate-700/50"}`,children:[o.icon,e.jsx("span",{children:o.label})]},o.id))})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6 pb-20",children:[a==="dashboard"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500/10 to-amber-600/5 border border-amber-500/30 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(bo,{className:"w-6 h-6 sm:w-8 sm:h-8 text-amber-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm sm:text-base font-bold text-amber-400",children:["Ø¹Ù…ÙˆÙ„ØªÙƒ: ",tt," Ø±ÙŠØ§Ù„ / Ø·Ù„Ø¨"]}),e.jsx("div",{className:"text-xs sm:text-sm text-slate-400",children:"ØªÙØ¶Ø§Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/20 to-amber-600/10 border border-amber-500/30 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 sm:mb-2",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-amber-500/20 rounded-lg sm:rounded-xl flex items-center justify-center",children:e.jsx(is,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-400"})}),e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"Ø§Ù„Ø±ØµÙŠØ¯"})]}),e.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-amber-400",children:[D.balance.toFixed(0)," ",e.jsx("span",{className:"text-xs sm:text-sm",children:"Ø±.Ø³"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border border-emerald-500/30 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 sm:mb-2",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-emerald-500/20 rounded-lg sm:rounded-xl flex items-center justify-center",children:e.jsx(Bs,{className:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-400"})}),e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"})]}),e.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-emerald-400",children:[D.totalEarnings.toFixed(0)," ",e.jsx("span",{className:"text-xs sm:text-sm",children:"Ø±.Ø³"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/30 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 sm:mb-2",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-500/20 rounded-lg sm:rounded-xl flex items-center justify-center",children:e.jsx(Ie,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-400"})}),e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"Ù…ÙƒØªÙ…Ù„Ø©"})]}),e.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-400",children:O.completedOrders})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/30 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 sm:mb-2",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-purple-500/20 rounded-lg sm:rounded-xl flex items-center justify-center",children:e.jsx(Ge,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-400"})}),e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"Ù†Ø´Ø·Ø©"})]}),e.jsx("div",{className:"text-lg sm:text-2xl font-bold text-purple-400",children:O.activeOrders})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:e.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"ğŸ“… Ø§Ù„ÙŠÙˆÙ…"})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold",children:O.todayOrders}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"Ø·Ù„Ø¨"})]}),e.jsx("div",{className:"w-px h-8 bg-slate-700"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-emerald-400",children:O.todayCompleted}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"Ù…ÙƒØªÙ…Ù„"})]}),e.jsx("div",{className:"w-px h-8 bg-slate-700"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-amber-400",children:O.todayEarnings}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"Ø±.Ø³"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:e.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"ğŸ“ˆ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹"})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-emerald-400",children:O.weekCompleted}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"Ù…ÙƒØªÙ…Ù„"})]}),e.jsx("div",{className:"w-px h-8 bg-slate-700"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-amber-400",children:O.weekEarnings}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"Ø±.Ø³"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:e.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"ğŸŒŸ Ø§Ù„Ø´Ù‡Ø±"})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-emerald-400",children:O.monthCompleted}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"Ù…ÙƒØªÙ…Ù„"})]}),e.jsx("div",{className:"w-px h-8 bg-slate-700"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-amber-400",children:O.monthEarnings}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"Ø±.Ø³"})]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-700/50",children:e.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[e.jsx(Zt,{className:"w-5 h-5 text-amber-400"}),"Ø³Ø¬Ù„ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø³Ø­Ø¨"]})}),e.jsx("div",{className:"p-4",children:D.withdrawals.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø³Ø­Ø¨ Ø³Ø§Ø¨Ù‚Ø©"}):e.jsx("div",{className:"space-y-3",children:D.withdrawals.map((o,R)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-xl",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[o.amount," Ø±.Ø³"]}),e.jsx("div",{className:"text-xs text-slate-500",children:P(o.requestedAt)})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${o.status==="approved"?"bg-emerald-500/20 text-emerald-400":o.status==="rejected"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:o.status==="approved"?"ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©":o.status==="rejected"?"Ù…Ø±ÙÙˆØ¶":"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"})]},R))})})]})]}),a==="restaurants"&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-base sm:text-xl font-bold",children:["Ø§Ù„Ù…Ø·Ø§Ø¹Ù… (",c.length,")"]})}),c.length===0?e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-6 sm:p-8 text-center",children:[e.jsx(Le,{className:"w-12 h-12 sm:w-16 sm:h-16 text-slate-600 mx-auto mb-3 sm:mb-4"}),e.jsx("div",{className:"text-sm sm:text-base text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø·Ø§Ø¹Ù… Ù…Ø³Ø¬Ù„Ø© ØªØ­Øª Ø¥Ø´Ø±Ø§ÙÙƒ"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:c.map(o=>{const R=r.filter(x=>x.restaurantId===o.id),I=R.filter(x=>x.status==="delivered"),q=I.reduce((x,b)=>x+(b.total||0),0);return e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl overflow-hidden hover:border-amber-500/30 transition-colors",children:[e.jsxs("div",{className:"p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2.5 sm:gap-3 mb-3 sm:mb-4",children:[o.logoUrl?e.jsx("img",{src:o.logoUrl,alt:o.name,className:"w-11 h-11 sm:w-14 sm:h-14 rounded-lg sm:rounded-xl object-cover"}):e.jsx("div",{className:"w-11 h-11 sm:w-14 sm:h-14 bg-slate-700 rounded-lg sm:rounded-xl flex items-center justify-center",children:e.jsx(Le,{className:"w-5 h-5 sm:w-7 sm:h-7 text-slate-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:o.name}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:o.city})]}),e.jsx("div",{className:`w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full ${o.isOpen?"bg-emerald-400":"bg-red-400"}`,title:o.isOpen?"Ù…ÙØªÙˆØ­":"Ù…ØºÙ„Ù‚"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-1.5 sm:gap-2 text-center",children:[e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-1.5 sm:p-2",children:[e.jsx("div",{className:"text-base sm:text-lg font-bold",children:R.length}),e.jsx("div",{className:"text-[9px] sm:text-xs text-slate-500",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"})]}),e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-1.5 sm:p-2",children:[e.jsx("div",{className:"text-base sm:text-lg font-bold text-emerald-400",children:I.length}),e.jsx("div",{className:"text-[9px] sm:text-xs text-slate-500",children:"Ù…ÙƒØªÙ…Ù„"})]}),e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-1.5 sm:p-2",children:[e.jsx("div",{className:"text-base sm:text-lg font-bold text-amber-400",children:q.toFixed(0)}),e.jsx("div",{className:"text-[9px] sm:text-xs text-slate-500",children:"Ø±.Ø³"})]})]})]}),e.jsxs("button",{onClick:()=>$(o),className:"w-full bg-slate-700/30 hover:bg-amber-500/20 text-slate-400 hover:text-amber-400 py-2 text-xs sm:text-sm transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ss,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„"]})]},o.id)})})]}),a==="orders"&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Ø¨Ø­Ø«...",value:p,onChange:o=>f(o.target.value),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg sm:rounded-xl pr-10 pl-3 py-2 text-sm focus:border-amber-500 outline-none"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:E,onChange:o=>A(o.target.value),className:"flex-1 sm:flex-none bg-slate-700/50 border border-slate-600 rounded-lg sm:rounded-xl px-2 sm:px-4 py-2 text-xs sm:text-sm focus:border-amber-500 outline-none",children:[e.jsx("option",{value:"all",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"pending",children:"Ù…Ø¹Ù„Ù‚"}),e.jsx("option",{value:"accepted",children:"Ù…Ù‚Ø¨ÙˆÙ„"}),e.jsx("option",{value:"preparing",children:"ØªØ­Ø¶ÙŠØ±"}),e.jsx("option",{value:"ready",children:"Ø¬Ø§Ù‡Ø²"}),e.jsx("option",{value:"out_for_delivery",children:"ØªÙˆØµÙŠÙ„"}),e.jsx("option",{value:"delivered",children:"Ù…ÙƒØªÙ…Ù„"}),e.jsx("option",{value:"cancelled",children:"Ù…Ù„ØºÙ‰"})]}),e.jsxs("select",{value:j,onChange:o=>z(o.target.value),className:"flex-1 sm:flex-none bg-slate-700/50 border border-slate-600 rounded-lg sm:rounded-xl px-2 sm:px-4 py-2 text-xs sm:text-sm focus:border-amber-500 outline-none",children:[e.jsx("option",{value:"all",children:"Ø§Ù„ÙƒÙ„"}),e.jsx("option",{value:"today",children:"Ø§Ù„ÙŠÙˆÙ…"}),e.jsx("option",{value:"week",children:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹"}),e.jsx("option",{value:"month",children:"Ø§Ù„Ø´Ù‡Ø±"})]})]})]})}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:B.length===0?e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-6 sm:p-8 text-center",children:[e.jsx(ns,{className:"w-12 h-12 sm:w-16 sm:h-16 text-slate-600 mx-auto mb-3 sm:mb-4"}),e.jsx("div",{className:"text-sm sm:text-base text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª"})]}):B.map(o=>{var R,I;return e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"p-3 sm:p-4 cursor-pointer hover:bg-slate-700/20 transition-colors",onClick:()=>F(g===o.id?null:o.id),children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-slate-700/50 rounded-lg sm:rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"font-medium flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-sm sm:text-base",children:["#",o.id.slice(-6)]}),m(o.status)]}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500 truncate",children:o.restaurantName||((R=c.find(q=>q.id===o.restaurantId))==null?void 0:R.name)})]})]}),e.jsxs("div",{className:"text-left flex-shrink-0",children:[e.jsxs("div",{className:"font-bold text-amber-400 text-sm sm:text-base",children:[(I=o.total)==null?void 0:I.toFixed(0)," ",e.jsx("span",{className:"text-xs",children:"Ø±.Ø³"})]}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:P(o.createdAt)})]}),g===o.id?e.jsx(Ta,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-500 flex-shrink-0"}):e.jsx(la,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-500 flex-shrink-0"})]})}),g===o.id&&e.jsxs("div",{className:"border-t border-slate-700/50 p-3 sm:p-4 bg-slate-800/30",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500 mb-0.5 sm:mb-1",children:"Ø§Ù„Ø¹Ù…ÙŠÙ„"}),e.jsx("div",{className:"text-sm sm:text-base",children:o.customerName||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500 mb-0.5 sm:mb-1",children:"Ø¹Ù…ÙˆÙ„ØªÙƒ"}),e.jsx("div",{className:`font-bold text-sm sm:text-base ${o.status==="delivered"?"text-emerald-400":"text-slate-500"}`,children:o.status==="delivered"?tt+" Ø±.Ø³ âœ“":"ØªÙØ³ØªØ­Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„"})]})]}),!["delivered","cancelled"].includes(o.status)&&e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm text-slate-400 w-full sm:w-auto mb-1 sm:mb-0",children:"ØªØºÙŠÙŠØ±:"}),o.status==="pending"&&e.jsx("button",{onClick:()=>T(o.id,"accepted"),className:"bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm",children:"Ù‚Ø¨ÙˆÙ„"}),o.status==="accepted"&&e.jsx("button",{onClick:()=>T(o.id,"preparing"),className:"bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm",children:"ØªØ­Ø¶ÙŠØ±"}),o.status==="preparing"&&e.jsx("button",{onClick:()=>T(o.id,"ready"),className:"bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm",children:"Ø¬Ø§Ù‡Ø²"}),o.status==="ready"&&e.jsx("button",{onClick:()=>T(o.id,"out_for_delivery"),className:"bg-orange-500/20 hover:bg-orange-500/30 text-orange-400 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm",children:"ØªÙˆØµÙŠÙ„"}),o.status==="out_for_delivery"&&e.jsx("button",{onClick:()=>T(o.id,"delivered"),className:"bg-emerald-500/20 hover:bg-emerald-500/30 text-emerald-400 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm",children:"ØªÙ…"}),e.jsx("button",{onClick:()=>T(o.id,"cancelled"),className:"bg-red-500/20 hover:bg-red-500/30 text-red-400 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm",children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]},o.id)})})]}),a==="reports"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("h2",{className:"text-base sm:text-xl font-bold flex items-center gap-2",children:[e.jsx(Vs,{className:"w-5 h-5 sm:w-6 sm:h-6 text-amber-400"}),"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsx("h3",{className:"font-bold text-amber-400 mb-3 sm:mb-4 flex items-center gap-2 text-sm sm:text-base",children:"ğŸ“… Ø§Ù„ÙŠÙˆÙ…"}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-3 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("span",{className:"font-bold text-sm sm:text-base",children:O.todayOrders})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-3 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"Ù…ÙƒØªÙ…Ù„Ø©"}),e.jsx("span",{className:"font-bold text-sm sm:text-base text-emerald-400",children:O.todayCompleted})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-3 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"Ø£Ø±Ø¨Ø§Ø­Ùƒ"}),e.jsxs("span",{className:"font-bold text-sm sm:text-base text-amber-400",children:[O.todayEarnings," Ø±.Ø³"]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsx("h3",{className:"font-bold text-amber-400 mb-3 sm:mb-4 flex items-center gap-2 text-sm sm:text-base",children:"ğŸ“ˆ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹"}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-3 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"Ù…ÙƒØªÙ…Ù„Ø©"}),e.jsx("span",{className:"font-bold text-sm sm:text-base text-emerald-400",children:O.weekCompleted})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-3 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"}),e.jsxs("span",{className:"font-bold text-sm sm:text-base text-amber-400",children:[O.weekEarnings," Ø±.Ø³"]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsx("h3",{className:"font-bold text-amber-400 mb-3 sm:mb-4 flex items-center gap-2 text-sm sm:text-base",children:"ğŸŒŸ Ø§Ù„Ø´Ù‡Ø±"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4",children:[e.jsxs("div",{className:"text-center p-2.5 sm:p-4 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("div",{className:"text-xl sm:text-3xl font-bold",children:O.monthCompleted}),e.jsx("div",{className:"text-[10px] sm:text-sm text-slate-400",children:"Ù…ÙƒØªÙ…Ù„"})]}),e.jsxs("div",{className:"text-center p-2.5 sm:p-4 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("div",{className:"text-xl sm:text-3xl font-bold text-amber-400",children:O.monthEarnings}),e.jsx("div",{className:"text-[10px] sm:text-sm text-slate-400",children:"Ø±.Ø³"})]}),e.jsxs("div",{className:"text-center p-2.5 sm:p-4 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("div",{className:"text-xl sm:text-3xl font-bold text-blue-400",children:c.length}),e.jsx("div",{className:"text-[10px] sm:text-sm text-slate-400",children:"Ù…Ø·Ø¹Ù…"})]}),e.jsxs("div",{className:"text-center p-2.5 sm:p-4 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsxs("div",{className:"text-xl sm:text-3xl font-bold text-emerald-400",children:[O.completedOrders>0?(O.completedOrders/O.totalOrders*100).toFixed(0):0,"%"]}),e.jsx("div",{className:"text-[10px] sm:text-sm text-slate-400",children:"Ø¥Ù†Ø¬Ø§Ø²"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b border-slate-700/50",children:e.jsxs("h3",{className:"font-bold flex items-center gap-2 text-sm sm:text-base",children:[e.jsx(Le,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-400"}),"Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…"]})}),e.jsx("div",{className:"sm:hidden p-3 space-y-2",children:c.map(o=>{const R=r.filter(b=>b.restaurantId===o.id),I=R.filter(b=>b.status==="delivered"),q=I.reduce((b,y)=>b+(y.total||0),0),x=I.length*tt;return e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-3",children:[e.jsx("div",{className:"font-medium text-sm mb-2",children:o.name}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:R.length}),e.jsx("div",{className:"text-slate-500",children:"Ø·Ù„Ø¨"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-emerald-400",children:I.length}),e.jsx("div",{className:"text-slate-500",children:"Ù…ÙƒØªÙ…Ù„"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:q.toFixed(0)}),e.jsx("div",{className:"text-slate-500",children:"Ø±.Ø³"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-amber-400",children:x}),e.jsx("div",{className:"text-slate-500",children:"Ø¹Ù…ÙˆÙ„Ø©"})]})]})]},o.id)})}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-700/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-right p-3",children:"Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsx("th",{className:"text-center p-3",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("th",{className:"text-center p-3",children:"Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©"}),e.jsx("th",{className:"text-center p-3",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª"}),e.jsx("th",{className:"text-center p-3",children:"Ø¹Ù…ÙˆÙ„ØªÙƒ"})]})}),e.jsx("tbody",{children:c.map(o=>{const R=r.filter(b=>b.restaurantId===o.id),I=R.filter(b=>b.status==="delivered"),q=I.reduce((b,y)=>b+(y.total||0),0),x=I.length*tt;return e.jsxs("tr",{className:"border-t border-slate-700/30 hover:bg-slate-700/20",children:[e.jsx("td",{className:"p-3 font-medium",children:o.name}),e.jsx("td",{className:"p-3 text-center",children:R.length}),e.jsx("td",{className:"p-3 text-center text-emerald-400",children:I.length}),e.jsxs("td",{className:"p-3 text-center",children:[q.toFixed(2)," Ø±.Ø³"]}),e.jsxs("td",{className:"p-3 text-center text-amber-400",children:[x," Ø±.Ø³"]})]},o.id)})})]})})]})]})]})]})},x0=()=>{const{user:s}=Ee(),t=He(),[a,i]=l.useState("dashboard"),[c,u]=l.useState({followers:0,followersGrowth:0,engagementRate:0,appClicks:0,whatsappClicks:0,totalReach:0,impressions:0}),[r,w]=l.useState([]),[D,U]=l.useState([]),[v,N]=l.useState(!0),[E,A]=l.useState("month"),[j,z]=l.useState(!1),[p,f]=l.useState(null),[L,$]=l.useState(null),[g,F]=l.useState({title:"",description:"",type:"image",platform:"instagram",status:"draft",scheduledAt:""});l.useEffect(()=>{if(!(s!=null&&s.uid))return;N(!0);const x=J(C,"socialMediaStats","current"),b=cs(x,h=>{h.exists()&&u(h.data())}),y=fe(ee(C,"socialMediaPosts"),es("createdAt","desc"),js(50)),d=cs(y,h=>{const S=h.docs.map(V=>{var Q,ie,re,ye,ue,_,se,pe;return{id:V.id,...V.data(),createdAt:((ie=(Q=V.data().createdAt)==null?void 0:Q.toDate)==null?void 0:ie.call(Q))||new Date,scheduledAt:(ye=(re=V.data().scheduledAt)==null?void 0:re.toDate)==null?void 0:ye.call(re),publishedAt:(_=(ue=V.data().publishedAt)==null?void 0:ue.toDate)==null?void 0:_.call(ue),updatedAt:(pe=(se=V.data().updatedAt)==null?void 0:se.toDate)==null?void 0:pe.call(se)}});w(S)}),M=fe(ee(C,"socialMediaCampaigns"),es("startDate","desc"),js(20)),k=cs(M,h=>{const S=h.docs.map(V=>{var Q,ie,re,ye;return{id:V.id,...V.data(),startDate:((ie=(Q=V.data().startDate)==null?void 0:Q.toDate)==null?void 0:ie.call(Q))||new Date,endDate:(ye=(re=V.data().endDate)==null?void 0:re.toDate)==null?void 0:ye.call(re)}});U(S)});return N(!1),()=>{b(),d(),k()}},[s==null?void 0:s.uid]);const O=l.useMemo(()=>{const x=r.filter(V=>V.status==="published"),b=r.filter(V=>V.status==="scheduled"),y=r.filter(V=>V.status==="draft"),d=x.reduce((V,Q)=>V+(Q.views||0),0),M=x.reduce((V,Q)=>V+(Q.likes||0),0),k=x.reduce((V,Q)=>V+(Q.comments||0),0),h=x.reduce((V,Q)=>V+(Q.shares||0),0),S=x.sort((V,Q)=>(Q.likes||0)+(Q.comments||0)+(Q.shares||0)-((V.likes||0)+(V.comments||0)+(V.shares||0)))[0];return{totalPosts:r.length,published:x.length,scheduled:b.length,drafts:y.length,totalViews:d,totalLikes:M,totalComments:k,totalShares:h,bestPost:S,avgEngagement:x.length>0?((M+k+h)/x.length).toFixed(1):0}},[r]),B=l.useMemo(()=>{const x=D.filter(k=>k.status==="active"),b=D.reduce((k,h)=>k+h.budget,0),y=D.reduce((k,h)=>k+h.spent,0),d=D.reduce((k,h)=>k+h.clicks,0),M=D.reduce((k,h)=>k+h.conversions,0);return{total:D.length,active:x.length,totalBudget:b,totalSpent:y,totalClicks:d,totalConversions:M,avgCPC:d>0?(y/d).toFixed(2):0}},[D]),T=async()=>{if(!g.title.trim()){t.warning("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù†Ø´ÙˆØ±");return}try{await Pe(ee(C,"socialMediaPosts"),{...g,scheduledAt:g.scheduledAt?new Date(g.scheduledAt):null,createdAt:new Date,createdBy:s==null?void 0:s.uid,views:0,likes:0,comments:0,shares:0,saves:0,clicks:0}),t.success("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†Ø´ÙˆØ±"),z(!1),F({title:"",description:"",type:"image",platform:"instagram",status:"draft",scheduledAt:""})}catch{t.error("ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†Ø´ÙˆØ±")}},P=async x=>{if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø´ÙˆØ±ØŸ"))try{await Ds(J(C,"socialMediaPosts",x)),t.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ±")}catch{t.error("ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ±")}},m=async(x,b)=>{try{await me(J(C,"socialMediaPosts",x),{status:b,updatedAt:new Date,...b==="published"?{publishedAt:new Date}:{}}),t.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø´ÙˆØ±")}catch{t.error("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©")}},o=async(x,b)=>{try{await Be(J(C,"socialMediaStats","current"),{...c,[x]:b,updatedAt:new Date,updatedBy:s==null?void 0:s.uid},{merge:!0}),t.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª")}catch{t.error("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª")}},R=x=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(x),I=x=>{switch(x){case"image":return e.jsx(Xt,{className:"w-4 h-4"});case"video":return e.jsx(cr,{className:"w-4 h-4"});case"reel":return e.jsx(tl,{className:"w-4 h-4"});case"story":return e.jsx(ps,{className:"w-4 h-4"});case"carousel":return e.jsx(vs,{className:"w-4 h-4"});default:return e.jsx(vs,{className:"w-4 h-4"})}},q=x=>{switch(x){case"instagram":return e.jsx(jo,{className:"w-4 h-4"});case"twitter":return e.jsx(ra,{className:"w-4 h-4"});case"tiktok":return e.jsx(cr,{className:"w-4 h-4"});default:return e.jsx(nr,{className:"w-4 h-4"})}};return v?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-slate-900 to-indigo-950 flex items-center justify-center",children:e.jsx("div",{className:"text-indigo-400 text-xl",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-slate-900 to-indigo-950 text-white",dir:"rtl",children:[e.jsx("header",{className:"bg-slate-900/50 backdrop-blur-xl border-b border-indigo-500/20 sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-400 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-500/20",children:e.jsx(Us,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙˆØ§Ù„ØªØ³ÙˆÙŠÙ‚"})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-indigo-500/10 border border-indigo-500/30 rounded-xl px-3 py-2",children:[e.jsx(Ws,{className:"w-4 h-4 text-indigo-400"}),e.jsx("span",{className:"font-bold",children:c.followers.toLocaleString()}),e.jsx("span",{className:"text-xs text-slate-400",children:"Ù…ØªØ§Ø¨Ø¹"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-pink-500/10 border border-pink-500/30 rounded-xl px-3 py-2",children:[e.jsx(ht,{className:"w-4 h-4 text-pink-400"}),e.jsxs("span",{className:"font-bold",children:[c.engagementRate.toFixed(1),"%"]}),e.jsx("span",{className:"text-xs text-slate-400",children:"ØªÙØ§Ø¹Ù„"})]})]})]})}),e.jsx("nav",{className:"bg-slate-900/30 border-b border-slate-700/50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("div",{className:"flex gap-1 overflow-x-auto py-2",children:[{id:"dashboard",label:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",icon:e.jsx(ll,{className:"w-4 h-4"})},{id:"content",label:"Ø§Ù„Ù…Ø­ØªÙˆÙ‰",icon:e.jsx(vs,{className:"w-4 h-4"})},{id:"calendar",label:"Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†Ø´Ø±",icon:e.jsx(gt,{className:"w-4 h-4"})},{id:"campaigns",label:"Ø§Ù„Ø­Ù…Ù„Ø§Øª",icon:e.jsx(xt,{className:"w-4 h-4"})},{id:"reports",label:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±",icon:e.jsx(Vs,{className:"w-4 h-4"})}].map(x=>e.jsxs("button",{onClick:()=>i(x.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all whitespace-nowrap ${a===x.id?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-400 hover:text-indigo-400 hover:bg-slate-700/50"}`,children:[x.icon,x.label]},x.id))})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[a==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500/20 to-indigo-600/10 border border-indigo-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/20 rounded-xl flex items-center justify-center",children:e.jsx(Ws,{className:"w-5 h-5 text-indigo-400"})}),e.jsx("span",{className:"text-sm text-slate-400",children:"Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†"})]}),e.jsx("div",{className:"text-2xl font-bold text-indigo-400",children:c.followers.toLocaleString()}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[c.followersGrowth>=0?e.jsx(Bs,{className:"w-3 h-3 text-emerald-400"}):e.jsx(Bs,{className:"w-3 h-3 text-red-400 rotate-180"}),e.jsxs("span",{className:`text-xs ${c.followersGrowth>=0?"text-emerald-400":"text-red-400"}`,children:[c.followersGrowth,"%"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-500/20 to-pink-600/10 border border-pink-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-500/20 rounded-xl flex items-center justify-center",children:e.jsx(ht,{className:"w-5 h-5 text-pink-400"})}),e.jsx("span",{className:"text-sm text-slate-400",children:"Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙØ§Ø¹Ù„"})]}),e.jsxs("div",{className:"text-2xl font-bold text-pink-400",children:[c.engagementRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border border-emerald-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-xl flex items-center justify-center",children:e.jsx(fo,{className:"w-5 h-5 text-emerald-400"})}),e.jsx("span",{className:"text-sm text-slate-400",children:"Ù†Ù‚Ø±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"})]}),e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:c.appClicks.toLocaleString()})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/10 border border-green-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-xl flex items-center justify-center",children:e.jsx(Gs,{className:"w-5 h-5 text-green-400"})}),e.jsx("span",{className:"text-sm text-slate-400",children:"Ù†Ù‚Ø±Ø§Øª ÙˆØ§ØªØ³Ø§Ø¨"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:c.whatsappClicks.toLocaleString()})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ss,{className:"w-5 h-5 text-indigo-400"}),"Ø§Ù„ÙˆØµÙˆÙ„ ÙˆØ§Ù„Ø¸Ù‡ÙˆØ±"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("span",{className:"text-slate-400",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆØµÙˆÙ„"}),e.jsx("span",{className:"font-bold text-indigo-400",children:c.totalReach.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("span",{className:"text-slate-400",children:"Ø§Ù„Ø¸Ù‡ÙˆØ± (Impressions)"}),e.jsx("span",{className:"font-bold",children:c.impressions.toLocaleString()})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5 text-purple-400"}),"Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙˆÙ‰"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold",children:O.totalPosts}),e.jsx("div",{className:"text-xs text-slate-500",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª"})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:O.published}),e.jsx("div",{className:"text-xs text-slate-500",children:"Ù…Ù†Ø´ÙˆØ±"})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-pink-400",children:O.totalLikes}),e.jsx("div",{className:"text-xs text-slate-500",children:"Ø¥Ø¹Ø¬Ø§Ø¨"})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:O.avgEngagement}),e.jsx("div",{className:"text-xs text-slate-500",children:"Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙØ§Ø¹Ù„"})]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5 text-amber-400"}),"Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:B.active}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ø­Ù…Ù„Ø© Ù†Ø´Ø·Ø©"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-3xl font-bold",children:B.totalClicks.toLocaleString()}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ù†Ù‚Ø±Ø§Øª"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-3xl font-bold text-emerald-400",children:B.totalConversions}),e.jsx("div",{className:"text-sm text-slate-400",children:"ØªØ­ÙˆÙŠÙ„Ø§Øª"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-3xl font-bold text-indigo-400",children:B.avgCPC}),e.jsx("div",{className:"text-sm text-slate-400",children:"ØªÙƒÙ„ÙØ© Ø§Ù„Ù†Ù‚Ø±Ø©"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(Xn,{className:"w-5 h-5 text-slate-400"}),"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª"]}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù…Ù† Ù‡Ù†Ø§"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†"}),e.jsx("input",{type:"number",value:c.followers,onChange:x=>o("followers",parseInt(x.target.value)||0),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ù…Ùˆ %"}),e.jsx("input",{type:"number",step:"0.1",value:c.followersGrowth,onChange:x=>o("followersGrowth",parseFloat(x.target.value)||0),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ %"}),e.jsx("input",{type:"number",step:"0.1",value:c.engagementRate,onChange:x=>o("engagementRate",parseFloat(x.target.value)||0),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Ù†Ù‚Ø±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"}),e.jsx("input",{type:"number",value:c.appClicks,onChange:x=>o("appClicks",parseInt(x.target.value)||0),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Ù†Ù‚Ø±Ø§Øª ÙˆØ§ØªØ³Ø§Ø¨"}),e.jsx("input",{type:"number",value:c.whatsappClicks,onChange:x=>o("whatsappClicks",parseInt(x.target.value)||0),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„ÙƒÙ„ÙŠ"}),e.jsx("input",{type:"number",value:c.totalReach,onChange:x=>o("totalReach",parseInt(x.target.value)||0),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]})]})]})]}),a==="content"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰"}),e.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:opacity-90 transition-opacity",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Ù…Ù†Ø´ÙˆØ± Ø¬Ø¯ÙŠØ¯"]})]}),j&&e.jsxs("div",{className:"bg-slate-800/50 border border-indigo-500/30 rounded-2xl p-4",children:[e.jsx("h3",{className:"font-bold mb-4",children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø´ÙˆØ± Ø¬Ø¯ÙŠØ¯"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† *"}),e.jsx("input",{type:"text",value:g.title,onChange:x=>F(b=>({...b,title:x.target.value})),placeholder:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù†Ø´ÙˆØ±",className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰"}),e.jsxs("select",{value:g.type,onChange:x=>F(b=>({...b,type:x.target.value})),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"image",children:"ØµÙˆØ±Ø©"}),e.jsx("option",{value:"video",children:"ÙÙŠØ¯ÙŠÙˆ"}),e.jsx("option",{value:"reel",children:"Ø±ÙŠÙ„Ø²"}),e.jsx("option",{value:"story",children:"Ø³ØªÙˆØ±ÙŠ"}),e.jsx("option",{value:"carousel",children:"ÙƒØ§Ø±ÙˆØ³ÙŠÙ„"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Ø§Ù„Ù…Ù†ØµØ©"}),e.jsxs("select",{value:g.platform,onChange:x=>F(b=>({...b,platform:x.target.value})),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"instagram",children:"Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…"}),e.jsx("option",{value:"twitter",children:"ØªÙˆÙŠØªØ±"}),e.jsx("option",{value:"tiktok",children:"ØªÙŠÙƒ ØªÙˆÙƒ"}),e.jsx("option",{value:"snapchat",children:"Ø³Ù†Ø§Ø¨ Ø´Ø§Øª"}),e.jsx("option",{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØµØ§Øª"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"datetime-local",value:g.scheduledAt,onChange:x=>F(b=>({...b,scheduledAt:x.target.value,status:x.target.value?"scheduled":"draft"})),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx("textarea",{value:g.description,onChange:x=>F(b=>({...b,description:x.target.value})),placeholder:"ÙˆØµÙ Ø§Ù„Ù…Ù†Ø´ÙˆØ±...",rows:3,className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm resize-none"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:T,className:"bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-xl text-sm",children:"Ø­ÙØ¸"}),e.jsx("button",{onClick:()=>z(!1),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-xl text-sm",children:"Ø¥Ù„ØºØ§Ø¡"})]})]}),e.jsx("div",{className:"space-y-3",children:r.length===0?e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-8 text-center",children:[e.jsx(vs,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),e.jsx("div",{className:"text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø´ÙˆØ±Ø§Øª"})]}):r.map(x=>e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-slate-700/20 transition-colors",onClick:()=>$(L===x.id?null:x.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-700/50 rounded-xl flex items-center justify-center",children:I(x.type)}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[x.title,e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${x.status==="published"?"bg-emerald-500/20 text-emerald-400":x.status==="scheduled"?"bg-blue-500/20 text-blue-400":x.status==="draft"?"bg-slate-500/20 text-slate-400":"bg-slate-600/20 text-slate-500"}`,children:x.status==="published"?"Ù…Ù†Ø´ÙˆØ±":x.status==="scheduled"?"Ù…Ø¬Ø¯ÙˆÙ„":x.status==="draft"?"Ù…Ø³ÙˆØ¯Ø©":"Ù…Ø¤Ø±Ø´Ù"})]}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[q(x.platform),x.platform==="instagram"?"Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…":x.platform==="twitter"?"ØªÙˆÙŠØªØ±":x.platform==="tiktok"?"ØªÙŠÙƒ ØªÙˆÙƒ":x.platform==="snapchat"?"Ø³Ù†Ø§Ø¨ Ø´Ø§Øª":"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØµØ§Øª"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-400",children:[x.status==="published"&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ss,{className:"w-3 h-3"})," ",x.views||0]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ht,{className:"w-3 h-3"})," ",x.likes||0]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gs,{className:"w-3 h-3"})," ",x.comments||0]})]}),L===x.id?e.jsx(Ta,{className:"w-5 h-5"}):e.jsx(la,{className:"w-5 h-5"})]})]})}),L===x.id&&e.jsxs("div",{className:"border-t border-slate-700/50 p-4 bg-slate-800/30",children:[x.description&&e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:x.description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m(x.id,"published"),className:"bg-emerald-500/20 hover:bg-emerald-500/30 text-emerald-400 px-3 py-1 rounded-lg text-sm",children:"Ù†Ø´Ø± Ø§Ù„Ø¢Ù†"}),e.jsx("button",{onClick:()=>m(x.id,"scheduled"),className:"bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 px-3 py-1 rounded-lg text-sm",children:"Ø¬Ø¯ÙˆÙ„Ø©"})]}),x.status==="scheduled"&&e.jsx("button",{onClick:()=>m(x.id,"published"),className:"bg-emerald-500/20 hover:bg-emerald-500/30 text-emerald-400 px-3 py-1 rounded-lg text-sm",children:"Ù†Ø´Ø± Ø§Ù„Ø¢Ù†"}),e.jsx("button",{onClick:()=>m(x.id,"archived"),className:"bg-slate-500/20 hover:bg-slate-500/30 text-slate-400 px-3 py-1 rounded-lg text-sm",children:"Ø£Ø±Ø´ÙØ©"}),e.jsx("button",{onClick:()=>P(x.id),className:"bg-red-500/20 hover:bg-red-500/30 text-red-400 px-3 py-1 rounded-lg text-sm",children:"Ø­Ø°Ù"})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-3",children:["Ø£ÙÙ†Ø´Ø¦: ",R(x.createdAt),x.publishedAt&&` â€¢ Ù†ÙØ´Ø±: ${R(x.publishedAt)}`]})]})]},x.id))})]}),a==="calendar"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(gt,{className:"w-6 h-6 text-indigo-400"}),"Ø¬Ø¯ÙˆÙ„ Ù†Ø´Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰"]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:O.published}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ù…Ù†Ø´ÙˆØ±"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:O.scheduled}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ù…Ø¬Ø¯ÙˆÙ„"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-400",children:O.drafts}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ù…Ø³ÙˆØ¯Ø©"})]})]}),e.jsx("h3",{className:"font-bold mb-3",children:"Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©"}),e.jsx("div",{className:"space-y-2",children:r.filter(x=>x.status==="scheduled").length===0?e.jsx("div",{className:"text-center py-8 text-slate-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø´ÙˆØ±Ø§Øª Ù…Ø¬Ø¯ÙˆÙ„Ø©"}):r.filter(x=>x.status==="scheduled").map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[I(x.type),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.title}),e.jsx("div",{className:"text-xs text-slate-500",children:x.scheduledAt?R(x.scheduledAt):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]})]}),q(x.platform)]},x.id))})]})]}),a==="campaigns"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(xt,{className:"w-6 h-6 text-amber-400"}),"Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©"]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/20 to-amber-600/10 border border-amber-500/30 rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:B.total}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ù…Ù„Ø§Øª"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border border-emerald-500/30 rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-emerald-400",children:B.active}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ù†Ø´Ø·Ø© Ø§Ù„Ø¢Ù†"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/30 rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-400",children:B.totalBudget.toLocaleString()}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/30 rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:B.totalSpent.toLocaleString()}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙ"})]})]}),e.jsx("div",{className:"space-y-3",children:D.length===0?e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-8 text-center",children:[e.jsx(xt,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),e.jsx("div",{className:"text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ù…Ù„Ø§Øª"})]}):D.map(x=>e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:x.name}),e.jsx("div",{className:"text-sm text-slate-500",children:x.platform})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${x.status==="active"?"bg-emerald-500/20 text-emerald-400":x.status==="paused"?"bg-yellow-500/20 text-yellow-400":x.status==="completed"?"bg-blue-500/20 text-blue-400":"bg-slate-500/20 text-slate-400"}`,children:x.status==="active"?"Ù†Ø´Ø·Ø©":x.status==="paused"?"Ù…ØªÙˆÙ‚ÙØ©":x.status==="completed"?"Ù…ÙƒØªÙ…Ù„Ø©":"Ù…Ø³ÙˆØ¯Ø©"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-2",children:[e.jsx("div",{className:"font-bold",children:x.impressions.toLocaleString()}),e.jsx("div",{className:"text-xs text-slate-500",children:"Ø¸Ù‡ÙˆØ±"})]}),e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-2",children:[e.jsx("div",{className:"font-bold",children:x.clicks.toLocaleString()}),e.jsx("div",{className:"text-xs text-slate-500",children:"Ù†Ù‚Ø±Ø§Øª"})]}),e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-2",children:[e.jsx("div",{className:"font-bold text-emerald-400",children:x.conversions}),e.jsx("div",{className:"text-xs text-slate-500",children:"ØªØ­ÙˆÙŠÙ„Ø§Øª"})]}),e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-2",children:[e.jsx("div",{className:"font-bold text-amber-400",children:x.spent.toLocaleString()}),e.jsx("div",{className:"text-xs text-slate-500",children:"Ù…ØµØ±ÙˆÙ"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[e.jsx("span",{children:"Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©"}),e.jsxs("span",{children:[x.budget>0?(x.spent/x.budget*100).toFixed(0):0,"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500",style:{width:`${x.budget>0?Math.min(x.spent/x.budget*100,100):0}%`}})})]})]},x.id))})]}),a==="reports"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Vs,{className:"w-6 h-6 text-indigo-400"}),"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª"]}),e.jsxs("select",{value:E,onChange:x=>A(x.target.value),className:"bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"week",children:"Ø¢Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹"}),e.jsx("option",{value:"month",children:"Ø¢Ø®Ø± Ø´Ù‡Ø±"}),e.jsx("option",{value:"quarter",children:"Ø¢Ø®Ø± 3 Ø£Ø´Ù‡Ø±"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(Bs,{className:"w-5 h-5 text-emerald-400"}),"Ù†Ù…Ùˆ Ø§Ù„Ø­Ø³Ø§Ø¨"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-3xl font-bold text-indigo-400",children:c.followers.toLocaleString()}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†"}),e.jsxs("div",{className:`text-xs mt-1 ${c.followersGrowth>=0?"text-emerald-400":"text-red-400"}`,children:[c.followersGrowth>=0?"+":"",c.followersGrowth,"% Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±"]})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsxs("div",{className:"text-3xl font-bold text-pink-400",children:[c.engagementRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙØ§Ø¹Ù„"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-3xl font-bold text-emerald-400",children:c.totalReach.toLocaleString()}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„ÙƒÙ„ÙŠ"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5 text-amber-400"}),"Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø£Ø¯Ø§Ø¡Ù‹"]}),O.bestPost?e.jsxs("div",{className:"p-4 bg-gradient-to-br from-amber-500/10 to-amber-600/5 border border-amber-500/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[I(O.bestPost.type),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:O.bestPost.title}),e.jsx("div",{className:"text-xs text-slate-500",children:O.bestPost.publishedAt?R(O.bestPost.publishedAt):""})]})]}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ss,{className:"w-4 h-4 text-slate-400"}),O.bestPost.views||0," Ù…Ø´Ø§Ù‡Ø¯Ø©"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ht,{className:"w-4 h-4 text-pink-400"}),O.bestPost.likes||0," Ø¥Ø¹Ø¬Ø§Ø¨"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gs,{className:"w-4 h-4 text-blue-400"}),O.bestPost.comments||0," ØªØ¹Ù„ÙŠÙ‚"]})]})]}):e.jsx("div",{className:"text-center py-8 text-slate-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¨Ø¹Ø¯"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5 text-emerald-400"}),"Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø§Øª"]}),e.jsx("div",{className:"space-y-3",children:D.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ù…Ù„Ø§Øª"}):D.slice(0,5).map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.name}),e.jsx("div",{className:"text-xs text-slate-500",children:x.platform})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"text-emerald-400 font-bold",children:[x.conversions," ØªØ­ÙˆÙŠÙ„"]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["CPC: ",x.clicks>0?(x.spent/x.clicks).toFixed(2):0," Ø±.Ø³"]})]})]},x.id))})]})]})]}),e.jsxs("div",{className:"fixed bottom-4 left-4 bg-slate-800/90 backdrop-blur border border-indigo-500/30 rounded-xl p-3 text-xs text-slate-400 max-w-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-400 font-medium mb-1",children:[e.jsx(m0,{className:"w-3 h-3"}),"ØµÙ„Ø§Ø­ÙŠØ§ØªÙƒ"]}),e.jsx("p",{children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠØ© ÙÙ‚Ø·. Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø£Ùˆ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­."})]})]})},m0=({className:s})=>e.jsxs("svg",{className:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),We=({children:s})=>{const{user:t,loading:a}=Ee();return a?e.jsx("div",{className:"p-8 text-center",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."}):t?e.jsx(e.Fragment,{children:s}):e.jsx(ur,{to:"/login",replace:!0})},h0=()=>{var U;const{role:s,loading:t}=Ee(),[a,i]=l.useState([]),[c,u]=l.useState(!0),[r,w]=l.useState(null);if(l.useEffect(()=>{t||s!=="developer"||(async()=>{try{w(null);const v=fe(ee(C,"orders"),es("createdAt","desc"),js(10)),E=(await be(v)).docs.map(A=>{var z,p,f,L,$,g;const j=A.data();return{id:A.id,restaurantId:j.restaurantId??null,firstItemOwnerId:((p=(z=j==null?void 0:j.items)==null?void 0:z[0])==null?void 0:p.ownerId)??null,customerId:j.customerId??null,createdAtISO:((g=($=(L=(f=j.createdAt)==null?void 0:f.toDate)==null?void 0:L.call(f))==null?void 0:$.toISOString)==null?void 0:g.call($))??null}});i(E)}catch(v){if(String((v==null?void 0:v.message)||"").includes("index"))try{const E=(await be(ee(C,"orders"))).docs.map(A=>{var z,p,f,L,$,g;const j=A.data();return{id:A.id,restaurantId:j.restaurantId??null,firstItemOwnerId:((p=(z=j==null?void 0:j.items)==null?void 0:z[0])==null?void 0:p.ownerId)??null,customerId:j.customerId??null,createdAtISO:((g=($=(L=(f=j.createdAt)==null?void 0:f.toDate)==null?void 0:L.call(f))==null?void 0:$.toISOString)==null?void 0:g.call($))??null}});i(E),w("âš ï¸ Ù…Ø§ ÙÙŠÙ‡ ÙÙ‡Ø±Ø³ Ù„Ù€ createdAt â€” Ø¹Ø±Ø¶Ù†Ø§ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯ÙˆÙ† ØªØ±ØªÙŠØ¨.")}catch(N){w("âŒ ÙØ´Ù„ Ø§Ù„Ø¬Ù„Ø¨ Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† ØªØ±ØªÙŠØ¨: "+((N==null?void 0:N.message)||N))}else w("âŒ Ø®Ø·Ø£ Ø§Ù„Ø¬Ù„Ø¨: "+((v==null?void 0:v.message)||v))}finally{u(!1)}})()},[t,s]),t)return e.jsx("div",{className:"p-8 text-center",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."});if(s!=="developer")return e.jsx(ur,{to:"/",replace:!0});const D=(U=ks.options)==null?void 0:U.projectId;return e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("h1",{className:"text-xl font-bold",children:"ğŸ”§ DEBUG: Orders Snapshot (Ù„Ù„Ù…Ø·ÙˆØ± ÙÙ‚Ø·)"}),e.jsxs("div",{className:"text-sm",children:["ProjectId: ",e.jsx("b",{children:String(D)})]}),r&&e.jsx("div",{className:"text-red-600 text-sm",children:r}),c&&e.jsx("div",{children:"â³ Loadingâ€¦"}),!c&&a.length===0&&e.jsxs("div",{className:"text-gray-600",children:["Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙŠ Ù…Ø³ØªÙ†Ø¯Ø§Øª ÙÙŠ collection: ",e.jsx("code",{children:"orders"})," ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹."]}),a.map(v=>e.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[e.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",v.id]}),e.jsxs("div",{children:["restaurantId: ",e.jsx("b",{children:String(v.restaurantId)})]}),e.jsxs("div",{children:["items[0].ownerId: ",e.jsx("b",{children:String(v.firstItemOwnerId)})]}),e.jsxs("div",{children:["customerId: ",e.jsx("b",{children:String(v.customerId)})]}),e.jsxs("div",{children:["createdAt: ",e.jsx("b",{children:v.createdAtISO||"â€”"})]})]},v.id))]})},u0=30*60*1e3,p0=60*60*1e3,g0=5*60*1e3,b0=(s={})=>{const{user:t,role:a,logout:i}=Ee(),c=He(),u=l.useRef(null),r=l.useRef(null),w=l.useRef(!1),D=l.useCallback(()=>a==="developer"||a==="admin"||a==="supervisor"||a==="social_media"?p0:u0,[a]),U=l.useCallback(()=>{w.current||(w.current=!0,c.warning("Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø®Ù„Ø§Ù„ 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ø¨Ø³Ø¨Ø¨ Ø¹Ø¯Ù… Ø§Ù„Ù†Ø´Ø§Ø·. Ø­Ø±Ù‘Ùƒ Ø§Ù„ÙØ£Ø±Ø© Ù„Ù„Ø¨Ù‚Ø§Ø¡ Ù…ØªØµÙ„Ø§Ù‹.",{duration:1e4}))},[c]),v=l.useCallback(()=>{if(!t||s.disabled)return;w.current=!1,u.current&&clearTimeout(u.current),r.current&&clearTimeout(r.current);const E=D();r.current=setTimeout(()=>{U()},E-g0),u.current=setTimeout(async()=>{c.info("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø³Ø¨Ø¨ Ø¹Ø¯Ù… Ø§Ù„Ù†Ø´Ø§Ø· ğŸ‘‹"),await i()},E),localStorage.setItem("broast_last_activity",Date.now().toString())},[t,s.disabled,D,U,c,i]),N=l.useCallback(()=>{const E=localStorage.getItem("broast_last_activity");if(E){const A=Date.now()-parseInt(E,10),j=D();if(A>j)return c.info("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø³Ø¨Ø¨ Ø¹Ø¯Ù… Ø§Ù„Ù†Ø´Ø§Ø·"),i(),!1}return!0},[D,c,i]);return l.useEffect(()=>{if(!t||s.disabled||!N())return;const E=["mousedown","mousemove","keydown","scroll","touchstart","click","focus"];return E.forEach(A=>{document.addEventListener(A,v,{passive:!0})}),v(),()=>{E.forEach(A=>{document.removeEventListener(A,v)}),u.current&&clearTimeout(u.current),r.current&&clearTimeout(r.current)}},[t,s.disabled,v,N]),{resetTimer:v,isActive:!!t&&!s.disabled}},f0=()=>{const{items:s,subtotal:t}=Ea(),a=os();if(s.length===0)return null;const i=s.reduce((c,u)=>c+u.qty,0);return e.jsxs("button",{onClick:()=>a("/cart"),className:`fixed bottom-20 left-4 right-4 mx-auto max-w-md z-50 
        bg-gradient-to-r from-green-500 to-green-600 text-white 
        rounded-2xl shadow-2xl shadow-green-500/30
        px-6 py-4 flex items-center justify-between
        active:scale-95 transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ns,{className:"w-8 h-8"}),e.jsx("span",{className:`absolute -top-2 -right-2 bg-white text-green-600 
            w-6 h-6 rounded-full text-sm font-bold flex items-center justify-center`,children:i})]}),e.jsx("span",{className:"text-lg font-bold",children:"Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©"})]}),e.jsxs("span",{className:"text-xl font-bold",children:[t.toFixed(0)," Ø±.Ø³"]})]})};function j0(){const{locationRequired:s,refreshUserData:t,loading:a,user:i}=Ee();return b0({disabled:!0}),!a&&s?e.jsx(hx,{onLocationSaved:t}):e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50 pt-safe bg-sky-600",children:[e.jsx(mx,{}),e.jsx(cx,{})]}),e.jsx("div",{className:"h-[110px] sm:h-[130px] mt-safe"}),e.jsx(f0,{}),e.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:e.jsxs(Sc,{children:[e.jsx(Te,{path:"/",element:e.jsx(px,{})}),e.jsx(Te,{path:"/restaurants",element:e.jsx(vx,{})}),e.jsx(Te,{path:"/menu",element:e.jsx(Rx,{})}),e.jsx(Te,{path:"/cart",element:e.jsx(_x,{})}),e.jsx(Te,{path:"/login",element:e.jsx(Bx,{})}),e.jsx(Te,{path:"/customer-login",element:e.jsx(Qx,{})}),e.jsx(Te,{path:"/register",element:e.jsx(Hx,{})}),e.jsx(Te,{path:"/register/form",element:e.jsx(Vx,{})}),e.jsx(Te,{path:"/register-owner",element:e.jsx(Wx,{})}),e.jsx(Te,{path:"/privacy-policy",element:e.jsx(Gx,{})}),e.jsx(Te,{path:"/terms",element:e.jsx(Kx,{})}),e.jsx(Te,{path:"/account-deleted",element:e.jsx(Yx,{})}),e.jsx(Te,{path:"/setup-dev",element:e.jsx(Zm,{})}),e.jsx(Te,{path:"/chat",element:e.jsx(We,{children:e.jsx($e,{allow:["customer","courier","owner","admin","developer"],children:e.jsx(Mm,{})})})}),e.jsx(Te,{path:"/notifications",element:e.jsx(We,{children:e.jsx($e,{allow:["customer","courier","owner","admin","developer"],children:e.jsx(Um,{})})})}),e.jsx(Te,{path:"/support",element:e.jsx(We,{children:e.jsx($e,{allow:["customer","courier","owner","admin","developer"],children:e.jsx(qm,{})})})}),e.jsx(Te,{path:"/report-problem",element:e.jsx(We,{children:e.jsx($e,{allow:["customer","courier","owner","developer"],children:e.jsx(l0,{})})})}),e.jsx(Te,{path:"/checkout",element:e.jsx(Zx,{})}),e.jsx(Te,{path:"/orders",element:e.jsx(We,{children:e.jsx($e,{allow:["customer","admin","developer"],children:e.jsx(im,{})})})}),e.jsx(Te,{path:"/profile",element:e.jsx(We,{children:e.jsx($e,{allow:["customer","courier","owner","admin","developer"],children:e.jsx(cm,{})})})}),e.jsx(Te,{path:"/owner",element:e.jsx(We,{children:e.jsx($e,{allow:["owner","developer"],children:e.jsx(om,{})})})}),e.jsx(Te,{path:"/owner/menu",element:e.jsx(We,{children:e.jsx($e,{allow:["owner","developer"],children:e.jsx(xm,{})})})}),e.jsx(Te,{path:"/owner/orders",element:e.jsx(We,{children:e.jsx($e,{allow:["owner","developer"],children:e.jsx(mm,{})})})}),e.jsx(Te,{path:"/owner/edit",element:e.jsx(We,{children:e.jsx($e,{allow:["owner","developer"],children:e.jsx(um,{})})})}),e.jsx(Te,{path:"/owner/courier-requests",element:e.jsx(We,{children:e.jsx($e,{allow:["owner","developer"],children:e.jsx(pm,{})})})}),e.jsx(Te,{path:"/owner/packages",element:e.jsx(We,{children:e.jsx($e,{allow:["owner","developer"],children:e.jsx(bm,{})})})}),e.jsx(Te,{path:"/owner/offers",element:e.jsx(We,{children:e.jsx($e,{allow:["owner","developer"],children:e.jsx(ym,{})})})}),e.jsx(Te,{path:"/owner/stories",element:e.jsx(We,{children:e.jsx($e,{allow:["owner","developer"],children:e.jsx(vm,{})})})}),e.jsx(Te,{path:"/owner/promotion",element:e.jsx(We,{children:e.jsx($e,{allow:["owner","developer"],children:e.jsx(fm,{})})})}),e.jsx(Te,{path:"/courier",element:e.jsx(We,{children:e.jsx($e,{allow:["courier","developer"],children:e.jsx(Em,{})})})}),e.jsx(Te,{path:"/courier/hiring",element:e.jsx(We,{children:e.jsx($e,{allow:["courier","developer"],children:e.jsx(Pm,{})})})}),e.jsx(Te,{path:"/admin",element:e.jsx(We,{children:e.jsx($e,{allow:["admin","developer"],children:e.jsx(zm,{})})})}),e.jsx(Te,{path:"/admin/restaurants",element:e.jsx(We,{children:e.jsx($e,{allow:["admin","developer"],children:e.jsx(Hm,{})})})}),e.jsx(Te,{path:"/admin/orders",element:e.jsx(We,{children:e.jsx($e,{allow:["admin","developer"],children:e.jsx(Wm,{})})})}),e.jsx(Te,{path:"/developer",element:e.jsx(We,{children:e.jsx($e,{allow:["developer","admin"],children:e.jsx(Qm,{})})})}),e.jsx(Te,{path:"/support-admin",element:e.jsx(We,{children:e.jsx($e,{allow:["developer"],children:e.jsx(t0,{})})})}),e.jsx(Te,{path:"/problems-admin",element:e.jsx(We,{children:e.jsx($e,{allow:["developer"],children:e.jsx(a0,{})})})}),e.jsx(Te,{path:"/accounting",element:e.jsx(We,{children:e.jsx($e,{allow:["developer"],children:e.jsx(i0,{})})})}),e.jsx(Te,{path:"/reports-admin",element:e.jsx(We,{children:e.jsx($e,{allow:["admin","developer"],children:e.jsx(n0,{})})})}),e.jsx(Te,{path:"/owner/wallet",element:e.jsx(We,{children:e.jsx($e,{allow:["owner","developer"],children:e.jsx(c0,{})})})}),e.jsx(Te,{path:"/courier/wallet",element:e.jsx(We,{children:e.jsx($e,{allow:["courier","developer"],children:e.jsx(o0,{})})})}),e.jsx(Te,{path:"/supervisor",element:e.jsx(We,{children:e.jsx($e,{allow:["supervisor","developer"],children:e.jsx(d0,{})})})}),e.jsx(Te,{path:"/social-media",element:e.jsx(We,{children:e.jsx($e,{allow:["social_media","developer"],children:e.jsx(x0,{})})})}),e.jsx(Te,{path:"/__debug_orders",element:e.jsx(h0,{})}),e.jsx(Te,{path:"*",element:e.jsx(ur,{to:"/",replace:!0})})]})}),e.jsx(xx,{})]})}l.createContext(void 0);const N0=({children:s})=>e.jsx(e.Fragment,{children:s});nl.createRoot(document.getElementById("root")).render(e.jsx(Cc.StrictMode,{children:e.jsx(Ac,{children:e.jsx(Cx,{children:e.jsx(ox,{children:e.jsx(ix,{children:e.jsxs(N0,{children:["   ",e.jsx(j0,{})]})})})})})}));export{qs as _,C as d,Ca as n};
